!function(){window.siteDomain=function(){return location.origin||/^[^/]+?[/]{2}[^/]+/.exec(location.href)[0]}();var templates={};templates.action=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("member",e,t,1),e,t,0,11,77,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="creator member js-show-mem-menu"> '),i.b(i.rp("member",e,t,"")),i.b(" </div> ")}),e.pop()),n.b(" "),n.s(n.f("member",e,t,1),e,t,1,0,0,"")||n.b(' <div class="creator member member-no-menu"><span class="member-initials quiet">?</span></div> '),n.b(' <div class="phenom-desc" '),n.s(n.f("type",e,t,1),e,t,0,241,262,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('actionType="'),i.b(i.v(i.f("type",e,t,0))),i.b('"')}),e.pop()),n.b("> "),n.s(n.f("member",e,t,1),e,t,0,284,357,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<a class="inline-object js-show-mem-menu" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("fullName",e,t,0))),i.b("</a>")}),e.pop()),n.b(" "),n.s(n.f("member",e,t,1),e,t,1,0,0,"")||n.b('<span class="quiet">[deleted account]</span>'),n.b(" "),n.s(n.f("entities",e,t,1),e,t,0,449,462,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("entity",e,t,"")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("hasMoreThanOneChild",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("children",e,t,1),e,t,0,514,553,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("entities",e,t,1),e,t,0,528,539,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.rp("entity",e,t,""))}),e.pop()),i.b(" ")}),e.pop()),n.b(" ")),n.b(" "),n.s(n.f("hasMoreThanOneChild",e,t,1),e,t,0,616,703,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <ul> "),i.s(i.f("children",e,t,1),e,t,0,635,683,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <li>"),i.s(i.f("entities",e,t,1),e,t,0,653,664,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.rp("entity",e,t,""))}),e.pop()),i.b("</li> ")}),e.pop()),i.b(" </ul> ")}),e.pop()),n.b(" "),n.s(n.f("useEmbedly",e,t,1),e,t,0,743,788,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="hide embedly js-embedly"></div> ')}),e.pop()),n.b(" "),n.s(n.f("usePreviews",e,t,1),e,t,0,820,867,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="hide previews js-previews"></div> ')}),e.pop()),n.b(' </div> <p class="phenom-meta quiet"> '),n.s(n.f("saved",e,t,1),e,t,0,931,984,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="date js-hide-on-sending" dt="'),i.b(i.v(i.f("date",e,t,0))),i.b('"/>')}),e.pop()),n.b(" "),n.s(n.f("dateLastEdited",e,t,1),e,t,0,1014,1108,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="js-hide-on-sending"> - edited <span class="date" dt="'),i.b(i.v(i.f("dateLastEdited",e,t,0))),i.b('"/></span>')}),e.pop()),n.b(' <span class="js-spinner'),n.s(n.f("saved",e,t,1),e,t,0,1161,1166,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" hide")}),e.pop()),n.b('"><span class="spinner small left" style="margin-right: 4px;"/> Sending…</span> '),n.s(n.f("board",e,t,1),e,t,0,1266,1407,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' - on board <a class="bold" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("name",e,t,0))),i.b('</a> <span title="'),i.b(i.v(i.f("boardPLevelAltText",e,t,0))),i.b('" class="icon-sm icon-'),i.b(i.v(i.f("boardPLevelIconClass",e,t,0))),i.b('"/> ')}),e.pop()),n.b(" "),n.s(n.f("organization",e,t,1),e,t,0,1435,1579,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' - on organization <a class="bold" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("name",e,t,0))),i.b('</a> <span title="'),i.b(i.v(i.f("orgPLevelAltText",e,t,0))),i.b('" class="icon-sm icon-'),i.b(i.v(i.f("orgPLevelIconClass",e,t,0))),i.b('"/> ')}),e.pop()),n.b(" "),n.s(n.f("showOptions",e,t,1),e,t,0,1613,2e3,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="js-hide-on-sending"> '),i.s(i.f("canReply",e,t,1),e,t,0,1661,1713,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' - <a href="#" class="js-reply-to-action">Reply</a> ')}),e.pop()),i.b(" "),i.s(i.f("canEdit",e,t,1),e,t,0,1739,1786,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' - <a href="#" class="js-edit-action">Edit</a> ')}),e.pop()),i.b(" "),i.s(i.f("canDelete",e,t,1),e,t,0,1813,1872,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' - <a href="#" class="js-confirm-delete-action">Delete</a> ')}),e.pop()),i.b(" "),i.s(i.f("canPromoteToCard",e,t,1),e,t,0,1908,1970,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' - <a href="#" class="js-promote-to-card">Promote to Card</a> ')}),e.pop()),i.b(" </span> ")}),e.pop()),n.b(" </p> "),n.fl()},templates.actions_empty=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="empty-list">No actions'),n.s(n.f("daysBack",e,t,1),e,t,0,45,76,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" in the last "),i.b(i.v(i.f("daysBack",e,t,0))),i.b(" days ")}),e.pop()),n.b("</p> "),n.fl()},templates.ad_business_class=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="title"> Trello Business Class </span> <span class="pitchlet">Add features to supercharge your organization.</span> <span class="features">Google Apps Integration · Bulk Export · Read-only Observers</span> <span class="learn-more"><a href="#">Learn More…</a></span> '),n.fl()},templates.ad_business_class_google_apps=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="title"> Using Google Apps? </span> <span class="learn-more"><a href="#">Learn about Business Class…</a></span> '),n.fl()},templates.ad_business_class_manage_any_board=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="title"> Want to manage all '),n.b(n.v(n.d("organization.displayName",e,t,0))),n.b(' boards? </span> <span class="learn-more"><a href="#">Learn about Business Class…</a></span> '),n.fl()},templates.ad_business_class_observers=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="title"> Want to add observers? </span> <span class="learn-more"><a href="#">Learn about Business Class…</a></span> '),n.fl()},templates.announcement=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="announcement'),n.s(n.f("type",e,t,1),e,t,0,33,55,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" announcement-"),i.b(i.v(i.f("type",e,t,0)))}),e.pop()),n.b('"> <h3 class="announcement-header"> '),n.s(n.f("url",e,t,1),e,t,0,108,188,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<a class="announcement-header-link" target="_blank" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a>")}),e.pop()),n.b(" "),n.s(n.f("url",e,t,1),e,t,1,0,0,"")||n.b(n.v(n.f("title",e,t,0))),n.b(" </h3> <p>"),n.b(n.t(n.f("html",e,t,0))),n.b("</p> "),n.s(n.f("url",e,t,1),e,t,0,255,328,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="quiet"> <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" target="_blank">Read more…</a> </p> ')}),e.pop()),n.b(" </div> "),n.fl()},templates.archive_dropzone_text=function(e,t,i){var n=this;return n.b(i=i||""),n.b(' <div class="bottom-archive-dropzone js-bottom-archive-dropzone"><p>Drop here to archive card.</p></div> '),n.fl()},templates.archive_item=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="item-name"> '),n.s(n.f("url",e,t,1),e,t,0,30,62,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("name",e,t,0))),i.b("</a> ")}),e.pop()),n.b(" "),n.s(n.f("url",e,t,1),e,t,1,0,0,"")||(n.b(" <span>"),n.b(n.v(n.f("name",e,t,0))),n.b("</span> ")),n.b(" </p> "),n.s(n.f("__ed",e,t,1),e,t,0,125,382,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="options"> <a href="#" class="button-link js-reopen"> <span class="icon-sm icon-reopen"/> '),i.b(i.v(i.f("reOpenText",e,t,0))),i.b(" </a> "),i.s(i.f("canDelete",e,t,1),e,t,0,261,360,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="#" class="button-link negate js-delete"> <span class="icon-sm icon-remove"/> Delete </a> ')}),e.pop()),i.b(" </div> ")}),e.pop()),n.b(" "),n.fl()},templates.archive_items=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("empty",e,t,1),e,t,1,0,0,"")||(n.b(' <div class="clearfix"> '),n.s(n.f("section_lists",e,t,1),e,t,0,52,101,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <ul class="archive-list js-archive-items"></ul> ')}),e.pop()),n.b(" "),n.s(n.f("section_cards",e,t,1),e,t,0,138,212,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="js-archive-items'),i.s(i.f("__ed",e,t,1),e,t,0,176,194,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" js-archived-cards")}),e.pop()),i.b('"></div> ')}),e.pop()),n.b(" </div> ")),n.b(" "),n.s(n.f("loading",e,t,1),e,t,0,261,298,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="spinner loading"></div> ')}),e.pop()),n.b(" "),n.s(n.f("empty",e,t,1),e,t,0,321,365,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="empty-list">'),i.b(i.v(i.f("emptyMessage",e,t,0))),i.b("</p> ")}),e.pop()),n.b(" "),n.fl()},templates.archived_card_options=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("__ed",e,t,1),e,t,0,9,181,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="quiet" style="margin-left: 8px;"> <a href="#" class="js-reopen">'),i.b(i.v(i.f("reOpenText",e,t,0))),i.b("</a> "),i.s(i.f("canDelete",e,t,1),e,t,0,117,161,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' - <a href="#" class="js-delete">Delete</a> ')}),e.pop()),i.b(" </p> ")}),e.pop()),n.b(" "),n.fl()},templates.atMention=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="atMention'),n.s(n.f("isMe",e,t,1),e,t,0,31,34,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" me")}),e.pop()),n.b('" title="'),n.b(n.v(n.f("fullName",e,t,0))),n.b('">'),n.b(n.v(n.f("atMention",e,t,0))),n.b("</span> "),n.fl()},templates.attachment_detail=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-attachment"/> <div class="window-title"> <h2 class="window-title-text">'),n.b(n.v(n.f("name",e,t,0))),n.b('</h2> </div> </div> <div class="window-main-col"> <div class="window-module gutter clearfix"> '),n.s(n.f("date",e,t,1),e,t,0,264,310,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="date quiet" dt="'),i.b(i.v(i.f("date",e,t,0))),i.b('"></span>')}),e.pop()),n.b(" "),n.s(n.f("size",e,t,1),e,t,0,329,367,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="quiet"> - '),i.b(i.v(i.f("size",e,t,0))),i.b("</span>")}),e.pop()),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,0,386,669,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="block quiet"> '),i.s(i.f("isImage",e,t,1),e,t,0,426,496,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="#" class="inline-block quiet js-make-cover">Make Cover</a> - ')}),e.pop()),i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="inline-block quiet" target="_blank">View Original</a> - <a href="#" class="inline-block quiet js-delete-attachment">Delete</a> </span> ')}),e.pop()),n.b(' </div> <div class="window-module center clearfix" style="margin: 16px 0 0;"> <img src="'),n.b(n.v(n.f("url",e,t,0))),n.b('"> </div> </div> '),n.fl()},templates.attachment_thumb=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="'),n.b(n.v(n.f("url",e,t,0))),n.b('" class="attachment-thumbnail-preview '),n.s(n.f("canUseViewer",e,t,1),e,t,0,71,86,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-open-viewer")}),e.pop()),n.b(" "),n.s(n.f("isCover",e,t,1),e,t,0,116,154,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" attachment-thumbnail-preview-is-cover")}),e.pop()),n.b('" target="_blank" title="'),n.b(n.v(n.f("name",e,t,0))),n.b('" '),n.s(n.f("imgSrc",e,t,1),e,t,0,212,256,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" style=\"background-image:url('"),i.b(i.v(i.f("imgSrc",e,t,0))),i.b("');\"")}),e.pop()),n.b(" "),n.s(n.f("edgeColor",e,t,1),e,t,0,282,322,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' style="background-color:'),i.b(i.v(i.f("edgeColor",e,t,0))),i.b(';"')}),e.pop()),n.b("> "),n.s(n.f("isKnownService",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("ext",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("isImage",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("isKnownService",e,t,1),e,t,1,0,0,"")||n.b(' <span class="icon-lg icon-attachment attachment-thumbnail-preview-attachment-icon"></span> '),n.b(" ")),n.b(" ")),n.b(" "),n.s(n.f("ext",e,t,1),e,t,0,541,604,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="attachment-thumbnail-preview-ext">'),i.b(i.v(i.f("ext",e,t,0))),i.b("</span> ")}),e.pop()),n.b(" ")),n.b(" "),n.s(n.f("isKnownService",e,t,1),e,t,0,652,734,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="attachment-thumbnail-preview-service-logo '),i.b(i.v(i.f("previewClass",e,t,0))),i.b('"></span> ')}),e.pop()),n.b(' </a> <p class="attachment-thumbnail-details '),n.s(n.f("canUseViewer",e,t,1),e,t,0,815,830,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-open-viewer")}),e.pop()),n.b('"> <a href="'),n.b(n.v(n.f("url",e,t,0))),n.b('" class="attachment-thumbnail-details-title js-attachment-thumbnail-details " '),n.s(n.f("idName",e,t,1),e,t,0,955,971,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' id="'),i.b(i.v(i.f("idName",e,t,0))),i.b('"')}),e.pop()),n.b(' title="'),n.b(n.v(n.f("name",e,t,0))),n.b('" target="_blank"> '),n.b(n.v(n.f("name",e,t,0))),n.b(" "),n.s(n.f("date",e,t,1),e,t,0,1035,1114,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="block quiet">Added <span class="date" dt="'),i.b(i.v(i.f("date",e,t,0))),i.b('"></span></span>')}),e.pop()),n.b(" "),n.s(n.f("source",e,t,1),e,t,0,1135,1159,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <span>"),i.b(i.v(i.f("source",e,t,0))),i.b("</span>")}),e.pop()),n.b(' </a> <span class="quiet attachment-thumbnail-details-options"> <a class="attachment-thumbnail-details-options-item dark-hover'),n.s(n.f("doDownload",e,t,1),e,t,0,1311,1323,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-download")}),e.pop()),n.b('" href="'),n.b(n.v(n.f("url",e,t,0))),n.b('" target="_blank" '),n.s(n.f("doDownload",e,t,1),e,t,0,1386,1405,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('download="'),i.b(i.v(i.f("name",e,t,0))),i.b('"')}),e.pop()),n.b(' > <span class="icon-sm icon-'),n.b(n.v(n.f("openIconClass",e,t,0))),n.b('"></span> <span class="attachment-thumbnail-details-options-item-text">'),n.b(n.v(n.f("openText",e,t,0))),n.b("</span> </a> "),n.s(n.f("__ed",e,t,1),e,t,0,1571,2274,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="attachment-thumbnail-details-options-item dark-hover hide js-make-cover"> <span class="icon-sm icon-cover"></span> <span class="attachment-thumbnail-details-options-item-text">Make Cover</span> </a> <a href="#" class="attachment-thumbnail-details-options-item dark-hover hide js-remove-cover"> <span class="icon-sm icon-cover"></span> <span class="attachment-thumbnail-details-options-item-text">Remove Cover</span> </a> <a href="#" class="attachment-thumbnail-details-options-item attachment-thumbnail-details-options-item-delete dark-hover js-confirm-delete"> <span class="icon-sm icon-close"></span> <span class="attachment-thumbnail-details-options-item-text">Delete</span> </a> ')}),e.pop()),n.b(" </span> </p> "),n.fl()},templates.attachment_thumb_processing=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="attachment-thumbnail attachment-thumbnail-processing js-attachment-thumb-processing"> <span class="spinner small"></span> Processing… </div> '),n.fl()},templates.attachment_type_picker=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="error js-file-too-large" style="margin: 12px 0 6px; display:none;"> '),n.s(n.f("hasLargeAttachments",e,t,1),e,t,0,104,145,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" That file size exceeds the 250MB limit. ")}),e.pop()),n.b(" "),n.s(n.f("hasLargeAttachments",e,t,1),e,t,1,0,0,"")||n.b(' <div class="gold-promo"> That file size exceeds the 10MB limit, but if you upgrade to <span class="icon-sm icon-crown icon-color"></span> <a class="js-gold-promo" target="_blank" href="/gold">Trello Gold</a>, you can upload files up to 250MB! </div> '),n.b(' </div> <ul class="pop-over-list"> <li class="uploader"> <a class="js-trello-attachment fakefile js-fakefile" href="#">Computer</a> <form class="realfile" action="/1/card/'),n.b(n.v(n.f("id",e,t,0))),n.b('/attachments" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <input type="file" name="file" class="js-attach-file" tabindex="-1" multiple=""/> </form> </li> <li> <a class="js-google-drive-attachment '),n.s(n.f("googleDriveReady",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" href="#">Google Drive</a> </li> <li> <a class="js-dropbox-attachment" href="#">Dropbox</a> </li> <li> <a class="js-box-attachment" href="#">Box</a> </li> <li> <a class="js-one-drive-attachment" href="#">OneDrive</a> </li> </ul> <hr> <label for="addLink">Attach a link</label> <input type="text" id="addLink" class="attachment-add-link-input js-attachment-url" placeholder="Paste any link here…"> <input type="submit" class="attachment-add-link-submit js-add-attachment-url" value="Add"> <hr> <p class="quiet bottom"> Tip: You can drag and drop files and links onto cards to upload them. </p> '),n.fl()},templates.attachment_viewer=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="attachment-viewer-header js-close-viewer"> <span class="icon-lg icon-close attachment-viewer-header-close-icon"></span> </div> <div class="attachment-viewer-underlay js-close-viewer"></div> <div class="attachment-viewer-frames js-frames"></div> <div class="attachment-viewer-overlay"> <div class="attachment-viewer-frame-details js-display-frame-details"></div> </div> <a class="attachment-viewer-next-frame-btn js-show-next-frame"> <span class="icon-lg icon-rightarrow light attachment-viewer-next-frame-btn-icon"></span> </a> <a class="attachment-viewer-prev-frame-btn js-show-prev-frame"> <span class="icon-lg icon-leftarrow light attachment-viewer-prev-frame-btn-icon"></span> </a> '),n.fl()},templates.attachment_viewer_frame=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="attachment-viewer-frame js-close-viewer '),n.b(n.v(n.f("directionClass",e,t,0))),n.b('" data-idAttachment="'),n.b(n.v(n.f("id",e,t,0))),n.b('"> <div class="attachment-viewer-frame-preview-wrapper"> <div class="attachment-viewer-frame-preview'),n.s(n.f("isImage",e,t,1),e,t,0,209,255,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" attachment-viewer-frame-preview-image-wrapper")}),e.pop()),n.b('"> '),n.s(n.f("isImage",e,t,1),e,t,0,282,372,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="attachment-viewer-frame-preview-image js-stop" src="'),i.b(i.v(i.f("url",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("name",e,t,0))),i.b('"> ')}),e.pop()),n.b(" "),n.s(n.f("isAudio",e,t,1),e,t,0,397,538,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <audio controls name="'),i.b(i.v(i.f("name",e,t,0))),i.b('" class="attachment-viewer-frame-preview-audio js-stop"> <source src="'),i.b(i.v(i.f("url",e,t,0))),i.b('" type="audio/'),i.b(i.v(i.f("ext",e,t,0))),i.b('"> </audio> ')}),e.pop()),n.b(" "),n.s(n.f("isVideo",e,t,1),e,t,0,563,674,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <video controls name="'),i.b(i.v(i.f("name",e,t,0))),i.b('" src="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="attachment-viewer-frame-preview-video js-stop"> </video> ')}),e.pop()),n.b(" "),n.s(n.f("isIFrameable",e,t,1),e,t,0,704,792,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <iframe class="attachment-viewer-frame-preview-iframe js-stop" src="'),i.b(i.v(i.f("url",e,t,0))),i.b('"></iframe> ')}),e.pop()),n.b(" "),n.s(n.f("isPlaceholder",e,t,1),e,t,0,828,1049,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="attachment-viewer-frame-preview-placeholder"> There is no preview available for this attachment. <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="attachment-viewer-frame-preview-placeholder-link" target="_blank">'),i.b(i.v(i.f("openText",e,t,0))),i.b("</a> </p> ")}),e.pop()),n.b(" </div> </div> </div> "),n.fl()},templates.attachment_viewer_frame_details=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="attachment-viewer-frame-details"> <h2 class="attachment-viewer-frame-details-title">'),n.b(n.v(n.f("name",e,t,0))),n.b("</h2> <p> "),n.s(n.f("date",e,t,1),e,t,0,123,169,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('Added <span class="date" dt="'),i.b(i.v(i.f("date",e,t,0))),i.b('"></span>')}),e.pop()),n.b(" "),n.s(n.f("meta",e,t,1),e,t,0,188,199,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" - "),i.b(i.v(i.f("meta",e,t,0)))}),e.pop()),n.b(' </p> <p> <span class="js-meta"> <a href="'),n.b(n.v(n.f("url",e,t,0))),n.b('" target="_blank" '),n.s(n.f("doDownload",e,t,1),e,t,0,290,309,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('download="'),i.b(i.v(i.f("name",e,t,0))),i.b('"')}),e.pop()),n.b(' > <span class="icon-sm icon-'),n.b(n.v(n.f("openIconClass",e,t,0))),n.b(' light" style="margin: 0 3px 0 0"></span>'),n.b(n.v(n.f("openText",e,t,0))),n.b(" </a> "),n.s(n.f("__ed",e,t,1),e,t,0,438,1045,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="js-cover-options'),i.s(i.f("canMakeCover",e,t,1),e,t,1,0,0,"")||i.b(" hide"),i.b('"> <span class="js-make-cover-box'),i.s(i.f("isCover",e,t,1),e,t,0,552,557,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" hide")}),e.pop()),i.b('"><a href="#" class="js-make-cover"><span class="icon-sm icon-cover light" style="margin: 0 3px 0 14px"></span>Make Cover</a></span> <span class="js-remove-cover-box'),i.s(i.f("isCover",e,t,1),e,t,1,0,0,"")||i.b(" hide"),i.b('"><a href="#" class="js-remove-cover"><span class="icon-sm icon-cover light" style="margin: 0 3px 0 14px"></span>Remove Cover</a></span> </span> <a href="#" class="js-open-delete-confirm"><span class="icon-sm icon-close light" style="margin: 0 3px 0 10px"></span>'),i.b(i.v(i.f("removeText",e,t,0))),i.b("</a> ")}),e.pop()),n.b(' </span> <span class="js-confirm-delete hide"> Are you sure you want to <span class="lowercase">'),n.b(n.v(n.f("removeText",e,t,0))),n.b('</span>? There is no undo. <a href="#" class="js-delete" style="margin: 0 4px;">'),n.b(n.v(n.f("removeText",e,t,0))),n.b(' forever.</a> <a href="#" class="js-close-delete-confirm">Never mind.</a> </span> </p> </div> '),n.fl()},templates.avatar_change=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("uploadedAvatarHash",e,t,1),e,t,0,23,300,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="avatar-option js-use-uploaded-avatar '),i.s(i.f("avatarSource_upload",e,t,1),e,t,0,95,101,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),i.b('" href="#"> <img class="pic" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("uploadedAvatarHash",e,t,0))),i.b('/50.png"> <span class="text"> Uploaded Picture <span class="icon-sm icon-check"/> </span> </a> <hr> ')}),e.pop()),n.b(' <div class="js-grav hide"> <a class="avatar-option js-use-gravatar '),n.s(n.f("avatarSource_gravatar",e,t,1),e,t,0,417,423,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),n.b('" href="#"> <img class="pic" src="https://secure.gravatar.com/avatar/'),n.b(n.v(n.f("gravatarHash",e,t,0))),n.b('.png?s=50&r=PG&d=404"> <span class="text"> Gravatar <span class="icon-sm icon-check"/> </span> </a> <hr> </div> <a class="avatar-option js-no-avatar '),n.s(n.f("avatarSource_none",e,t,1),e,t,0,705,711,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),n.b('" href="#"> <span class="pic member"> <span class="member-initials">'),n.b(n.v(n.f("initials",e,t,0))),n.b('</span> </span> <span class="text"> Initials (no avatar) <span class="icon-sm icon-check"/> </span> </a> <hr> '),n.s(n.f("canTakePhoto",e,t,1),e,t,0,940,1094,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="button-link js-take-photo" href="#" style="margin: 12px 4px 12px;"> <span class="icon-sm icon-camera"></span> Take Photo With Camera </a> <hr> ')}),e.pop()),n.b(' <p class="error hide js-error"></p> <div class="uploader" style="margin: 12px 4px 8px;"> <form class="realfile" action="/1/member/'),n.b(n.v(n.f("id",e,t,0))),n.b('/avatar" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <input type="file" name="file" class="js-upload-avatar" style="margin-bottom: 0;" tabindex="-1" accept="image/*;capture=camera"/> </form> <a class="button-link fakefile js-fakefile"> <span class="icon-sm icon-attachment"></span> Upload a '),n.s(n.f("uploadedAvatarHash",e,t,1),e,t,0,1660,1665,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" new ")}),e.pop()),n.b(" picture </a> </div> "),n.fl()},templates.badge=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="badge-icon icon-sm icon-'),n.b(n.v(n.f("icon",e,t,0))),n.b('"></span> '),n.s(n.f("text",e,t,1),e,t,0,64,104,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="badge-text">'),i.b(i.v(i.f("text",e,t,0))),i.b("</span>")}),e.pop()),n.b(" "),n.fl()},templates.billing=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module gutter"> '),n.s(n.f("activeAccount",e,t,1),e,t,0,53,812,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("problemAccount",e,t,1),e,t,1,0,0,"")||(i.b(' <p class="bc-active-status active'),i.s(i.f("processingAccount",e,t,1),e,t,0,129,137,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" warning")}),e.pop()),i.b('"> <span class="icon-lg icon-'),i.b(i.v(i.f("productIconClass",e,t,0))),i.b('"/>'),i.b(i.v(i.f("productName",e,t,0))),i.b(" is "),i.s(i.f("processingAccount",e,t,1),e,t,0,252,258,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("ALMOST")}),e.pop()),i.b(" active! </p> "),i.s(i.f("processingAccount",e,t,1),e,t,0,316,400,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<p class="quiet" style="margin-left: 46px;">Your credit card is being processed.</p>')}),e.pop()),i.b(" ")),i.b(" "),i.s(i.f("problemAccount",e,t,1),e,t,0,462,792,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="bc-active-status error"> <span class="icon-lg icon-'),i.b(i.v(i.f("productIconClass",e,t,0))),i.b("\"/>There's an issue with "),i.b(i.v(i.f("productName",e,t,0))),i.b('! </p> <a class="emphasis-button js-resolve-billing-issue" href="'),i.b(i.v(i.f("urlBase",e,t,0))),i.b('/billing/card">You are overdue and we are having trouble processing your credit card. Enter a credit card to resolve the issue.</a> ')}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("cancelledAccount",e,t,1),e,t,0,852,1270,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("processingReactivation",e,t,1),e,t,1,0,0,"")||(i.b(' <p class="bc-active-status error"> <span class="icon-lg icon-'),i.b(i.v(i.f("productIconClass",e,t,0))),i.b('"/>'),i.b(i.v(i.f("productName",e,t,0))),i.b(" is cancelled. </p> ")),i.b(" "),i.s(i.f("processingReactivation",e,t,1),e,t,0,1055,1242,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="bc-active-status warning"> <span class="icon-lg icon-'),i.b(i.v(i.f("productIconClass",e,t,0))),i.b('"/>Your account is being processed for reactivation. </p> <p class="quiet center">Check back soon!</p> ')}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("needCC",e,t,1),e,t,0,1303,1561,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="bc-active-status error"> <span class="icon-lg icon-'),i.b(i.v(i.f("productIconClass",e,t,0))),i.b('"/>'),i.b(i.v(i.f("productName",e,t,0))),i.b(' is NOT active! </p> <a class="emphasis-button js-enter-new-credit-card" href="'),i.b(i.v(i.f("urlBase",e,t,0))),i.b('/billing/card">Enter a credit card to activate '),i.b(i.v(i.f("productName",e,t,0))),i.b(".</a> ")}),e.pop()),n.b(" </div> "),n.s(n.f("activeAccount",e,t,1),e,t,0,1598,3442,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="window-module center"> <div class="gutter"> '),i.s(i.f("willExpire",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("paidAccount_cardType",e,t,1),e,t,0,1696,2607,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("nextChargeAmount",e,t,1),e,t,0,1718,2037,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("nextBillingDate",e,t,1),e,t,0,1739,2016,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="next-charge"> You will be billed '),i.s(i.f("isPerUser",e,t,1),e,t,0,1797,1886,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <strong>$"),i.b(i.v(i.f("nextChargeAmount",e,t,0))),i.b("</strong> ($"),i.b(i.v(i.f("price",e,t,0))),i.b(" per "),i.b(i.v(i.f("billableMemberCount",e,t,0))),i.b(" members) ")}),e.pop()),i.b(" "),i.s(i.f("isPerUser",e,t,1),e,t,1,0,0,"")||(i.b(" <strong>$"),i.b(i.v(i.f("nextChargeAmount",e,t,0))),i.b("</strong> ")),i.b(" on <strong>"),i.b(i.v(i.f("nextBillingDate",e,t,0))),i.b("</strong>. </p> ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("canSwitchToYearly",e,t,1),e,t,0,2081,2584,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("yearlyIsDiscount",e,t,1),e,t,0,2103,2562,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p> <a href="#" class="button-link inline-block js-switch-to-yearly-billing" style="padding-left: 24px; padding-right: 24px;"> Switch to Yearly Billing! </a> </p> <p> Yearly billing will be '),i.s(i.f("isPerUser",e,t,1),e,t,0,2308,2403,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <strong>$"),i.b(i.v(i.f("totalYearlyPrice",e,t,0))),i.b("</strong> ($"),i.b(i.v(i.f("yearlyPrice",e,t,0))),i.b(" per "),i.b(i.v(i.f("billableMemberCount",e,t,0))),i.b(" members) ")}),e.pop()),i.b(" "),i.s(i.f("isPerUser",e,t,1),e,t,1,0,0,"")||(i.b(" <strong>$"),i.b(i.v(i.f("yearlyPrice",e,t,0))),i.b("</strong> ")),i.b(" per year. <br> That’s "),i.b(i.v(i.f("yearlyDiscount",e,t,0))),i.b(" less compared to monthly billing! </p> ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("paidAccount_cardType",e,t,1),e,t,1,0,0,"")||(i.b(' <p class="next-charge"> Your credits will expire on <strong>'),i.b(i.v(i.f("nextBillingDate",e,t,0))),i.b('</strong>. </p> <p> <a href="'),i.b(i.v(i.f("changeCardUrl",e,t,0))),i.b('" class="button-link inline-block js-change-cc" style="padding-left: 24px; padding-right: 24px;"> Add Billing Information </a> </p> <p> Keep using Trello in style, even after your credits expire! </p> ')),i.b(" ")),i.b(" "),i.s(i.f("willExpire",e,t,1),e,t,0,3042,3412,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="quiet"> You\'ve cancelled '),i.b(i.v(i.f("productName",e,t,0))),i.b(", but you can use the premium features until <strong>"),i.b(i.v(i.f("expirationDate",e,t,0))),i.b('</strong>. </p> <p> <a href="#" class="button-link inline-block js-renew" style="padding-left: 24px; padding-right: 24px;"> Renew Your Subscription? </a> </p> <p class="quiet"> When you renew, you won\'t be charged until the date listed above. </p> ')}),e.pop()),i.b(" </div> </div> ")}),e.pop()),n.b(" "),n.s(n.f("cancelledAccount",e,t,1),e,t,0,3482,4358,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("processingReactivation",e,t,1),e,t,1,0,0,"")||(i.b(' <div class="window-module"> <div class="window-module-title"> <h3>Reactivate '),i.b(i.v(i.f("productName",e,t,0))),i.b('</h3> </div> <div class="gutter"> <div class="billing-option-buttons clearfix"> <a href="#" class="js-reactivate-monthly"> <span class="name">Charge Monthly</span> <span class="price"> '),i.s(i.f("isPerUser",e,t,1),e,t,0,3802,3899,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <strong>$"),i.b(i.v(i.f("totalMonthlyPrice",e,t,0))),i.b("</strong> ($"),i.b(i.v(i.f("monthlyPrice",e,t,0))),i.b(" per "),i.b(i.v(i.f("billableMemberCount",e,t,0))),i.b(" members) ")}),e.pop()),i.b(" "),i.s(i.f("isPerUser",e,t,1),e,t,1,0,0,"")||(i.b(" <strong>$"),i.b(i.v(i.f("totalMonthlyPrice",e,t,0))),i.b("</strong> ")),i.b(' </span> </a> <a href="#" class="js-reactivate-yearly"> <span class="name">Charge Yearly (Save!)</span> <span class="price"> '),i.s(i.f("isPerUser",e,t,1),e,t,0,4122,4217,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <strong>$"),i.b(i.v(i.f("totalYearlyPrice",e,t,0))),i.b("</strong> ($"),i.b(i.v(i.f("yearlyPrice",e,t,0))),i.b(" per "),i.b(i.v(i.f("billableMemberCount",e,t,0))),i.b(" members) ")}),e.pop()),i.b(" "),i.s(i.f("isPerUser",e,t,1),e,t,1,0,0,"")||(i.b(" <strong>$"),i.b(i.v(i.f("yearlyPrice",e,t,0))),i.b("</strong> ")),i.b(" </span> </a> </div> </div> </div> ")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("paidAccount_cardType",e,t,1),e,t,0,4405,5174,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="window-module"> <div class="window-module-title"> <h3>Billing Contact</h3> </div> <div class="gutter"> <p> '),i.b(i.v(i.f("paidAccount_contactFullName",e,t,0))),i.b(" - "),i.b(i.v(i.f("paidAccount_contactEmail",e,t,0))),i.b(' <a class="quiet js-change-billing-contact" href="#" style="margin-left: 8px;">Change</a> </p> </div> </div> '),i.s(i.f("activeAccount",e,t,1),e,t,0,4714,5155,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="window-module"> <div class="window-module-title"> <h3 class="inline">Payment Method</h3> <p class="inline quiet" style="margin-left: 4px;"> Account standing: '),i.b(i.v(i.f("accountStandingDisplay",e,t,0))),i.b(' </p> </div> <div class="gutter"> <p> '),i.b(i.v(i.f("paidAccount_cardType",e,t,0))),i.b("<br /> "),i.b(i.v(i.f("paidAccount_cardName",e,t,0))),i.b("<br /> •••• •••• •••• "),i.b(i.v(i.f("paidAccount_cardLast4",e,t,0))),i.b('<br /> <a class="quiet js-change-cc" href="'),i.b(i.v(i.f("changeCardUrl",e,t,0))),i.b('">Change credit card</a> </p> </div> </div> ')
}),e.pop()),i.b(" ")}),e.pop()),n.b(' <div class="window-module"> <div class="window-module-title"> <h3>Billing History</h3> </div> <div id="billing-statement" class="gutter js-billing-activity"> <div class="spinner loading" /> </div> </div> '),n.s(n.f("activeAccount",e,t,1),e,t,0,5422,7122,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("willExpire",e,t,1),e,t,1,0,0,"")||(i.b(' <div class="window-module gutter"> <a href="#" class="quiet dark-hover js-start-cancel"><span class="icon-sm icon-close"/>Cancel '),i.b(i.v(i.f("productName",e,t,0))),i.b('…</a> <div class="js-cancel-feedback hide"> <p> Thanks for trying '),i.b(i.v(i.f("productName",e,t,0))),i.b(". We're sorry to see you go. </p> <p>Clicking the button below will cancel your subscription and you will not be billed again. Of course, we'll keep your data safe and your account will remain usable. If you'd like, you can reinstate "),i.b(i.v(i.f("productName",e,t,0))),i.b(" at any time by re-entering your credit card information. </p> <p> We're working hard to make Trello better every day and would really appreciate any feedback you have on "),i.b(i.v(i.f("productName",e,t,0))),i.b('. </p> <p> <b>Please let us know why you are cancelling…</b> </p> <div class="js-random-reasons"> <label><input name="why" type="radio" value="missing functionality"> It\'s missing functionality </label> <label><input name="why" type="radio" value="not using it"> I\'m not using it </label> <label><input name="why" type="radio" value="too expensive"> It\'s too expensive </label> </div> <label><input name="why" type="radio" value="other"> Other </label> <textarea class="js-long-feedback hide" placeholder="Tell us more…"></textarea> <div> <input type="submit" class="button js-cancel" value="Cancel '),i.b(i.v(i.f("productName",e,t,0))),i.b('"> <a href="#" class="quiet js-cancel-cancel">Never Mind</a> </div> </div> <div class="js-cancelled hide"> <p> <b>Your '),i.b(i.v(i.f("productName",e,t,0))),i.b(" subscription has been cancelled.</b> </p> <p> We'll keep your data safe and your account will remain usable. If you'd like, you can reinstate "),i.b(i.v(i.f("productName",e,t,0))),i.b(" at any time by re-entering your credit card information. </p> <p>-The Trello Team</p> </div> </div> ")),i.b(" ")}),e.pop()),n.b(" "),n.fl()},templates.billing_contact=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="error" style="display:hidden"></div> <form> <label for="billingContactFullName">Name:</label> <input name="billingContactFullName" type="text" id="billingContactFullName" class="text" value="'),n.b(n.v(n.f("billingFullName",e,t,0))),n.b('" maxlength="50"> <label for="billingContactEmail">Email:</label> <input name="billingContactEmail" type="text" id="billingContactEmail" class="text" value="'),n.b(n.v(n.f("billingEmail",e,t,0))),n.b('"> <input type="submit" value="Save" class="primary js-submit"> </form> '),n.fl()},templates.billing_statement=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("statement",e,t,1),e,t,0,14,652,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <div> <p> <strong>"),i.b(i.v(i.f("date",e,t,0))),i.b("</strong> - "),i.b(i.v(i.f("item",e,t,0))),i.b(' </p> <p style="text-align:right;"> '),i.s(i.f("return",e,t,1),e,t,0,108,252,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Credited: $"),i.b(i.v(i.f("return",e,t,0))),i.b(" "),i.s(i.f("statementUrl",e,t,1),e,t,0,148,234,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('- <a href="'),i.b(i.v(i.f("statementUrl",e,t,0))),i.b('" class="js-view-statement-pdf" target="_blank">Receipt</a>')}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("credit",e,t,1),e,t,0,275,415,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Paid: $"),i.b(i.v(i.f("credit",e,t,0))),i.b(" "),i.s(i.f("statementUrl",e,t,1),e,t,0,311,397,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('- <a href="'),i.b(i.v(i.f("statementUrl",e,t,0))),i.b('" class="js-view-statement-pdf" target="_blank">Receipt</a>')}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("debit",e,t,1),e,t,0,437,578,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Billed: $"),i.b(i.v(i.f("debit",e,t,0))),i.b(" "),i.s(i.f("statementUrl",e,t,1),e,t,0,474,560,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('- <a href="'),i.b(i.v(i.f("statementUrl",e,t,0))),i.b('" class="js-view-statement-pdf" target="_blank">Invoice</a>')}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("refund",e,t,1),e,t,0,600,623,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Refunded: $"),i.b(i.v(i.f("refund",e,t,0))),i.b(" ")}),e.pop()),i.b(" </p> </div> <hr> ")}),e.pop()),n.b(" "),n.fl()},templates.board=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="board-header clearfix js-board-header"></div> <a href="#" class="sidebar-show-btn dark-hover js-show-sidebar"> <span class="icon-sm icon-leftarrow"/> <span class="text">Show sidebar</span> </a> <div class="board-widgets"></div> <div class="board-canvas"> <div id="board" class="fancy-scrollbar js-no-higher-edits'),n.s(n.f("__ed",e,t,1),e,t,1,0,0,"")||n.b(" permission-public"),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,0,370,388,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-list-sortable ")}),e.pop()),n.b('"> </div> </div> '),n.fl()},templates.board_activity=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-activity"/> <div class="window-title"> <h2 class="window-title-text"> Board Activity </h2> </div> </div> <div class="window-main-col window-main-col-full"> <div class="list-activity"></div> <a class="show-more js-more-actions" href="#">Load More Activity</a> </div> '),n.fl()},templates.board_archive=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="archive-controls clearfix"> <div class="archive-search search-with-spinner"> <input class="js-search js-autofocus" type="text" placeholder="Search archived cards"> <div class="spinner small hide js-search-loading"></div> </div> <a class="archive-switch quiet-button js-switch-section" href="#">Switch to <span class="js-new-section"></span>.</a> </div> <div class="js-archive-content"> '),n.b(n.t(n.f("content",e,t,0))),n.b(" </div> "),n.fl()},templates.board_background_options=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="bold quiet">Display Type</p> <ul class="pop-over-list"> <li> <a href="#" class="js-select-option" data-background-display-type="cover"> Cover '),n.s(n.f("tile",e,t,1),e,t,1,0,0,"")||n.b(' <span class="icon-sm icon-check"></span> '),n.b(' </a> </li> <li> <a href="#" class="js-select-option" data-background-display-type="tile"> Tile '),n.s(n.f("tile",e,t,1),e,t,0,317,359,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"></span> ')}),e.pop()),n.b(' </a> </li> </ul> <hr> <p class="bold quiet">Board Text</p> <ul class="pop-over-list"> <li> <a href="#" class="js-select-option" data-board-brightness="dark"> Light '),n.s(n.f("brightnessDark",e,t,1),e,t,0,552,594,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"></span> ')}),e.pop()),n.b(' </a> </li> <li> <a href="#" class="js-select-option" data-board-brightness="light"> Dark '),n.s(n.f("brightnessLight",e,t,1),e,t,0,723,765,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"></span> ')}),e.pop()),n.b(' </a> </li> </ul> <hr> <a href="#" class="quiet-button js-delete-background">Delete background.</a> '),n.fl()},templates.board_background_selection=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="background-box '),n.s(n.f("pending",e,t,1),e,t,0,40,67,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("background-box-unselectable")}),e.pop()),n.s(n.f("tile",e,t,1),e,t,0,88,104,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" background-tile")}),e.pop()),n.b('" style=" '),n.s(n.f("backgroundImageThumbnail",e,t,1),e,t,0,152,215,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("background-image: url(&quot;"),i.b(i.v(i.f("backgroundImageThumbnail",e,t,0))),i.b("&quot;)")}),e.pop()),n.b("; "),n.s(n.f("color",e,t,1),e,t,0,256,284,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("background-color: "),i.b(i.v(i.f("color",e,t,0))),i.b(";")}),e.pop()),n.b(' "> '),n.s(n.f("attribution",e,t,1),e,t,0,314,662,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="background-option js-background-attribution" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" target="_blank" title="'),i.b(i.v(i.f("url",e,t,0))),i.b('"> <img src="https://d78fikflryjgj.cloudfront.net/images/d906fe5c1274c56c5571d49705547587/cc.png" style="height: 14px; width: 14px; vertical-align: text-top;" title="'),i.b(i.v(i.f("license",e,t,0))),i.b('"/> <span class="text" style="margin-left: 2px;">'),i.b(i.v(i.f("name",e,t,0))),i.b("</span> </a> ")}),e.pop()),n.b(" "),n.s(n.f("id",e,t,1),e,t,0,686,845,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="background-option js-options"> <span class="icon-sm icon-menu light" style="vertical-align: bottom;"></span> <span class="text">Options</span> </a> ')}),e.pop()),n.b(" "),n.s(n.f("error",e,t,1),e,t,0,863,939,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="background-info"> <span class="text">'),i.b(i.v(i.f("error",e,t,0))),i.b("</span> </span> ")}),e.pop()),n.b(" "),n.s(n.f("pending",e,t,1),e,t,0,962,1107,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="background-info"> <span class="spinner small left" style="margin-right: 4px;"></span> <span class="text">Uploading…</span> </span> ')}),e.pop()),n.b(" </span> "),n.fl()},templates.board_change_background=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="board-backgrounds-list clearfix js-default-list"></div> <h2 class="clear">Photos</h2> <div class="board-backgrounds-list relative clearfix js-gold-photos-list'),n.s(n.f("enabled_additionalBackgrounds",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('"></div> <h2 class="clear">Patterns and Textures</h2> <div class="board-backgrounds-list relative clearfix js-gold-patterns-list'),n.s(n.f("enabled_additionalBackgrounds",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('"></div> <h2 class="clear">Custom</h2> <div class="board-backgrounds-list relative clearfix js-custom-list'),n.s(n.f("enabled_customBoardBackgrounds",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('"> <div class="board-background-select board-background-select-upload js-uploader"> <form action="/1/member/'),n.b(n.v(n.f("idMember",e,t,0))),n.b('/customBoardBackgrounds" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <span class="background-box"> <span class="icon-lg icon-add"></span> </span> <input type="file" name="file" class="upload-background js-upload-image" multiple="multiple" accept="image/*" /> </form> </div> </div> '),n.fl()},templates.board_closed=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="big-message quiet"> <h1> '),n.b(n.v(n.f("name",e,t,0))),n.b(" is closed. </h1> "),n.s(n.f("__own",e,t,1),e,t,0,73,145,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p> <a href="#" class="js-reopen"> Click here to re-open it. </a> </p> ')}),e.pop()),n.b(" "),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("__ed",e,t,1),e,t,0,176,263,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <p> You’re a member of this board, but only board admins are able to re-open it. </p> ")}),e.pop()),n.b(" ")),n.b(" </div> "),n.fl()},templates.board_desc=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-board"/> <div class="window-title non-empty inline '),n.s(n.f("__own",e,t,1),e,t,0,143,153,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" editable ")}),e.pop()),n.b(' " attr="name"> <h2 class="window-title-text current hide-on-edit"> '),n.b(n.v(n.f("name",e,t,0))),n.b(" </h2> "),n.s(n.f("__own",e,t,1),e,t,0,256,529,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <p class=\"edits-warning quiet\">You have unsaved edits on this field. <a href='#' class='js-view-edits'>View edits</a> or <a href='#' class='js-discard-edits'>discard</a>.</p> <div class=\"edit edit-heavy\"> <textarea type=\"text\" class=\"field single-line\"></textarea> </div> ")}),e.pop()),n.b(' </div> </div> <div class="window-main-col window-main-col-full"> <div class="board-description clearfix'),n.s(n.f("__ed",e,t,1),e,t,0,652,661,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" editable")}),e.pop()),n.b('" attr="desc"> <div class="current markeddown hide-on-edit bottom"> '),n.s(n.f("hasDesc",e,t,1),e,t,1,0,0,"")||(n.b(' <p class="bottom"> '),n.s(n.f("__ed",e,t,1),e,t,0,779,871,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<a class=\'quiet empty\' style="padding: 100px 0;" href="#">No description. Click to edit.</a>')}),e.pop()),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,1,0,0,"")||n.b("<span class='quiet empty' style=\"padding: 100px 0;\">No description.</span>"),n.b(" </p> ")),n.b(" </div> "),n.s(n.f("__ed",e,t,1),e,t,0,1008,1561,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("hasDesc",e,t,1),e,t,0,1021,1176,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="bottom js-edit-desc"> <a class="quiet-button hide-on-edit w-img" href="#"><span class="icon-sm icon-edit"/>Edit the board description.</a> </p> ')}),e.pop()),i.b(' <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <div class="board-description-edit edit"> <p class="helper"><a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a> accepted</p> <textarea class="field" /> </div> ')}),e.pop()),n.b(" </div> </div> "),n.fl()},templates.board_header=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" class="board-header-btn board-header-btn-name'),n.s(n.f("canRename",e,t,1),e,t,0,71,87,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-rename-board")}),e.pop()),n.s(n.f("canRename",e,t,1),e,t,1,0,0,"")||n.b(" no-edit"),n.s(n.f("orgLogoUrl",e,t,1),e,t,0,152,188,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" board-header-btn-name-with-org-logo")}),e.pop()),n.b('" '),n.s(n.f("canRename",e,t,1),e,t,0,219,245,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' title="Rename the board."')}),e.pop()),n.b("> "),n.s(n.f("orgLogoUrl",e,t,1),e,t,0,276,373,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="board-header-btn-name-org-logo" src="'),i.b(i.v(i.f("orgLogoUrl",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("orgDisplayName",e,t,0))),i.b(' logo"> ')}),e.pop()),n.b(' <span class="board-header-btn-text"> '),n.b(n.v(n.f("name",e,t,0))),n.b(" </span> </a> "),n.s(n.f("orgDisplayName",e,t,1),e,t,0,467,899,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="/'),i.b(i.v(i.f("orgName",e,t,0))),i.b('" class="board-header-btn board-header-btn-org-name js-open-org-menu'),i.s(i.f("hasBusinessClass",e,t,1),e,t,1,0,0,"")||i.b(" board-header-btn-without-icon"),i.b('" title="This board is part of the '),i.b(i.v(i.f("orgDisplayName",e,t,0))),i.b(' organization."> '),i.s(i.f("hasBusinessClass",e,t,1),e,t,0,720,810,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<span class="board-header-btn-icon icon-sm icon-briefcase icon-briefcase-bc-color"></span>')}),e.pop()),i.b(' <span class="board-header-btn-text">'),i.b(i.v(i.f("orgDisplayName",e,t,0))),i.b("</span> </a> ")}),e.pop()),n.b(' <div class="board-header-btns left"> '),n.s(n.f("__loggedIn",e,t,1),e,t,0,971,1209,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="board-header-btn js-star-board" title="Click to star or unstar this board. Starred boards show up at the top of your boards list."> <span class="board-header-btn-icon icon-sm icon-star js-star-board-icon"></span> </a> ')}),e.pop()),n.b(' <a href="#" class="board-header-btn hide js-open-desc js-fill-desc"> <span class="board-header-btn-icon icon-sm icon-desc"></span> </a> <a href="#" class="board-header-btn perms-btn js-change-vis" id="permission-level"></a> </div> <div class="board-header-btns right"> <a href="#" class="board-header-btn board-header-btn-filter-indicator hide js-filter-cards-indicator" title="You are filtering cards on this board. Click here to edit filter."> <span class="board-header-btn-icon icon-sm icon-filter"/> <span class="board-header-btn-text underline">Filtering is on.</span> <span class="board-header-btn-icon-close icon-sm icon-close js-filter-card-clear" title="Clear filter."/> </a> <div class="board-header-btn sub-btn hide js-board-header-subscribed" title="You are subscribed to this board. You\'ll get notifications about changes."> <span class="board-header-btn-icon icon-sm icon-follow"/> <span class="board-header-btn-text underline">Subscribed</span> </div> <a href="#" class="board-header-btn calendar-btn hide js-calendar" title="View all your cards with due dates in a calendar view."> <span class="board-header-btn-icon icon-sm icon-cal"/> <span class="board-header-btn-text underline">Calendar</span> </a> </div> '),n.fl()},templates.board_header_permissions=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="board-header-btn-icon icon-sm icon-'),n.b(n.v(n.f("permissionLevel",e,t,0))),n.b('"/> <span class="board-header-btn-text">'),n.b(n.v(n.f("permText",e,t,0))),n.b("</span> "),n.fl()},templates.board_inline=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span>the board</span> <a href="'),n.b(n.v(n.f("boardUrl",e,t,0))),n.b('" class="inline-object"> '),n.b(n.v(n.f("name",e,t,0))),n.b(" </a> "),n.fl()},templates.board_labels=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("labelNames",e,t,1),e,t,0,15,1060,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="relative"> <div class="card-label card-label-green"></div> <input type="text" class="js-label-title" name="green" value="'),i.b(i.v(i.f("green",e,t,0))),i.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-yellow"></div> <input type="text" class="js-label-title" name="yellow" value="'),i.b(i.v(i.f("yellow",e,t,0))),i.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-orange"></div> <input type="text" class="js-label-title" name="orange" value="'),i.b(i.v(i.f("orange",e,t,0))),i.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-red"></div> <input type="text" class="js-label-title" name="red" value="'),i.b(i.v(i.f("red",e,t,0))),i.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-purple"></div> <input type="text" class="js-label-title" name="purple" value="'),i.b(i.v(i.f("purple",e,t,0))),i.b('" placeholder="No name"> </div> <div class="relative"> <div class="card-label card-label-blue"></div> <input type="text" class="js-label-title" name="blue" value="'),i.b(i.v(i.f("blue",e,t,0))),i.b('" placeholder="No name"> </div> ')}),e.pop()),n.b(' <input type="submit" class="primary wide js-save" value="Save"> '),n.fl()},templates.board_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module-title window-module-title-no-divider"> <span class="icon-lg window-module-title-icon icon-'),n.b(n.v(n.f("iconClass",e,t,0))),n.s(n.f("logoHash",e,t,1),e,t,0,142,155,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" custom-image")}),e.pop()),n.b('"> '),n.s(n.f("logoHash",e,t,1),e,t,0,184,259,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<img src="'),i.b(i.v(i.f("__logoDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("logoHash",e,t,0))),i.b('/30.png" alt="'),i.b(i.v(i.f("displayName",e,t,0))),i.b(' logo">')}),e.pop()),n.b(" </span> <h3>"),n.b(n.v(n.f("title",e,t,0))),n.b("</h3> "),n.s(n.f("hasBusinessClass",e,t,1),e,t,0,321,446,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="window-title-extra bc"> <span class="business-class-mark" title="Business Class Mark"/> Business Class </span> ')}),e.pop()),n.b(" "),n.s(n.f("url",e,t,1),e,t,0,476,663,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="inline-block quiet dark-hover js-view-org-profile" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" style="margin: 2px 6px 0 0;"> <span class="icon-sm icon-info" style="margin-right: 2px;"></span>Overview </a> ')}),e.pop()),n.b(' </div> <ul class="board-list gutter js-board-list clearfix"></ul> '),n.fl()},templates.board_list_item=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="js-open-board highlight-icon '),n.s(n.f("current",e,t,1),e,t,0,51,58,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("current")}),e.pop()),n.b(" "),n.s(n.f("backgroundTile",e,t,1),e,t,0,90,95,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" tile")}),e.pop()),n.b(" "),n.s(n.f("backgroundBrightness",e,t,1),e,t,0,140,165,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("backgroundBrightness",e,t,0)))}),e.pop()),n.b('" href="'),n.b(n.v(n.f("url",e,t,0))),n.b('" style=" '),n.s(n.f("backgroundImageThumbnail",e,t,1),e,t,0,244,308,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("background-image: url(&quot;"),i.b(i.v(i.f("backgroundImageThumbnail",e,t,0))),i.b("&quot;);")}),e.pop()),n.b(" "),n.s(n.f("backgroundColor",e,t,1),e,t,0,358,396,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("background-color: "),i.b(i.v(i.f("backgroundColor",e,t,0))),i.b(";")}),e.pop()),n.b(' " > <span class="thumbnail" style=" '),n.s(n.f("backgroundImageThumbnail",e,t,1),e,t,0,482,545,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("background-image: url(&quot;"),i.b(i.v(i.f("backgroundImageThumbnail",e,t,0))),i.b("&quot;)")}),e.pop()),n.b("; "),n.s(n.f("backgroundColor",e,t,1),e,t,0,596,634,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("background-color: "),i.b(i.v(i.f("backgroundColor",e,t,0))),i.b(";")}),e.pop()),n.b(' " ></span> <span class="fade"></span> <span class="details'),n.s(n.f("orgname",e,t,1),e,t,0,725,738,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" has-sub-name")}),e.pop()),n.b('"> <span class="board-list-item-name" title="'),n.b(n.v(n.f("name",e,t,0))),n.b('">'),n.b(n.v(n.f("name",e,t,0))),n.b("</span> "),n.s(n.f("orgname",e,t,1),e,t,0,833,912,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="board-list-item-sub-name" title="'),i.b(i.v(i.f("orgname",e,t,0))),i.b('">'),i.b(i.v(i.f("orgname",e,t,0))),i.b("</span> ")}),e.pop()),n.b(" "),n.s(n.f("__loggedIn",e,t,1),e,t,0,940,1167,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="unread-indicator js-unread" title="There is new activity on this board."></span> <span class="icon-sm icon-star js-star-board" title="Click to star this board. It will show up at top of your boards list."></span> ')}),e.pop()),n.b(" </span> </a> "),n.fl()},templates.board_list_item_add=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li> <a href="#" class="board-list-item--add-board js-add-board">Create new board…</a> </li> '),n.fl()},templates.board_member_profile=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-activity"/> <h2 class="window-title"> '),n.b(n.v(n.f("fullName",e,t,0))),n.b(' <span class="quiet" style="margin-left: 3px">('),n.b(n.v(n.f("username",e,t,0))),n.b(')</span> </h2> </div> <div class="window-main-col window-main-col-full"> <div class="list-actions"> <p class="js-board-member-profile-no-activity">This member has no board activity</p> </div> <a class="show-more js-more-actions" href="#">Load More Activity</a> </div> '),n.fl()},templates.board_menu_commenting=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li> <a href="#" class="js-select" name="disabled"> Disabled '),n.s(n.f("comments_disabled",e,t,1),e,t,0,83,125,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"></span> ')}),e.pop()),n.b(' <span class="sub-name"> No one is allowed to comment. </span> </a> </li> <li> <a href="#" class="js-select" name="members"> Members '),n.s(n.f("comments_members",e,t,1),e,t,0,301,337,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> Allow admins and normal members to comment. </span> </a> </li> <li> <a href="#" class="js-select'),n.s(n.f("comments_showObservers",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" name="observers"> Members and Observers '),n.s(n.f("comments_observers",e,t,1),e,t,0,607,643,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> Allow admins, normal members, and observers to comment. </span> </a> </li> <li> <a href="#" class="js-select'),n.s(n.f("orgCanSee",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" name="org"> Organization members '),n.s(n.f("comments_org",e,t,1),e,t,0,888,924,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> Allow admins, normal members, observers, and org members to comment. </span> </a> </li> <li> <a href="#" class="js-select'),n.s(n.f("permissionLevel_public",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" name="public"> Public members '),n.s(n.f("comments_public",e,t,1),e,t,0,1202,1238,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> Allow any Trello member to comment. </span> </a> </li> '),n.fl()},templates.board_menu_email=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<label for="boardEmail">Your email address for this board</label> <input id="boardEmail" type="text" name="boardEmail" readonly="readonly" class="non-empty js-autofocus" placeholder="Loading…" value="'),n.b(n.v(n.f("email",e,t,0))),n.b('" style="margin: 4px 0 8px;"> <a href="#" class="quiet-button js-generate-address">Generate a new email address.</a> <a href="#" class="quiet-button js-send-address">Email me this address.</a> <hr> <label>Your emailed cards appear in…</label> <div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-twothirds"> <span class="label">List</span> <span class="value js-list-value">'),n.b(n.v(n.f("listName",e,t,0))),n.b('</span> <label>List</label> <select class="js-select-list"> '),n.s(n.f("lists",e,t,1),e,t,0,700,788,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("id",e,t,0))),i.b('"'),i.s(i.f("selected",e,t,1),e,t,0,736,756,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' selected="selected"')}),e.pop()),i.b(">"),i.b(i.v(i.f("name",e,t,0))),i.b("</option> ")}),e.pop()),n.b(' </select> </div> <div class="button-link setting form-grid-child form-grid-child-third"> <span class="label">Position</span> <span class="value js-pos-value">'),n.b(n.v(n.f("positionName",e,t,0))),n.b('</span> <label>Position</label> <select class="js-select-position"> <option value="top"'),n.s(n.f("position_top",e,t,1),e,t,0,1077,1097,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' selected="selected"')}),e.pop()),n.b('>Top</option> <option value="bottom"'),n.s(n.f("position_bottom",e,t,1),e,t,0,1170,1190,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' selected="selected"')}),e.pop()),n.b('>Bottom</option> </select> </div> </div> <hr> <p class="bottom quiet"> <strong>Tip:</strong> Don\'t share this email address. Anyone who has it can add cards as you. When composing emails, the card title goes in the subject and the card description in the body. <a href="http://help.trello.com/customer/portal/articles/1216141-creating-cards-by-email#formattingTips" target="_blank">More email formatting tips.</a> </p> '),n.fl()},templates.board_menu_invitations=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li> <a href="#" class="js-select" name="admins"> Admins '),n.s(n.f("invitations_admins",e,t,1),e,t,0,80,116,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> Allow only admins to add and invite others. </span> </a> </li> <li> <a href="#" class="js-select" name="members"> All Members '),n.s(n.f("invitations_members",e,t,1),e,t,0,314,350,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> Allow members and admins to add and invite others. </span> </a> </li> '),n.fl()},templates.board_menu_settings=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list inset"> <li> <a class="js-change-labels'),n.s(n.f("__ed",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" href="#"> Edit Label Names </a> </li> <hr> <li> <a class="js-change-org'),n.s(n.f("canChangeOrg",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" href="#"> '),n.s(n.f("setOrgNull",e,t,1),e,t,0,234,260,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" Remove From Organization ")}),e.pop()),n.b(" "),n.s(n.f("setOrgNull",e,t,1),e,t,1,0,0,"")||n.b(" Change Organization… "),n.b(" "),n.s(n.f("orgDisplayName",e,t,1),e,t,0,348,398,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="sub-name">'),i.b(i.v(i.f("orgDisplayName",e,t,0))),i.b("</span> ")}),e.pop()),n.b(' </a> </li> <hr> <li> <a class="'),n.s(n.f("__own",e,t,1),e,t,0,459,475,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-toggle-covers")}),e.pop()),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" href="#"> '),n.s(n.f("cardCovers",e,t,1),e,t,1,0,0,"")||n.b(" Enable Card Cover Images "),n.b(" "),n.s(n.f("cardCovers",e,t,1),e,t,0,598,660,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' Card Cover Images Enabled <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name">Show images on front of cards.</span> </a> </li> <hr> <li> <a class="'),n.s(n.f("__own",e,t,1),e,t,0,778,796,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-change-comments")}),e.pop()),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" href="#"> Commenting Permissions… <span class="sub-name">'),n.b(n.v(n.f("commentsDisplay",e,t,0))),n.b('</span> </a> </li> <li> <a class="'),n.s(n.f("__own",e,t,1),e,t,0,957,978,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-change-add-members")}),e.pop()),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" href="#"> Invitations Permissions… <span class="sub-name">'),n.b(n.v(n.f("invitationsDisplay",e,t,0))),n.b('</span> </a> </li> <hr> <li> <a class=" '),n.s(n.f("__own",e,t,1),e,t,0,1149,1173,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-toggle-org-mem-join ")}),e.pop()),n.b(" "),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b(" disabled "),n.b(" "),n.s(n.f("hasOrg",e,t,1),e,t,1,0,0,"")||n.b(" disabled "),n.b(" "),n.s(n.f("permissionLevel_private",e,t,1),e,t,0,1276,1286,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" disabled ")}),e.pop()),n.b(' " href="#"> Allow Org Members to Join '),n.s(n.f("selfJoin_true",e,t,1),e,t,0,1371,1407,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> Any org member can join this board without being invited. '),n.s(n.f("hasOrg",e,t,1),e,t,1,0,0,"")||n.b(" To enable this, the board has to be a part of an org. "),n.b(" "),n.s(n.f("permissionLevel_private",e,t,1),e,t,0,1614,1659,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" To enable this, the board can't be private. ")}),e.pop()),n.b(" </span> </a> </li> </ul> "),n.fl()},templates.board_menu_subscribed_state=function(e,t,i){var n=this;return n.b(i=i||""),n.b("Subscribe"),n.s(n.f("subscribed",e,t,1),e,t,0,24,60,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('d <span class="icon-sm icon-check"/>')}),e.pop()),n.b(" "),n.fl()},templates.board_menu_vis=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("explanationText",e,t,1),e,t,0,20,64,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="quiet"> '),i.b(i.v(i.f("explanationText",e,t,0))),i.b(" </p> ")}),e.pop()),n.b(' <li> <a class="js-select'),n.s(n.f("disabledVis_private",e,t,1),e,t,1,0,0,"")||n.b(" light-hover"),n.b(" "),n.s(n.f("disabledVis_private",e,t,1),e,t,0,194,203,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" disabled")}),e.pop()),n.b(' " href="#" name="private"> <span class="icon-sm icon-'),n.b(n.v(n.f("iconClass_private",e,t,0))),n.b(' vis-icon"/> Private '),n.s(n.f("permissionLevel_private",e,t,1),e,t,0,351,387,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> '),n.b(n.v(n.f("permText_private",e,t,0))),n.b(" "),n.s(n.f("showVisRestriction_private",e,t,1),e,t,0,492,543,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="error">'),i.b(i.v(i.f("visRestrictionText",e,t,0))),i.b("</span> ")}),e.pop()),n.b(' </span> </a> </li> <li> <a class="js-select '),n.s(n.f("disabledVis_org",e,t,1),e,t,1,0,0,"")||n.b(" light-hover"),n.b(" "),n.s(n.f("disabledVis_org",e,t,1),e,t,0,692,701,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" disabled")
}),e.pop()),n.b(' " href="#" name="org"> <span class="icon-sm icon-'),n.b(n.v(n.f("iconClass_org",e,t,0))),n.b(' vis-icon"/> Organization '),n.s(n.f("permissionLevel_org",e,t,1),e,t,0,838,874,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> '),n.b(n.v(n.f("permText_org",e,t,0))),n.b(" "),n.s(n.f("disabledVis_org",e,t,1),e,t,0,960,1062,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.s(i.f("hasOrg",e,t,1),e,t,1,0,0,"")||i.b(' <span class="error"> The board must be added to an org to enable this. </span> ')}),e.pop()),n.b(" "),n.s(n.f("showVisRestriction_org",e,t,1),e,t,0,1110,1161,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="error">'),i.b(i.v(i.f("visRestrictionText",e,t,0))),i.b("</span> ")}),e.pop()),n.b(' </span> </a> </li> <li> <a class="js-select'),n.s(n.f("disabledVis_public",e,t,1),e,t,1,0,0,"")||n.b(" light-hover"),n.b(" "),n.s(n.f("disabledVis_public",e,t,1),e,t,0,1314,1323,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" disabled")}),e.pop()),n.b(' " href="#" name="public"> <span class="icon-sm icon-'),n.b(n.v(n.f("iconClass_public",e,t,0))),n.b(' vis-icon"/> Public '),n.s(n.f("permissionLevel_public",e,t,1),e,t,0,1466,1502,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="sub-name"> '),n.b(n.v(n.f("permText_public",e,t,0))),n.b(" "),n.s(n.f("showVisRestriction_public",e,t,1),e,t,0,1604,1655,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="error">'),i.b(i.v(i.f("visRestrictionText",e,t,0))),i.b("</span> ")}),e.pop()),n.b(" </span> </a> </li> "),n.fl()},templates.board_new=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <label for="boardNewTitle">Title</label> <input id="boardNewTitle" type="text" name="name" class="non-empty js-autofocus" placeholder="'),n.b(n.v(n.f("placeholder",e,t,0))),n.b('" value="'),n.b(n.v(n.f("name",e,t,0))),n.b('"> <div'),n.s(n.f("hideOrg",e,t,1),e,t,0,193,206,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="hide"')}),e.pop()),n.b('> <div class="clearfix"> <label class="left" style="margin-right: 8px;">Organization</label> '),n.s(n.f("canAddToOrgs",e,t,1),e,t,0,328,401,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="icon-sm icon-info dark-hover js-helper-add-org"></a> ')}),e.pop()),n.b(" </div> "),n.s(n.f("canAddToOrgs",e,t,1),e,t,1,0,0,"")||n.b(' <p style="margin-bottom: 16px;" class="quiet"> Organizations make sharing and working within a group even easier. It doesn’t look like you are a member of any organizations. <a href="#" class=\'js-create-org\'>Create an organization.</a> </p> '),n.b(' <select name="org-id"'),n.s(n.f("canAddToOrgs",e,t,1),e,t,1,0,0,"")||n.b(' class="hide"'),n.b('> <option value="">(none)</option> '),n.s(n.f("orgs",e,t,1),e,t,0,815,901,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("id",e,t,0))),i.b('"'),i.s(i.f("selectOrg",e,t,1),e,t,0,852,861,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" selected")}),e.pop()),i.b(">"),i.b(i.v(i.f("displayName",e,t,0))),i.b("</option> ")}),e.pop()),n.b(' </select> </div> <input type="hidden" name="permissionLevel" value="'),n.b(n.v(n.f("pLevel",e,t,0))),n.b('"> <p class="quiet js-vis-display"/> <ul class="pop-over-list js-vis-chooser hide"/> <p class="error bottom js-no-valid-org-privs clearfix hide"> Due to<span class="js-not-admin-text"> admin</span> restrictions, you are not allowed to create new boards in this organization. To change this, <span class="js-not-admin-text">get an organization admin to </span> change the Board Creation Restrictions <span class="js-not-admin-text">on the organization’s settings page.</span> <span class="js-admin-text hide">on the <a class="js-org-account-url">organization’s settings page</a>.</span> </p> '),n.s(n.f("isCopyBoard",e,t,1),e,t,0,1596,1769,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="check-div clearfix" style="margin-top: 10px;"> <input type="checkbox" id="idKeepCards" name="cards" checked> <label for="idKeepCards">Keep Cards</label> </div> ')}),e.pop()),n.b(' <input type="submit" class="primary wide js-submit disabled" value="Create"> </form> '),n.fl()},templates.board_new_vis=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="icon-sm icon-'),n.b(n.v(n.f("visIconClass",e,t,0))),n.b('"/>This board will be <strong>'),n.b(n.v(n.f("visDisplayText",e,t,0))),n.b('</strong>. <a href="#" class="js-change-vis">Change.</a> '),n.fl()},templates.board_observer_count=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" class="quiet-button js-show-observers" style="margin: 4px 0 0;">'),n.b(n.v(n.f("count",e,t,0))),n.b("</a> "),n.fl()},templates.board_sidebar=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" class="sidebar-hide-btn dark-hover js-hide-sidebar" title="Close the board sidebar."> <span class="icon-sm icon-rightarrow"/> </a> <div class="board-widgets-title clearfix"> <a href="#" class="board-sidebar-back-btn js-pop-widget-view"><span class="left-arrow"/>Back</a> <h3 class="text js-widget-title"></h3> <hr> </div> <div class="board-widgets-content-wrapper"></div> <div class="sidebar-archive-dropzone js-sidebar-archive-dropzone"><p>Drop here to archive.</p></div> '),n.fl()},templates.board_watchers=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("showWatchers",e,t,1),e,t,0,17,49,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("nWatchers",e,t,0))),i.b(" people watching. ")}),e.pop()),n.b(" "),n.fl()},templates.board_widget_default=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="error js-file-too-large" style="margin: 12px 0 6px; display:none;">File too large. 10mb limit.</p> <div class="board-widget board-widget-nav clearfix'),n.s(n.f("collapseWidgetNav",e,t,1),e,t,0,181,191,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" collapsed")}),e.pop()),n.b('"> <h3 class="dark-hover toggle-widget-nav js-toggle-widget-nav" title="Click here to see more board options."> Menu <span class="icon-sm icon-menu toggle-menu-icon"></span> </h3> <ul class="nav-list"> <hr style="margin-top: 0;"> '),n.s(n.f("__ed",e,t,1),e,t,0,452,702,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a href="#" class="nav-list-item js-open-power-ups"> <span class="icon-sm icon-rocket icon-type"/> Power-Ups </a> </li> <li> <a href="#" class="nav-list-item js-open-stickers"> <span class="icon-sm icon-sticker icon-type"/> Stickers </a> </li> ')}),e.pop()),n.b(' <li> <a href="#" class="nav-list-item js-open-card-filter"> <span class="icon-sm icon-filter icon-type"/> Filter Cards </a> </li> <li> <a href="#" class="nav-list-item js-open-archive"> <span class="icon-sm icon-archive icon-type"/> Archived Items </a> </li> <hr> '),n.s(n.f("__ed",e,t,1),e,t,0,985,1381,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="nav-list-item nav-list-sub-item board-settings-background js-change-background'),i.s(i.f("__ed",e,t,1),e,t,1,0,0,"")||i.b(" disabled"),i.b('" href="#"> <span class="board-settings-background-preview" style="'),i.s(i.f("backgroundImageUrl",e,t,1),e,t,0,1196,1242,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("background-image: url("),i.b(i.v(i.f("backgroundImageUrl",e,t,0))),i.b(");")}),e.pop()),i.s(i.f("backgroundColor",e,t,1),e,t,0,1285,1321,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("background-color:"),i.b(i.v(i.f("backgroundColor",e,t,0)))}),e.pop()),i.b('"></span> Change Background… </a> </li> ')}),e.pop()),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,0,1400,1504,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a href="#" class="nav-list-item nav-list-sub-item js-email"> Email-to-board Settings… </a> </li> ')}),e.pop()),n.b(" "),n.s(n.f("__loggedIn",e,t,1),e,t,0,1529,1749,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="nav-list-item nav-list-sub-item js-board-subscribe" href="#"> <span class="js-subscribed-state"/> </a> </li> <li> <a class="nav-list-item nav-list-sub-item js-copy-board" href="#"> Copy Board… </a> </li> ')}),e.pop()),n.b(' <li> <a class="nav-list-item nav-list-sub-item js-share" href="#"> Share, Print, and Export… </a> </li> '),n.s(n.f("canCloseBoard",e,t,1),e,t,0,1887,2097,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <li> <a href="#" class="nav-list-item nav-list-sub-item js-open-settings"> Additional Settings… </a> </li> <li> <a class="nav-list-item nav-list-sub-item js-close-board" href="#"> Close Board… </a> </li> ')}),e.pop()),n.b(" "),n.s(n.f("canLeaveBoard",e,t,1),e,t,0,2134,2275,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("canCloseBoard",e,t,1),e,t,1,0,0,"")||i.b(" <hr> "),i.b(' <li> <a class="nav-list-item nav-list-sub-item js-leave-board" href="#"> Leave Board… </a> </li> ')}),e.pop()),n.b(' </ul> </div> <div class="js-ad"></div> <hr> '),n.s(n.f("canJoin",e,t,1),e,t,0,2350,2594,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="board-widget clearfix"> <a href="#" class="button js-join-board" style="margin: 0;"> Join Board </a> '),i.s(i.f("selfJoin_true",e,t,1),e,t,0,2482,2563,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="helper" style="margin-top: 8px;">Org members can join this board.</p> ')}),e.pop()),i.b(" </div> <hr> ")}),e.pop()),n.b(' <div class="board-widget board-widget-members clearfix"> <div class="board-widget-title"> <h3>Members</h3> </div> <div class="board-widget-content"> <div class="board-widget-members js-list-board-members clearfix'),n.s(n.f("__ed",e,t,1),e,t,0,2828,2860,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-list-draggable-board-members")}),e.pop()),n.b('"></div> <div class="js-list-observers"></div> '),n.s(n.f("canInviteMembers",e,t,1),e,t,0,2937,3060,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="button-link js-open-manage-board-members"> <span class="icon-sm icon-member"></span> Add Members… </a> ')}),e.pop()),n.b(' </div> </div> <hr> <div class="board-widget board-widget-activity bottom clearfix"> <div class="board-widget-title"> <h3>Activity</h3> </div> <div class="board-widget-content"> <div class="activity-gradient-t"></div> <div class="activity-gradient-b"></div> <div class="board-actions-list fancy-scrollbar"> <div class="js-sidebar-list-actions"></div> <a class="show-more js-view-all-activity-list" href="#"> View all activity… </a> </div> </div> </div> '),n.fl()},templates.boards_sidebar_section=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="sidebar-section-header quiet js-sidebar-section-header"> '),n.s(n.f("isOrg",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("title",e,t,1),e,t,0,88,228,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("iconClass",e,t,1),e,t,0,103,153,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-'),i.b(i.v(i.f("iconClass",e,t,0))),i.b('"></span> ')}),e.pop()),i.b(' <span class="sidebar-section-header-title">'),i.b(i.v(i.f("title",e,t,0))),i.b("</span> ")}),e.pop()),n.b(" ")),n.b(" "),n.s(n.f("isOrg",e,t,1),e,t,0,260,662,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="dark-hover" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('"> <span class="icon-sm '),i.s(i.f("orgLogoUrl",e,t,1),e,t,1,0,0,"")||i.b("icon-org"),i.s(i.f("orgLogoUrl",e,t,1),e,t,0,373,385,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("custom-image")}),e.pop()),i.b('"> '),i.s(i.f("orgLogoUrl",e,t,1),e,t,0,418,471,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<img src="'),i.b(i.v(i.f("orgLogoUrl",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("displayName",e,t,0))),i.b(' logo">')}),e.pop()),i.b(' </span> <span class="sidebar-section-header-title">'),i.b(i.v(i.f("displayName",e,t,0))),i.b('</span> <span class="icon-sm icon-briefcase icon-briefcase-bc-color hide js-has-business-class"></span> </a> ')}),e.pop()),n.b(" "),n.s(n.f("sectionId",e,t,1),e,t,0,687,961,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="sidebar-section-header-toggle-icon icon-sm icon-remove dark-hover js-collapse-section hide" title="Collapse section."> </span> <span class="sidebar-section-header-toggle-icon icon-sm icon-add dark-hover js-expand-section hide" title="Expand section."> </span> ')}),e.pop()),n.b(' </p> <ul class="sidebar-boards-list js-board-list"></ul> '),n.fl()},templates.calendar_day=function(e,t,i){var n=this;return n.b(i=i||""),n.b(" "),n.s(n.f("monthView",e,t,1),e,t,0,17,54,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<div class="calendar-day-spacer-div">')}),e.pop()),n.b(' <div class="calendar-day js-expand-day '),n.s(n.f("isToday",e,t,1),e,t,0,124,129,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("today")}),e.pop()),n.b('"> <div class="day-header clearfix js-toggle-day"> <h3 class="date"> <div class=\'day-month-header\'>'),n.b(n.v(n.f("month",e,t,0))),n.b("</div> <div class='day-full-month-header'>"),n.b(n.v(n.f("fullMonth",e,t,0))),n.b("</div> <div class='day-date-header'>"),n.b(n.v(n.f("date",e,t,0))),n.b('</div> </h3> <div class="quiet num-cards"> <div class="day-number-header"></div> <div class="day-cards-header"></div> </div> <a class="close-button icon-sm icon-close dark-hover"></a> </div> <div class="calendar-day-list js-calendar-sortable fancy-scrollbar"></div> '),n.s(n.f("__ed",e,t,1),e,t,0,625,696,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="open-card-composer js-open-card-composer">Add a card...</a> ')}),e.pop()),n.b(" </div> "),n.s(n.f("monthView",e,t,1),e,t,0,729,735,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("</div>")}),e.pop()),n.b(" "),n.fl()},templates.calendar_day_list_header=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<span class='calendar-list-header' name='"),n.b(n.v(n.f("listID",e,t,0))),n.b('\'> <span class="icon-sm icon-list"></span>'),n.b(n.v(n.f("listName",e,t,0))),n.b(" </span> "),n.fl()},templates.calendar_month=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<table class="calendar-table"></table> '),n.fl()},templates.calendar_toolbar=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="calendar-header"> <div class="calendar-header-toolbar"> <h2 class="calendar-header-toolbar-title js-calendar-header"></h2> <div class="calendar-header-toolbar-today"> <a class="button-link today-button js-today" href="#"> Today </a> </div> <div class="calendar-header-toolbar-nav"> <a class="button-link js-left-arrow left-arrow" href="#"> <span class="icon-sm icon-leftarrow"/> </a> <a class="button-link js-right-arrow right-arrow" href="#"> <span class="icon-sm icon-rightarrow"/> </a> </div> <div class="calendar-header-toolbar-close"> <a class="icon-lg icon-close dark-hover js-close-calendar" href="#" title="Close the calendar"/> </div> <div class="calendar-header-toolbar-type"> <a class="button-link js-week-view week-button" href="#"> Week </a> <a class="button-link js-month-view month-button" href="#"> Month </a> </div> </div> <div class="days-of-week"> '),n.s(n.f("days",e,t,1),e,t,0,888,920,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="quiet">'),i.b(i.v(i.d(".",e,t,0))),i.b("</div> ")}),e.pop()),n.b(' </div> </div> <div class="calendar-content"></div> '),n.fl()},templates.calendar_week=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<div class='week-horizontal-canvas'></div> "),n.fl()},templates.cant_add_board_to_org=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="quiet"> '),n.s(n.f("organization",e,t,1),e,t,0,35,50,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("displayName",e,t,0)))}),e.pop()),n.b(" does not allow new boards. "),n.s(n.f("isOrgAdmin",e,t,1),e,t,0,110,239,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' You can change this in the <a href="'),i.b(i.v(i.f("orgSettingsUrl",e,t,0))),i.b('">organization settings</a> by clicking on "Board Creation Restrictions". ')}),e.pop()),n.b(" "),n.s(n.f("isOrgAdmin",e,t,1),e,t,1,0,0,"")||n.b(' An org admin can change this on the organization settings page by clicking on "Board Creation Restrictions". '),n.b(" </p> "),n.fl()},templates.cardLink=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="'),n.b(n.v(n.f("url",e,t,0))),n.b('"'),n.s(n.f("name",e,t,1),e,t,0,26,43,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' title="'),i.b(i.v(i.f("name",e,t,0))),i.b('"')}),e.pop()),n.b(">#"),n.b(n.v(n.f("idShort",e,t,0))),n.b("</a> "),n.fl()},templates.card_composer_inline=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="list-card js-composer"> <div class="list-card-labels clearfix js-list-card-composer-labels"></div> <div class="list-card-details clearfix"> <textarea class="list-card-composer-textarea js-card-title">'),n.b(n.v(n.f("title",e,t,0))),n.b('</textarea> <div class="list-card-members js-list-card-composer-members"></div> </div> </div> <div class="cc-controls clearfix"> <input type="submit" class="primary confirm js-add-card" value="Add"> <a class="icon-lg icon-close dark-hover js-cancel" href="#"/> <a class="cc-opt icon-lg icon-menu dark-hover js-cc-menu" href="#"/> </div> '),n.fl()},templates.card_copy=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("loading",e,t,1),e,t,0,12,73,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="spinner loading js-loading-card-actions"></div> ')}),e.pop()),n.b(" "),n.s(n.f("loading",e,t,1),e,t,1,0,0,"")||(n.b(' <form> <label>Title</label> <textarea name="name" class="js-autofocus" style="margin-bottom: 12px;">'),n.b(n.v(n.f("name",e,t,0))),n.b("</textarea> "),n.s(n.f("hasStuff",e,t,1),e,t,0,232,1703,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p style="margin-bottom: 4px;"><strong>Keep…</strong></p> '),i.s(i.f("hasChecklists",e,t,1),e,t,0,309,518,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="check-div clearfix"> <input id="idKeepChecklists" type="checkbox" name="checklists" checked> <label for="idKeepChecklists">Checklists <span class="quiet">('),i.b(i.v(i.f("numChecklists",e,t,0))),i.b(")</span></label> </div> ")}),e.pop()),i.b(" "),i.s(i.f("hasLabels",e,t,1),e,t,0,551,740,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="check-div clearfix"> <input id="idKeepLabels" type="checkbox" name="labels" checked> <label for="idKeepLabels">Labels <span class="quiet">('),i.b(i.v(i.f("numLabels",e,t,0))),i.b(")</span></label> </div> ")}),e.pop()),i.b(" "),i.s(i.f("hasMembers",e,t,1),e,t,0,770,964,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="check-div clearfix"> <input id="idKeepMembers" type="checkbox" name="members" checked> <label for="idKeepMembers">Members <span class="quiet">('),i.b(i.v(i.f("numMembers",e,t,0))),i.b(")</span></label> </div> ")}),e.pop()),i.b(" "),i.s(i.f("hasAttachments",e,t,1),e,t,0,999,1215,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="check-div clearfix"> <input id="idKeepAttachments" type="checkbox" name="attachments" checked> <label for="idKeepAttachments">Attachments <span class="quiet">('),i.b(i.v(i.f("numAttachments",e,t,0))),i.b(")</span></label> </div> ")}),e.pop()),i.b(" "),i.s(i.f("hasComments",e,t,1),e,t,0,1251,1452,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="check-div clearfix"> <input id="idKeepComments" type="checkbox" name="comments" checked> <label for="idKeepComments">Comments <span class="quiet">('),i.b(i.v(i.f("numComments",e,t,0))),i.b(")</span></label> </div> ")}),e.pop()),i.b(" "),i.s(i.f("hasStickers",e,t,1),e,t,0,1485,1686,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="check-div clearfix"> <input id="idKeepStickers" type="checkbox" name="stickers" checked> <label for="idKeepStickers">Stickers <span class="quiet">('),i.b(i.v(i.f("numStickers",e,t,0))),i.b(")</span></label> </div> ")}),e.pop()),i.b(" ")}),e.pop()),n.b(" <br> <label>Copy to…</label> "),n.b(n.rp("move_card_controls",e,t,"")),n.b(' <input type="submit" class="primary wide js-submit" value="Create Card"> </form> ')),n.b(" "),n.fl()},templates.card_copy_from=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("showInput",e,t,1),e,t,0,14,103,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<input class="js-input js-autofocus" type="text" placeholder="Search for a card to copy">')}),e.pop()),n.b(' <div class="js-card-results"></div> '),n.fl()},templates.card_detail=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-cover hide js-card-cover-box js-open-card-cover-in-viewer"> <div class="window-cover-stickers js-display-stickers"></div> </div> <div class="window-archive-banner hide js-archive-banner"> <span class="icon-lg icon-archive window-archive-banner-icon"></span> <p class="window-archive-banner-text"> This card is archived.</p> </div> <div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-card"></span> <div class="window-title card-detail-title non-empty inline '),n.s(n.f("__ed",e,t,1),e,t,0,515,525,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" editable ")}),e.pop()),n.b(' " attr="name"> <h2 class="window-title-text current hide-on-edit js-card-title"> '),n.b(n.v(n.f("name",e,t,0))),n.b(" </h2> "),n.s(n.f("__ed",e,t,1),e,t,0,640,913,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <p class=\"edits-warning quiet\">You have unsaved edits on this field. <a href='#' class='js-view-edits'>View edits</a> or <a href='#' class='js-discard-edits'>discard</a>.</p> <div class=\"edit edit-heavy\"> <textarea type=\"text\" class=\"field single-line\"></textarea> </div> ")}),e.pop()),n.b(' <div class="hide quiet hide-on-edit window-header-inline-content js-current-list"></div> <div class="hide hide-on-edit window-header-inline-content js-subscribed-indicator-header"><span class="icon-sm icon-follow"></span></div> </div> </div> <div class="window-main-col clearfix"> <div class="card-detail-data gutter clearfix"> <div class="card-detail-item card-detail-item-members clearfix hide js-card-detail-members"> <h3 class="card-detail-item-header">Members</h3> <div class="js-card-detail-members-list clearfix"></div> </div> <div class="card-detail-item card-detail-item-labels clearfix hide js-card-detail-labels"> <h3 class="card-detail-item-header">Labels</h3> <div class="js-card-detail-labels-list clearfix"></div> </div> <div class="card-detail-item card-detail-item-due-date clearfix hide js-card-detail-due-date"> <h3 class="card-detail-item-header">Due Date</h3> <a href="#" class="card-detail-badge card-detail-due-date-badge js-card-detail-due-date-badge"></a> </div> <div class="card-detail-item card-detail-item-votes clearfix hide js-card-detail-votes"> <h3 class="card-detail-item-header">Votes</h3> <a href="#" class="card-detail-badge card-detail-vote-badge badge-state-clickable js-card-detail-votes-badge js-show-votes"></a> </div> <div class="card-detail-item clearfix hide js-card-detail-age"> <h3 class="card-detail-item-header">Last Updated</h3> <div class="card-detail-badge card-detail-badge-aging date js-card-detail-age-badge clearfix"></div> </div> <div class="card-detail-item card-detail-item-block clear clearfix'),n.s(n.f("__ed",e,t,1),e,t,0,2484,2493,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" editable")}),e.pop()),n.b('" attr="desc"> <h3 class="card-detail-item-header hide js-show-with-desc">Description</h3> '),n.s(n.f("__ed",e,t,1),e,t,0,2602,2696,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="card-detail-item-header-edit hide-on-edit js-show-with-desc js-edit-desc">Edit</a> ')}),e.pop()),n.b(' <div class="current markeddown hide-on-edit js-card-desc js-show-with-desc hide"></div> '),n.s(n.f("__ed",e,t,1),e,t,0,2803,3324,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="bottom"><a class="hide-on-edit quiet-button w-img js-edit-desc js-hide-with-desc" href="#"><span class="icon-sm icon-desc"/>Edit the description…</a></p> <div class="card-detail-edit edit"> <a href="#" class="helper js-format-help">Formatting help</a> <textarea class="field" /> </div> <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <p class="edits-error error">Edit not saved.</p> ')}),e.pop()),n.b(' </div> </div> <div class="window-module js-attachments-section clearfix hide"> <div class="window-module-title window-module-title-no-divider"> <span class="window-module-title-icon icon-lg icon-attachment"/> <h3 class="inline-block">Attachments</h3> </div> <div class="gutter"> <div class="clearfix js-attachment-list"></div> <p class="js-show-fewer-attachments hide"> <a class="quiet-button js-view-some-attachments" href="#">Show fewer attachments.</a> </p> <p class="js-show-more-attachments hide"> <a class="quiet-button js-view-all-attachments" href="#">View all attachments (<span class="js-num-attachments"/> hidden)</a> </p> '),n.s(n.f("__ed",e,t,1),e,t,0,3977,4204,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p> <a href="#" class="quiet-button js-attach" title="Attach files from your computer, Google Drive, Dropbox, and other services. You can also drag\'n\'drop files from your desktop to upload them."> Add an attachment… </a> </p> ')}),e.pop()),n.b(' </div> </div> <div class="checklist-list window-module js-checklist-list js-no-higher-edits"></div> <div class="window-module"> <div class="window-module-title window-module-title-no-divider"> <span class="window-module-title-icon icon-lg icon-activity"/> <h3>Activity</h3> <div class="window-module-title-options"> <a href="#" class="quiet js-show-extra-actions hide">Show details</a> <a href="#" class="quiet js-hide-extra-actions hide">Hide details</a> </div> <span class="editing-members js-editing-members hide"></span> </div> '),n.s(n.f("canComment",e,t,1),e,t,0,4761,5357,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="new-comment js-new-comment"> '),i.s(i.f("me",e,t,1),e,t,0,4810,4866,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="member member-no-menu"> '),i.b(i.rp("member",e,t,"")),i.b(" </div> ")}),e.pop()),i.b(' <textarea class="new-comment-input js-new-comment-input" placeholder="Write a comment…" tabindex="1" /> <div class="add-controls clearfix"> '),i.b(i.rp("comment_options",e,t,"")),i.b(' <input type="submit" class="primary confirm clear js-add-comment" value="Comment" tabindex="2"> </div> <div class="too-long hide"> <div>Your comment is too long</div> <input type="submit" class="js-attach-comment" value="Add as attachment"> <input type="submit" class="js-truncate-comment" value="Truncate"> </div> </div> ')}),e.pop()),n.b(' <div class="hide-extra-actions js-list-actions"></div> '),n.s(n.f("loading",e,t,1),e,t,0,5440,5501,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="spinner loading js-loading-card-actions"></div> ')}),e.pop()),n.b(' <p class="bottom"> <a class="show-more hide js-show-all-actions" href="#">Show all actions…</a> </p> </div> </div> <div class="window-sidebar"> '),n.s(n.f("__ed",e,t,1),e,t,0,5667,6581,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="window-module clearfix"> <h3>Add</h3> <div class="clearfix"> <a class="button-link js-change-card-members" title="Add or remove members of the board from the card."> <span class="icon-sm icon-member"/> Members </a> <a class="button-link js-edit-labels" title="Change the labels for the card."> <span class="icon-sm icon-label"/> Labels </a> <a class="button-link js-add-checklist-menu" title="Add a checklist and divide the card into subtasks."> <span class="icon-sm icon-checklist"/> Checklist </a> <a class="button-link js-add-due-date" title="Add a due date for the card and get notifications when it is almost due."> <span class="icon-sm icon-clock"/> Due date </a> <a class="button-link js-attach" title="Attach files from your computer or from Google Drive. You can also drag\'n\'drop files from your desktop to upload them."> <span class="icon-sm icon-attachment"/> Attachment </a> </div> </div> ')}),e.pop()),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("showActions",e,t,1),e,t,0,6617,6836,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("canSubscribe",e,t,1),e,t,0,6635,6818,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="window-module clearfix"> <h3>Actions</h3> <div class="clearfix"> <div class="js-subscribe-sidebar-button"></div> <div class="js-vote-sidebar-button"></div> </div> </div> ')}),e.pop()),i.b(" ")}),e.pop()),n.b(" ")),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,0,6872,7897,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="window-module other-actions clearfix"> <h3>Actions</h3> <div class="clearfix"> <a class="button-link js-move-card" title="Move the card to another board, another list, or a new position in a list"> <span class="icon-sm icon-move"></span> Move </a> <a class="button-link js-copy-card" title="Make a copy of this card, optionally include checklist, labels, members, attachments, etc."> <span class="icon-sm icon-card"></span> Copy </a> <div class="js-subscribe-sidebar-button"></div> <div class="js-vote-sidebar-button"></div> <hr> <a class="button-link js-archive-card" title="Remove the card from the board."> <span class="icon-sm icon-archive"></span> Archive </a> <a class="button-link js-unarchive-card" title="Send the card back to the board."> <span class="icon-sm icon-reopen"></span> Send to board </a> <a class="button-link negate hide js-delete-card" title="Delete the card and all history associated with it. It can’t be retrieved."> <span class="icon-sm icon-remove"></span> Delete </a> </div> </div> ')}),e.pop()),n.b(' <div class="window-module clearfix"> <p class="quiet bottom"> <a class="quiet-button js-more-menu" href="#" title="More options share, print, export'),n.s(n.f("__ed",e,t,1),e,t,0,8064,8076,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(", and delete")}),e.pop()),n.b('.">Share and more…</a> </p> </div> </div> <p class="dropzone">Drop files to upload.</p> '),n.fl()},templates.card_detail_add_button=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="card-detail-item-add-button dark-hover '),n.b(n.v(n.f("classes",e,t,0))),n.b('"><span class="icon-sm icon-add"></span></a> '),n.fl()},templates.card_detail_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="inline-block bottom">in list <a href="#" class="'),n.s(n.f("__ed",e,t,1),e,t,0,67,91,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-open-move-from-header")}),e.pop()),n.s(n.f("__ed",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('"><strong>'),n.b(n.v(n.f("listName",e,t,0))),n.b("</strong></a></p> "),n.fl()},templates.card_detail_more_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li> <a class="js-print" href="#" title="Use the browser’s print function. You can use “File” > “Print” or “cmd + P” (Mac) or “control + P” (Windows)">Print…</a> </li> <li> <a class="js-export-json" href="'),n.b(n.v(n.f("jsonURL",e,t,0))),n.b('" title="Export the card data in JSON format">Export JSON</a> </li> </ul> '),n.b(n.rp("meta",e,t,"")),n.b(" "),n.fl()},templates.card_detail_subscribe=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="button-link '),n.s(n.f("subscribed",e,t,1),e,t,0,37,43,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("is-on ")}),e.pop()),n.b(" js-"),n.s(n.f("subscribed",e,t,1),e,t,0,77,79,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("un")}),e.pop()),n.b('subscribe" title="Subscribe to the card to get notifications when something changes."> <span class="icon-sm icon-follow"></span> Subscribe <span class="on"><span class="icon-sm icon-check light"/></span> </a> '),n.fl()},templates.card_detail_vote_badge=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="badge vote-badge js-show-votes clickable'),n.s(n.f("voted",e,t,1),e,t,0,60,66,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" voted")}),e.pop()),n.b('" href="#"> <span class="icon-sm icon-vote"/> <span class="badge-text">'),n.s(n.f("nVotes",e,t,1),e,t,0,158,206,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("nVotes",e,t,0))),i.b(" vote"),i.s(i.f("singleVote",e,t,1),e,t,1,0,0,"")||i.b("s "),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("voted",e,t,1),e,t,0,228,316,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("justYourVote",e,t,1),e,t,1,0,0,"")||i.b(" (with you)"),i.b(" "),i.s(i.f("justYourVote",e,t,1),e,t,0,292,298,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" (you)")}),e.pop()),i.b(" ")}),e.pop()),n.b(" </span> </a> "),n.fl()},templates.card_detail_vote_btn_sidebar=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("canVote",e,t,1),e,t,0,12,203,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="button-link '),i.s(i.f("voted",e,t,1),e,t,0,45,51,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("is-on ")}),e.pop()),i.b(" js-"),i.s(i.f("voted",e,t,1),e,t,0,75,77,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("un")
}),e.pop()),i.b('vote"> <span class="icon-sm icon-vote"/> Vote <span class="on"><span class="icon-sm icon-check light"/></span> </a> ')}),e.pop()),n.b(" "),n.fl()},templates.card_in_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="list-card-labels clearfix js-card-labels">'),n.s(n.f("labels",e,t,1),e,t,0,65,75,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.rp("label",e,t,""))}),e.pop()),n.b('</div> <div class="list-card-cover js-card-cover'),n.s(n.f("showCover",e,t,1),e,t,1,0,0,"")||n.b(" hide"),n.b('"></div> '),n.s(n.f("showEditor",e,t,1),e,t,0,191,300,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="list-card-operation icon-sm icon-edit dark-hover js-open-quick-card-editor js-card-menu"></span>')}),e.pop()),n.b(' <div class="list-card-stickers-area clearfix'),n.s(n.f("hasStickers",e,t,1),e,t,1,0,0,"")||n.b(" hide"),n.b('"> <div class="stickers js-card-stickers"></div> </div> <div class="list-card-details clearfix"> '),n.s(n.f("quickEdit",e,t,1),e,t,1,0,0,"")||(n.b('<a class="list-card-title clear js-card-name"><span class="card-short-id hide">#'),n.b(n.v(n.f("idShort",e,t,0))),n.b(" </span>"),n.b(n.v(n.f("name",e,t,0))),n.b("</a>")),n.b(" "),n.s(n.f("quickEdit",e,t,1),e,t,0,648,725,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<textarea class="list-card-edit-title js-edit-card-title">'),i.b(i.v(i.f("name",e,t,0))),i.b("</textarea>")}),e.pop()),n.b(' <div class="badges"></div> <div class="list-card-members js-list-card-members">'),n.s(n.f("members",e,t,1),e,t,0,831,850,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.rp("member_on_card",e,t,""))}),e.pop()),n.b("</div> "),n.s(n.f("detailsOverlay",e,t,1),e,t,0,888,933,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<div class="list-card-details-overlay"></div>')}),e.pop()),n.b(' </div> <p class="list-card-dropzone">Drop files to upload.</p> '),n.fl()},templates.card_inline=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="'),n.b(n.v(n.f("cardUrl",e,t,0))),n.b('" class="inline-object"'),n.s(n.f("nameTruncated",e,t,1),e,t,0,61,78,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' title="'),i.b(i.v(i.f("name",e,t,0))),i.b('"')}),e.pop()),n.b("> "),n.s(n.f("nameTruncated",e,t,1),e,t,0,116,134,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("nameTruncated",e,t,0))),i.b("…")}),e.pop()),n.b(" "),n.s(n.f("nameTruncated",e,t,1),e,t,1,0,0,"")||n.b(n.v(n.f("name",e,t,0))),n.b(" </a> "),n.fl()},templates.card_menu_meta=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<hr> <p class="quiet bottom" style="padding: 6px 6px 4px;"> <span class="clearfix" style="display:block; margin-bottom: 6px;"> Card #'),n.b(n.v(n.f("idShort",e,t,0))),n.b(' </span> <span class="clearfix" style="display:block;"> <span>Link to this card</span> <span class="icon-sm icon-'),n.b(n.v(n.f("pLevelClass",e,t,0))),n.b('" title="'),n.b(n.v(n.f("pLevelAltText",e,t,0))),n.b('"></span> <input class="js-url js-autofocus inline-input" type="text" readonly="readonly" value="'),n.b(n.v(n.f("shortUrl",e,t,0))),n.b('"> </span> '),n.s(n.f("email",e,t,1),e,t,0,428,743,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("__ed",e,t,1),e,t,0,438,733,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="clearfix" style="display:block;"> <span>Email for this card</span> <span class="icon-sm icon-info" title="Emails sent to this address will appear as a comment by you on the card"></span> <input class="js-url inline-input" type="text" readonly="readonly" value="'),i.b(i.v(i.f("email",e,t,0))),i.b('"> </span> ')}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("dateAdded",e,t,1),e,t,0,768,823,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' Added <span class="date" dt="'),i.b(i.v(i.f("dateAdded",e,t,0))),i.b('"></span> - ')}),e.pop()),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,0,847,973,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="js-delete" href="#" title="Deleting is permanent. You will lose all actions associated with this card.">Delete</a> ')}),e.pop()),n.b(" </p> "),n.fl()},templates.card_title_on_card_front=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="card-short-id hide">#'),n.b(n.v(n.f("idShort",e,t,0))),n.b(" </span>"),n.b(n.v(n.f("name",e,t,0))),n.b(" "),n.fl()},templates.change_org_board_invite_restrict=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li> <a class="highlight-icon js-'),n.s(n.f("externalMembersDisabled",e,t,1),e,t,1,0,0,"")||n.b("enable"),n.s(n.f("externalMembersDisabled",e,t,1),e,t,0,123,130,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("disable")}),e.pop()),n.b('-restrict" href="#"> Disable invites '),n.s(n.f("externalMembersDisabled",e,t,1),e,t,0,223,258,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name">If disabled, organization members won’t be able to invite others outside of the organization. Org members wil still be able to add other org members to org boards.</span> </a> </li> '),n.fl()},templates.change_org_vis=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li> <a class="highlight-icon js-select-members" href="#"> Private'),n.s(n.f("permissionLevel_private",e,t,1),e,t,0,94,129,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name">'),n.b(n.v(n.f("privateText",e,t,0))),n.b('</span> </a> </li> <li> <a class="highlight-icon js-select-public" href="#"> Public'),n.s(n.f("permissionLevel_public",e,t,1),e,t,0,306,341,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name">'),n.b(n.v(n.f("publicText",e,t,0))),n.b("</span> </a> </li> "),n.fl()},templates.checkitem_inline=function(e,t,i){var n=this;return n.b(i=i||""),n.b(' checklist item "'),n.b(n.v(n.f("name",e,t,0))),n.b('" '),n.fl()},templates.checklist=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module-title window-module-title-no-divider clearfix'),n.s(n.f("__ed",e,t,1),e,t,0,80,88,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" ed grab")}),e.pop()),n.b('"> <span class="window-module-title-icon icon-lg icon-checklist"></span> '),n.s(n.f("__ed",e,t,1),e,t,0,179,1014,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="editable non-empty checklist-title" attr="name"> <h3 class="current hide-on-edit">'),i.b(i.v(i.f("name",e,t,0))),i.b('</h3> <div class="window-module-title-options"> '),i.s(i.f("__ed",e,t,1),e,t,0,339,726,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="#" class="hide hide-on-edit quiet js-show-checked-items-button js-show-checked-items" style="margin: 0 8px;">Show <span class="js-checked-items-count"></span>.</a> <a href="#" class="hide hide-on-edit quiet js-hide-checked-items-button js-hide-checked-items" style="margin: 0 8px;">Hide completed items.</a> <a href="#" class="hide-on-edit quiet js-confirm-delete">Delete…</a> ')}),e.pop()),i.b(" </div> <div class=\"edit edit-heavy\"> <input type=\"text\" class=\"field full single-line\"/> </div> <p class=\"edits-warning quiet\">You have unsaved edits on this field. <a href='#' class='js-view-edits'>View edits</a> or <a href='#' class='js-discard-edits'>discard</a>.</p> </div> ")}),e.pop()),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,1,0,0,"")||(n.b(" <h3>"),n.b(n.v(n.f("name",e,t,0))),n.b("</h3> ")),n.b(' </div> <div class="checklist-progress"> <span class="checklist-progress-percentage js-checklist-progress-percent">0%</span> <div class="checklist-progress-bar"> <div class="checklist-progress-bar-current js-checklist-progress-bar"></div> </div> <span class="checklist-completed-text hide quiet js-completed-message">Everything in this checklist is complete!</span> </div> <div class="checklist-items-list js-checklist-items-list js-no-higher-edits"></div> '),n.s(n.f("__ed",e,t,1),e,t,0,1527,2034,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="checklist-new-item gutter js-new-checklist-item"> <textarea class="checklist-new-item-text js-new-checklist-item-input" placeholder="Add an item…"></textarea> <div class="add-controls clearfix"> <input type="submit" class="primary confirm js-add-checklist-item" value="Add"> <a href="#" class="icon-lg icon-close dark-hover cancel js-cancel-checklist-item"></a> <a class="option options-menu dark-hover js-open-editing-menu" href="#"> <span class="icon-lg icon-menu"></span> </a> </div> </div> ')}),e.pop()),n.b(" "),n.fl()},templates.checklist_add_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <label for="id-checklist">Title</label> <input class="js-checklist-title js-autofocus" type="text" id="id-checklist" value="Checklist"> '),n.s(n.f("hasChecklistCards",e,t,1),e,t,0,165,530,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="js-copy-checklist"> <label for="js-checklist-copy-source">Copy Items From…</label> <select class="js-checklist-copy-source"> <option value="" selected>(none)</option> '),i.s(i.f("checklistCards",e,t,1),e,t,0,365,492,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <optgroup label="'),i.b(i.v(i.f("name",e,t,0))),i.b('"> '),i.s(i.f("checklists",e,t,1),e,t,0,409,464,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b(i.v(i.f("name",e,t,0))),i.b(" ("),i.b(i.v(i.f("length",e,t,0))),i.b(")</option> ")}),e.pop()),i.b(" </optgroup> ")}),e.pop()),i.b(" </select> </span> ")}),e.pop()),n.b(' <input type="submit" class="primary wide confirm js-add-checklist" value="Add"> </form> '),n.fl()},templates.checklist_inline=function(e,t,i){var n=this;return n.b(i=i||""),n.b(' checklist "'),n.b(n.v(n.f("name",e,t,0))),n.b('" '),n.fl()},templates.checklist_item=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="checklist-item-checkbox '),n.s(n.f("__ed",e,t,1),e,t,0,45,77,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("enabled js-toggle-checklist-item")}),e.pop()),n.b('">&#x2713;</div> <div class="checklist-item-details non-empty '),n.s(n.f("__ed",e,t,1),e,t,0,157,165,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("editable")}),e.pop()),n.b('" attr="name"> <p class="checklist-item-details-text current hide-on-edit markeddown js-checkitem-name"></p> '),n.s(n.f("__ed",e,t,1),e,t,0,292,606,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <div class=\"edit delete convert options-menu\"> <textarea type=\"text\" class=\"field full single-line js-checkitem-input\"></textarea> </div> <p class=\"edits-warning quiet\">You have unsaved edits on this field. <a href='#' class='js-view-edits'>View edits</a> or <a href='#' class='js-discard-edits'>discard</a>.</p> ")}),e.pop()),n.b(" </div> "),n.fl()},templates.chooser=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div id="login" class="login-container hide"> <h1>Login in to Trello!</h1> <button id=\'login-button\' class="login-button button-green">Login</button> </div> <div id="pickerApp" class="container hide js-chooser-app"> </div> <div id="app-footer"> <button id=\'choose\' class=\'hide disabled action-button js-choose\'>Choose</button> <button id=\'attach\'class=\'hide disabled action-button js-attach\'>Attach</button> <button id=\'cancel\' class="cancel-button js-cancel">Cancel</button> </div> '),n.fl()},templates.chooser_search=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div id="chooser-header"> <div class="header-logo-default"></div> <div class=\'header-user\'> <div class=\'header-btn header-member\'> <span class="member"></span> <span class="header-btn-text js-member-name"></span> </div> </div> </div> <div class="header-search js-search-box"> <input class="header-search-input js-search-input" type="text" autocomplete="off" autocorrect="off" spellcheck="false"/> <span class="header-search-icon icon-lg icon-search light js-search-icon js-search-focus"></span> <span class="header-search-icon header-search-icon-close icon-lg icon-close light hide js-close-icon js-search-close"></span> </div> <div id="content"></div> '),n.fl()},templates.closed_boards=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-header"> <span class="window-header-icon icon-lg icon-archive"/> <h2 class="window-title">Closed Boards</h2> </div> <div class="window-main-col"> '),n.s(n.f("empty",e,t,1),e,t,1,0,0,"")||n.b(' <div class="window-module clearfix"> <ul class="archive-list gutter js-archive-items"/> </div> '),n.b(" "),n.s(n.f("empty",e,t,1),e,t,0,292,346,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="empty-list">No boards have been closed</p> ')}),e.pop()),n.b(' </div> <div class="window-sidebar"> <p class="helper">You have to have been a board admin to re-open a closed board.</p> </div> '),n.fl()},templates.comment_edit_controls=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="edit-controls clearfix"> '),n.b(n.rp("comment_options",e,t,"")),n.b(' <input type="submit" class="primary confirm js-save-edit" value="Save" tabindex="2"> </div> '),n.fl()},templates.comment_options=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="clearfix" style="margin-bottom: 6px;"> <a href="#" class="quiet-button left js-comment-add-attachment" title="Attach files from your computer, Google Drive, Dropbox, OneDrive, or Box. You can also drag\'n\'drop files from your desktop to upload them.">Add an attachment…</a> <a href="#" class="quiet-button left js-comment-mention-member" title="Make sure a member gets a notification about this comment.">Mention a member…</a> <a href="#" class="quiet-button left js-comment-add-emoji" title="Add emoji to this comment.">Add emoji…</a> <a href="#" class="quiet-button left js-comment-add-card" title="Link to a card in this comment.">Add card…</a> </div> '),n.fl()},templates.confirm=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<p> "),n.b(n.v(n.f("text",e,t,0))),n.b(' </p> <input type="submit" class="js-confirm '),n.b(n.v(n.f("confirmBtnClass",e,t,0))),n.s(n.f("cancelText",e,t,1),e,t,1,0,0,"")||n.b(" full"),n.b('" value="'),n.b(n.v(n.f("confirmText",e,t,0))),n.b('"> '),n.s(n.f("cancelText",e,t,1),e,t,0,153,217,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <input type="submit" class="js-cancel" value="'),i.b(i.v(i.f("cancelText",e,t,0))),i.b('"> ')}),e.pop()),n.b(" "),n.fl()},templates.confirm_merge=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p> You are about to add the email address <span class="bold">'),n.b(n.v(n.f("ghostEmail",e,t,0))),n.b('</span> to the account </p> <ul class="pop-over-member-list js-member"> </ul> <input type="submit" class="js-confirm full" value="'),n.b(n.v(n.f("confirmText",e,t,0))),n.b('"> '),n.fl()},templates.connect_failed=function(e,t,i){var n=this;return n.b(i=i||""),n.b(n.v(n.f("msg",e,t,0))),n.b("<br /> "),n.s(n.f("allowReset",e,t,1),e,t,0,29,101,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" onclick="window.ajaxQueueReset(); return false;">Retry</a> ')}),e.pop()),n.b(' <a href="#" onclick="window.location.reload()">Reload page</a> '),n.fl()},templates.credit_card=function(e,t,i){var n=this;return n.b(i=i||""),n.b(" "),n.s(n.f("formAreas_subscribingTo",e,t,1),e,t,0,29,106,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="gutter quiet">Subscribing to <strong>'),i.b(i.v(i.f("productName",e,t,0))),i.b("</strong></p> ")}),e.pop()),n.b(' <form class="credit-card-form" method="POST"> <p class="gutter error hidden"></p> <input name="products" type="hidden" maxlength="50" size="30" id="products" value="'),n.b(n.v(n.f("productNumber",e,t,0))),n.b('"> '),n.s(n.f("formAreas_billingOptions",e,t,1),e,t,0,349,1475,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="window-module"> <div class="window-module-title"> <h3>Billing</h3> </div> <div class="gutter clearfix"> '),i.s(i.f("productOptions",e,t,1),e,t,0,485,1254,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="radio-div clear clearfix" style="margin-bottom: 4px;"> <input type="radio" name="product" value="'),i.b(i.v(i.f("id",e,t,0))),i.b('" id="product-'),i.b(i.v(i.f("id",e,t,0))),i.b('"'),i.s(i.f("checked",e,t,1),e,t,0,634,642,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" checked")}),e.pop()),i.b('> <label for="product-'),i.b(i.v(i.f("id",e,t,0))),i.b('"> '),i.s(i.f("isMonthly",e,t,1),e,t,0,699,931,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Monthly "),i.s(i.f("isPerUser",e,t,1),e,t,0,722,863,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("totalPerUserPrice",e,t,1),e,t,0,745,781,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" - $"),i.b(i.v(i.f("totalPerUserPrice",e,t,0))),i.b(" per month ")}),e.pop()),i.b(" ($"),i.b(i.v(i.f("price",e,t,0))),i.b(" per "),i.b(i.v(i.f("billableMemberCount",e,t,0))),i.b(" members per month) ")}),e.pop()),i.b(" "),i.s(i.f("isPerUser",e,t,1),e,t,1,0,0,"")||(i.b(" ($"),i.b(i.v(i.f("price",e,t,0))),i.b(" per month) ")),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("isYearly",e,t,1),e,t,0,959,1224,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Yearly "),i.s(i.f("isPerUser",e,t,1),e,t,0,981,1120,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("totalPerUserPrice",e,t,1),e,t,0,1004,1039,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" - $"),i.b(i.v(i.f("totalPerUserPrice",e,t,0))),i.b(" per year ")}),e.pop()),i.b(" ($"),i.b(i.v(i.f("price",e,t,0))),i.b(" per "),i.b(i.v(i.f("billableMemberCount",e,t,0))),i.b(" members per year) ")}),e.pop()),i.b(" "),i.s(i.f("isPerUser",e,t,1),e,t,1,0,0,"")||(i.b(" ($"),i.b(i.v(i.f("price",e,t,0))),i.b(" per year) ")),i.b(" "),i.s(i.f("save",e,t,1),e,t,0,1196,1214,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" (Save "),i.b(i.v(i.f("save",e,t,0))),i.b("!) ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" </label> </div> ")}),e.pop()),i.b(" "),i.s(i.f("showRecommend",e,t,1),e,t,0,1292,1442,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="recommend" style="margin-top: 16px;"> …or get '),i.b(i.v(i.f("productName",e,t,0))),i.b(' for free by <a href="/recommend">inviting new members to Trello</a> </div> ')}),e.pop()),i.b(" </div> </div> ")}),e.pop()),n.b(" "),n.s(n.f("formAreas_creditCard",e,t,1),e,t,0,1530,13881,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="window-module"> <div class="window-module-title"> <h3>Credit Card for account</h3> </div> <div class="gutter" style="margin-top: 12px;"> <label for="name"> Name: <span class="quiet">(as it appears on the credit card)</span></label> <input name="name" type="text" maxlength="50" size="30" id="name" class="text"> <label for="name" class="form-error hide">Please provide your full name, as shown on the card, for credit card verification.</label> <div class="left"> <label for="cardNumber">Card Number:</label> <input name="cardNumber" type="text" maxlength="19" size="16" id="cardNumber" autocomplete="off" style="width:190px;margin-right:16px;"> <label for="cardNumber" class="form-error hide" style="width:190px;margin-right:16px;">Please provide your full card number for credit card verification.</label> </div> <div class="left"> <label for="cvv">CVV:</label> <input name="cvv" type="text" maxlength="4" size="4" id="cvv" style="width:45px;"> </div> <br class="clear"> <label for="expMonth"> Expiration date: </label> <div class="clearfix"> <select name="expMonth" style="width:120px;margin-right:8px;display:inline;"> <option value="01">01 - January</option> <option value="02">02 - February</option> <option value="03">03 - March</option> <option value="04">04 - April</option> <option value="05">05 - May</option> <option value="06">06 - June</option> <option value="07">07 - July</option> <option value="08">08 - August</option> <option value="09">09 - September</option> <option value="10">10 - October</option> <option value="11">11 - November</option> <option value="12">12 - December</option> </select> <select name="expYear" style="width:100px;display:inline;"> <option value="14" selected="selected">2014</option> <option value="15">2015</option> <option value="16">2016</option> <option value="17">2017</option> <option value="18">2018</option> <option value="19">2019</option> <option value="20">2020</option> <option value="21">2021</option> <option value="22">2022</option> <option value="23">2023</option> <option value="24">2024</option> <option value="25">2025</option> <option value="26">2026</option> <option value="27">2027</option> <option value="28">2028</option> <option value="29">2029</option> <option value="30">2030</option> <option value="31">2031</option> <option value="32">2032</option> <option value="33">2033</option> <option value="34">2034</option> <option value="35">2035</option> <option value="36">2036</option> <option value="37">2037</option> <option value="38">2038</option> </select> </div> <br class="clear"> </div> <div class="window-module"> <div class="window-module-title"> <h3>Billing Address</h3> </div> <div class="gutter" style="margin-top: 12px;"> <label for="companyName" class="quiet">Company Name:</label> <input name="companyName" type="text" maxlength="50" size="30" id="companyName" class="text"> <label for="streetAddress1">Street Address 1:</label> <input name="streetAddress1" type="text" maxlength="255" size="30" id="streetAddress1" class="text"> <label for="streetAddress1" class="form-error hide">Please enter your address.</label> <label for="streetAddress2" class="quiet">Street Address 2:</label> <input name="streetAddress2" type="text" maxlength="255" size="30" id="streetAddress2" class="text"> <label for="city">City:</label> <input name="city" type="text" maxlength="30" size="30" id="city" class="text"> <label for="city" class="form-error hide">Please enter your city.</label> <label for="state">State/Province/Region:</label> <input name="state" type="text" maxlength="20" size="30" id="state" class="text"> <label for="state" class="form-error hide">U.S. and Canada addresses require a two-letter abbreviation.</label> <label for="zipCode">ZIP/Postal Code:</label> <input name="zipCode" type="text" maxlength="10" size="30" id="zipCode" class="text"> <label for="zipCode" class="form-error hide">U.S. addresses require a 5 or 9 digit zip code.</label> <label for="country">Country:</label> <select name="country" id="country"> <option selected="selected" value="US">United States</option> <option value="GB">United Kingdom</option> <option value="CA">Canada</option> <option value="AU">Australia</option> <option value="DE">Germany</option> <option value="NL">Netherlands</option> <option value="AF">Afghanistan</option> <option value="AL">Albania</option> <option value="DZ">Algeria</option> <option value="AS">American Samoa</option> <option value="AD">Andorra</option> <option value="AI">Anguilla</option> <option value="AG">Antiqua and Barbuda</option> <option value="AR">Argentina</option> <option value="AM">Armenia</option> <option value="AW">Aruba</option> <option value="AU">Australia</option> <option value="AT">Austria</option> <option value="AZ">Azerbaijan</option> <option value="BS">Bahamas</option> <option value="BH">Bahrain</option> <option value="BD">Bangladesh</option> <option value="BB">Barbados</option> <option value="BY">Belarus</option> <option value="BE">Belgium</option> <option value="BZ">Belize</option> <option value="BJ">Benin</option> <option value="BM">Bermuda</option> <option value="BT">Bhutan</option> <option value="BO">Bolivia</option> <option value="BV">Bouvet Islands</option> <option value="BR">Brazil</option> <option value="IO">British Indian Ocean Territory</option> <option value="VI">British Virgin Islands</option> <option value="BN">Brunei</option> <option value="BG">Bulgaria</option> <option value="BF">Burkina Faso</option> <option value="BI">Burundi</option> <option value="KH">Cambodia</option> <option value="CM">Cameroon</option> <option value="CA">Canada</option> <option value="CV">Cape Verde</option> <option value="KY">Cayman Islands</option> <option value="CF">Central African Republic</option> <option value="TD">Chad</option> <option value="CL">Chile</option> <option value="CN">China</option> <option value="CO">Colombia</option> <option value="KM">Comoros</option> <option value="CG">Congo</option> <option value="CR">Costa Rica</option> <option value="CI">Cote D’Ivoire</option> <option value="HR">Croatia</option> <option value="CY">Cyprus</option> <option value="CZ">Czech Republic</option> <option value="DK">Denmark</option> <option value="DJ">Djibouti</option> <option value="DM">Dominica</option> <option value="DO">Dominican Republic</option> <option value="EG">Egypt</option> <option value="SV">El Salvador</option> <option value="EC">Equador</option> <option value="GQ">Equatorial Guinea</option> <option value="ER">Eritrea</option> <option value="EE">Estonia</option> <option value="ET">Ethiopia</option> <option value="FK">Falkland Islands</option> <option value="FO">Faroe Islands</option> <option value="FM">Federated States of Micronesia</option> <option value="FJ">Fiji</option> <option value="FI">Finland</option> <option value="FR">France</option> <option value="GF">French Guiana</option> <option value="PF">French Polynesia</option> <option value="GA">Gabon</option> <option value="GM">Gambia</option> <option value="GE">Georgia</option> <option value="DE">Germany</option> <option value="GH">Ghana</option> <option value="GI">Gibraltar</option> <option value="GR">Greece</option> <option value="GL">Greenland</option> <option value="GD">Grenada</option> <option value="GP">Guadeloupe</option> <option value="GU">Guam</option> <option value="GT">Guatemala</option> <option value="GN">Guinea</option> <option value="GW">Guinea-Bissau</option> <option value="GY">Guyana</option> <option value="HT">Haiti</option> <option value="HN">Honduras</option> <option value="HK">Hong Kong</option> <option value="HU">Hungary</option> <option value="IS">Iceland</option> <option value="IN">India</option> <option value="ID">Indonesia</option> <option value="IE">Ireland</option> <option value="IL">Israel</option> <option value="IT">Italy</option> <option value="JM">Jamaica</option> <option value="JP">Japan</option> <option value="JO">Jordan</option> <option value="KZ">Kazakhstan</option> <option value="KE">Kenya</option> <option value="KI">Kiribati</option> <option value="KW">Kuwait</option> <option value="KG">Kyrgyzstan</option> <option value="LA">Laos</option> <option value="LV">Latvia</option> <option value="LB">Lebanon</option> <option value="LS">Lesotho</option> <option value="LR">Liberia</option> <option value="LI">Liechtenstein</option> <option value="LT">Lithuania</option> <option value="LU">Luxembourg</option> <option value="MO">Macau</option> <option value="MG">Madagascar</option> <option value="MW">Malawi</option> <option value="MY">Malaysia</option> <option value="MV">Maldives</option> <option value="ML">Mali</option> <option value="MT">Malta</option> <option value="MH">Marshall Islands</option> <option value="MQ">Martinique</option> <option value="MR">Mauritania</option> <option value="MU">Mauritius</option> <option value="YT">Mayotte</option> <option value="FX">Metropolitan France</option> <option value="MX">Mexico</option> <option value="MD">Moldova</option> <option value="MN">Mongolia</option> <option value="MA">Morocco</option> <option value="MZ">Mozambique</option> <option value="NA">Namibia</option> <option value="NR">Nauru</option> <option value="NP">Nepal</option> <option value="AN">Netherlands Antilles</option> <option value="NL">Netherlands</option> <option value="NC">New Caledonia</option> <option value="NZ">New Zealand</option> <option value="NI">Nicaragua</option> <option value="NE">Niger</option> <option value="NG">Nigeria</option> <option value="MP">Northern Mariana Islands</option> <option value="NO">Norway</option> <option value="OM">Oman</option> <option value="PK">Pakistan</option> <option value="PW">Palau</option> <option value="PA">Panama</option> <option value="PG">Papua New Guinea</option> <option value="PY">Paraguay</option> <option value="PE">Peru</option> <option value="PE">Peru</option> <option value="PH">Philippines</option> <option value="PN">Pitcairn</option> <option value="PL">Poland</option> <option value="PT">Portugal</option> <option value="PR">Puerto Rico</option> <option value="QA">Qatar</option> <option value="KR">Republic of Korea</option> <option value="RE">Reunion</option> <option value="RO">Romania</option> <option value="RU">Russia</option> <option value="ST">Sao Tome and Principe</option> <option value="SA">Saudi Arabia</option> <option value="SN">Senegal</option> <option value="RS">Serbia</option> <option value="SC">Seychelles</option> <option value="SL">Sierra Leone</option> <option value="SG">Singapore</option> <option value="SK">Slovakia</option> <option value="SI">Slovenia</option> <option value="SB">Solomon Islands</option> <option value="SO">Somalia</option> <option value="ZA">South Africa</option> <option value="ES">Spain</option> <option value="LK">Sri Lanka</option> <option value="SH">St. Helena</option> <option value="KN">St. Kitts and Nevis</option> <option value="LC">St. Lucia</option> <option value="VC">St. Vincent and the Grenadines</option> <option value="SD">Sudan</option> <option value="SR">Suriname</option> <option value="SJ">Svalbard and Jan Mayen Islands</option> <option value="SZ">Swaziland</option> <option value="SE">Sweden</option> <option value="CH">Switzerland</option> <option value="SY">Syria</option> <option value="TW">Taiwan</option> <option value="TJ">Tajikistan</option> <option value="TZ">Tanzania</option> <option value="TH">Thailand</option> <option value="MK">The former Yugoslav Republic of Macedonia</option> <option value="TG">Togo</option> <option value="TO">Tonga</option> <option value="TT">Trinidad and Tobago</option> <option value="TR">Turkey</option> <option value="TM">Turkmenistan</option> <option value="TC">Turks and Caicos Islands</option> <option value="TV">Tuvalu</option> <option value="UG">Uganda</option> <option value="UA">Ukraine</option> <option value="AE">United Arab Emirates</option> <option value="GB">United Kingdom</option> <option value="US">United States</option> <option value="UY">Uruguay</option> <option value="UZ">Uzbekistan</option> <option value="VU">Vanuatu</option> <option value="VA">Vatican City</option> <option value="VE">Venezuela</option> <option value="VN">Vietnam</option> <option value="EH">Western Sahara</option> <option value="YE">Yemen</option> <option value="ZR">Zaire</option> <option value="ZM">Zambia</option> <option value="ZW">Zimbabwe</option> </select> </div> </div> ')}),e.pop()),n.b(" "),n.s(n.f("formAreas_billingContactHidden",e,t,1),e,t,0,13942,14191,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <input name="billingContactFullName" type="hidden" id="billingContactFullName" class="text" value="'),i.b(i.v(i.f("billingFullName",e,t,0))),i.b('" maxlength="50"> <input name="billingContactEmail" type="hidden" id="billingContactEmail" class="text" value="'),i.b(i.v(i.f("billingEmail",e,t,0))),i.b('"> ')}),e.pop()),n.b(' <hr class="gutter"> '),n.s(n.f("formAreas_creditCard",e,t,1),e,t,0,14272,14836,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div id="divAcceptTOS" class="gutter"> <p class="js-tos-error error hide">You must accept the Terms of Service and Privacy Policy</p> <div class="check-div clearfix"> <input id="acceptTOS" class="inline bottom" type="checkbox" name="acceptTOS" value="true"> <label for="acceptTOS" class="inline bottom">I accept the <a href="https://trello.com/legal/" target="_blank" rel="popup" title="Terms of Service">Terms of Service</a> and the <a href="https://trello.com/privacy" target="_blank" rel="popup" title="Privacy Policy">Privacy Policy</a></label> </div> </div> ')}),e.pop()),n.b(' <hr class="gutter"> <div class="gutter"> <input type="submit" name="'),n.b(n.v(n.f("action",e,t,0))),n.b('" value="Continue" id="save" class="primary '),n.b(n.v(n.f("action",e,t,0))),n.b('"> </div> </form> '),n.fl()},templates.crop_photo=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<img class="crop-image"> <button class="primary js-done">Looks good!</button> <button class="js-back">Try again…</button> '),n.fl()},templates.date_picker=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="datepicker-select clearfix"> <div class="datepicker-select-date"> <label class="datepicker-select-label"> Date </label> <input type="text" class="datepicker-select-input js-dpicker-date-input js-autofocus" placeholder="Enter date" tabindex=1> </div> <div class="datepicker-select-time"> <label class="datepicker-select-label"> Time </label> <input type="text" class="datepicker-select-input js-dpicker-time-input" placeholder="Enter time" value="12:00pm" tabindex=2> <select class="js-dpicker-time-select"></select> </div> </div> <div class="pickers clear js-dpicker-cal"></div> <div class="datepicker-confirm-btns"> <input type="submit" class="primary wide confirm js-save-edit" value="Save" tabindex=3> '),n.s(n.f("hasDueDate",e,t,1),e,t,0,732,816,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="button negate remove-date js-remove-date" tabindex=4>Remove</a> ')
}),e.pop()),n.b(' </div> <div class="js-enable-cal hide"> <hr> <p> <a href="#" class="quiet-button w-img js-enable-calendar-powerup"><span class="icon-sm icon-rocket"></span>Enable the Calendar Power-Up!</a> </p> <p class="bottom quiet"> You’ll get a calendar view of your cards and an iCal feed. Woo! </p> </div> <div class="js-cal-enabled hide"> <hr> <p class="helper"> Click the “Calendar” button in the board header to open the calendar. '),n.s(n.f("__own",e,t,1),e,t,0,1266,1339,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("To change calendar settings, click “Power-Ups” in the board sidebar menu.")}),e.pop()),n.b(" </p> </div> "),n.fl()},templates.dialog_close_button=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="icon-lg icon-close dialog-close-button js-close-window" href="#" title="Close this dialog window."></a> '),n.fl()},templates.early_version_feedback_form=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="early-feedback-section-background"></div> <div class="early-feedback-section markeddown"> <h1 class="early-feedback-section-header">Ahoy, Explorer!</h1> <p class="early-feedback-section-intro-text"> You’re sailing the uncharted seas of a new, exploratory version of Trello. Not everyone has this version yet and your feedback could determine what stays, goes, or changes. </p> <p class="early-feedback-section-intro-text"> What’s new in this version? There’s a whole new card back! </p> <ul class="early-feedback-section-intro-text"> <li>You can see <strong>card covers and stickers</strong> on the back.</li> <li><strong>Attachments display in Trello</strong> and have bigger, nicer previews.</li> <li>The card is <strong>wider and more streamlined</strong>, making more room for your stuff.</li> </ul> <p class="early-feedback-section-intro-text"> In the form below, let us know if you loved something new, found something confusing, or noticed something strange. This will go to our inbox. Although we can’t promise to respond, we’ll definitely read it. <strong>Please keep it related to the changes to the card back!</strong> Thanks! </p> <p class="early-feedback-section-intro-text"> Safe travels,<br> The Trello Team </p> <hr> <p class="quiet hide js-submitted-feedback"> Thanks! Your feedback has been submitted. You’ll be able to see this form for a while so please send us more feedback in the future if you have it. </p> <form class="js-feedback-form"> <p>Dear Trello Team,</p> <textarea name="bodytext" class="js-autofocus js-feedback-form-text"></textarea> <input class="wide primary js-feedback-form-submit" type="submit" value="Send"> </form> </div> '),n.fl()},templates.edit_controls=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="edit-controls clearfix"> <input type="submit" class="primary confirm js-save-edit" value="Save"> <a href="#" class="icon-lg icon-close dark-hover cancel js-cancel-edit"></a> <a href="#" class="option delete js-delete-item">Delete</a> <a href="#" class="option convert js-convert-item-to-card">Convert to Card</a> <a class="option options-menu dark-hover js-open-editing-menu" href="#"> <span class="icon-lg icon-menu"> </a> </div> '),n.fl()},templates.edit_in_progress=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("members",e,t,1),e,t,0,12,451,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="edit-in-progress"> <span class="inline-member"> '),i.s(i.f("avatarHash",e,t,1),e,t,0,89,238,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<img class="inline-member-av" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("avatarHash",e,t,0))),i.b('/30.png" alt="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')" title="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')" />')}),e.pop()),i.b(" "),i.s(i.f("avatarHash",e,t,1),e,t,1,0,0,"")||(i.b('<span class="quiet initials" title="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')">'),i.b(i.v(i.f("initials",e,t,0))),i.b("</span>")),i.b(" </span>"),i.s(i.f("icon",e,t,1),e,t,0,385,433,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<span class="icon icon-sm icon-'),i.b(i.v(i.f("icon",e,t,0))),i.b('"></span>')}),e.pop()),i.b(" </span> ")}),e.pop()),n.fl()},templates.embedly=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="embed embed-'),n.b(n.v(n.f("type",e,t,0))),n.b(" embed-provider-"),n.b(n.v(n.f("provider_name",e,t,0))),n.b('"> '),n.s(n.f("type_photo",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("requireHttps",e,t,1),e,t,0,101,116,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.t(i.f("htmlHttps",e,t,0)))}),e.pop()),n.s(n.f("requireHttps",e,t,1),e,t,1,0,0,"")||n.b(n.t(n.f("html",e,t,0))),n.b(" ")),n.b(" "),n.s(n.f("type_photo",e,t,1),e,t,0,209,278,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("originalUrl",e,t,0))),i.b('" target="_blank"><img src="'),i.b(i.v(i.f("url",e,t,0))),i.b('" /></a> ')}),e.pop()),n.b(" </div> "),n.fl()},templates.emoji_upgrade_ad=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("hasGold",e,t,1),e,t,1,0,0,"")||n.b(' <p> You can upload custom emoji with <a href="/gold">Trello Gold</a>. </p> '),n.b(" "),n.s(n.f("hasJPS",e,t,1),e,t,1,0,0,"")||n.b(' <p> Looking to get custom emoji for your entire organization? <a href="/business-class">Check out Business Class.</a> </p> '),n.b(" "),n.s(n.f("hasOldBC",e,t,1),e,t,1,0,0,"")||n.b(' <p> Looking to get custom emoji for your entire organization? <a href="/business-class">Check out Business Class.</a> </p> '),n.b(" "),n.fl()},templates.empty_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="empty-list '),n.b(n.v(n.f("classes",e,t,0))),n.b('" style="'),n.b(n.v(n.f("style",e,t,0))),n.b('">'),n.b(n.v(n.f("message",e,t,0))),n.b("</p> "),n.fl()},templates.entity=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("textType",e,t,1),e,t,0,13,130,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isContext",e,t,1),e,t,0,28,76,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("hideIfContext",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.b(i.v(i.f("text",e,t,0))),i.b(" ")),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("isContext",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.b(i.v(i.f("text",e,t,0))),i.b(" ")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("cardType",e,t,1),e,t,0,157,331,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isContext",e,t,1),e,t,0,172,221,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("hideIfContext",e,t,1),e,t,1,0,0,"")||i.b(" this card "),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("isContext",e,t,1),e,t,1,0,0,"")||(i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="inline-object action-card">'),i.b(i.v(i.f("name",e,t,0))),i.b("</a> ")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("boardType",e,t,1),e,t,0,359,484,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isContext",e,t,1),e,t,0,374,386,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" this board ")}),e.pop()),i.b(" "),i.s(i.f("isContext",e,t,1),e,t,1,0,0,"")||(i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="inline-object">'),i.b(i.v(i.f("name",e,t,0))),i.b("</a> ")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("organizationType",e,t,1),e,t,0,520,832,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isContext",e,t,1),e,t,0,535,554,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" this organization ")}),e.pop()),i.b(" "),i.s(i.f("isContext",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("url",e,t,1),e,t,0,592,774,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("displayName",e,t,1),e,t,0,609,670,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="inline-object">'),i.b(i.v(i.f("displayName",e,t,0))),i.b("</a> ")}),e.pop()),i.b(" "),i.s(i.f("displayName",e,t,1),e,t,1,0,0,"")||(i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="inline-object">'),i.b(i.v(i.f("name",e,t,0))),i.b("</a> ")),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("url",e,t,1),e,t,1,0,0,"")||i.b(" an organization "),i.b(" ")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("listType",e,t,1),e,t,0,867,877,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("checklistType",e,t,1),e,t,0,909,919,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("checkItemType",e,t,1),e,t,0,956,1033,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("nameHtml",e,t,1),e,t,0,970,984,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.t(i.f("nameHtml",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("nameHtml",e,t,1),e,t,1,0,0,"")||i.b(i.v(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("commentType",e,t,1),e,t,0,1068,1290,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="action-comment markeddown"> '),i.s(i.f("canEdit",e,t,1),e,t,1,0,0,"")||i.b(i.t(i.f("textHtml",e,t,0))),i.b(" "),i.s(i.f("canEdit",e,t,1),e,t,0,1160,1270,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="current-comment">'),i.b(i.t(i.f("textHtml",e,t,0))),i.b('</div> <textarea class="js-text" tabindex="1">'),i.b(i.v(i.f("text",e,t,0))),i.b("</textarea> ")}),e.pop()),i.b(" </div> ")}),e.pop()),n.b(" "),n.s(n.f("labelType",e,t,1),e,t,0,1321,1502,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="card-label '),i.b(i.v(i.f("color",e,t,0))),i.b('-label" title="'),i.s(i.f("text",e,t,1),e,t,0,1379,1387,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("text",e,t,0)))}),e.pop()),i.s(i.f("text",e,t,1),e,t,1,0,0,"")||(i.b(i.v(i.f("color",e,t,0))),i.b(" label (default)")),i.b('"> '),i.s(i.f("text",e,t,1),e,t,0,1451,1459,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("text",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("text",e,t,1),e,t,1,0,0,"")||i.b("&nbsp;"),i.b(" </span> ")}),e.pop()),n.b(" "),n.s(n.f("attachmentType",e,t,1),e,t,0,1536,1939,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("known",e,t,1),e,t,0,1547,1709,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" target="_blank" class="known-service-link"><img class="known-service-icon" src="'),i.b(i.v(i.f("icon",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("name",e,t,0))),i.b('"><span id="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b(i.v(i.f("text",e,t,0))),i.b("</span></a> ")}),e.pop()),i.b(" "),i.s(i.f("known",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("link",e,t,1),e,t,0,1740,1849,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="js-open-attachment-viewer" data-idattachment="'),i.b(i.v(i.f("id",e,t,0))),i.b('" target="_blank">'),i.b(i.v(i.f("name",e,t,0))),i.b("</a> ")}),e.pop()),i.b(" "),i.s(i.f("link",e,t,1),e,t,1,0,0,"")||(i.b(' <span class="attachment-deleted">'),i.b(i.v(i.f("name",e,t,0))),i.b("</span> ")),i.b(" ")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("attachmentPreviewType",e,t,1),e,t,0,1985,2352,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("showAttachmentPreview",e,t,1),e,t,0,2012,2325,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("canPreview",e,t,1),e,t,0,2028,2309,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isImage",e,t,1),e,t,0,2041,2202,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a class="js-open-attachment-viewer" href="'),i.b(i.v(i.f("originalUrl",e,t,0))),i.b('" target="_blank" data-idattachment="'),i.b(i.v(i.f("id",e,t,0))),i.b('"><img class="attachment-image-preview" src="'),i.b(i.v(i.f("url",e,t,0))),i.b('" /></a>')}),e.pop()),i.b(" "),i.s(i.f("isImage",e,t,1),e,t,1,0,0,"")||(i.b('<iframe class="attachment-non-image-preview" src="'),i.b(i.v(i.f("url",e,t,0))),i.b('" ></iframe>')),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("memberType",e,t,1),e,t,0,2394,2688,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="inline-member js-show-mem-menu" idMember="'),i.b(i.v(i.f("id",e,t,0))),i.b('"> '),i.s(i.f("avatarHash",e,t,1),e,t,0,2474,2625,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <img class="inline-member-av" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("avatarHash",e,t,0))),i.b('/30.png" alt="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')" title="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')" /> ')}),e.pop()),i.b(' <span class="bold">'),i.b(i.v(i.f("fullName",e,t,0))),i.b("</span> </span> ")}),e.pop()),n.b(" "),n.s(n.f("relDateType",e,t,1),e,t,0,2720,2795,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="rel-date" dt="'),i.b(i.v(i.f("date",e,t,0))),i.b('" text="'),i.b(i.v(i.f("text",e,t,0))),i.b('"> '),i.b(i.v(i.f("current",e,t,0))),i.b(" </span> ")}),e.pop()),n.b(" "),n.fl()},templates.error=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("notFound",e,t,1),e,t,0,13,395,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="big-message quiet"> <h1> Page not found. </h1> '),i.s(i.f("__loggedIn",e,t,1),e,t,1,0,0,"")||(i.b(' <p> This page may be private. You may be able to view it by <a href="/login?returnUrl='),i.b(i.v(i.f("url",e,t,0))),i.b('">logging in</a>. </p> ')),i.b(" "),i.s(i.f("__loggedIn",e,t,1),e,t,0,236,372,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <p> This page may be private. If someone gave you this link, they may need to invite you to one of their boards or organizations. </p> ")}),e.pop()),i.b(" </div> ")}),e.pop()),n.b(" "),n.s(n.f("boardNotFound",e,t,1),e,t,0,427,812,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="big-message quiet"> <h1> Board not found. </h1> '),i.s(i.f("__loggedIn",e,t,1),e,t,1,0,0,"")||(i.b(' <p> This board may be private. You may be able to view it by <a href="/login?returnUrl='),i.b(i.v(i.f("url",e,t,0))),i.b('">logging in</a>. </p> ')),i.b(" "),i.s(i.f("__loggedIn",e,t,1),e,t,0,652,789,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <p> This board may be private. If someone gave you this link, they may need to invite you to one of their boards or organizations. </p> ")}),e.pop()),i.b(" </div> ")}),e.pop()),n.b(" "),n.s(n.f("cardNotFound",e,t,1),e,t,0,848,1252,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="big-message quiet"> <h1> Card not found. </h1> '),i.s(i.f("__loggedIn",e,t,1),e,t,1,0,0,"")||(i.b(' <p> This card may be on a private board. You may be able to view it by <a href="/login?returnUrl='),i.b(i.v(i.f("url",e,t,0))),i.b('">logging in</a>. </p> ')),i.b(" "),i.s(i.f("__loggedIn",e,t,1),e,t,0,1082,1229,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <p> This card may be on a private board. If someone gave you this link, they may need to invite you to one of their boards or organizations. </p> ")}),e.pop()),i.b(" </div> ")}),e.pop()),n.b(" "),n.s(n.f("unconfirmedNotFound",e,t,1),e,t,0,1294,1981,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="big-message with-picture quiet"> <img src="https://d78fikflryjgj.cloudfront.net/images/656dc3a1db8d11cde974d7402898fb75/TacoBouncer.png" width="459" height="238" alt="Bouncer Taco" title="Bouncer Taco" /> <h1> Roooooo are you? </h1> <p>Please confirm your email address to view this '),i.b(i.v(i.f("modelType",e,t,0))),i.b('.</p> <div class="callout"> <ol> <li>Check your email at <strong>'),i.b(i.v(i.f("email",e,t,0))),i.b('</strong>.</li> <li>Look for an email with the subject "Trello Account Confirmation."</li> <li>Click on the confirmation link. Done!</li> </ol> </div> <p>Don\'t see anything from us? <a class="quiet js-resend-confirmation-email" href="#" style="margin-left: 3px;">Resend confirmation link.</a></p> </div> ')}),e.pop()),n.b(" "),n.fl()},templates.factoid_bc_banner=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="bc-pitch js-bc-ad" href="'),n.b(n.v(n.f("url",e,t,0))),n.b('"> <span class="mark business-class-mark" alt="Trello Business Class Logo"/> <span class="title">Get Business Class</span> <span class="pitchlet"> Supercharge your organization. </span> </a> '),n.fl()},templates.factoid_bc_banner_upgrade=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="bc-pitch-upgrade js-bc-ad" href="'),n.b(n.v(n.f("url",e,t,0))),n.b('"> <span class="title">There’s a new Business Class update available!</span> <span class="pitchlet"> Check out the new features and upgrade! </span> </a> '),n.fl()},templates.factoid_gold_banner=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="gold-pitch js-gold-ad" href="/gold"> <span class="mark gold-mark" alt="Trello Gold Logo"/> <span class="title">Get Trello Gold</span> <span class="pitchlet"> Support Trello and get extra fun and functionality. </span> </a> '),n.fl()},templates.filter_cards=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<input type="text" class="js-input js-autofocus" attr="title" value="'),n.b(n.v(n.f("title",e,t,0))),n.b('" style="margin-bottom: 0;"> <div class="js-filter-search-results"/> '),n.fl()},templates.filter_cards_search_results=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("showHelper",e,t,1),e,t,0,15,156,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="quiet" style="padding: 10px 8px 2px; margin-bottom: 0;"> Type to filter by term or search for labels, members, or due times. </p> ')}),e.pop()),n.b(" "),n.s(n.f("showLabels",e,t,1),e,t,0,187,725,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <ul class="pop-over-label-list checkable'),i.s(i.f("filtering",e,t,1),e,t,0,247,256,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" filtered")}),e.pop()),i.b('"> '),i.s(i.f("labels",e,t,1),e,t,0,284,707,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class="item'),i.s(i.f("isActive",e,t,1),e,t,0,313,320,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" active")}),e.pop()),i.s(i.f("matchesFilter",e,t,1),e,t,0,351,366,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" matches-filter")}),e.pop()),i.b('"> <a href="#" class="name js-toggle-label-filter" name="'),i.b(i.v(i.f("color",e,t,0))),i.b('"> <span class="card-label card-label-'),i.b(i.v(i.f("color",e,t,0))),i.b('"/> <span class="full-name"> '),i.s(i.f("labelName",e,t,1),e,t,0,540,555,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("labelName",e,t,0))),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("labelName",e,t,1),e,t,1,0,0,"")||(i.b(' <span class="quiet">'),i.b(i.v(i.f("color",e,t,0))),i.b(" label (default)</span> ")),i.b(' </span> <span class="icon-sm icon-check"/> </a> </li> ')}),e.pop()),i.b(" </ul> ")}),e.pop()),n.b(" "),n.s(n.f("showMembers",e,t,1),e,t,0,757,1215,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <ul class="pop-over-member-list checkable js-mem-list'),i.s(i.f("filtering",e,t,1),e,t,0,830,839,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" filtered")}),e.pop()),i.s(i.f("limitMembers",e,t,1),e,t,0,870,878,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" limited")}),e.pop()),i.b('"> '),i.s(i.f("members",e,t,1),e,t,0,910,930,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("select_member",e,t,"")),i.b(" ")}),e.pop()),i.b(" </ul> "),i.s(i.f("limitMembers",e,t,1),e,t,0,966,1197,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <ul class="pop-over-list inset js-show-all-members-elem"> <li> <a href="#" class="name quiet js-show-all-members" style="padding-left: 50px; font-weight: normal;"> Show all members ('),i.b(i.v(i.f("remainingMemsCount",e,t,0))),i.b(" hidden) </a> </li> </ul> ")}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("showDueTimes",e,t,1),e,t,0,1249,1559,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <ul class="pop-over-list checkable navigable inset normal-weight js-date-list"> '),i.s(i.f("dueOptions",e,t,1),e,t,0,1350,1537,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class="item '),i.s(i.f("isActive",e,t,1),e,t,0,1380,1387,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" active")}),e.pop()),i.b('"> <a href="#" class="js-due-filter" time="'),i.b(i.v(i.f("time",e,t,0))),i.b('" style="padding-left: 40px;"> '),i.b(i.v(i.f("desc",e,t,0))),i.b(' <span class="icon-sm icon-check"/> </a> </li> ')}),e.pop()),i.b(" </ul> ")}),e.pop()),n.b(' <hr> <ul class="pop-over-list inset normal-weight"> <li> <a href="#" class="js-clear-all'),n.s(n.f("isFiltering",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" style="padding-left: 40px;"> Clear Filter </a> </li> </ul> '),n.fl()},templates.formatting_help=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p> Trello uses Markdown for formatting. Here are the basics. See the <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">complete syntax</a>. </p> <hr> <p class="quiet">First Level Header</p> <code> Making Scrambled Eggs: A Primer<br> =============================== </code> <hr> <p class="quiet">Second Level Header</p> <code> 1.1: Preparation<br> ---------------- </code> <hr> <p class="quiet">Paragraphs</p> <code> Add two new lines to start a new paragraph. Crack two eggs into the bowl and whisk. </code> <hr> <p class="quiet">Bold</p> <code> **Carefully** crack the eggs. </code> <hr> <p class="quiet">Emphasis</p> <code> Whisk the eggs *vigorously*. </code> <hr> <p class="quiet">Lists</p> <code> Ingredients:<br><br> - Eggs<br> - Oil<br> - *Optional:* milk </code> <hr> <p class="quiet">Links</p> <code> To download a PDF version of the recipe, [click here](https://example.com/scrambled-eggs.pdf). </code> <hr> <p class="quiet">Images</p> <code> ![The Finished Dish](https://example.com/eggs.png) </code> '),n.fl()},templates.header_add_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li> <a class="js-new-board" href="#"> New Board… <span class="sub-name"> A board is a collection of cards ordered in a list of lists. Use it to manage a project, track a collection, or organize anything. </span> </a> </li> <li> <a class="js-new-org" href="#"> New Organization… <span class="sub-name"> An organization is a group of boards and people. Use it to group boards in your company, team, or family. </span> </a> </li> </ul> '),n.fl()},templates.header_announcements=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("announcements",e,t,1),e,t,0,18,37,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("announcement",e,t,"")),i.b(" ")}),e.pop()),n.b(' <div class="announcement-elsewhere"> <p class="quiet" style="margin: 0 4px 5px;"> For more updates, check out… </p> <a target="_blank" class="announcement-elsewhere-blog js-blog" href="http://blog.trello.com" title="Trello Blog"> <span class="announcement-elsewhere-blog-icon icon-lg icon-board"/> <span class="underline">Trello Blog</span> </a> <a target="_blank" class="announcement-elsewhere-social js-t" href="https://www.twitter.com/trello" title="@trello on Twitter"> <span class="icon-lg icon-twitter"/> </a> <a target="_blank" class="announcement-elsewhere-social js-fb" href="https://www.facebook.com/TrelloApp" title="Trello on Facebook"> <span class="icon-lg icon-facebook"/> </a> <a target="_blank" class="announcement-elsewhere-social js-g" href="https://plus.google.com/103127084407107005900/posts" title="Trello on Google+"> <span class="icon-lg icon-google"/> </a> </div> '),n.fl()},templates.header_boards_menu_button=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="header-btn header-boards js-boards-menu" title="View list of boards" href="#"> <span class="header-btn-icon icon-lg icon-board light"/> <span class="header-btn-text">Boards</span> </a> '),n.fl()},templates.header_channel_picker=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("cookie",e,t,1),e,t,0,11,238,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p>You have a version cookie set. This is a feature intended for client developers and testers and will prevent you from changing channels.</p> <input type="button" class="js-remove-cookie wide primary" value="Remove cookie"> ')}),e.pop()),n.b(" "),n.s(n.f("cookie",e,t,1),e,t,1,0,0,"")||(n.b(' <ul class="pop-over-list"> '),n.s(n.f("channels",e,t,1),e,t,0,302,447,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-select" href="#" name="'),i.b(i.v(i.f("name",e,t,0))),i.b('"> '),i.b(i.v(i.f("displayName",e,t,0))),i.b(" "),i.s(i.f("active",e,t,1),e,t,0,382,424,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"></span> ')}),e.pop()),i.b(" </a> </li> ")}),e.pop()),n.b(" <hr> "),n.s(n.f("dev",e,t,1),e,t,0,474,560,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-select-dev" href="#" name="'),i.b(i.v(i.f("name",e,t,0))),i.b('"> Pick a version... </a> </li> ')}),e.pop()),n.b(" </ul> ")),n.b(" "),n.fl()},templates.header_invite=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="invited-message js-invited"> <a href="#" class="js-ignore-invite icon-lg icon-close dialog-close-button"></a> <h1> '),n.s(n.f("isInviter",e,t,1),e,t,0,141,287,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" You invited "),i.b(i.v(i.d("ghost.fullName",e,t,0))),i.b(" to collaborate on <strong>"),i.s(i.f("board",e,t,1),e,t,0,209,217,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("name",e,t,0)))}),e.pop()),i.s(i.f("organization",e,t,1),e,t,0,244,259,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("displayName",e,t,0)))}),e.pop()),i.b("</strong>. ")}),e.pop()),n.b(" "),n.s(n.f("isInviter",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("memberAdder",e,t,1),e,t,0,333,364,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("fullName",e,t,0))),i.b(" has invited you to")}),e.pop()),n.s(n.f("memberAdder",e,t,1),e,t,1,0,0,"")||n.b("You've been invited to"),n.b(" collaborate on <strong>"),n.s(n.f("board",e,t,1),e,t,0,468,476,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("name",e,t,0)))}),e.pop()),n.s(n.f("organization",e,t,1),e,t,0,503,518,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("displayName",e,t,0)))}),e.pop()),n.b("</strong>. ")),n.b(" </h1> "),n.s(n.f("isLoggedIn",e,t,1),e,t,0,582,1301,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isInviter",e,t,1),e,t,1,0,0,"")||(i.b(' <p style="min-height: 20px;"> '),i.s(i.d("ghost.email",e,t,1),e,t,0,644,924,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Your account "),i.s(i.f("avatarHash",e,t,1),e,t,0,673,824,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <img class="inline-member-av" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("avatarHash",e,t,0))),i.b('/30.png" alt="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')" title="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')" /> ')}),e.pop()),i.b(" <strong>"),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(")</strong> hasn't logged in with "),i.b(i.v(i.d("ghost.email",e,t,0))),i.b(". ")}),e.pop()),i.b(" </p> ")),i.b(" "),i.s(i.f("isInviter",e,t,1),e,t,0,975,1079,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="#" class="button js-create-new-account primary">Create New Account for '),i.b(i.v(i.d("ghost.fullName",e,t,0))),i.b("</a> ")}),e.pop()),i.b(" "),i.s(i.f("isInviter",e,t,1),e,t,1,0,0,"")||(i.b(' <a href="#" class="button js-join-model primary">Add This Email to My Account and Join '),i.b(i.v(i.f("modelType",e,t,0))),i.b('</a> <a href="#" class="button js-create-new-account">Create New Account</a> ')),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("isLoggedIn",e,t,1),e,t,1,0,0,"")||(n.b(' <a href="#" class="button primary js-join-model">Join '),n.b(n.v(n.f("modelType",e,t,0))),n.b("</a> ")),n.b(" </div> "),n.fl()},templates.header_logo=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="header-logo js-home-via-logo" href="/" title="Go back to your boards page."> <span class="header-logo-loading"></span> <span class="header-logo-default"></span> </a> '),n.fl()},templates.header_member_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li><a class="js-profile" href="'),n.b(n.v(n.f("profileUrl",e,t,0))),n.b('">Profile</a></li> <li><a class="js-cards" href="'),n.b(n.v(n.f("cardsUrl",e,t,0))),n.b('">Cards</a></li> '),n.s(n.f("hasAccount",e,t,1),e,t,0,166,230,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<li><a class="js-billing" href="'),i.b(i.v(i.f("billingUrl",e,t,0))),i.b('">Billing</a></li>')}),e.pop()),n.b(' <li><a class="js-account" href="'),n.b(n.v(n.f("accountUrl",e,t,0))),n.b('">Settings</a></li> </ul> <hr> <ul class="pop-over-list"> <li><a class="js-help" href="http://help.trello.com/" target="_blank">Help</a></li> <li><a class="js-platforms" href="/platforms">Apps</a></li> <li><a class="js-shortcuts" href="/shortcuts">Shortcuts</a></li> <li><a class="js-reco" href="/recommend">Share Trello</a></li> </ul> <hr> <ul class="pop-over-list"> <li><a class="js-about" href="/about" target="_blank">About Trello</a></li> <li><a class="js-blog" href="http://blog.trello.com" target="_blank">Trello Blog</a></li> </ul> <hr> <ul class="pop-over-list"> <li><a class="js-logout" href="#">Log Out'),n.s(n.f("canLogOut",e,t,1),e,t,1,0,0,"")||n.b("<br>(You’ll need to set a password first!)"),n.b("</a></li> </ul> "),n.fl()},templates.header_notification_list_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("hasNotifications",e,t,1),e,t,1,0,0,"")||n.b(' <p class="empty" style="padding: 24px 6px;">No Notifications</p> '),n.b(" "),n.s(n.f("hasNotifications",e,t,1),e,t,0,130,530,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <ul class="pop-over-list"> <li> <a class="js-view-all-notifications" href="'),i.b(i.v(i.f("noteUrl",e,t,0))),i.b('">See All Notifications'),i.b(i.v(i.f("unreadText",e,t,0))),i.b('</a> </li> <li> <a class="js-change-email-frequency" href="#">Change Notification Email Frequency</a> </li> '),i.s(i.f("canAllowDesktopNotifications",e,t,1),e,t,0,395,490,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-allow-desktop-notifications" href="#">Allow Desktop Notifications</a> </li> ')}),e.pop()),i.b(" </ul> ")}),e.pop()),n.b(" "),n.fl()},templates.header_promo_nav=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<nav class="promo-nav"> <a href="/" id="navLanding">Home</a> <a href="/tour" id="navTour">Tour</a> <a href="/gold" id="navTrelloGold">Gold</a> <a href="/business-class" id="navBusinessClass">Business Class</a> <a href="http://blog.trello.com" target="_blank">Blog</a> </nav> '),n.fl()},templates.header_public_board=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="bottom"> '),n.s(n.f("interactions",e,t,1),e,t,0,36,109,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="inline-block">Want to '),i.b(i.v(i.f("interactions",e,t,0))),i.b(" these cards?</span> ")}),e.pop()),n.b(' <span class="inline-block"> <a class="button primary" href="'),n.b(n.v(n.f("signupUrl",e,t,0))),n.b('" style="margin: 0 4px;">Sign up for free</a> or <a class="quiet" href="'),n.b(n.v(n.f("tourUrl",e,t,0))),n.b('">learn more about Trello</a> </span> </p> '),n.fl()},templates.header_search=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="/search" class="header-btn open-search-btn js-open-search-page" title="Search for boards, cards, members, and organizations."> <span class="header-btn-icon icon-lg icon-search light"></span> </a> <div class="header-search js-search-box"> <input class="header-search-input js-search-input js-disable-on-dialog" type="text" autocomplete="off" autocorrect="off" spellcheck="false" value="'),n.b(n.v(n.f("query",e,t,0))),n.b('"> <span class="header-search-icon icon-lg icon-search light js-search-icon js-search-focus"></span> <span class="header-search-icon header-search-icon-close icon-lg icon-close light hide js-close-icon js-search-close"></span> <a href="#" class="header-search-icon header-search-icon-open icon-lg icon-open light hide js-open-button js-open-search-page"></a> </div> '),n.fl()},templates.header_signup_login=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="header-btn header-signup" href="/signup'),n.s(n.f("escapedReturnUrl",e,t,1),e,t,0,70,101,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("?returnUrl="),i.b(i.v(i.f("escapedReturnUrl",e,t,0)))}),e.pop()),n.b('">Sign Up</a> <a class="header-btn header-login js-toggle-login-popover no-right-margin" href="/login'),n.s(n.f("escapedReturnUrl",e,t,1),e,t,0,244,275,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("?returnUrl="),i.b(i.v(i.f("escapedReturnUrl",e,t,0)))}),e.pop()),n.b('">Log In</a> '),n.fl()},templates.header_user=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("__loggedIn",e,t,1),e,t,0,15,1491,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("is_promo",e,t,1),e,t,1,0,0,"")||(i.b(' <a class="header-btn header-btn-feedback js-open-feedback hide" title="You are seeing an early, experimental version of Trello. We would love your feedback!" href="#"> <span class="header-btn-icon icon-lg icon-comment light"></span> <span class="header-btn-text">Give us feedback.</span> </a> <a class="header-btn hide upgrade" href="#", onclick="window.location.reload();"><span class="icon-sm icon-reopen light"/><span class="header-btn-text">Update Available</span></a> <a class="header-btn js-open-add-menu" href="#" title="Add a new board or organization."> <span class="header-btn-icon icon-lg icon-add light"></span> </a> <a class="header-btn header-member js-open-header-member-menu" href="#" title="Get access to your profile, help, and log out."> <span class="member'),i.s(i.f("hasCrown",e,t,1),e,t,0,819,829,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" has-crown")
}),e.pop()),i.b('"></span> <span class="header-btn-text js-member-name"></span> </a> <a class="header-btn header-notifications js-open-header-notifications-menu" href="#"> <span class="header-btn-icon icon-lg icon-notification light"></span> </a> '),i.s(i.f("showChannelPicker",e,t,1),e,t,0,1094,1275,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="header-btn header-btn-channel-picker js-open-channel-picker" href="#" title="Select release channel."> <span class="header-btn-icon icon-lg icon-gear light"></span> </a> ')}),e.pop()),i.b(" ")),i.b(" "),i.s(i.f("is_promo",e,t,1),e,t,0,1325,1477,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="header-btn header-go-to-boards no-right-margin" href="/" title="Get back to the app."> <span class="member"></span> Go to Boards &rarr; </a> ')}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("__loggedIn",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.b(n.rp("header_signup_login",e,t,"")),n.b(" ")),n.b(" "),n.fl()},templates.header_version_picker=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Head</span> <span class="value">'),n.b(n.v(n.d("active.name",e,t,0))),n.b('</span> <label>Head</label> <select class="js-select-head"> '),n.s(n.f("heads",e,t,1),e,t,0,232,368,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("value",e,t,0))),i.b('"'),i.s(i.f("selected",e,t,1),e,t,0,271,291,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' selected="selected"')}),e.pop()),i.b("> "),i.b(i.v(i.f("displayName",e,t,0))),i.s(i.f("selected",e,t,1),e,t,0,334,344,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" (current)")}),e.pop()),i.b(" </option> ")}),e.pop()),n.b(" </select> </div> "),n.s(n.d("versions.2.value",e,t,1),e,t,0,417,841,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Version</span> <span class="value">'),i.b(i.v(i.d("active.version",e,t,0))),i.b('</span> <label>Version</label> <select class="js-select-version"> '),i.s(i.f("versions",e,t,1),e,t,0,641,810,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("value",e,t,0))),i.b('"'),i.s(i.f("selected",e,t,1),e,t,0,680,700,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' selected="selected"')}),e.pop()),i.b("> "),i.b(i.v(i.f("displayName",e,t,0))),i.s(i.f("active",e,t,1),e,t,1,0,0,"")||i.b(" (disabled)"),i.s(i.f("selected",e,t,1),e,t,0,776,786,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" (current)")}),e.pop()),i.b(" </option> ")}),e.pop()),i.b(" </select> </div> ")}),e.pop()),n.b(" </div> "),n.fl()},templates.header_warning_banner=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="bottom"> Please confirm your email address: '),n.b(n.v(n.f("email",e,t,0))),n.b(". "),n.s(n.f("knownEmailProvider",e,t,1),e,t,0,88,178,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("emailInboxUrl",e,t,0))),i.b('" class="quiet" style="margin-left: 6px;">Check your inbox.</a> ')}),e.pop()),n.b(' <a class="quiet js-resend-confirmation-email" href="#" style="margin-left: 3px;">Resend email.</a> </p> '),n.fl()},templates.header_warning_password=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="bottom"> We’ve automatically created an account for '),n.b(n.v(n.f("email",e,t,0))),n.b(" with the username "),n.b(n.v(n.f("username",e,t,0))),n.b('. Please <a class="quiet js-change-password" href="/my/account">add a password</a>. </p> '),n.fl()},templates.hybrid_signup_login=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="form-parts-container clearfix"> <div class="form-tabs js-tabs"> <a class="signup-form-tab js-tab active" data-content="signup-form">Sign Up</a> <a class="login-form-tab js-tab" data-content="login-form">Log In</a> </div> <div class="signup-form js-signup-form-pos js-form-part js-tab-content'),n.s(n.f("hasAccount",e,t,1),e,t,1,0,0,"")||n.b(" js-default-active"),n.b('" data-id="signup-form"> <h1>New to Trello?</h1> <p>Create an account to edit this board, create new boards, and more.</p> <div class="tooltip js-insert-tooltip"></div> <form action="/signup-invitation" method="post"> <div class="quiet js-bad-full-name hide"> Your name must be at least 4 characters. </div> <label for="display-name-create"> Full Name </label> <input type="text" name="fullName" id="display-name-create" value="'),n.b(n.v(n.f("fullName",e,t,0))),n.b('"> <div class="js-use-diff-email"> <div class="quiet js-bad-email hide"> You must enter a valid email address. </div> <div class="quiet js-used-email hide"> That email address is in use. </div> <label for="email-create"> Email </label> <input type="email" name="email" id="email-create" value="'),n.b(n.v(n.f("email",e,t,0))),n.b('" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> </div> <div class="quiet js-bad-password hide"> Your password must be at least 4 characters. </div> <label for="password-create"> Password </label> <input type="password" name="password" id="password-create"> <input type="hidden" name="returnUrl" value="'),n.b(n.v(n.f("returnUrl",e,t,0))),n.b('"> <input type="hidden" name="idModel" value=""> <input type="hidden" name="type" value=""> <input type="hidden" name="token" value=""> <input type="submit" class="primary js-create-account" value="Okay, Let\'s Go!"> </form> </div> <div class="login-form js-login-form-pos js-form-part js-tab-content'),n.s(n.f("hasAccount",e,t,1),e,t,0,1755,1773,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-default-active")}),e.pop()),n.b('" data-id="login-form"> <h1>Hello, old friend!</h1> <p>Already have an account?</p> <a class="button primary" href="/login'),n.s(n.f("escapedReturnUrl",e,t,1),e,t,0,1931,1962,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("?returnUrl="),i.b(i.v(i.f("escapedReturnUrl",e,t,0)))}),e.pop()),n.b('">Log In</a> </div> <div class="active-box js-active-box start"></div> </div> '),n.fl()},templates["import/status"]=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("workspaces",e,t,1),e,t,0,15,150,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("total",e,t,1),e,t,0,26,139,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div> <span class="import-type">Groups:</span> <span class="import-progress">'),i.b(i.v(i.f("done",e,t,0))),i.b(" / "),i.b(i.v(i.f("total",e,t,0))),i.b("</span> </div> ")}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("projects",e,t,1),e,t,0,179,316,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("total",e,t,1),e,t,0,190,305,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div> <span class="import-type">Projects:</span> <span class="import-progress">'),i.b(i.v(i.f("done",e,t,0))),i.b(" / "),i.b(i.v(i.f("total",e,t,0))),i.b("</span> </div> ")}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("tasks",e,t,1),e,t,0,340,474,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("total",e,t,1),e,t,0,351,463,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div> <span class="import-type">Tasks:</span> <span class="import-progress">'),i.b(i.v(i.f("done",e,t,0))),i.b(" / "),i.b(i.v(i.f("total",e,t,0))),i.b("</span> </div> ")}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("done",e,t,1),e,t,0,494,514,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <div> Done! </div> ")}),e.pop()),n.b(" "),n.fl()},templates.invitation=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="phenom invitation"> '),n.s(n.f("MemberInviter",e,t,1),e,t,0,50,107,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="creator member no-menu"> '),i.b(i.rp("member",e,t,"")),i.b(" </div> ")}),e.pop()),n.b(' <div class="phenom-desc"> <p> '),n.s(n.f("MemberInviter",e,t,1),e,t,0,174,232,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <strong> "),i.b(i.v(i.f("fullName",e,t,0))),i.b(" </strong> created an invitation to ")}),e.pop()),n.b(' <span class="invitee"> '),n.s(n.f("MemberInvited",e,t,1),e,t,0,292,310,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.rp("member_inline",e,t,""))}),e.pop()),n.b(" "),n.s(n.f("MemberInvited",e,t,1),e,t,1,0,0,"")||(n.b(n.v(n.f("email",e,t,0))),n.s(n.f("email",e,t,1),e,t,1,0,0,"")||n.b("someone new")),n.b(' </span> </p> </div> <p class="phenom-meta quiet"> '),n.s(n.f("dateExpires",e,t,1),e,t,0,472,566,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="expiration-date">Expires <span class="date" dt="'),i.b(i.v(i.f("dateExpires",e,t,0))),i.b('"></span></span> ')}),e.pop()),n.b(" "),n.s(n.f("canRemove",e,t,1),e,t,0,597,676,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' - <a href="#" class="inline-block js-remove-invitation">Delete Invitation</a> ')}),e.pop()),n.b(" </p> </div> "),n.fl()},templates.invite_add_name=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="quiet"> <strong>'),n.b(n.v(n.f("email",e,t,0))),n.b('</strong>? We don’t know that person. Add a name and click “Send” and we’ll add a virtual member and send them an invite email. They\'ll automatically receive access to the board once they sign up and confirm their email address. </p> <p class="error hide js-name-error">Full name must be more than 4 characters.</p> <form class="js-email-data"> <label> Full Name </label> <input type="text" class="js-autofocus js-full-name" value="'),n.b(n.v(n.f("fullName",e,t,0))),n.b('"> <input type="hidden" class="js-email" value="'),n.b(n.v(n.f("email",e,t,0))),n.b('"> '),n.s(n.f("canAddAsObserver",e,t,1),e,t,0,560,832,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="check-div quiet js-add-as-observer clearfix" style="margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"> <input type="checkbox" id="addAsObserver"> <label for="addAsObserver">Include this member as a view-only observer?</label> </span> ')}),e.pop()),n.b(' <input type="submit" class="wide primary js-send-email-invite" value="Send"> </form> '),n.fl()},templates.jps_upgrade_banner=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="billing-upgrade-banner markeddown"> <h2 class="billing-upgrade-banner-header"> There’s an update to Business Class available with lots of new features! </h2> <p> The available update includes… </p> <ul> <li> </p> Everyone in your organization will get <a href="/gold">Trello Gold</a>. That means more <strong>board backgrounds and stickers</strong> and the ability to upload your own, <strong>250MB attachments</strong>, and <strong>custom emoji</strong>. </p> </li> <li> <p> We’ve also updated exports. You can now export as <strong>CSV</strong> as well as JSON. You’ll also get a <strong>history of past bulk exports</strong>. </p> </li> </ul> <div class="billing-upgrade-banner-price-section"> <p> There’s also new pricing. The price for the upgrade will be $5 per user per month or $45 per user per year. When you upgrade, your price will be… </p> '),n.s(n.f("monthlyUpgrade",e,t,1),e,t,0,883,992,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <h3 class="billing-upgrade-price-emphasis">$'),i.b(i.v(i.f("price",e,t,0))),i.b(" per month</h3> <p>$5 per "),i.b(i.v(i.f("formattedMemberCount",e,t,0))),i.b("</p> ")}),e.pop()),n.b(" "),n.s(n.f("yearlyUpgrade",e,t,1),e,t,0,1030,1139,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <h3 class="billing-upgrade-price-emphasis">$'),i.b(i.v(i.f("price",e,t,0))),i.b(" per year</h3> <p>$45 per "),i.b(i.v(i.f("formattedMemberCount",e,t,0))),i.b("</p> ")}),e.pop()),n.b(" "),n.s(n.f("yearlyCheaperUpgrade",e,t,1),e,t,0,1183,1331,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <h3 class="billing-upgrade-price-emphasis">$'),i.b(i.v(i.f("price",e,t,0))),i.b(" per year</h3> <p>$45 per "),i.b(i.v(i.f("formattedMemberCount",e,t,0))),i.b("</p> <p>You will get three months free.</p> ")}),e.pop()),n.b(' </div> <div class="center"> <a href="#" class="billing-upgrade-banner-button button primary js-open-confirm-jps-upgrade"> Upgrade Your Organization </a> </div> <p class="quiet center"> We still support your version of Business Class, but it is no longer being sold and won’t receive new Business Class features. </p> </div> '),n.fl()},templates.kiln_changeset_preview=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="attachment-extra-info-header"> Changeset <a href="'),n.b(n.v(n.f("url",e,t,0))),n.b('" target="_blank">'),n.b(n.v(n.f("shortHash",e,t,0))),n.b("</a> by "),n.b(n.v(n.f("author",e,t,0))),n.b(" - "),n.s(n.f("reviews",e,t,1),e,t,1,0,0,"")||n.b(' <span class="quiet">No Review</span> '),n.b(" "),n.s(n.f("reviews",e,t,1),e,t,0,196,275,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="quiet"> <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" target="_blank">'),i.b(i.v(i.f("status",e,t,0))),i.b("</a> </span> ")}),e.pop()),n.b(' </div> <div class="attachment-extra-info-details markeddown"> '),n.b(n.t(n.f("commitMessageHtml",e,t,0))),n.b(" </div> "),n.fl()},templates.kiln_changeset_thumbnail=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span title="'),n.b(n.v(n.f("commitMessage",e,t,0))),n.b('">'),n.b(n.v(n.f("shortCommitMessage",e,t,0))),n.b('</span> <span class="block quiet"> '),n.s(n.f("date",e,t,1),e,t,0,98,157,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span>Added <span class="date" dt="'),i.b(i.v(i.f("date",e,t,0))),i.b('"></span></span>')}),e.pop()),n.b(" - "),n.s(n.f("reviews",e,t,1),e,t,1,0,0,"")||n.b(" <span>No Review</span> "),n.b(" "),n.s(n.f("reviews",e,t,1),e,t,0,230,295,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span> <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" target="_blank">'),i.b(i.v(i.f("status",e,t,0))),i.b("</a> </span> ")}),e.pop()),n.b(" </span> "),n.fl()},templates.label=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="card-label card-label-'),n.b(n.v(n.f("color",e,t,0))),n.b('" title="'),n.s(n.f("name",e,t,1),e,t,0,62,70,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("name",e,t,0)))}),e.pop()),n.s(n.f("name",e,t,1),e,t,1,0,0,"")||(n.b(n.v(n.f("color",e,t,0))),n.b(" label (default)")),n.b('"> '),n.s(n.f("name",e,t,1),e,t,0,134,142,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("name",e,t,0)))}),e.pop()),n.b(" "),n.s(n.f("name",e,t,1),e,t,1,0,0,"")||n.b("&nbsp;"),n.b(" </span> "),n.fl()},templates.list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="list-header js-list-header non-empty clearfix" attr="name"> <h2 class="list-header-name hide-on-edit js-list-name current">'),n.b(n.v(n.f("name",e,t,0))),n.b('</h2> <p class="list-header-num-cards hide js-num-cards"></p> <span class="list-header-subscribe-icon icon-sm icon-follow js-list-subscribed'),n.s(n.f("subscribed",e,t,1),e,t,1,0,0,"")||n.b(" hide"),n.b('"/> <div class="edit edit-heavy clearfix"> <textarea type="text" class="field single-line"></textarea> </div> '),n.s(n.f("__loggedIn",e,t,1),e,t,0,443,538,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="list-header-menu-icon icon-sm icon-menu dark-hover js-open-list-menu"></a> ')}),e.pop()),n.b(' </div> <div class="list-cards fancy-scrollbar clearfix js-list-cards'),n.s(n.f("__ed",e,t,1),e,t,0,631,643,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-sortable")}),e.pop()),n.b('"></div> <a class="open-card-composer js-open-card-composer" href="#">Add a card…</a> '),n.fl()},templates.list_add=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <span class="placeholder js-open-add-list">Add a list…</span> <input type="text" class="list-name-input" name="name" placeholder="Add a list…" autocomplete="off"/> <div class="edit-controls keep clearfix"> <input type="submit" class="primary confirm js-save-edit" value="Save"> <a href="#" class="icon-lg icon-close dark-hover cancel js-cancel-edit"></a> </div> </form> '),n.fl()},templates.list_bulk_card_move=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <ul class="pop-over-list js-list-list"> '),n.s(n.f("lists",e,t,1),e,t,0,57,216,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a href="#" class="js-select-list highlight-icon '),i.s(i.f("current",e,t,1),e,t,0,124,133,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" disabled")}),e.pop()),i.b('" name="'),i.b(i.v(i.f("id",e,t,0))),i.b('"> '),i.b(i.v(i.f("name",e,t,0))),i.s(i.f("current",e,t,1),e,t,0,182,192,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" (current)")}),e.pop()),i.b(" </a> </li> ")}),e.pop()),n.b(" </ul> </form> "),n.fl()},templates.list_copy=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<label>Name</label> <textarea name="name" class="js-autofocus">'),n.b(n.v(n.f("name",e,t,0))),n.b('</textarea> <input type="submit" class="primary wide js-submit" value="Create List"> '),n.fl()},templates.list_guide_link=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="list-link"> <strong>'),n.b(n.v(n.f("name",e,t,0))),n.b('</strong><br> <span class="list-link-sub">'),n.b(n.v(n.f("countStr",e,t,0))),n.b("</span> </p> "),n.fl()},templates.list_inline=function(e,t,i){var n=this;return n.b(i=i||""),n.b(' list "'),n.b(n.v(n.f("name",e,t,0))),n.b('" '),n.fl()},templates.list_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> '),n.s(n.f("__ed",e,t,1),e,t,0,36,206,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li><a class="js-add-card" href="#">Add Card…</a></li> <li><a class="js-copy-list" href="#">Copy List…</a></li> <li><a class="js-move-list" href="#">Move List…</a></li> ')}),e.pop()),n.b(' <li><a class="highlight-icon js-list-subscribe" href="#">Subscribe'),n.s(n.f("subscribed",e,t,1),e,t,0,297,333,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('d <span class="icon-sm icon-check"/>')}),e.pop()),n.b("</a></li> </ul> "),n.s(n.f("__ed",e,t,1),e,t,0,373,570,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <ul class="pop-over-list"> <li><a class="js-move-cards" href="#">Move All Cards in This List…</a></li> <li><a class="js-archive-cards" href="#">Archive All Cards in This List…</a></li> </ul> ')}),e.pop()),n.b(" "),n.s(n.f("__ed",e,t,1),e,t,0,589,693,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <ul class="pop-over-list"> <li><a class="js-close-list" href="#">Archive This List</a></li> </ul> ')}),e.pop()),n.b(" "),n.fl()},templates.login_popover=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form action="/authenticate" method="post" novalidate> '),n.s(n.f("badLogin",e,t,1),e,t,0,68,127,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="error">The email or password was incorrect.</p> ')}),e.pop()),n.b(" "),n.s(n.f("unconfirmed",e,t,1),e,t,0,157,264,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="error">You can’t sign in until you <a href="/resendValidate">verify your email address</a>.</p> ')}),e.pop()),n.b(' <label for="email-login"> Email </label> <input type="email" name="user" id="email-login" value="'),n.b(n.v(n.f("email",e,t,0))),n.b('" class="js-autofocus" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> <label for="password-login"> Password </label> <input type="password" name="password" id="password-login"> <input type="submit" class="primary wide js-password-login" value="Log In"> <p class="quiet" style="margin-top: 16px;"> <a href="/forgot"><strong>Forgot password?</strong></a> </p> <p class="quiet"> New? <a href="/signup'),n.s(n.f("returnUrl",e,t,1),e,t,0,829,853,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("?returnUrl="),i.b(i.v(i.f("returnUrl",e,t,0)))}),e.pop()),n.b('"><strong>Create an Account.</strong></a> </p> <input type="hidden" name="returnUrl" value="'),n.b(n.v(n.f("returnUrl",e,t,0))),n.b('"> </form> <form action="/authenticate_openid" method="post" style="margin-top: 16px;"> <label> Or log in with: </label> <input type="hidden" name="openid_identifier" value="https://www.google.com/accounts/o8/id"> <input type="hidden" name="returnUrl" value="'),n.b(n.v(n.f("returnUrl",e,t,0))),n.b('"> <input type="hidden" name="mode" value=""> <input type="hidden" name="login" value=""> <input type="hidden" name="immediate" value=""> <input type="hidden" name="confirmNew" value="true"> <a class="button with-icon primary google js-google-login" href=""> <span class="icon-sm icon-google light"/> Google Account </a> '),n.s(n.f("openidAccount",e,t,1),e,t,0,1583,1718,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <p>It looks like you haven’t set a password yet. You can do this from the Account page after logging in with your Google Account.</p> ")}),e.pop()),n.b(" </form> "),n.fl()},templates.manage_members=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("canInviteMembers",e,t,1),e,t,0,21,424,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="search-with-spinner js-search-section"> <input type="text" class="js-search-input js-autofocus" style="margin-bottom: 0;"> <div class="spinner small hide js-loading"></div> </div> <div class="manage-member-section js-helper"> <p class="bottom quiet" style="padding: 6px;"> Search for a person in Trello by name or email address, or enter an email address to invite someone new. </p> </div> ')}),e.pop()),n.b(" "),n.s(n.f("disableAddingExternalMembers",e,t,1),e,t,0,479,1014,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="search-with-spinner js-search-section"> <input type="text" class="js-search-input js-autofocus" style="margin-bottom: 0;"> <div class="spinner small hide js-loading"></div> </div> <p class="warning"> Only organization members can be added to this board. '),i.s(i.f("isBCOrgAdmin",e,t,1),e,t,0,763,898,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' To change this, visit the <a href="'),i.b(i.v(i.f("orgSettingsURL",e,t,0))),i.b('">Organization Settings page</a> and click “Inviting Non-Org Members to Boards”. ')}),e.pop()),i.b(" "),i.s(i.f("isBCOrgAdmin",e,t,1),e,t,1,0,0,"")||i.b(" Check with an organization admin to change this setting. "),i.b(" </p> ")}),e.pop()),n.b(' <div class="manage-member-section hide js-board-members"> <ul class="pop-over-member-list options js-list"></ul> </div> <div class="manage-member-section hide"> <h4>Error</h4> <p class="error">The user or email could not be invited due to an organization restriction.</p> </div> <div class="manage-member-section hide js-error"> <p class="error" style="margin: 16px 8px 6px;"/> </div> '),n.s(n.f("canAddMembers",e,t,1),e,t,0,1451,2315,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="manage-member-section hide js-uninvited-search-results"></div> <div class="manage-member-section hide js-search-results"> <h4>Select to add.</h4> <ul class="pop-over-member-list options js-list"></ul> </div> <div class="manage-member-section hide js-no-results"> <p class="quiet center" style="padding: 16px 4px;">No results</p> </div> <div class="manage-member-section hide js-org-members"> <h4>'),i.b(i.v(i.f("orgName",e,t,0))),i.b(' Members</h4> <ul class="pop-over-member-list options clearfix js-list'),i.s(i.f("orgMemsView",e,t,1),e,t,0,1957,1967,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" collapsed")}),e.pop()),i.b('" '),i.s(i.f("orgMemsView",e,t,1),e,t,0,2001,2028,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('style="margin-bottom: 8px;"')}),e.pop()),i.b('></ul> <a href="#" class="quiet-button js-add-all-org-members" style="margin-top: 8px;">Add All Organization Members (<span class="js-num-org-mem"></span>)</a> <a href="#" class="quiet-button js-more-org-members hide" style="margin-top: 8px;">View All Members</a> </div> ')}),e.pop()),n.b(" "),n.s(n.f("canInviteMembers",e,t,1),e,t,0,2355,2382,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="js-ad"></div> ')}),e.pop()),n.b(" "),n.s(n.f("isJPS",e,t,1),e,t,0,2414,2637,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <p class="quiet bottom" style="padding: 6px;"> Business Class pricing is per user. Adding a member will increase the price by $'),i.b(i.v(i.f("jpsPrice",e,t,0))),i.b(" per "),i.s(i.f("isMonthly",e,t,1),e,t,0,2578,2584,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" month")}),e.pop()),i.b(" "),i.s(i.f("isYearly",e,t,1),e,t,0,2612,2617,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" year")}),e.pop()),i.b(". </p> ")}),e.pop()),n.b(" "),n.fl()},templates.manage_members_select_role=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> '),n.s(n.f("showAdmin",e,t,1),e,t,0,41,160,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a href="#" class="js-invite js-select-admin"> Admin <span class="sub-name">'),i.b(i.v(i.f("roleText_admin",e,t,0))),i.b("</span> </a> </li> ")}),e.pop()),n.b(' <li> <a href="#" class="js-invite js-select-member"> Normal <span class="sub-name">'),n.b(n.v(n.f("roleText_normal",e,t,0))),n.b("</span> </a> </li> "),n.s(n.f("showObserver",e,t,1),e,t,0,313,510,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a href="#" class="js-invite js-select-observer"> Observer <span class="icon-sm icon-briefcase icon-briefcase-bc-color"></span> <span class="sub-name">'),i.b(i.v(i.f("roleText_observer",e,t,0))),i.b("</span> </a> </li> ")}),e.pop()),n.b(" </ul> "),n.fl()},templates.member=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("avatarHash",e,t,1),e,t,0,15,356,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="member-avatar" height="30" width="30" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("avatarHash",e,t,0))),i.b('/30.png" alt="'),i.s(i.f("deleted",e,t,1),e,t,0,130,167,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("This member has deleted their account")}),e.pop()),i.s(i.f("deleted",e,t,1),e,t,1,0,0,"")||(i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(")")),i.b('" title="'),i.s(i.f("deleted",e,t,1),e,t,0,251,288,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("This member has deleted their account")}),e.pop()),i.s(i.f("deleted",e,t,1),e,t,1,0,0,"")||(i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(")")),i.b('" /> ')}),e.pop()),n.b(" "),n.s(n.f("avatarHash",e,t,1),e,t,1,0,0,"")||(n.b(' <span class="member-initials" title="'),n.s(n.f("deleted",e,t,1),e,t,0,437,474,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("This member has deleted their account")}),e.pop()),n.s(n.f("deleted",e,t,1),e,t,1,0,0,"")||(n.b(n.v(n.f("fullName",e,t,0))),n.b(" ("),n.b(n.v(n.f("username",e,t,0))),n.b(")")),n.b('"> '),n.s(n.f("deleted",e,t,1),e,t,1,0,0,"")||n.b(n.v(n.f("initials",e,t,0))),n.b(" "),n.s(n.f("deleted",e,t,1),e,t,0,589,590,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("?")}),e.pop()),n.b(" </span> ")),n.b(" "),n.s(n.f("isDeactivated",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("showStatus",e,t,1),e,t,0,661,959,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="member-status '),i.b(i.v(i.f("status",e,t,0))),i.b('" title="'),i.s(i.f("status_active",e,t,1),e,t,0,725,766,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("This member is online and viewing Trello.")}),e.pop()),i.s(i.f("status_idle",e,t,1),e,t,0,800,869,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("This member is idle. They have Trello open but are not looking at it.")}),e.pop()),i.s(i.f("status_disconnected",e,t,1),e,t,0,909,932,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("This member is offline.")}),e.pop()),i.b('"/>')}),e.pop()),n.b(" "),n.s(n.f("isBoardAdmin",e,t,1),e,t,0,992,1072,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="member-type admin" title="This member is an admin of this board."/>')}),e.pop()),n.b(" "),n.s(n.f("isOrganizationAdmin",e,t,1),e,t,0,1114,1201,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="member-type admin" title="This member is an admin of this organization."/>')}),e.pop()),n.b(" ")),n.b(' <span class="member-gold-badge" title="This member has Trello Gold."></span> '),n.fl()},templates.member_account=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module clearfix"> <div class="window-module-title"> <h3>Account Details</h3> </div> <a class="big-link js-change-name-and-bio" href="#"> <span class="text">Change Name, Initials, or Bio</span> </a> <a class="big-link js-change-avatar" href="#"> <span class="text">Change Avatar</span> </a> <a class="big-link js-change-password" href="#"> <span class="text">'),n.s(n.f("hasPassword",e,t,1),e,t,0,393,400,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("Change ")}),e.pop()),n.s(n.f("hasPassword",e,t,1),e,t,1,0,0,"")||n.b("Set "),n.b('Password</span> </a> </div> <div class="window-module js-credentials-section"> <div class="window-module-title"> <h3>Credentials</h3> </div> <div class="js-credentials-list gutter"> <div class="spinner loading"></div> </div> <div class="gutter"> <input type="button" class="js-add-email" value="Add A New Email Address"> </div> </div> <div class="window-module clearfix"> <div class="window-module-title"> <h3>Notifications</h3> </div> <a class="big-link js-change-email-freq" href="#"> <span class="text">Change Notification Email Frequency</span> </a> '),n.s(n.f("canAllowDesktopNotifications",e,t,1),e,t,0,1039,1160,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="big-link js-allow-desktop-notifications" href="#"> <span class="text">Allow Desktop Notifications</span> </a> ')}),e.pop()),n.b(' </div> <div class="window-module clearfix"> <div class="window-module-title"> <h3>Accessibility</h3> </div> <a class="big-link js-toggle-cb-mode" href="#"> <span class="text">'),n.s(n.f("cbEnabled",e,t,1),e,t,0,1383,1391,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("Disable ")}),e.pop()),n.s(n.f("cbEnabled",e,t,1),e,t,1,0,0,"")||n.b("Enable "),n.b('Color Blind Friendly Mode</span> </a> </div> <div class="window-module"> <div class="window-module-title"> <h3>Applications</h3> </div> <div class="js-member-applications"> <div class="spinner loading"></div> </div> </div> <div class="window-module"> <div class="window-module-title"> <h3>Sessions</h3> </div> <div class="js-member-sessions gutter"> <div class="spinner loading"></div> </div> </div> <div class="window-module"> <a class="quiet-button gutter js-confirm-delete-member" href="#" style="margin-top: 32px;">Permanently delete your entire account forever?</a> </div> '),n.fl()},templates.member_application=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="details"> <h5> '),n.s(n.f("identifier",e,t,1),e,t,0,42,56,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("identifier",e,t,0)))}),e.pop()),n.b(" "),n.s(n.f("identifier",e,t,1),e,t,1,0,0,"")||n.b("Unknown Application"),n.b(' </h5> <p class="quiet"> '),n.b(n.v(n.f("permissions",e,t,0))),n.b(' </p> <p class="quiet"> Approved: '),n.b(n.v(n.f("dateApproved",e,t,0))),n.b("<br> "),n.s(n.f("neverExpires",e,t,1),e,t,0,233,248,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" Never Expires ")}),e.pop()),n.b(" "),n.s(n.f("neverExpires",e,t,1),e,t,1,0,0,"")||(n.b(" Expires: "),n.b(n.v(n.f("dateExpires",e,t,0))),n.b(" ")),n.b(' </p> </div> <input type="button" class="js-revoke" value="Revoke"> '),n.fl()},templates.member_application_list=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("hasTokens",e,t,1),e,t,1,0,0,"")||n.b(' <p class="big-link none"> No applications are using your Trello account. </p> '),n.b(" "),n.s(n.f("hasTokens",e,t,1),e,t,0,122,170,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="member-applications gutter"></div> ')}),e.pop()),n.b(" "),n.fl()},templates.member_avatar=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="member"> '),n.s(n.f("avatarHash",e,t,1),e,t,0,36,131,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="member-avatar" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("avatarHash",e,t,0))),i.b('/30.png" alt="'),i.b(i.v(i.f("fullName",e,t,0))),i.b('"> ')}),e.pop()),n.b(" "),n.s(n.f("avatarHash",e,t,1),e,t,1,0,0,"")||(n.b(' <p class="member-initials">'),n.b(n.v(n.f("initials",e,t,0))),n.b("</p> ")),n.b(" </div> "),n.fl()},templates.member_billing_org_link=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li> <a href="'),n.b(n.v(n.f("billingLink",e,t,0))),n.b('">'),n.b(n.v(n.f("displayName",e,t,0))),n.b(" billing page</a> </li> "),n.fl()},templates.member_billing_org_link_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="gutter markeddown"> <div style="max-width: 450px;"> <h3> Looking for your organization’s billing page? </h3> <ul class="js-org-link-list"></ul> <p class="quiet"> This is your personal billing page. You can manage the billing for your Business Class organizations on the above pages. </p> </div> <hr> </div> '),n.fl()},templates.member_boards_list_ad=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" class="icon-lg icon-close dark-hover ad-close js-close-ad"></a> '),n.s(n.f("iconClass",e,t,1),e,t,0,90,135,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="ad-icon '),i.b(i.v(i.f("iconClass",e,t,0))),i.b('"></span> ')
}),e.pop()),n.b(' <div class="ad-copy">'),n.b(n.t(n.f("copyHtml",e,t,0))),n.b("</div>"),n.fl()},templates.member_cards_base=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module gutter"> <a href="#" class="quiet-button w-img js-toggle-sort"><span class=\'icon-sm icon-menu\'/><span class="js-sort-text"/></a> </div> <div class="js-cards-content"></div> '),n.fl()},templates.member_cards_board=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-board"/> <h3><a href="'),n.b(n.v(n.f("boardUrl",e,t,0))),n.b('">'),n.b(n.v(n.f("name",e,t,0))),n.b("</a></h3> "),n.s(n.f("org",e,t,1),e,t,0,147,238,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a style="margin: 0 2px;" class="inline-block quiet" href="/'),i.b(i.v(i.f("name",e,t,0))),i.b('">'),i.b(i.v(i.f("displayName",e,t,0))),i.b("</a> ")}),e.pop()),n.b(' <span class="icon-sm icon-'),n.b(n.v(n.f("permissionLevel",e,t,0))),n.b('"/> <span class=\'quiet js-card-total\'/> </div> <div class="gutter float-cards clearfix js-list"></div> '),n.fl()},templates.member_cards_card=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<div class=\"js-card\"></div> <p class='list-card-position quiet'> in <strong>"),n.b(n.v(n.f("listName",e,t,0))),n.b("</strong> "),n.s(n.f("showBoard",e,t,1),e,t,0,112,147,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" on <strong>"),i.b(i.v(i.f("boardName",e,t,0))),i.b("</strong> ")}),e.pop()),n.b(" </p> "),n.fl()},templates.member_cards_date=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-'),n.b(n.v(n.f("iconType",e,t,0))),n.s(n.f("isOverdue",e,t,1),e,t,0,111,125,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" overdue light")}),e.pop()),n.s(n.f("isDueSoon",e,t,1),e,t,0,153,164,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" soon light")}),e.pop()),n.b('"/> <h3>'),n.b(n.v(n.f("header",e,t,0))),n.b("</h3> <span class='quiet js-card-total'/> </div> <div class=\"gutter float-cards clearfix js-list\"></div> "),n.fl()},templates.member_cards_filter=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list checkable"> <li class="'),n.s(n.f("board",e,t,1),e,t,0,58,64,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),n.b('"> <a href="#" class="highlight-icon js-sort-by-board"> Sort by board '),n.s(n.f("board",e,t,1),e,t,0,154,190,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' </a> </li> <li class="'),n.s(n.f("date",e,t,1),e,t,0,232,238,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),n.b('"> <a href="#" class="highlight-icon js-sort-by-due-date"> Sort by due date '),n.s(n.f("date",e,t,1),e,t,0,332,368,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(" </a> </li> </ul> "),n.fl()},templates.member_detail=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="tabbed-pane-header"> <div class="tabbed-pane-header-wrapper clearfix"> <a class="tabbed-pane-header-image profile-image '),n.s(n.f("__ed",e,t,1),e,t,0,141,168,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("ed js-change-avatar-profile")}),e.pop()),n.s(n.f("hasCrown",e,t,1),e,t,0,190,200,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" has-crown")}),e.pop()),n.b('" href="#"> '),n.s(n.f("avatarHash",e,t,1),e,t,0,240,342,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="profile-image-image" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("avatarHash",e,t,0))),i.b('/170.png" alt="'),i.b(i.v(i.f("fullName",e,t,0))),i.b('"> ')}),e.pop()),n.b(" "),n.s(n.f("avatarHash",e,t,1),e,t,1,0,0,"")||(n.b(' <span class="profile-image-initials">'),n.b(n.v(n.f("initials",e,t,0))),n.b("</span> ")),n.b(' <span class="change-text"> Change Avatar </span> </a> <div class="tabbed-pane-header-details"> <div class="js-current-details"></div> '),n.s(n.f("__ed",e,t,1),e,t,0,590,634,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <form class="js-profile-form hide"></form> ')}),e.pop()),n.b(' </div> <div class="tabbed-pane-header-factoid js-header-factoid"></div> </div> </div> <div class="tabbed-pane-nav clearfix"> <ul> <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-member-profile" href="/'),n.b(n.v(n.f("username",e,t,0))),n.b('">Profile</a> </li> <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-member-cards" href="/'),n.b(n.v(n.f("username",e,t,0))),n.b('/cards">Cards</a> </li> '),n.s(n.f("hasAccount",e,t,1),e,t,0,1051,1223,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("accountProblem",e,t,1),e,t,1,0,0,"")||(i.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-billing" href="/'),i.b(i.v(i.f("username",e,t,0))),i.b('/billing">Billing</a> </li> ')),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("accountProblem",e,t,1),e,t,0,1258,1425,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-billing" href="/'),i.b(i.v(i.f("username",e,t,0))),i.b('/billing">Billing <span class="option">Issue!</span></a> </li> ')}),e.pop()),n.b(" "),n.s(n.f("isMe",e,t,1),e,t,0,1454,1594,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-member-account" href="/'),i.b(i.v(i.f("username",e,t,0))),i.b('/account">Settings</a> </li> ')}),e.pop()),n.b(' </ul> </div> <div class="tabbed-pane-main-col clearfix"> <div class="tabbed-pane-main-col-loading hide js-loading-page"> <span class="tabbed-pane-main-col-loading-spinner spinner"></span> </div> <div class="tabbed-pane-main-col-wrapper js-content"></div> </div> '),n.fl()},templates.member_detail_profile_edit=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="error js-profile-form-error hide"></p> <label>Full Name</label> <input type="text" name="fullName" value="'),n.b(n.v(n.f("fullName",e,t,0))),n.b('"/> <label>Username</label> <input type="text" name="username" value="'),n.b(n.v(n.f("username",e,t,0))),n.b('"/> <label>Initials</label> <input type="text" name="initials" value="'),n.b(n.v(n.f("initials",e,t,0))),n.b('"/> <label>Bio <span class="quiet">(optional)</span></label> <textarea name="bio">'),n.b(n.v(n.f("bio",e,t,0))),n.b('</textarea> <input type="submit" class="primary wide js-submit-profile" value="Save"/> <input type="button" class="js-cancel-edit-profile" value="Cancel"/> '),n.fl()},templates.member_detail_profile_info=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="tabbed-pane-header-details-name"> <h1 class="inline"> '),n.b(n.v(n.f("fullName",e,t,0))),n.b(' </h1> <p class="window-title-extra quiet"> @'),n.b(n.v(n.f("username",e,t,0))),n.b(" </p> "),n.s(n.f("hasCrown",e,t,1),e,t,0,154,352,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="member-profile-gold-badge"> <span class="icon-sm icon-crown member-profile-gold-badge-icon"></span> '),i.s(i.f("__ed",e,t,1),e,t,0,277,300,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("You’ve got Trello Gold!")}),e.pop()),i.b(" "),i.s(i.f("__ed",e,t,1),e,t,1,0,0,"")||i.b("Has Trello Gold"),i.b(" </span> ")}),e.pop()),n.b(' </div> <div class="tabbed-pane-header-details-content"> '),n.s(n.f("bioHtml",e,t,1),e,t,0,434,447,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.t(i.f("bioHtml",e,t,0)))}),e.pop()),n.b(" </div> "),n.s(n.f("__ed",e,t,1),e,t,0,476,614,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="button-link tabbed-pane-header-details-edit js-edit-profile" href="#"><span class="icon-sm icon-edit"></span> Edit profile</a> ')}),e.pop()),n.b(" "),n.fl()},templates.member_email_freq=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("minutesBetweenSummaries_-1",e,t,1),e,t,0,31,51,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" Don't send emails. ")}),e.pop()),n.b(" "),n.s(n.f("minutesBetweenSummaries_60",e,t,1),e,t,0,114,141,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" Send emails periodically. ")}),e.pop()),n.b(" "),n.s(n.f("minutesBetweenSummaries_1",e,t,1),e,t,0,203,227,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" Send emails instantly. ")}),e.pop()),n.b(" (change) "),n.fl()},templates.member_gold_earned=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module gold-earned-modal js-earned-gold-modal gutter"> <img src="https://d78fikflryjgj.cloudfront.net/images/3cbf48993d46484c5d82cc9c1844a54b/TrelloGoldIcon.png" class="gold-earned-modal-image"/> <h1>You’ve '),n.s(n.f("hasInvitations",e,t,1),e,t,0,245,251,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("earned")}),e.pop()),n.s(n.f("hasInvitations",e,t,1),e,t,1,0,0,"")||n.b("got"),n.b(" Trello Gold!</h1> <p> Awww yeah! "),n.s(n.f("hasInvitations",e,t,1),e,t,0,364,486,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("joinedNames",e,t,0))),i.b(" joined Trello on your recommendation or invite! That means you’ve earned "),i.b(i.v(i.f("countMonths",e,t,0))),i.b(" of Trello Gold! ")}),e.pop()),n.b(" "),n.s(n.f("hasInvitations",e,t,1),e,t,1,0,0,"")||(n.b(" You received "),n.b(n.v(n.f("countMonths",e,t,0))),n.b(" of Trello Gold! ")),n.b(' </p> <p class="gold-earned-modal-learn-more quiet"> <a href="/gold">Learn more about Trello Gold.</a> </p> '),n.s(n.f("__gold",e,t,1),e,t,1,0,0,"")||n.b(' <a class="gold-earned-modal-button button primary js-start-using-gold" href="#">Start using Trello Gold!</a> '),n.b(" "),n.s(n.f("showClose",e,t,1),e,t,0,845,1046,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="quiet" style="margin-top: 16px;"> You can visit your "Account Settings" page later to redeem your credits. <a class="js-close-modal" href="#">Okay, thanks! Close this header thing.</a> </p> ')}),e.pop()),n.b(" <hr> </div> "),n.fl()},templates.member_gold_intro=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="product-intro-modal gold-intro"> <a href="#" class="icon-lg icon-close dark-hover product-intro-close js-close-intro-helper"></a> <div class="product-intro-header"> <img class="product-intro-logo" src="https://d78fikflryjgj.cloudfront.net/images/6d243fedef388195ac2dd4bf3f6fcfa5/TrelloGoldLogo.png" alt="Trello Gold" /> </div> <hr> <h2>Yessssss... You\'ve got Trello Gold!</h2> <p> Here’s what you need to know to get started… </p> <div class="product-intro-section"> <span class="product-intro-number">1</span> <h3>Stickers</h3> <p> Check out the “Stickers” pane on the sidebar of any board. You can view and stick additional stickers and upload your own from there. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">2</span> <h3>Board backgrounds</h3> <p> Check out the “Settings” pane in the sidebar of any board and select “Change Board Background”. From there, you can view and use additional backgrounds and upload your own. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">3</span> <h3>Larger attachments</h3> <p> You can now upload files up to 250MB! Just select a file via “Attach File…” on the back of the card, or drag and drop from your desktop. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">4</span> <h3>Uploading custom emoji</h3> <p> While on a card, open the comment field, click the menu button in the bottom right hand corner, and select “Upload Emoji”. You can upload images and name the emoji from there. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">5</span> <h3>Billing page</h3> <p> Check out the “Billing” tab for future reference. You can see when your account will renew, update your credit card info, see billing history and so on. If you signed up via credits, you can check when your credits expire and you can enter a credit card and sign up for a subscription. </p> </div> <p> This will be in the <a href="http://help.trello.com/customer/portal/articles/1350088-trello-gold-user-guide"><strong>Trello Gold User Guide</strong></a> for future reference. Enjoy! And thanks for upgrading! </p> <p class="product-intro-close-bottom center quiet"> <a href="#" class="js-close-intro-helper dark-hover"> <span class="icon-sm icon-close dark-hover"/>Got it! Close this helper. </a> </p> </div> '),n.fl()},templates.member_inline=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("avatarHash",e,t,1),e,t,0,15,166,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="inline-member-av" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("avatarHash",e,t,0))),i.b('/30.png" alt="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')" title="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(')" /> ')}),e.pop()),n.b(' <span class="bold">'),n.b(n.v(n.f("fullName",e,t,0))),n.b("</span> "),n.fl()},templates.member_large_avatar=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="mem-info"> <h3 class="bottom"><a class="js-profile" href="/'),n.b(n.v(n.f("username",e,t,0))),n.b('">'),n.b(n.v(n.f("fullName",e,t,0))),n.b('</a></h3> <p class="quiet">@'),n.b(n.v(n.f("username",e,t,0))),n.b('</p> </div> <img src="'),n.b(n.v(n.f("__avatarDomain",e,t,0))),n.b("/"),n.b(n.v(n.f("avatarHash",e,t,0))),n.b('/original.png" alt="'),n.s(n.f("deleted",e,t,1),e,t,0,224,261,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("This member has deleted their account")}),e.pop()),n.s(n.f("deleted",e,t,1),e,t,1,0,0,"")||(n.b(n.v(n.f("fullName",e,t,0))),n.b(" ("),n.b(n.v(n.f("username",e,t,0))),n.b(")")),n.b('" title="'),n.s(n.f("deleted",e,t,1),e,t,0,345,382,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("This member has deleted their account")}),e.pop()),n.s(n.f("deleted",e,t,1),e,t,1,0,0,"")||(n.b(n.v(n.f("fullName",e,t,0))),n.b(" ("),n.b(n.v(n.f("username",e,t,0))),n.b(")")),n.b('" /> '),n.fl()},templates.member_list_item_detail=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="member member-no-menu'),n.s(n.f("isVirtual",e,t,1),e,t,0,47,62,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" member-virtual")}),e.pop()),n.s(n.f("isDeactivated",e,t,1),e,t,0,94,113,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" member-deactivated")}),e.pop()),n.b('"> '),n.b(n.rp("member",e,t,"")),n.b(' </div> <div class="details"> <p class="name-line"> <span class="full-name">'),n.b(n.v(n.f("fullName",e,t,0))),n.b('</span> </p> <p class="bottom quiet"> '),n.s(n.f("username",e,t,1),e,t,0,284,337,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="quiet inline-block">@'),i.b(i.v(i.f("username",e,t,0))),i.b("</span>")}),e.pop()),n.b(" "),n.s(n.f("showGoogleApps",e,t,1),e,t,0,370,466,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("gMail",e,t,1),e,t,0,381,455,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("username",e,t,1),e,t,0,395,397,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("- ")}),e.pop()),i.b('<span class="icon-sm icon-google"/>'),i.b(i.v(i.f("gMail",e,t,0))),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),n.b(' </p> </div> <div class="options"> '),n.s(n.f("isOrgMember",e,t,1),e,t,0,536,1432,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("showActivity",e,t,1),e,t,0,554,625,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="option quiet-button js-view-activity" href="#">Activity</a> ')}),e.pop()),i.b(" "),i.s(i.f("allowTypeChange",e,t,1),e,t,0,663,788,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="option button-link role-button js-change-role" href="#"> '),i.b(i.v(i.f("orgMemberType",e,t,0))),i.b(' <span class="icon-sm icon-menu"/> </a> ')}),e.pop()),i.b(" "),i.s(i.f("allowTypeChange",e,t,1),e,t,1,0,0,"")||(i.b(' <p class="option status quiet">'),i.b(i.v(i.f("orgMemberType",e,t,0))),i.b("</p> ")),i.b(" "),i.s(i.f("allowReactivate",e,t,1),e,t,0,924,996,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="option quiet-button js-reactivate" href="#"> Reactivate </a> ')}),e.pop()),i.b(" "),i.s(i.f("isMe",e,t,1),e,t,0,1026,1213,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="option button-link remove-button js-remove-or-deactivate '),i.s(i.f("canRemove",e,t,1),e,t,1,0,0,"")||i.b("disabled"),i.b('" href="#"> <span class="icon-sm icon-close"/> Leave'),i.s(i.f("orgIsBC",e,t,1),e,t,0,1194,1195,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("…")}),e.pop()),i.b(" </a> ")}),e.pop()),i.b(" "),i.s(i.f("isMe",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("ownsOrg",e,t,1),e,t,0,1245,1409,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="option button-link remove-button js-remove-or-deactivate '),i.s(i.f("canRemove",e,t,1),e,t,1,0,0,"")||i.b("disabled"),i.b('" href="#"> <span class="icon-sm icon-close"/> Remove… </a> ')}),e.pop()),i.b(" ")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("isOrgMember",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("showGoogleApps",e,t,1),e,t,0,1485,1792,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("hidden",e,t,1),e,t,1,0,0,"")||i.b(' <a class="option quiet-button js-hide-member" href="#"> Dismiss </a> '),i.b(" "),i.s(i.f("hidden",e,t,1),e,t,0,1590,1666,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="option quiet-button js-unhide-member" href="#"> Always Show </a> ')}),e.pop()),i.b(' <a class="option button-link primary js-invite-to-org" href="#"> <span class="icon-sm icon-add"/> Add Member </a> ')}),e.pop()),n.b(" ")),n.b(" </div> "),n.fl()},templates.member_login=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="member-login-email bottom"> '),n.b(n.v(n.f("email",e,t,0))),n.b(" </p> "),n.s(n.f("primary",e,t,1),e,t,0,65,110,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="bottom quiet"> Primary email </p> ')}),e.pop()),n.b(" "),n.s(n.f("primary",e,t,1),e,t,1,0,0,"")||n.b(' <a class="js-primary bottom quiet" href="#"> Set as primary email </a> '),n.b(' <p class="member-login-date-added bottom quiet"> Added: <span class="date" dt="'),n.b(n.v(n.f("dateAdded",e,t,0))),n.b('"></span> </p> '),n.s(n.f("primary",e,t,1),e,t,1,0,0,"")||n.b(' <span class="member-login-remove icon-sm icon-close dark-hover js-remove"></span> '),n.b(" "),n.fl()},templates.member_notifications=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-notification"/> <h3>Notifications</h3> </div> '),n.s(n.f("empty",e,t,1),e,t,0,141,187,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<div class="empty-list">No Notifications</div>')}),e.pop()),n.b(' <div class="js-list-notifications"></div> <a class="show-more js-more-notifications" href="#">Load More Notifications</a> '),n.fl()},templates.member_on_board_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li> <a class="'),n.s(n.f("canChangeRole",e,t,1),e,t,0,33,47,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-change-role")}),e.pop()),n.s(n.f("canChangeRole",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" href="#"> Change permissions… '),n.s(n.f("type",e,t,1),e,t,0,150,216,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="quiet" style="font-weight: normal;">('),i.b(i.v(i.f("type",e,t,0))),i.b(")</span>")}),e.pop()),n.b(' </a> </li> <li><a href="'),n.b(n.v(n.f("boardProfileUrl",e,t,0))),n.b('">View Member’s Board Activity</a></li> '),n.s(n.f("canRemove",e,t,1),e,t,0,323,441,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-remove-member"> '),i.s(i.f("isMe",e,t,1),e,t,0,367,381,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Leave Board… ")}),e.pop()),i.b(" "),i.s(i.f("isMe",e,t,1),e,t,1,0,0,"")||i.b(" Remove from Board… "),i.b(" </a> </li> ")}),e.pop()),n.b(" "),n.s(n.f("canRemove",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("isMe",e,t,1),e,t,0,480,764,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isMoreThanOneMember",e,t,1),e,t,0,505,739,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("memberIsAdmin",e,t,1),e,t,0,524,720,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li> <hr> <p class="quiet bottom"> You can’t leave because you are the only admin. To make another user an admin, click their avatar, select “Change permissions…”, and select “Admin”. </p> </li> ')}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),n.b(" ")),n.b(" "),n.s(n.f("isGhost",e,t,1),e,t,0,801,955,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <hr> <p class="quiet bottom"> This user will be able to access this board once they sign up with Trello and confirm their email address. </p> </li> ')}),e.pop()),n.b(" "),n.fl()},templates.member_on_card=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<div class='member js-member-on-card-menu"),n.s(n.f("isDeactivated",e,t,1),e,t,0,59,78,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" member-deactivated")}),e.pop()),n.s(n.f("isVirtual",e,t,1),e,t,0,110,125,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" member-virtual")}),e.pop()),n.b("' data-idmem='"),n.b(n.v(n.f("id",e,t,0))),n.b("'>"),n.b(n.rp("member",e,t,"")),n.b("</div> "),n.fl()},templates.member_on_card_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("__ed",e,t,1),e,t,0,9,68,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li><a class="js-remove-member">Remove from Card</a></li> ')}),e.pop()),n.b(" "),n.fl()},templates.member_profile=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module"> <div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-org"/> <h3>Organizations</h3> </div> <div class="gutter js-list-orgs"> </div> </div> <div class="window-module"> <div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-activity"/> <h3>Activity</h3> </div> <div class="list-actions"></div> <p class="bottom"> <a class="show-more js-more-actions" href="#">Load More Activity</a> </p> </div> '),n.fl()},templates.member_profile_info=function(e,t,i){var n=this;return n.b(i=i||""),n.b(' <div class="member-profile-info clearfix" name="'),n.b(n.v(n.f("username",e,t,0))),n.b('"> <div class="member"> '),n.b(n.rp("member",e,t,"")),n.b(' </div> <div class="info"> <h3 class="bottom"> <a class="js-profile" href="/'),n.b(n.v(n.f("username",e,t,0))),n.b('">'),n.b(n.v(n.f("fullName",e,t,0))),n.b('</a> </h3> <p class="quiet bottom">@'),n.b(n.v(n.f("username",e,t,0))),n.b("</p> "),n.s(n.f("bio",e,t,1),e,t,0,259,322,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<p class="quiet bottom ellip" title="'),i.b(i.v(i.f("bio",e,t,0))),i.b('">'),i.b(i.t(i.f("bioHtml",e,t,0))),i.b("</p>")}),e.pop()),n.b(' <p class="quiet bottom"> '),n.s(n.f("showMemberOptions",e,t,1),e,t,0,378,569,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("orgCardsUrl",e,t,1),e,t,0,395,467,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="js-org-cards-page" href="'),i.b(i.v(i.f("orgCardsUrl",e,t,0))),i.b('">View Org Cards</a> ')}),e.pop()),i.b(" "),i.s(i.f("__ed",e,t,1),e,t,0,493,559,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<span><a class="js-remove-mem" href="#">Remove from Org</a></span>')}),e.pop()),i.b(" ")}),e.pop()),n.b(" </p> </div> </div> "),n.fl()},templates.member_session=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("type_support",e,t,1),e,t,0,17,241,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="bottom"> Authorization for Trello Support (Ticket #'),i.b(i.v(i.d("data.ticket",e,t,0))),i.b(') <br> <span class="quiet"> Expires: <span class="date" dt="'),i.b(i.v(i.f("dateExpires",e,t,0))),i.b('"></span> <a href="#" class="quiet js-revoke">Revoke</a> </span> </p> ')}),e.pop()),n.b(" "),n.s(n.f("type_support",e,t,1),e,t,1,0,0,"")||(n.b(' <p class="bottom"> <strong>'),n.b(n.v(n.f("ipAddress",e,t,0))),n.b('</strong> <span class="quiet js-location"></span> <br> <span class="quiet"> Last used: '),n.s(n.f("isRecent",e,t,1),e,t,0,417,440,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" Less than an hour ago ")}),e.pop()),n.b(" "),n.s(n.f("isRecent",e,t,1),e,t,1,0,0,"")||(n.b(' <span class="date" dt="'),n.b(n.v(n.f("dateLastUsed",e,t,0))),n.b('"></span> ')),n.b(" "),n.s(n.f("isCurrent",e,t,1),e,t,0,545,575,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("<span>(current session)</span>")}),e.pop()),n.b(" </span> </p> ")),n.b(" "),n.fl()},templates.member_session_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="js-sessions"></div> <input type="button" class="js-log-out-other" value="Log Out Other Sessions"> '),n.fl()},templates.members_voted=function(e,t,i){var n=this;return n.b(i=i||""),n.b(' <div class="list-voters clearfix '),n.s(n.f("fewMembers",e,t,1),e,t,0,49,56,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("compact")}),e.pop()),n.b('"> '),n.s(n.f("members",e,t,1),e,t,0,86,279,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="voter"> <div class="member member-no-menu"> '),i.b(i.rp("member",e,t,"")),i.b(" </div> "),i.s(i.f("fewMembers",e,t,1),e,t,0,177,256,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="title"> '),i.b(i.v(i.f("fullName",e,t,0))),i.b(' <span class="quiet">('),i.b(i.v(i.f("username",e,t,0))),i.b(")</span> </p> ")}),e.pop()),i.b(" </div> ")}),e.pop()),n.b(" </div> "),n.s(n.f("moreMembers",e,t,1),e,t,0,315,420,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="show-more compact js-more-members-voted"> Show all voters ('),i.b(i.v(i.f("lengthDiff",e,t,0))),i.b(" more) </a> ")}),e.pop()),n.b(" "),n.s(n.f("canVote",e,t,1),e,t,0,449,573,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <a class="js-'),i.s(i.f("voted",e,t,1),e,t,0,478,480,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("un")}),e.pop()),i.b("vote button vote-button "),i.s(i.f("voted",e,t,1),e,t,0,524,531,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("primary")}),e.pop()),i.b('">Vote'),i.s(i.f("voted",e,t,1),e,t,0,557,558,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("d")}),e.pop()),i.b("</a> ")}),e.pop()),n.b(" "),n.fl()},templates["menu-base"]=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li><ul class="boards-pop-over-list" /></li> '),n.b(n.t(n.f("content",e,t,0))),n.b(" </ul> "),n.fl()},templates.menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li><ul class="dynamic-pop-over-list" /></li> '),n.s(n.f("menu_cards",e,t,1),e,t,0,88,210,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <li><a "),i.s(i.f("js_class",e,t,1),e,t,0,109,130,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('class="'),i.b(i.v(i.f("js_class",e,t,0))),i.b('" ')}),e.pop()),i.b(' href="'),i.s(i.f("url",e,t,1),e,t,0,158,165,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("url",e,t,0)))}),e.pop()),i.s(i.f("url",e,t,1),e,t,1,0,0,"")||i.b("#"),i.b('">'),i.b(i.v(i.f("name",e,t,0))),i.b("</a></li> ")}),e.pop()),n.b(" </ul> "),n.fl()},templates.mini_profile=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="mini-profile-info"> <div class="member-large"> '),n.s(n.f("isMe",e,t,1),e,t,0,68,125,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<a class="av-btn change js-change-av" href="#">Change</a>')}),e.pop()),n.b(" "),n.s(n.f("isMe",e,t,1),e,t,1,0,0,"")||n.s(n.f("avatarHash",e,t,1),e,t,0,159,204,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<a class="av-btn js-view-large" href="#"></a>')}),e.pop()),n.b(" "),n.s(n.f("avatarHash",e,t,1),e,t,0,244,585,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="member-avatar" height="50" width="50" src="'),i.b(i.v(i.f("__avatarDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("avatarHash",e,t,0))),i.b('/50.png" alt="'),i.s(i.f("deleted",e,t,1),e,t,0,359,396,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("This member has deleted their account")}),e.pop()),i.s(i.f("deleted",e,t,1),e,t,1,0,0,"")||(i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(")")),i.b('" title="'),i.s(i.f("deleted",e,t,1),e,t,0,480,517,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("This member has deleted their account")}),e.pop()),i.s(i.f("deleted",e,t,1),e,t,1,0,0,"")||(i.b(i.v(i.f("fullName",e,t,0))),i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(")")),i.b('" /> ')}),e.pop()),n.b(" "),n.s(n.f("avatarHash",e,t,1),e,t,1,0,0,"")||(n.b(' <span class="member-initials" title="'),n.s(n.f("deleted",e,t,1),e,t,0,666,703,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("This member has deleted their account")}),e.pop()),n.s(n.f("deleted",e,t,1),e,t,1,0,0,"")||(n.b(n.v(n.f("fullName",e,t,0))),n.b(" ("),n.b(n.v(n.f("username",e,t,0))),n.b(")")),n.b('"> '),n.s(n.f("deleted",e,t,1),e,t,1,0,0,"")||n.b(n.v(n.f("initials",e,t,0))),n.b(" "),n.s(n.f("deleted",e,t,1),e,t,0,818,819,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("?")}),e.pop()),n.b(" </span> ")),n.b(' </div> <div class="info"> <h3 class="bottom" style="margin-right: 40px;"><a class="js-profile" href="/'),n.b(n.v(n.f("username",e,t,0))),n.b('">'),n.b(n.v(n.f("fullName",e,t,0))),n.b('</a></h3> <p class="quiet bottom">@'),n.b(n.v(n.f("username",e,t,0))),n.b("</p> "),n.s(n.f("bio",e,t,1),e,t,0,1044,1085,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<p class="quiet bottom ellip">'),i.b(i.v(i.f("bio",e,t,0))),i.b("</p>")}),e.pop()),n.b(" "),n.s(n.f("showEmail",e,t,1),e,t,0,1108,1145,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<p class="bottom quiet">'),i.b(i.v(i.f("email",e,t,0))),i.b("</p>")}),e.pop()),n.b(" "),n.s(n.f("isMe",e,t,1),e,t,0,1169,1254,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<p class="bottom"><a href="#" class="quiet js-edit-profile">Edit profile info</a></p>')}),e.pop()),n.b(" </div> </div> "),n.fl()},templates.move_card_controls=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("hideBoard",e,t,1),e,t,1,0,0,"")||(n.b(' <div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Board</span> <span class="value js-board-value"></span> <label>Board</label> <select class="js-select-board"> '),n.s(n.f("organizations",e,t,1),e,t,0,258,453,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <optgroup label="'),i.b(i.v(i.f("displayName",e,t,0))),i.b('"> '),i.s(i.f("boards",e,t,1),e,t,0,305,429,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("id",e,t,0))),i.b('"'),i.s(i.f("selected",e,t,1),e,t,0,341,361,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' selected="selected"')}),e.pop()),i.b(">"),i.b(i.v(i.f("name",e,t,0))),i.s(i.f("selected",e,t,1),e,t,0,396,406,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" (current)")}),e.pop()),i.b("</option> ")}),e.pop()),i.b(" </optgroup> ")}),e.pop()),n.b(" </select> </div> </div> ")),n.b(' <div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-threequarters"> <span class="label">List</span> <span class="value js-list-value"></span> <label>List</label> <select class="js-select-list"></select> </div> <div class="button-link setting form-grid-child form-grid-child-quarter"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-position"></select> </div> </div> '),n.fl()},templates.notification=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="creator'),n.s(n.f("isDueDateNotification",e,t,1),e,t,1,0,0,"")||n.b(" member"),n.s(n.f("member",e,t,1),e,t,0,89,106,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-show-mem-menu")}),e.pop()),n.b('"'),n.s(n.f("member",e,t,1),e,t,0,129,147,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' idmember="'),i.b(i.v(i.f("id",e,t,0))),i.b('"')}),e.pop()),n.b("> "),n.s(n.f("member",e,t,1),e,t,0,171,182,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.rp("member",e,t,""))}),e.pop()),n.b(" "),n.s(n.f("memberDeleted",e,t,1),e,t,0,212,256,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="member-initials quiet">?</span>')}),e.pop()),n.b(" "),n.s(n.f("isDueDateNotification",e,t,1),e,t,0,301,335,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-lg icon-clock"/>')}),e.pop()),n.b(" "),n.s(n.f("isDeclinedInvitationNotification",e,t,1),e,t,0,399,433,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-lg icon-close"/>')}),e.pop()),n.b(' </div> <div class="phenom-desc'),n.s(n.f("isDesktopNotification",e,t,1),e,t,1,0,0,"")||(n.s(n.f("invitedToBoard",e,t,1),e,t,0,546,587,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.s(i.f("stillInvited",e,t,1),e,t,0,563,570,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" invite")}),e.pop())}),e.pop()),n.s(n.f("invitedToOrganization",e,t,1),e,t,0,632,673,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.s(i.f("stillInvited",e,t,1),e,t,0,649,656,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" invite")}),e.pop())}),e.pop())),n.b('"> '),n.s(n.f("member",e,t,1),e,t,0,739,824,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<a class="inline-object js-show-mem-menu" href="#" idmember="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b(i.v(i.f("fullName",e,t,0))),i.b("</a>")
}),e.pop()),n.b(" "),n.s(n.f("memberDeleted",e,t,1),e,t,0,854,898,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="quiet">[deleted account]</span>')}),e.pop()),n.b(" "),n.s(n.f("entities",e,t,1),e,t,0,930,943,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("entity",e,t,"")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("isDesktopNotification",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("stillInvited",e,t,1),e,t,0,1001,1237,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="phenom-opts"> <a class="button-link js-accept-invitation'),i.s(i.f("confirmed",e,t,1),e,t,1,0,0,"")||i.b(" disabled"),i.b('" href="#">Accept</a> <a class="button-link js-reject-invitation'),i.s(i.f("confirmed",e,t,1),e,t,1,0,0,"")||i.b(" disabled"),i.b('" href="#">Reject</a> </div> ')}),e.pop()),n.b(" ")),n.b(" </div> "),n.s(n.f("isDesktopNotification",e,t,1),e,t,1,0,0,"")||(n.b(' <p class="phenom-meta quiet"> '),n.s(n.f("date",e,t,1),e,t,0,1355,1395,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="date" dt="'),i.b(i.v(i.f("date",e,t,0))),i.b('"></span>')}),e.pop()),n.b(" </p> ")),n.b(" "),n.fl()},templates.notification_title=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("textType",e,t,1),e,t,0,13,25,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("text",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("cardType",e,t,1),e,t,0,52,64,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("boardType",e,t,1),e,t,0,92,104,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("organizationType",e,t,1),e,t,0,140,152,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("listType",e,t,1),e,t,0,187,199,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("checklistType",e,t,1),e,t,0,231,243,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("checkItemType",e,t,1),e,t,0,280,292,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("labelType",e,t,1),e,t,0,325,355,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("text",e,t,1),e,t,0,335,345,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.t(i.f("text",e,t,0)))}),e.pop()),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("attachmentType",e,t,1),e,t,0,389,401,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("name",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("memberType",e,t,1),e,t,0,436,452,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("fullName",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("relDateType",e,t,1),e,t,0,484,497,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("current",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.fl()},templates.observer_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-member-list js-list '),n.s(n.f("__ed",e,t,1),e,t,0,49,80,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-list-draggable-board-members")}),e.pop()),n.b('"></ul> '),n.fl()},templates.org_account=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module"> <a class="big-link js-change-org-vis" href="#"> <span class="text">Organization Visibility</span> </a> <div> '),n.s(n.f("premium:prefs",e,t,1),e,t,0,155,653,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="window-module"> <div class="window-module-title"> <h3 class="inline">Business Class Settings</h3> </div> <a class="big-link js-restrict-inv-org" href="#"> <span class="text">Org Membership Restrictions</span> </a> <a class="big-link js-restrict-board-vis" href="#"> <span class="text">Board Creation Restrictions</span> </a> <a class="big-link options dark-hover js-toggle-non-org-member-board-invites" href="#"> <span class="text">Inviting Non-Org Members to Boards</span> </a> <div> ')}),e.pop()),n.b(" "),n.s(n.f("canDelete",e,t,1),e,t,0,686,859,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="window-module gutter"> <a class="quiet-button js-confirm-delete-org" href="#" style="padding: 6px 11px; margin-top: 32px;">Delete this organization?</a> </div> ')}),e.pop()),n.b(" "),n.fl()},templates.org_bc_intro=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="product-intro-modal bc-intro"> <a href="#" class="icon-lg icon-close dark-hover product-intro-close js-close-intro-helper"></a> <div class="product-intro-header"> <img class="product-intro-logo" src="https://d78fikflryjgj.cloudfront.net/images/9b9b5d825b48e46a607311eeef8c2e67/trello-business-class-with-text.png" alt="Trello Business Class" /> </div> <hr> <div class="product-intro-section"> <h2>Welcome to Business Class!</h2> <p>To get started...</p> </div> <div class="product-intro-section"> <span class="product-intro-number">1</span> <h3>Visit the Members tab to manage members.</h3> <p> You can link your Google Apps Domain, change roles and deactivate members, and view member activity on the “Members” tab above. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">2</span> <h3>Check out the Organization Settings page.</h3> <p> To check out organization and board invite restrictions and board creation restrictions, click the “Organization Settings” tab above. </p> </div> <div class="product-intro-section"> <span class="product-intro-number">3</span> <h3>Create bulk exports in one click.</h3> <p> Click the Export tab to open the export dialog. Exports include all of your organization’s data, optionally including attachments. Exports will be in '),n.s(n.f("isJPS",e,t,1),e,t,0,1315,1323,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("CSV and ")}),e.pop()),n.b("JSON format. </p> </div> "),n.s(n.f("isJPS",e,t,1),e,t,0,1368,1680,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="product-intro-section"> <span class="product-intro-number">4</span> <h3>Use board backgrounds and stickers.</h3> <p> Open the board menu in the sidebar and select stickers or “Settings” > “Change background”. You’ll see additional stickers and backgrounds, plus you can upload your own. </p> </div> ')}),e.pop()),n.b(' <div class="product-intro-section"> <span class="product-intro-number"> '),n.s(n.f("isJPS",e,t,1),e,t,0,1773,1776,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" 5 ")}),e.pop()),n.b(" "),n.s(n.f("isJPS",e,t,1),e,t,1,0,0,"")||n.b(" 4 "),n.b(' </span> <h3>For billing info…</h3> <p> To see billing history, change a credit card, or change the billing contact, click the “Billing” tab above. </p> </div> <div class="product-intro-section"> <span class="product-intro-number"> '),n.s(n.f("isJPS",e,t,1),e,t,0,2052,2055,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" 6 ")}),e.pop()),n.b(" "),n.s(n.f("isJPS",e,t,1),e,t,1,0,0,"")||n.b(" 5 "),n.b(' </span> <h3>Check the User Guide.</h3> <p style="margin-bottom: 0;"> Everything else is outlined in the <a href="http://help.trello.com/customer/portal/articles/1349993-using-business-class">Business Class User Guide</a>. Business Class features are usually marked with this icon: <span class="icon-sm icon-briefcase icon-briefcase-bc-color"/>. </p> </div> <div class="product-intro-section"> <p> Here is a video walking you through the interface. It will be in the <a href="http://help.trello.com/customer/portal/articles/1349993-using-business-class">User Guide</a> if you want to watch it later. </p> </div> <div class"product-intro-section"> <p> <a href="https://fast.wistia.net/embed/iframe/4v5qyh3c69?popover=true&plugin%5Bchapters%5D%5Bch_1_title%5D=Get%20Organized&plugin%5Bchapters%5D%5Bch_1_time%5D=35&plugin%5Bchapters%5D%5Bch_2_title%5D=Super%20Admins&plugin%5Bchapters%5D%5Bch_2_time%5D=84&plugin%5Bchapters%5D%5Bch_3_title%5D=Member%20Restrictions&plugin%5Bchapters%5D%5Bch_3_time%5D=108&plugin%5Bchapters%5D%5Bch_4_title%5D=Members%20Page&plugin%5Bchapters%5D%5Bch_4_time%5D=158&plugin%5Bchapters%5D%5Bch_5_title%5D=Google%20Apps&plugin%5Bchapters%5D%5Bch_5_time%5D=219&plugin%5Bchapters%5D%5Bch_6_title%5D=Exporting%20Data&plugin%5Bchapters%5D%5Bch_6_time%5D=233&plugin%5Bchapters%5D%5Bch_7_title%5D=Billing&plugin%5Bchapters%5D%5Bch_7_time%5D=255&plugin%5Bchapters%5D%5Bch_8_title%5D=Get%20Help&plugin%5Bchapters%5D%5Bch_8_time%5D=267&plugin%5Bchapters%5D%5Bsrc%5D=https%3A%2F%2Ffast.wistia.com%2Flabs%2Fchapters%2Fplugin.js&plugin%5Bchapters%5D%5Bwidth%5D=200px&plugin%5Bchapters%5D%5Blocation%5D=right&plugin%5Bchapters%5D%5Bshow_timestamps%5D=no" class="wistia-popover[height=353,playerColor=006595,width=778]" id="wistia-bc-video"><img src="https://embed-ssl.wistia.com/deliveries/a8a9c5143cf82350ec8f8365d2b42599b16905b7.jpg?image_play_button=true&image_play_button_color=006595e0&image_crop_resized=406x228" /></a> <script charset="ISO-8859-1" src="https://fast.wistia.com/static/popover-v1.js"></script> </p> </div> <p class="product-intro-close-bottom center quiet"> <a href="#" class="js-close-intro-helper dark-hover"> <span class="icon-sm icon-close dark-hover"/>Got it! Close this helper. </a> </p> </div> '),n.fl()},templates.org_boards_for_member=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> '),n.s(n.f("boards",e,t,1),e,t,0,38,127,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('"> '),i.b(i.v(i.f("name",e,t,0))),i.b(' <span class="quiet">('),i.b(i.v(i.f("memberType",e,t,0))),i.b(")</span> </a> </li> ")}),e.pop()),n.b(" </ul> "),n.fl()},templates.org_create=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <p class="error" style="display:none"></p> <label for="org-display-name">Name</label> <input type="text" name="displayName" class="js-autofocus" id="org-display-name" value="'),n.b(n.v(n.f("displayName",e,t,0))),n.b('"> <label for="org-desc">Description <span class="quiet" style="font-weight: normal;">(optional)</span></label> <textarea id="org-desc" name="desc" type="text">'),n.b(n.v(n.f("desc",e,t,0))),n.b('</textarea> <input type="submit" class="primary wide js-save" value="Create"> </form> <hr style="margin-top: 8px;"> <p class="quiet bottom"> An organization is a group of boards and members. </p> '),n.fl()},templates.org_detail=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="tabbed-pane-header"> <div class="tabbed-pane-header-wrapper clearfix"> <a class="tabbed-pane-header-image profile-image '),n.s(n.f("__ed",e,t,1),e,t,0,141,162,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("ed js-change-org-logo")}),e.pop()),n.b('" href="#"> <img class="profile-image-image" '),n.s(n.f("logoHash",e,t,1),e,t,0,229,298,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' src="'),i.b(i.v(i.f("__logoDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("logoHash",e,t,0))),i.b('/170.png" alt="'),i.b(i.v(i.f("fullName",e,t,0))),i.b(' logo" ')}),e.pop()),n.b(" "),n.s(n.f("logoHash",e,t,1),e,t,1,0,0,"")||n.b(' src="https://d78fikflryjgj.cloudfront.net/images/b8e08be89ac9461c0a1d543016926792/org-logo-large.png" alt="Default organization logo" '),n.b(' > <span class="change-text"> Change Logo </span> </a> <div class="tabbed-pane-header-details"> <div class="js-current-details"></div> '),n.s(n.f("__ed",e,t,1),e,t,0,617,661,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <form class="js-profile-form hide"></form> ')}),e.pop()),n.b(' </div> <div class="tabbed-pane-header-factoid js-header-factoid"></div> </div> </div> <div class="tabbed-pane-nav clearfix"> <ul> <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-org-profile" href="/'),n.b(n.v(n.f("name",e,t,0))),n.b('">Boards</a> </li> <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-org-members" href="/'),n.b(n.v(n.f("name",e,t,0))),n.b('/members">Members</a> </li> '),n.s(n.f("isBusinessClassAdmin",e,t,1),e,t,0,1079,1271,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-org-export" href="/'),i.b(i.v(i.f("name",e,t,0))),i.b('/export">Export <span class="icon-sm icon-briefcase icon-briefcase-bc-color"/></a> </li> ')}),e.pop()),n.b(" "),n.s(n.f("hasAccount",e,t,1),e,t,0,1312,1513,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-billing" href="/'),i.b(i.v(i.f("name",e,t,0))),i.b('/billing">Billing'),i.s(i.f("accountProblem",e,t,1),e,t,0,1448,1483,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="option">Issue!</span>')}),e.pop()),i.b("</a> </li> ")}),e.pop()),n.b(" "),n.s(n.f("isOrgAdmin",e,t,1),e,t,0,1544,1677,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li class="tabbed-pane-nav-item"> <a class="tabbed-pane-nav-item-button js-org-account" href="/'),i.b(i.v(i.f("name",e,t,0))),i.b('/account">Settings</a> </li> ')}),e.pop()),n.b(' </ul> </div> <div class="tabbed-pane-main-col clearfix"> <div class="tabbed-pane-main-col-loading hide js-loading-page"> <span class="tabbed-pane-main-col-loading-spinner spinner"></span> </div> <div class="tabbed-pane-main-col-wrapper js-content"></div> </div> '),n.fl()},templates.org_detail_profile_edit=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="error js-profile-form-error hide"></p> <label>Name</label> <input type="text" name="displayName" value="'),n.b(n.v(n.f("displayName",e,t,0))),n.b('"/> <label>Short Name</label> <input type="text" name="name" value="'),n.b(n.v(n.f("name",e,t,0))),n.b('"/> <label>Website</label> <input type="text" name="website" value="'),n.b(n.v(n.f("website",e,t,0))),n.b('"/> <label>Description <span class="quiet">(optional)</span></label> <textarea name="desc">'),n.b(n.v(n.f("desc",e,t,0))),n.b('</textarea> <input type="submit" class="primary wide js-submit-profile" value="Save"/> <input type="button" class="js-cancel-edit-profile" value="Cancel"/> '),n.fl()},templates.org_detail_profile_info=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="tabbed-pane-header-details-name"> <h1 class="inline"> '),n.b(n.v(n.f("displayName",e,t,0))),n.b(" </h1> "),n.s(n.f("hasBusinessClass",e,t,1),e,t,0,109,240,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="window-title-extra bc"> <span class="business-class-mark" title="Business Class Mark"></span> Business Class </span> ')}),e.pop()),n.b(' <span class="window-title-extra"> <span class="icon-sm icon-'),n.b(n.v(n.f("permissionLevel",e,t,0))),n.b('" title="'),n.b(n.v(n.f("pLevelAltText",e,t,0))),n.b('"></span> '),n.b(n.v(n.f("pLevelDisplayText",e,t,0))),n.b(' </span> </div> <div class="tabbed-pane-header-details-content"> '),n.s(n.f("desc",e,t,1),e,t,0,472,495,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("descriptionHtml",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("websiteHref",e,t,1),e,t,0,521,573,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p> <a href="'),i.b(i.v(i.f("websiteHref",e,t,0))),i.b('">'),i.b(i.v(i.f("website",e,t,0))),i.b("</a> </p> ")}),e.pop()),n.b(" "),n.s(n.f("accountProblem",e,t,1),e,t,0,609,832,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div style="padding: 4px 8px; background-color: orange; margin-bottom: 8px;"> <p class="bottom"> Oops! There is a problem with your billing information. Visit <a href="/'),i.b(i.v(i.f("name",e,t,0))),i.b('/billing">Billing</a> to fix it. </p> </div> ')}),e.pop()),n.b(" </div> "),n.s(n.f("__ed",e,t,1),e,t,0,868,1006,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="button-link tabbed-pane-header-details-edit js-edit-profile" href="#"><span class="icon-sm icon-edit"></span> Edit profile</a> ')}),e.pop()),n.b(" "),n.fl()},templates.org_export=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module org-export-header"> <button class="org-export-header-button primary js-create-new-export">Create New Export</button> <div class="org-export-header-options clearfix"> <input id="includeAttachments" type="checkbox"> <label for="includeAttachments" class="quiet inline" style="font-weight: normal;">Include raw attachments…</label> </div> <p class="quiet org-export-header-text"> Downloads will be in a ZIP format that includes members, boards, and all other data in'),n.s(n.f("hasCSV",e,t,1),e,t,0,500,521,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" CSV and JSON formats")}),e.pop()),n.s(n.f("hasCSV",e,t,1),e,t,1,0,0,"")||n.b(" JSON format"),n.b('. If you choose to include raw attachments, they will be in their native format. Otherwise, they will include a link to the version in Trello. </p> </div> <div class="window-module org-export-list"> <div class="window-module-title"> <span class="window-module-title-icon icon-lg icon-archive"/> <h3>Exports</h3> </div> <div class="gutter clearfix js-list-exports"></div> </div> '),n.fl()},templates.org_export_empty=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="quiet" style="padding: 7px 0;">No exports. Click “Create New Export” to generate a new one.</p> '),n.fl()},templates.org_export_item=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="org-export-list-item clearfix'),n.s(n.f("generating",e,t,1),e,t,0,56,88,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" org-export-list-item-generating")}),e.pop()),n.b('"> '),n.s(n.f("generating",e,t,1),e,t,0,121,291,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="org-export-list-item-title"> '),i.s(i.f("status",e,t,1),e,t,0,172,231,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("stage",e,t,0))),i.s(i.f("total",e,t,1),e,t,0,192,220,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" ("),i.b(i.v(i.f("progress",e,t,0))),i.b(" of "),i.b(i.v(i.f("total",e,t,0))),i.b(")")}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("status",e,t,1),e,t,1,0,0,"")||i.b("Creating new export…"),i.b(" </p> ")}),e.pop()),n.b(" "),n.s(n.f("generating",e,t,1),e,t,1,0,0,"")||(n.b(' <p class="org-export-list-item-title"> '),n.b(n.v(n.f("time",e,t,0))),n.b(" - "),n.b(n.v(n.f("size",e,t,0))),n.b(" "),n.s(n.f("attachments",e,t,1),e,t,0,398,447,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="quiet">(includes attachments)</span>')}),e.pop()),n.b(' </p> <a href="'),n.b(n.v(n.f("exportUrl",e,t,0))),n.b('" class="button-link org-export-list-item-button js-download-export" target="_blank">Download</a> ')),n.b(" </div> "),n.fl()},templates.org_inline=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span>the organization</span> <a href="'),n.b(n.v(n.f("organizationUrl",e,t,0))),n.b('" class="inline-object"> '),n.b(n.v(n.f("name",e,t,0))),n.b(" </a> "),n.fl()},templates.org_link_ga_helper=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="ga-link-helper-section"> <p> <span class="ga-link-helper-num">1</span> First you must enable Administrative API access for your Google Apps Domain. You can find instructions for doing so <a target="_blank" href="https://support.google.com/a/answer/60757">here</a>. </p> <p> <span class="ga-link-helper-num">2</span> Next, you’ll need to add the Trello Business Class app from the Google Apps Marketplace to your domain. The button below will get you there. </p> <p> <span class="ga-link-helper-num">3</span> When there, be sure you are signed in to the Google account with the correct domain you want to use. Click the “Integrate with Google” button then follow the prompts. </p> <p> <span class="ga-link-helper-num">4</span> You’ll see other users from your Google Apps Domain on this page when configured correctly. </p> </div> <a class="button js-link" style="width: 100%; padding: 7px 0;" target="_blank" href="https://chrome.google.com/webstore/detail/trello-business-class/hmhbhkhihjbjgghmkhhniddhlojffhil"> Go To Google Apps Marketplace </a> '),n.fl()},templates.org_member_activity=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li> '),n.s(n.f("hasBoards",e,t,1),e,t,0,46,121,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="js-view-org-boards-for-member"> On '),i.b(i.v(i.f("boardCount",e,t,0))),i.b(" </a> ")}),e.pop()),n.b(" "),n.s(n.f("hasBoards",e,t,1),e,t,1,0,0,"")||(n.b(' <a href="#" class="disabled"> On '),n.b(n.v(n.f("boardCount",e,t,0))),n.b(" </a> ")),n.b(" </li> "),n.s(n.f("orgCardsUrl",e,t,1),e,t,0,241,342,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a href="'),i.b(i.v(i.f("orgCardsUrl",e,t,0))),i.b('" class="js-view-member-org-cards"> View Member\'s Org Cards </a> </li> ')}),e.pop()),n.b(" </ul> "),n.s(n.f("lastActive",e,t,1),e,t,0,380,519,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <p class="quiet bottom"> '),i.b(i.v(i.f("fullName",e,t,0))),i.b(' was last active in this organization <span class="date bold" dt="'),i.b(i.v(i.f("lastActive",e,t,0))),i.b('"></span>. </p> ')}),e.pop()),n.b(" "),n.fl()},templates.org_member_cards=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module"> '),n.s(n.f("memberData",e,t,1),e,t,0,43,64,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("member_profile",e,t,"")),i.b(" ")}),e.pop()),n.b(' </div> <div class="js-cards"></div> '),n.fl()},templates.org_members=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module gutter bottom clearfix"> <input type="text" class="left js-search" placeholder="Find members by name…" style="margin-bottom: 8px;"> <div class="org-members-options"> '),n.s(n.f("__ed",e,t,1),e,t,0,201,313,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="button-link gutter js-manage-members" href="#"> <span class="icon-sm icon-member"/> Add Members </a> ')}),e.pop()),n.b(' <div class="js-google-apps-linker'),n.s(n.f("canLinkGoogleApps",e,t,1),e,t,1,0,0,"")||n.b(" hide"),n.b('"> <a class="button-link primary js-link-google-apps" href="#"> <span class="icon-sm icon-google"/> Link To Google Apps Domain </a> </div> '),n.s(n.f("canShowAll",e,t,1),e,t,0,559,768,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("showingAll",e,t,1),e,t,1,0,0,"")||i.b(' <a class="quiet-button js-show-all" href="#"> Show Dismissed Accounts </a> '),i.b(" "),i.s(i.f("showingAll",e,t,1),e,t,0,682,752,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="quiet-button js-hide-hidden" href="#"> Hide Dismissed </a> ')}),e.pop()),i.b(" ")}),e.pop()),n.b(' </div> </div> <hr> <div class="window-module js-member-list"/> '),n.fl()},templates.org_plans=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-module bc-plans"> <img class="bc-hero-image" src="https://d78fikflryjgj.cloudfront.net/images/9b9b5d825b48e46a607311eeef8c2e67/trello-business-class-with-text.png" alt="Trello Business Class" /> <div class="pitch"> <p class="intro"> Trello Business Class gives you all the power of organizations&mdash;like unlimited boards and members&mdash;plus extra administrative control and features. </p> <ul class="bc-features"> <li><span class="icon-sm icon-check"></span> Easily manage boards and members</li> <li><span class="icon-sm icon-check"></span> Google Apps integration</li> <li><span class="icon-sm icon-check"></span> Additional and custom board backgrounds</li> <li><span class="icon-sm icon-check"></span> Additional and custom stickers</li> <li><span class="icon-sm icon-check"></span> 250MB attachments</li> <li><span class="icon-sm icon-check"></span> One-click bulk data export in CSV and JSON</li> <li><span class="icon-sm icon-check"></span> Bulk export history</li> <li><span class="icon-sm icon-check"></span> Observer role</li> </ul> '),n.s(n.f("isOrgAdmin",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("activeAccount",e,t,1),e,t,1,0,0,"")||n.b(' <p class="helper"> Hey there! You must be an admin of the organization to get Business Class. </p> '),n.b(" ")),n.b(" "),n.s(n.f("willExpire",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("activeAccount",e,t,1),e,t,1,0,0,"")||n.b(' <p> <a href="/business-class" target="_blank" class="js-learn-more-plans">Learn more about Business Class &rarr;</a> </p> '),n.b(" "),n.s(n.f("activeAccount",e,t,1),e,t,0,1431,2118,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isJPS",e,t,1),e,t,1,0,0,"")||(i.b(' <p style="font-size: 20px; line-height: 1.35em;"> There is a new Business Class update available. Some of the features listed above are only in this update! </p> '),i.s(i.f("isBCAdmin",e,t,1),e,t,1,0,0,"")||i.b(" <p>Only organization admins can upgrade your account.</p> "),i.b(" "),i.s(i.f("isBCAdmin",e,t,1),e,t,0,1707,1779,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p><a href="/'),i.b(i.v(i.f("name",e,t,0))),i.b('/billing">Learn more and get the upgrade.</a></p> ')}),e.pop()),i.b(" ")),i.b(" "),i.s(i.f("isJPS",e,t,1),e,t,0,1815,2107,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p style="font-size: 20px; line-height: 1.35em;"> <strong>Business Class is active!</strong> <span class="quiet">(Woo!)</span> </p> '),i.s(i.f("isBCAdmin",e,t,1),e,t,0,1962,2092,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p><a href="http://help.trello.com/customer/portal/articles/1349993-business-class-user-guide">Check out the User Guide.</a></p> ')}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),n.b(" ")),n.b(' </div> <div class="bc-call-out'),n.s(n.f("activeAccount",e,t,1),e,t,0,2201,2238,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.s(i.f("willExpire",e,t,1),e,t,1,0,0,"")||i.b(" active")}),e.pop()),n.b('"> <p class="bc-price bottom"> '),n.b(n.v(n.f("bcMonthlyPrice",e,t,0))),n.b(' per month </p> <p class="bc-sub-price"> or '),n.b(n.v(n.f("bcYearlyPrice",e,t,0))),n.b(' per year </p> <p>for each organization</p> <p class="quiet">(You can cancel at any time.)</p> '),n.s(n.f("activeAccount",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("cancelledAccount",e,t,1),e,t,1,0,0,"")||(n.b(' <a class="button '),n.s(n.f("isOrgAdmin",e,t,1),e,t,0,2534,2571,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" primary js-upgrade-to-business-class")}),e.pop()),n.s(n.f("isOrgAdmin",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" href="'),n.b(n.v(n.f("cardUrl",e,t,0))),n.b('"> Upgrade This Organization! </a> ')),n.b(" "),n.s(n.f("cancelledAccount",e,t,1),e,t,0,2722,2874,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="button '),i.s(i.f("isOrgAdmin",e,t,1),e,t,0,2755,2777,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" primary js-reactivate")}),e.pop()),i.s(i.f("isOrgAdmin",e,t,1),e,t,1,0,0,"")||i.b(" disabled"),i.b('" href="#"> Reactivate Business Class </a> ')}),e.pop()),n.b(" ")),n.b(" </div> "),n.s(n.f("willExpire",e,t,1),e,t,0,2937,3377,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isBCAdmin",e,t,1),e,t,0,2952,3362,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="quiet"> You\'ve cancelled Business Class, but you can use the premium features until <strong>'),i.b(i.v(i.f("yearlyExpirationDate",e,t,0))),i.b('</strong>. </p> <p> <a href="#" class="button-link inline-block js-renew-expiring-yearly-business-class-sub" style="padding-left: 24px; padding-right: 24px;"> Renew Your Subscription? </a> </p> <p class="quiet"> When you renew, you won\'t be charged until the date listed above. </p> ')}),e.pop()),i.b(" ")}),e.pop()),n.b(" </div> "),n.fl()},templates.org_pref_restriction=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<li> "),n.b(n.v(n.f("restriction",e,t,0))),n.b(' <a href="#" class="dark-hover js-restricted-address" data-pattern="'),n.b(n.v(n.f("restriction",e,t,0))),n.b('" title="Remove this domain or email address from the list."> <span class="option close icon-sm icon-close"/> </a> </li> '),n.fl()},templates.org_prefs_nonorg_invites=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li> <a href="#"> Allow '),n.s(n.f("externalMembersDisabled",e,t,1),e,t,1,0,0,"")||n.b('<span class="icon-sm icon-check"/>'),n.b(' <span class="sub-name"> Anyone can be added to a board inside your organization. </span> </a> </li> <li> <a href="#"> Don\'t Allow '),n.s(n.f("externalMembersDisabled",e,t,1),e,t,0,300,334,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name"> Only members added to your organization will be able to join your organization’s boards. </span> </a> </li> </ul> '),n.fl()},templates.org_prefs_restrict_invites=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div style="position: relative;"> <input type="text" class="js-input-restricted js-autofocus" placeholder=\'Add a domain or address…\' style="margin-bottom: 6px;"> <span class="spinner small hide js-loading" style="position: absolute; top: 6px; right: 6px; z-index: 2;"/> </div> <p class="bottom quiet" style="padding: 6px;"> Choose which email domains and addresses can be added to the org. For example, if you only wanted users with fogcreek.com email addresses to be able to be added to the org, enter fogcreek.com. </p> <p class="error bottom js-errors" style="display: none; margin-top: 8px;"></p> <div class="manage-member-section js-restriction-list" style="margin-top: 16px;'),n.s(n.f("hasRestrictions",e,t,1),e,t,1,0,0,"")||n.b(" display: none;"),n.b('"> <h4>Allowed Domains and Addresses</h4> <ul class="closeable-list js-list"></ul> </div> '),n.fl()},templates.org_prefs_vis=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div style="margin: 12px 0 0;"> <p>Who can create <span class="icon-sm icon-public"/> <strong>public</strong> boards?</p> <ul class="pop-over-list checkable left-check normal-weight" data-vis="public"> <li'),n.s(n.f("boardVisibilityRestrict_public_org",e,t,1),e,t,0,244,259,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b(' > <a href="#" data-restriction="org">Any Org Member <span class="icon-sm icon-check"/></a> </li> <li'),n.s(n.f("boardVisibilityRestrict_public_admin",e,t,1),e,t,0,440,455,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b('> <a href="#" data-restriction="admin">Only Org Admins <span class="icon-sm icon-check"/></a> </li> <li'),n.s(n.f("boardVisibilityRestrict_public_none",e,t,1),e,t,0,639,654,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b('> <a href="#" data-restriction="none">Nobody <span class="icon-sm icon-check"/></a> </li> </ul> </div> <hr> <div style="margin: 12px 0 0;"> <p>Who can create <span class="icon-sm icon-org-private"/> <strong>org visible</strong> boards?</p> <ul class="pop-over-list checkable left-check normal-weight" data-vis="org"> <li'),n.s(n.f("boardVisibilityRestrict_org_org",e,t,1),e,t,0,1050,1065,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b('> <a href="#" data-restriction="org">Any Org Member <span class="icon-sm icon-check"/></a> </li> <li'),n.s(n.f("boardVisibilityRestrict_org_admin",e,t,1),e,t,0,1239,1254,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b('> <a href="#" data-restriction="admin">Only Org Admins <span class="icon-sm icon-check"/></a> </li> <li'),n.s(n.f("boardVisibilityRestrict_org_none",e,t,1),e,t,0,1432,1447,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b('> <a href="#" data-restriction="none">Nobody <span class="icon-sm icon-check"/></a> </li> </ul> </div> <hr> <div style="margin: 12px 0 0;"> <p>Who can create <span class="icon-sm icon-private"/> <strong>private</strong> boards?</p> <ul class="pop-over-list checkable left-check normal-weight" data-vis="private"> <li'),n.s(n.f("boardVisibilityRestrict_private_org",e,t,1),e,t,0,1840,1855,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b('> <a href="#" data-restriction="org">Any Org Member <span class="icon-sm icon-check"/></a> </li> <li'),n.s(n.f("boardVisibilityRestrict_private_admin",e,t,1),e,t,0,2037,2052,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b('> <a href="#" data-restriction="admin">Only Org Admins <span class="icon-sm icon-check"/></a> </li> <li'),n.s(n.f("boardVisibilityRestrict_private_none",e,t,1),e,t,0,2238,2253,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' class="active"')}),e.pop()),n.b('> <a href="#" data-restriction="none">Nobody <span class="icon-sm icon-check"/></a> </li> </ul> </div> '),n.fl()},templates.org_profile=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="js-main-boards-section"></div> '),n.s(n.f("isBusinessClassAdmin",e,t,1),e,t,0,68,306,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="#" class="show-more clear js-show-other-private-boards-section"> Show other member’s private boards... <span class="icon-sm icon-briefcase icon-briefcase-bc-color"/> </a> <div class="js-other-private-boards-section hide"></div> ')
}),e.pop()),n.b(" "),n.fl()},templates.org_remove_or_deactivate_member=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li class="clearfix"> <a class="js-soft-remove" href="#"> <span class="clearfix">'),n.s(n.f("isMe",e,t,1),e,t,0,117,135,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("Leave organization")}),e.pop()),n.s(n.f("isMe",e,t,1),e,t,1,0,0,"")||n.b("Remove from organization"),n.b('</span> <span class="sub-name"> Remove all access to the organization'),n.s(n.f("isDeactivated",e,t,1),e,t,0,273,288,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" and all boards")}),e.pop()),n.b(". "),n.s(n.f("orgIsBC",e,t,1),e,t,1,0,0,"")||n.b(" The member will remain on all their boards in this organization. They will receive a notification. "),n.b(" </span> </a> "),n.s(n.f("orgIsBC",e,t,1),e,t,0,458,868,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isDeactivated",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("isMe",e,t,1),e,t,1,0,0,"")||(i.b(' <span class="check-div quiet js-hard-remove clearfix" style="margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"> <input type="checkbox" id="hardRemove" name="hard" checked> <label for="hardRemove">'),i.s(i.f("hasBoards",e,t,1),e,t,0,722,756,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("This member is on "),i.b(i.v(i.f("boardCount",e,t,0))),i.b(". ")}),e.pop()),i.b("Check this box to remove the member from all boards.</label> </span> ")),i.b(" ")),i.b(" ")}),e.pop()),n.b(" </li> "),n.s(n.f("canDeactivate",e,t,1),e,t,0,905,1156,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isMe",e,t,1),e,t,1,0,0,"")||i.b(' <li class="clearfix"> <a class="js-deactivate" href="#"> Deactivate <span class="sub-name"> Disable member\'s access to org boards, but allow other org members to see what the cards and boards the member was on. </span> </a> </li> '),i.b(" ")}),e.pop()),n.b(" </ul> "),n.fl()},templates.organization_list_item=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="'),n.b(n.v(n.f("url",e,t,0))),n.b('"> <span class="item-name">'),n.b(n.v(n.f("displayName",e,t,0))),n.b("</span> "),n.s(n.f("hasBusinessClass",e,t,1),e,t,0,87,149,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-sm icon-briefcase icon-briefcase-bc-color"/>')}),e.pop()),n.b(' <span class="icon-sm icon-'),n.b(n.v(n.f("visIconClass",e,t,0))),n.b('"/> </a> '),n.fl()},templates.organization_search_list_item=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<li><a class='link-item' href='/"),n.b(n.v(n.f("name",e,t,0))),n.b("'><span class='item-name'>"),n.b(n.v(n.f("displayName",e,t,0))),n.b("</span></a></li> "),n.fl()},templates.pop_over_ad=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" class="icon-sm icon-close dark-hover ad-close js-close-ad"></a> '),n.s(n.f("iconClass",e,t,1),e,t,0,90,135,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="ad-icon '),i.b(i.v(i.f("iconClass",e,t,0))),i.b('"></span> ')}),e.pop()),n.b(' <div class="ad-copy">'),n.b(n.t(n.f("copyHtml",e,t,0))),n.b("</div>"),n.fl()},templates.popover_add_email=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <p id="account-error" class="error"></p> <div class="field"> <label for="email">New Email Address</label> <input id="email" type="email" name="email" value=""> </div> <input type="submit" class="primary js-save-changes" value="Send Confirmation Email"> </form> <hr> <p class="quiet bottom"> We’ll send an email to the address you enter. Click the link in the email to confirm the address. </p> '),n.fl()},templates.popover_add_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form style="position: relative;"> <div class="form-grid"> <div class="form-grid-child form-grid-child-threequarters"> <label for="list-name">Name</label> <input type="text" class="js-list-name js-autofocus" id="list-name" value="List" style="margin-bottom: 0;"> </div> <div href="#" class="button-link setting form-grid-child form-grid-child-quarter"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-list-pos"></select> </div> </div> <input type="submit" class="primary wide left clear js-add-list" value="Add"> </form> '),n.fl()},templates.popover_auto_mentioner=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("button",e,t,1),e,t,0,11,106,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <input type="text" class="js-filter-mentionables js-autofocus" placeholder="Search members…"> ')}),e.pop()),n.b(' <p class="quiet js-empty-list hide" style="padding: 8px 8px 0;">No matching members</p> <ul class="pop-over-member-list js-available-members"></ul> '),n.s(n.f("button",e,t,1),e,t,0,277,874,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="js-select-multiple-options hide"> <hr> <ul class="pop-over-list"> '),i.s(i.f("showAllCardMembers",e,t,1),e,t,0,379,501,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li> <a href="#" class="js-select-all-card-members"> Mention All Card Members <span class="quiet mem-count"/> </a> </li> ')}),e.pop()),i.b(" "),i.s(i.f("showAllBoardMembers",e,t,1),e,t,0,549,673,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li> <a href="#" class="js-select-all-board-members"> Mention All Board Members <span class="quiet mem-count"/> </a> </li> ')}),e.pop()),i.b(" "),i.s(i.f("showAllCommenters",e,t,1),e,t,0,720,838,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li> <a href="#" class="js-select-all-commenters"> Mention All Commenters <span class="quiet mem-count"/> </a> </li> ')}),e.pop()),i.b(" </ul> </div> ")}),e.pop()),n.b(" "),n.fl()},templates.popover_board_header_org_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> '),n.s(n.f("canChangeOrg",e,t,1),e,t,0,44,206,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-change-org" href="#"> '),i.s(i.f("setOrgNull",e,t,1),e,t,0,100,126,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" Remove From Organization ")}),e.pop()),i.b(" "),i.s(i.f("setOrgNull",e,t,1),e,t,1,0,0,"")||i.b(" Change Organization… "),i.b(" </a> </li> ")}),e.pop()),n.b(' <li> <a class="js-view-org" href="/'),n.b(n.v(n.f("name",e,t,0))),n.b('">View Organization Page</a> </li> </ul> '),n.fl()},templates.popover_card_completer=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("button",e,t,1),e,t,0,11,96,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <input type="text" class="js-search js-autofocus" placeholder="Search for a card…"> ')}),e.pop()),n.b(' <div class="js-loading'),n.s(n.f("hideLoading",e,t,1),e,t,0,146,151,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" hide")}),e.pop()),n.b('"> <span class="loading spinner"></span> </div> <div class="js-results"> <ul class="pop-over-list navigable js-card-list"></ul> </div> <div class="js-no-results hide"> <p class="bottom"> No Results </p> </div> '),n.fl()},templates.popover_card_from_calendar=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div> <textarea class="js-card-title">'),n.b(n.v(n.f("title",e,t,0))),n.b('</textarea> </div> <div class="button-link list-button-link setting"> <span class="label">List</span> <span class="value js-list-value"></span> <label>List</label> <select class="js-select-list"></select> </div> <div class="button-link pos-button-link setting"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-position"></select> </div> <input type="submit" class="primary wide js-add-card" value="Add"/> '),n.fl()},templates.popover_change_board_org=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <label>Organization</label> <select class="js-org"> <option value="" '),n.s(n.f("orgs",e,t,1),e,t,1,0,0,"")||n.b("selected"),n.b(">(none)</option> "),n.s(n.f("orgs",e,t,1),e,t,0,128,207,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("id",e,t,0))),i.b('"'),i.s(i.f("select",e,t,1),e,t,0,162,170,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("selected")}),e.pop()),i.b(">"),i.b(i.v(i.f("displayName",e,t,0))),i.b("</option> ")}),e.pop()),n.b(' </select> <input type="submit" class="js-submit wide primary" value="Change"> </form> '),n.fl()},templates.popover_change_labels=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="edit-labels-pop-over'),n.s(n.f("showShortcuts",e,t,1),e,t,0,49,64,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" show-shortcuts")}),e.pop()),n.b('"> '),n.s(n.f("labels",e,t,1),e,t,0,96,396,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="card-label card-label-selectable card-label-'),i.b(i.v(i.f("color",e,t,0))),i.b(" "),i.s(i.f("isActive",e,t,1),e,t,0,179,185,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),i.b('" label="'),i.b(i.v(i.f("color",e,t,0))),i.b('"> '),i.s(i.f("name",e,t,1),e,t,0,228,236,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("name",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("shortcut",e,t,1),e,t,0,259,303,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<span class="shortcut">('),i.b(i.v(i.f("shortcut",e,t,0))),i.b(")</span>")}),e.pop()),i.b(' <span class="card-label-selectable-icon icon-sm icon-check light"/> </a> </li> ')}),e.pop()),n.b(" </ul> "),n.s(n.f("__ed",e,t,1),e,t,0,423,702,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="'),i.s(i.f("hideEditTitles",e,t,1),e,t,0,455,459,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("hide")}),e.pop()),i.b('"> <hr> <a class="quiet-button full js-edit-label-titles" href="#"> Change label names for board… </a> <a class="quiet-button full js-toggle-color-blind-mode" href="#"> '),i.b(i.v(i.f("cbToggleText",e,t,0))),i.b(" Color Blind Friendly Mode </a> </div> ")}),e.pop()),n.b(" "),n.fl()},templates.popover_change_roles=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li> <a class="'),n.s(n.f("canMakeAdmin",e,t,1),e,t,0,59,87,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-make-admin highlight-icon")}),e.pop()),n.s(n.f("canMakeAdmin",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('"> Admin '),n.s(n.f("memberIsAdmin",e,t,1),e,t,0,174,208,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name">'),n.b(n.v(n.f("roleText_admin",e,t,0))),n.b('</span> </a> </li> <li> <a class="'),n.s(n.f("canMakeMember",e,t,1),e,t,0,320,350,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("highlight-icon js-make-member ")}),e.pop()),n.s(n.f("canMakeMember",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('"> Normal '),n.s(n.f("memberIsNormal",e,t,1),e,t,0,442,476,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name">'),n.b(n.v(n.f("roleText_normal",e,t,0))),n.b("</span> </a> </li> "),n.s(n.f("showObserver",e,t,1),e,t,0,574,926,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="'),i.s(i.f("canMakeObserver",e,t,1),e,t,0,610,642,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("highlight-icon js-make-observer ")}),e.pop()),i.s(i.f("canMakeObserver",e,t,1),e,t,1,0,0,"")||i.b(" disabled"),i.b('"> Observer <span class="icon-sm icon-briefcase icon-briefcase-bc-color"/> '),i.s(i.f("memberIsObserver",e,t,1),e,t,0,807,841,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<span class="icon-sm icon-check"/>')}),e.pop()),i.b(' <span class="sub-name">'),i.b(i.v(i.f("roleText_observer",e,t,0))),i.b("</span> </a> </li> ")}),e.pop()),n.b(" </ul> "),n.s(n.f("isMoreThanOneAdmin",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("memberIsAdmin",e,t,1),e,t,0,992,1093,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr> <p class="quiet bottom"> You can’t change roles because there must be at least one admin. </p> ')}),e.pop()),n.b(" ")),n.b(" "),n.fl()},templates.popover_change_set_password=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<form> "),n.s(n.f("hasPassword",e,t,1),e,t,0,23,139,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <label for="o_password"> Old Password </label> <input id="o_password" type="password" name="oldpassword" value=""> ')}),e.pop()),n.b(' <label for="password1"> '),n.s(n.f("hasPassword",e,t,1),e,t,0,196,201,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" New ")}),e.pop()),n.b(' Password </label> <input id="password1" type="password" name="password" value=""> <label for="password2"> '),n.s(n.f("hasPassword",e,t,1),e,t,0,340,345,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" New ")}),e.pop()),n.b(' Password (again) </label> <input id="password2" type="password" name="password2" value=""> <p id="password-error" class="error"></p> <input type="submit" class="primary js-save-changes" value="Save"> </form> '),n.s(n.f("hasPassword",e,t,1),e,t,1,0,0,"")||n.b(' <hr> <p class="quiet bottom"> You haven\'t set a password yet. You can set a password so you can log onto Trello with just your username or email address. </p> '),n.b(" "),n.fl()},templates.popover_change_user_info=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <p id="account-error" class="error"></p> <div class="field"> <label for="fullName">Full Name</label> <input id="fullName" type="text" name="fullName" value="'),n.b(n.v(n.f("fullName",e,t,0))),n.b('"> </div> <div class="field"> <label for="initials">Initials</label> <input id="initials" type="text" name="initials" value="'),n.b(n.v(n.f("initials",e,t,0))),n.b('"> </div> <div class="field"> <label for="username">Username</label> <input id="username" type="text" name="username" value="'),n.b(n.v(n.f("username",e,t,0))),n.b('" required autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> </div> <div class="field"> <label for="bio">Bio</label> <textarea id="bio" type="text" name="bio">'),n.b(n.v(n.f("bio",e,t,0))),n.b('</textarea> </div> <input type="submit" class="primary js-save-changes" value="Save"> </form> <hr> <p class="quiet bottom"> Your initials are used in place of your avatar if your avatar is not set. Usernames require a minimum of 3 characters, alphanumeric only. </p> '),n.fl()},templates.popover_checklist_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b(' <ul class="pop-over-list"> <li><a class="js-delete-checklist" href="#">Delete This Checklist…</a></li> </ul> '),n.fl()},templates.popover_confirm_jps_upgrade=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="billing-upgrade-banner-price-section"> <p> The price for the upgrade will be $5 per user per month or $45 per user per year. Your price will be… </p> '),n.s(n.f("monthlyUpgrade",e,t,1),e,t,0,181,290,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <h3 class="billing-upgrade-price-emphasis">$'),i.b(i.v(i.f("price",e,t,0))),i.b(" per month</h3> <p>$5 per "),i.b(i.v(i.f("formattedMemberCount",e,t,0))),i.b("</p> ")}),e.pop()),n.b(" "),n.s(n.f("yearlyUpgrade",e,t,1),e,t,0,328,437,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <h3 class="billing-upgrade-price-emphasis">$'),i.b(i.v(i.f("price",e,t,0))),i.b(" per year</h3> <p>$45 per "),i.b(i.v(i.f("formattedMemberCount",e,t,0))),i.b("</p> ")}),e.pop()),n.b(" "),n.s(n.f("yearlyCheaperUpgrade",e,t,1),e,t,0,481,629,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <h3 class="billing-upgrade-price-emphasis">$'),i.b(i.v(i.f("price",e,t,0))),i.b(" per year</h3> <p>$45 per "),i.b(i.v(i.f("formattedMemberCount",e,t,0))),i.b("</p> <p>You will get three months free.</p> ")}),e.pop()),n.b(' </div> <div class="center"> <a href="#" class="billing-upgrade-banner-button-in-popover button primary js-upgrade-bc"> Upgrade Now </a> </div> <p class="quiet bottom"> You will be billed '),n.s(n.f("monthlyUpgrade",e,t,1),e,t,0,861,863,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("$5")}),e.pop()),n.b(" "),n.s(n.f("yearlyUpgrade",e,t,1),e,t,0,901,904,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("$45")}),e.pop()),n.b(" per member when you add members to your organization in the future. </p> "),n.fl()},templates.popover_confirm_member_delete=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<p> Deleting your member account (<b>"),n.b(n.v(n.f("username",e,t,0))),n.b("</b>) will be permanent. </p> <p> <b>You will lose access to your boards and organizations.</b> </p> <p> Would you like us to send an email to <b>"),n.b(n.v(n.f("email",e,t,0))),n.b('</b> that contains a link that you can use to delete your account? </p> <input type="submit" class="js-delete-member" value="Send the Email"> <input type="submit" class="js-cancel-delete" value="Never Mind"> '),n.fl()},templates.popover_emoji_completer=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("button",e,t,1),e,t,0,11,101,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <input type="text" class="js-filter-emoji js-autofocus" placeholder="Search for emoji…"> ')}),e.pop()),n.b(' <div class="js-results"> <ul class="pop-over-emoji-list js-available-emoji"></ul> <hr> <ul class="pop-over-list"> <li> <a href="#" class="js-upload-emoji" data-emojiname="">Upload Emoji</a> </li> </ul> </div> <div class="js-no-results hide"> <p class="bottom"> Trello doesn’t have an emoji for <span class="bold js-emoji-name"></span>, but you can upload one. </p> <a href="#" class="button primary full js-upload-emoji" data-emojiname="">Upload Emoji for “<span class="js-emoji-name"></span>”</a> </div> '),n.fl()},templates.popover_emoji_uploader=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("canUpload",e,t,1),e,t,1,0,0,"")||(n.b(' <div class="warning"> '),n.s(n.f("hasGold",e,t,1),e,t,1,0,0,"")||n.b(' <p> You can upload custom emoji with Trello Gold. <a target="_blank" href="/gold">Learn more about Trello Gold.</a> </p> '),n.b(" "),n.s(n.f("hasJPS",e,t,1),e,t,1,0,0,"")||n.b(' <p class="bottom"> You can get custom emoji for your entire organization with Business Class. <a target="_blank" href="/business-class">Learn more about Business Class.</a> </p> '),n.b(" </div> <hr> ")),n.b(' <form action="/1/member/'),n.b(n.v(n.f("id",e,t,0))),n.b('/customEmoji" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <label for="emojiImage">Upload Image</label> <input id="emojiImage" type="file" name="file" class="js-upload-emoji-file upload-emoji" tabindex="-1" accept="image/*"/> <label for="emojiName">Emoji Name</label> <input id="emojiName" type="text" class="js-emoji-name" name="name" value="'),n.b(n.v(n.f("emojiName",e,t,0))),n.b('"> <p class="quiet"> The name will default to the name of the uploaded file. You can change it here, though. </p> <p class="warning hide js-invalid-name"> The emoji name can only contain letters, numbers, and underscores. </p> <div class="js-emoji-preview" style="margin-bottom: 12px;"> <p style="margin-bottom: 4px;"> <strong>Preview</strong> </p> <span class="js-emoji-preview-name">'),n.b(n.v(n.f("emojiName",e,t,0))),n.b('</span> → <img class="js-emoji-preview emoji"> </div> <input type="submit" class="primary wide js-upload-emoji" value="Create Custom Emoji"> <div class="error hide"> Upload failed </div> </form> '),n.s(n.f("canUpload",e,t,1),e,t,0,1503,1716,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("hasJPS",e,t,1),e,t,1,0,0,"")||i.b(' <hr> <p class="bottom"> You can also get custom emoji for your entire organization with Business Class. <a target="_blank" href="/business-class">Learn more about Business Class.</a> </p> '),i.b(" ")}),e.pop()),n.b(" "),n.fl()},templates.popover_filter_pos_results=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list navigable normal-weight js-pos-results"> '),n.s(n.f("keywordList",e,t,1),e,t,0,82,225,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-select-pos-keyword" name="'),i.b(i.v(i.f("value",e,t,0))),i.b('" href="#"><strong>'),i.b(i.v(i.f("natural",e,t,0))),i.b("</strong> of list <strong>"),i.b(i.v(i.d("list.name",e,t,0))),i.b("</strong></a> </li> ")}),e.pop()),n.b(" "),n.s(n.f("indexList",e,t,1),e,t,0,256,395,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-select-pos-pos" name="'),i.b(i.v(i.f("value",e,t,0))),i.b('" href="#"><strong>'),i.b(i.v(i.f("natural",e,t,0))),i.b("</strong> in list <strong>"),i.b(i.v(i.d("list.name",e,t,0))),i.b("</strong></a> </li> ")}),e.pop()),n.b(" "),n.s(n.f("listList",e,t,1),e,t,0,423,564,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-select-pos-list" name="'),i.b(i.v(i.f("id",e,t,0))),i.b('" href="#"><strong>'),i.b(i.v(i.f("index",e,t,0))),i.b("</strong> "),i.b(i.v(i.f("indexPrep",e,t,0))),i.b(" list <strong>"),i.b(i.v(i.f("name",e,t,0))),i.b("</strong></a> </li> ")}),e.pop()),n.b(" </ul> "),n.fl()},templates.popover_helper_new_board_add_org=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<p> An organizations is a collection of members and boards. They make sharing and working within a group even easier. </p> <a href=\"#\" class='button js-create-org'>Create an Organization</a> "),n.fl()},templates.popover_insert_card=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <textarea type="text" class="js-card-name js-autofocus" id="card-name"></textarea> <input type="submit" class="primary js-insert-card" value="Add Card"> <input type="submit" class="js-cancel" value="Cancel"> </form> '),n.fl()},templates.popover_insertion_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li> <a href="#" class="js-open-emoji-selector">Select Emoji…</a> </li> <li> <a href="#" class="js-open-mention-selector">Mention Member…</a> </li> </ul> '),n.fl()},templates.popover_member_searcher=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("showSearch",e,t,1),e,t,0,15,105,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <input type="text" class="js-filter-members js-autofocus" placeholder="Search members…"> ')}),e.pop()),n.b(' <ul class="pop-over-member-list checkable js-members-list"></ul> '),n.fl()},templates.popover_move_card=function(e,t,i){var n=this;return n.b(i=i||""),n.b(n.rp("move_card_controls",e,t,"")),n.b(' <input type="submit" class="primary wide js-submit" value="Move"> '),n.fl()},templates.popover_move_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Board</span> <span class="value js-board-value"></span> <label>Board</label> <select class="js-select-board"> '),n.s(n.f("organizations",e,t,1),e,t,0,243,438,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <optgroup label="'),i.b(i.v(i.f("displayName",e,t,0))),i.b('"> '),i.s(i.f("boards",e,t,1),e,t,0,290,414,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("id",e,t,0))),i.b('"'),i.s(i.f("selected",e,t,1),e,t,0,326,346,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' selected="selected"')}),e.pop()),i.b(">"),i.b(i.v(i.f("name",e,t,0))),i.s(i.f("selected",e,t,1),e,t,0,381,391,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" (current)")}),e.pop()),i.b("</option> ")}),e.pop()),i.b(" </optgroup> ")}),e.pop()),n.b(' </select> </div> </div> <div class="form-grid"> <div class="button-link setting form-grid-child form-grid-child-full"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-list-pos"></select> </div> </div> <input type="submit" class="primary wide js-commit-position" value="Move"/> '),n.fl()},templates.popover_org_data_export=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("token",e,t,1),e,t,0,10,552,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("error",e,t,1),e,t,0,21,53,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="error">'),i.b(i.v(i.f("error",e,t,0))),i.b("</p> ")}),e.pop()),i.b(" "),i.s(i.f("error",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("complete",e,t,1),e,t,0,88,261,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p> Your export is ready! </p> <a class="button-link" href="/1/organizations/'),i.b(i.v(i.f("name",e,t,0))),i.b("/export/"),i.b(i.v(i.f("token",e,t,0))),i.b('/download"> <span class="icon-sm icon-archive"/> Download export </a> ')}),e.pop()),i.b(" "),i.s(i.f("complete",e,t,1),e,t,1,0,0,"")||(i.b(' <p class="center"> Your export is being generated.<br>Please wait… </p> <p class="center"> '),i.s(i.f("stage",e,t,1),e,t,0,390,478,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="quiet"> '),i.b(i.v(i.f("stage",e,t,0))),i.s(i.f("total",e,t,1),e,t,0,431,459,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" ("),i.b(i.v(i.f("progress",e,t,0))),i.b(" of "),i.b(i.v(i.f("total",e,t,0))),i.b(")")}),e.pop()),i.b(" </span> ")}),e.pop()),i.b(' </p> <span class="spinner centered"/> ')),i.b(" ")),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("token",e,t,1),e,t,1,0,0,"")||n.b(' <p> Export your organization as a ZIP file containing information on members, boards, and everything inside. Board and member info will be in JSON format. Attachments (if included) will be in their native format. </p> <div class="check-div clearfix"> <input id="includeAttachments" type="checkbox"> <label for="includeAttachments">Include attachments…</label> </div> <input class="button full primary js-export" type="submit" value="Export"> '),n.b(" "),n.fl()},templates.popover_org_logo=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p class="error hide js-error" style="margin: 8px 4px 0;"></p> <div class="uploader" style="margin: 12px 4px 8px;"> <form class="realfile" action="/1/organization/'),n.b(n.v(n.f("id",e,t,0))),n.b('/logo" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <input type="file" name="file" class="js-upload-logo" style="margin-bottom: 0;" tabindex="-1" /> </form> <a class="button-link fakefile js-fakefile"> <span class="icon-sm icon-org"/> Upload a new logo </a> </div> '),n.s(n.f("logoHash",e,t,1),e,t,0,544,672,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <hr style="margin-top: 14px;"> <a class="quiet-button clear js-remove-logo" style="padding: 6px 8px;" href="#">Remove Logo</a> ')}),e.pop()),n.b(" "),n.fl()},templates.popover_rename_board=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <label>Name</label> <input type="text" class="js-board-name js-autofocus" value="'),n.b(n.v(n.f("boardName",e,t,0))),n.b('"> <input type="submit" class="primary wide js-rename-board" value="Rename"> </form> '),n.fl()},templates.popover_select_members=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<input type="text" class="js-search-mem js-autofocus" placeholder="Search members"/> <ul class="pop-over-member-list checkable js-mem-list"> </ul> '),n.fl()},templates.popover_selector_menu=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list"> <li> <a href="#" class="js-mem-selector">Members…</a> </li> <li> <a href="#" class="js-label-selector">Labels…</a> </li> <li> <a href="#" class="js-pos-selector">Position…</a> </li> </ul> '),n.fl()},templates.popover_set_email_freq=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<ul class="pop-over-list" name="minutesBetweenSummaries"> <li> <a class="highlight-icon" value="-1"> Never '),n.s(n.f("minutesBetweenSummaries_-1",e,t,1),e,t,0,138,172,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name"> Don’t send emails. </span> </a> </li> <li> <a class="highlight-icon" value="60"> Periodically '),n.s(n.f("minutesBetweenSummaries_60",e,t,1),e,t,0,353,387,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name"> Send emails about once an hour. </span> </a> </li> <li> <a class="highlight-icon" value="1"> Instantly '),n.s(n.f("minutesBetweenSummaries_1",e,t,1),e,t,0,576,610,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="icon-sm icon-check"/>')}),e.pop()),n.b(' <span class="sub-name"> Send emails as soon as possible. </span> </a> </li> </ul> '),n.fl()},templates.popover_share=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form> <label> Link to this board <span class="icon-sm icon-'),n.b(n.v(n.f("pLevelClass",e,t,0))),n.b('" title="'),n.b(n.v(n.f("pLevelAltText",e,t,0))),n.b('"/> <span class="quiet" style="font-weight: normal;">'),n.b(n.v(n.f("helperText",e,t,0))),n.b('</span> </label> <input class="js-url js-autofocus inline-input" type="text" readonly="readonly" value="'),n.b(n.v(n.f("shortUrl",e,t,0))),n.b('"> </form> <hr> <ul class="pop-over-list"> <li> <a class="js-print" href="#" title="Print using the browser’s print function. You can use “File” > “Print” or “cmd + P” (Mac) or “control + P” (Windows)">Print…</a> </li> '),n.s(n.f("hasCsvExport",e,t,1),e,t,0,520,634,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li> <a class="js-export-csv" href="'),i.b(i.v(i.f("csvURL",e,t,0))),i.b('" title="Export the board data in CSV format">Export CSV</a> </li> ')}),e.pop()),n.b(' <li> <a class="js-export-json" href="'),n.b(n.v(n.f("jsonURL",e,t,0))),n.b('" title="Export the board data in JSON format">Export JSON</a> </li> </ul> '),n.s(n.f("hasCsvExport",e,t,1),e,t,1,0,0,"")||(n.b(' <hr> <p class="quiet" style="margin: 16px 8px 8px;"> '),n.s(n.f("needsUpgradeForCsv",e,t,1),e,t,0,869,962,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("upgradeUrl",e,t,0))),i.b('">There’s an update to Business Class available with CSV export!</a> ')}),e.pop()),n.b(" "),n.s(n.f("needsUpgradeForCsv",e,t,1),e,t,1,0,0,"")||n.b(' Looking for CSV export? <a href="/business-class">Check out Business Class!</a> '),n.b(" </p> ")),n.b(" "),n.fl()},templates.popover_signup=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form action="/authenticate_openid" method="post" class="clearfix" style="margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #bfbfbf;"> <label> Sign up with: </label> <input type="hidden" name="openid_identifier" value="https://www.google.com/accounts/o8/id"> <input type="submit" class="primary js-google-confirm-account" style="margin-top: 4px; width: 100%;" value="Google Account"> <input type="hidden" name="returnUrl" value="'),n.b(n.v(n.f("returnUrl",e,t,0))),n.b('"> </form> <form action="/signup" method="post" class="clearfix" style="margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #bfbfbf;"> <h3>Or use email and password</h3> <label for="display-name-create"> Full Name </label> <input type="text" name="fullName" id="display-name-create" value="'),n.b(n.v(n.f("fullName",e,t,0))),n.b('"> <div class="js-use-diff-email"> <label for="email-create"> Email </label> <input type="email" name="email" id="email-create" value="'),n.b(n.v(n.f("email",e,t,0))),n.b('" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> </div> <label for="password-create"> Password </label> <input type="password" name="password" id="password-create"> <input type="hidden" name="returnUrl" value="'),n.b(n.v(n.f("returnUrl",e,t,0))),n.b('"> <input type="submit" class="primary js-confirm-email-account" style="width: 100%;" value="Create New Account"> </form> <form> <p class="clear" style="margin-bottom: 0;"> Already have an account? <a href="/login'),n.s(n.f("returnUrl",e,t,1),e,t,0,1399,1423,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("?returnUrl="),i.b(i.v(i.f("returnUrl",e,t,0)))}),e.pop()),n.b('"><strong>Log In</strong></a> to accept this invitation. </p> <input type="hidden" name="returnUrl" value="'),n.b(n.v(n.f("returnUrl",e,t,0))),n.b('"> </form> '),n.fl()},templates.popover_switch_tool_kit=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<p> You will be charged the prorated amount for the month and your billing contact will be notified. </p> <input type="submit" class="wide primary js-submit-switch-tool-kit" value="Switch"> '),n.fl()},templates.power_up_detail=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-header clearfix"> <a class="window-header-icon icon-lg icon-leftarrow dark-hover js-back-view" href="#"> </a> <div class="window-title"> <h2 class="window-title-text">Back to Power-Ups</h2> </div> </div> <div class="js-power-up-icon"></div> <div class="power-up-content"> <div class="navbar js-power-up-detail-navbar"></div> <div class="content js-power-up-detail-content"></div> </div> '),n.fl()},templates.power_up_detail_screenshots=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="power-up-screenshot-list clearfix"> '),n.s(n.f("screenshots",e,t,1),e,t,0,64,116,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="power-up-screenshot-item" src="'),i.b(i.v(i.d(".",e,t,0))),i.b('"> ')
}),e.pop()),n.b(" </div> "),n.fl()},templates.power_up_icon=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" data-power-up-name="'),n.b(n.v(n.f("name",e,t,0))),n.b('" class="power-up-icon-image-wrapper js-power-up-name"> <span class="power-up-icon-image '),n.b(n.v(n.f("imageClass",e,t,0))),n.b('"/> </a> <div class="power-up-icon-title-section clearfix"> <h3 class="power-up-icon-title"> '),n.b(n.v(n.f("displayName",e,t,0))),n.b(' </h3> <span class="power-up-icon-enabled-badge hide js-enabled-badge"> Enabled <span class="power-up-icon-enabled-badge-icon icon-sm icon-check"/> </span> </div> <p class="power-up-icon-description"> '),n.b(n.v(n.f("powerUpDesc",e,t,0))),n.b(" </p> "),n.s(n.f("isListView",e,t,1),e,t,0,488,541,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="quiet underline"> Click for details… </p> ')}),e.pop()),n.b(" "),n.s(n.f("isListView",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("__own",e,t,1),e,t,0,583,666,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="button-link power-up-icon-button js-toggle-btn js-toggle-power-up"></a> ')}),e.pop()),n.b(" "),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b(' <p class="quiet">You must be an admin to enable or disable power-ups.</p> '),n.b(" ")),n.b(" "),n.fl()},templates.power_ups_about_calendar=function(e,t,i){var n=this;return n.b(i=i||""),n.b("Enable the calendar power-up to gain access to the Trello calendar view. Display cards with due dates in a weekly or monthly format for a time-based overview of cards. Most useful for time-sensitive projects and projects with multiple due dates. "),n.fl()},templates.power_ups_about_card_aging=function(e,t,i){var n=this;return n.b(i=i||""),n.b("Cards will visibly “age” as time passes without any activity. Regular mode will cause old cards to become progressively more transparent. Pirate mode will cause old cards to crack and tear like an old treasure map. Once cards have new activity on them, their age counter is reset and they appear new again. Age thresholds are 1, 2, and 4 weeks. "),n.fl()},templates.power_ups_about_voting=function(e,t,i){var n=this;return n.b(i=i||""),n.b("Enable this power-up to allow users to vote on your cards. Votes are stored and synchronized between all users sharing this board. Choose between multiple permission levels for which users can vote on cards. View the number of votes on each card from the main Trello list pane or in a card's detail pane. "),n.fl()},templates.power_ups_calendar_prefs=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<h2>Enable iCalendar Feed?</h2> <ul class="pop-over-list power-up-option-list inset"> <li> <a href="#" class="js-select js-calendar-pref-feed '),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" name="enabled"> '),n.s(n.f("calendar_feed_enabled",e,t,1),e,t,0,214,256,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"></span> ')}),e.pop()),n.b(' Enabled </a> </li> <li> <a href="#" class="js-select js-calendar-pref-feed '),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" name="disabled"> '),n.s(n.f("calendar_feed_enabled",e,t,1),e,t,1,0,0,"")||n.b(' <span class="icon-sm icon-check"></span> '),n.b(' <div class="name" name="disabled">Disabled</div> </a> </li> </ul> '),n.s(n.f("calendar_feed_enabled",e,t,1),e,t,0,592,1073,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <br /> <h2>Your Personal iCalendar Feed</h2> <input type="text" class="full js-calendar-feed-url" value="'),i.s(i.f("calendar_feed_generated",e,t,1),e,t,0,726,747,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("calendar_feed_url",e,t,0)))}),e.pop()),i.s(i.f("calendar_feed_generated",e,t,1),e,t,1,0,0,"")||i.b("Generating..."),i.b('" /> <div> <a href="#" class="button-link js-regen-calendar-url"> '),i.s(i.f("calendar_feed_generated",e,t,1),e,t,0,938,962,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("Regenerate Your Feed URL")}),e.pop()),i.b(" "),i.s(i.f("calendar_feed_generated",e,t,1),e,t,1,0,0,"")||i.b("Generating..."),i.b(" </a> </div> ")}),e.pop()),n.b(" "),n.fl()},templates.power_ups_card_aging_prefs=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<h2>How do you want the aged cards to look?</h2> <ul class="pop-over-list power-up-option-list inset"> <li> <a href="#" class="js-select '),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" name="regular"> '),n.s(n.f("aging_regular",e,t,1),e,t,0,201,237,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="name">Regular Mode</span> <span class="sub-name"> Older cards become more transparent. </span> </a> </li> <li> <a href="#" class="js-select '),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" name="pirate"> '),n.s(n.f("aging_pirate",e,t,1),e,t,0,471,507,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="icon-sm icon-check"/> ')}),e.pop()),n.b(' <span class="name">Pirate Mode</span> <span class="sub-name"> Older cards crackle and tear. </span> </a> </li> </ul> '),n.fl()},templates.power_ups_detail_navbar=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="nav-item js-toolbar-select '),n.s(n.f("screenshots",e,t,1),e,t,0,53,59,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),n.b('" href="#" name=\'screenshots\'>Screenshots</a> <a class="nav-item js-toolbar-select '),n.s(n.f("settings",e,t,1),e,t,0,171,177,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),n.b('" href="#" name=\'settings\'>Settings</a> '),n.fl()},templates.power_ups_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-rocket" href="#"/> <div class="window-title"> <h2 class="window-title-text">Power-Ups</h2> <span class="quiet js-power-up-count hide"/> </div> </div> <div class="power-up-list js-power-up-list"></div> '),n.fl()},templates.power_ups_voting_prefs=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<h2>Who is allowed to vote on cards?</h2> <ul class="pop-over-list power-up-option-list inset"> <li> <a href="#" class="'),n.s(n.f("__own",e,t,1),e,t,0,130,146,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-voting-select")}),e.pop()),n.b(" "),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" name="members"> <div class="icon-sm icon-check '),n.s(n.f("voting_members",e,t,1),e,t,0,253,267,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("checked-option")}),e.pop()),n.b('"></div> <div class="name"> Members </div> </a> </li> <li> <a href="#" class="'),n.s(n.f("__own",e,t,1),e,t,0,374,390,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-voting-select")}),e.pop()),n.b(" "),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b(" "),n.s(n.f("voting_showObservers",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" name="observers"> <div class="icon-sm icon-check '),n.s(n.f("voting_observers",e,t,1),e,t,0,560,574,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("checked-option")}),e.pop()),n.b('"></div> <div class="name"> Members and Observers </div> <div class="sub-name"> Available only on boards with observers. </div> </a> </li> <li> <a href="#" class="'),n.s(n.f("__own",e,t,1),e,t,0,768,784,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-voting-select")}),e.pop()),n.b(" "),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b(" "),n.s(n.f("orgCanSee",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" name="org"> <div class="icon-sm icon-check '),n.s(n.f("voting_org",e,t,1),e,t,0,920,934,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("checked-option")}),e.pop()),n.b('"></div> <div class="name"> Organization members </div> <div class="sub-name"> Available only on boards within an organization. </div> </a> </li> <li> <a href="#" class="'),n.s(n.f("__own",e,t,1),e,t,0,1129,1145,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("js-voting-select")}),e.pop()),n.b(" "),n.s(n.f("__own",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b(" "),n.s(n.f("permissionLevel_public",e,t,1),e,t,1,0,0,"")||n.b("disabled"),n.b('" name="public"> <div class="icon-sm icon-check '),n.s(n.f("voting_public",e,t,1),e,t,0,1313,1327,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("checked-option")}),e.pop()),n.b('"></div> <div class="name"> Public members </div> <div class="sub-name"> Available on public boards. </div> </a> </li> </ul> '),n.fl()},templates.product_promo_button=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="product-promo-button-overlay"> <span class="product-promo-button"> Get <a href="/gold" target="_blank" class="product-promo-button-gold inline-block js-gold-promo"> <span class="product-promo-button-icon icon-lg icon-crown"></span> <span class="product-promo-button-text">Trello Gold</span> </a> <br> or <a href="/business-class" target="_blank" class="product-promo-button-bc inline-block js-bc-promo"> <span class="product-promo-button-icon icon-lg icon-briefcase"></span> <span class="product-promo-button-text">Business Class</span></a>. </span> </div> '),n.fl()},templates.profiler=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="js-profiler profiler"> </div> '),n.fl()},templates.profiler_entry=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="profiler-entry"> <span class="profiler-name">'),n.b(n.v(n.f("name",e,t,0))),n.s(n.f("count",e,t,1),e,t,0,75,86,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" x"),i.b(i.v(i.f("count",e,t,0)))}),e.pop()),n.b('</span>: <span class="profiler-time">'),n.b(n.v(n.f("time",e,t,0))),n.b("</span> </div> "),n.fl()},templates.quick_card_editor=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="icon-lg icon-close quick-card-editor-close-icon js-close-editor"></span> <div class="quick-card-editor-card" style="top: '),n.b(n.v(n.f("top",e,t,0))),n.b("px; left: "),n.b(n.v(n.f("left",e,t,0))),n.b("px; width: "),n.b(n.v(n.f("width",e,t,0))),n.b('px;"> <div class="list-card list-card-quick-edit js-stop" style="width: '),n.b(n.v(n.f("width",e,t,0))),n.b('px;"> '),n.b(n.rp("card",e,t,"")),n.b(' </div> <input type="submit" value="Save" class="primary wide js-save-edits"> <div class="quick-card-editor-buttons'),n.s(n.f("leftButtons",e,t,1),e,t,0,406,437,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" quick-card-editor-buttons-left")}),e.pop()),n.b('"> <a class="quick-card-editor-buttons-item js-edit-labels" href="#"> <span class="icon-sm icon-label light"></span> <span class="quick-card-editor-buttons-item-text">Edit Labels</span> </a> <a class="quick-card-editor-buttons-item js-edit-members" href="#"> <span class="icon-sm icon-member light"></span> <span class="quick-card-editor-buttons-item-text">Change Members</span> </a> <a class="quick-card-editor-buttons-item js-move-card" href="#"> <span class="icon-sm icon-move light"></span> <span class="quick-card-editor-buttons-item-text">Move</span> </a> <a class="quick-card-editor-buttons-item js-copy-card" href="#"> <span class="icon-sm icon-card light"></span> <span class="quick-card-editor-buttons-item-text">Copy</span> </a> <a class="quick-card-editor-buttons-item js-edit-due-date" href="#"> <span class="icon-sm icon-clock light"></span> <span class="quick-card-editor-buttons-item-text">Change Due Date</span> </a> '),n.s(n.f("closed",e,t,1),e,t,1,0,0,"")||n.b(' <a class="quick-card-editor-buttons-item js-archive" href="#"> <span class="icon-sm icon-archive light"></span> <span class="quick-card-editor-buttons-item-text">Archive</span> </a> '),n.b(" </div> </div> "),n.fl()},templates.saved_search=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="saved-search-item js-saved-search-name" href="#"> <span class="saved-search-item-name">'),n.b(n.v(n.f("name",e,t,0))),n.b('</span> <span class="saved-search-query quiet js-saved-search-query">'),n.b(n.v(n.f("query",e,t,0))),n.b("</span> </a> "),n.s(n.f("allowDelete",e,t,1),e,t,0,212,647,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <a class="saved-search-delete dark-hover quiet js-delete-saved-search" href="#"><span class="icon-sm icon-close"></span></a> <span class="saved-search-delete-menu quiet hide js-delete-saved-search-menu"> Are you sure you want to delete? <a class="js-delete-saved-search-confirm" href="#" style="margin-left: 4px;">Yes, delete.</a> <a class="js-delete-saved-search-cancel" href="#" style="margin-left: 4px;">No, keep this.</a> </span> ')}),e.pop()),n.b(" "),n.fl()},templates.search_contact=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="contact-info'),n.s(n.f("selectable",e,t,1),e,t,0,39,68,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-select-contact selectable")}),e.pop()),n.b('"> '),n.s(n.f("selectable",e,t,1),e,t,1,0,0,"")||n.b(' <span class="icon-sm icon-close dark-hover remove-contact-icon js-remove-contact"/> '),n.b(" "),n.s(n.f("avatarUrl",e,t,1),e,t,0,216,292,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img src="'),i.b(i.v(i.f("avatarUrl",e,t,0))),i.b('" class="js-avatarUrl avatar" name="'),i.b(i.v(i.f("avatarUrl",e,t,0))),i.b('"> ')}),e.pop()),n.b(" "),n.s(n.f("avatarUrl",e,t,1),e,t,1,0,0,"")||n.b(' <span class="member js-avatarUrl" name=""> <span class="icon-lg icon-member"/> </span> '),n.b(' <span class="name"> '),n.s(n.f("fullName",e,t,1),e,t,0,457,525,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<h3 class="js-fullName bottom" name="'),i.b(i.v(i.f("fullName",e,t,0))),i.b('">'),i.b(i.v(i.f("fullName",e,t,0))),i.b("</h3>")}),e.pop()),n.b(' <p class="js-email bottom" name="'),n.b(n.v(n.f("email",e,t,0))),n.b('">'),n.b(n.v(n.f("email",e,t,0))),n.b("</p> </span> </div> "),n.fl()},templates.search_instant_results=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="search-results-section-header-options"> <div class="js-saved-search-links"> <a class="quiet dark-hover search-results-section-header-options-option js-see-all-saved-searches" href="#"> <span class="icon-sm icon-leftarrow"></span>Back to Saved Searches</a> <a class="quiet dark-hover search-results-section-header-options-option js-save-this-search" href="#"> <span class="icon-sm icon-star"></span>Save this Search</a> <span class="quiet search-results-section-header-options-option search-results-section-header-options-option--save js-current-search hide" href="#"> <span class="icon-sm icon-star"></span><span class="js-current-search-name"></span> </span> </div> </div> '),n.s(n.f("picker",e,t,1),e,t,0,697,920,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="js-search-results clearfix relative hide"> <div class="search-results-section js-card-results clearfix hide"> <div class="js-search-results-title results-title"></div> <div class="js-list"></div> </div> </div> ')}),e.pop()),n.b(" "),n.s(n.f("picker",e,t,1),e,t,1,0,0,"")||(n.b(' <div class="search-results-section js-save-this-search-menu hide"> '),n.s(n.f("savedSearchesEnabled",e,t,1),e,t,0,1036,1441,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="search-results-section-header"> <h4>What would you like to call this search?</h4> </div> <form class="js-save-this-search-form"> <input type="text" class="js-saved-search-name-input" style="margin-bottom: 4px;"> <input type="submit" value="Save" class="primary js-save-this-search-submit"> <a class="quiet js-save-this-search-cancel" href="#" style="margin-left: 6px;">Nevermind.</a> </form> ')}),e.pop()),n.b(" "),n.s(n.f("savedSearchesEnabled",e,t,1),e,t,1,0,0,"")||n.b(' <h2>Upgrade to add new saved searches!</h2> <p style="font-size: 16px; line-height: 1.2;"> You can add new saved searches with <strong>Trello Gold</strong> or get saved searches for your entire organization with <strong>Business Class</strong>. </p> <p> <a class="button" target="_blank" href="/gold">Check out Trello Gold</a> <a class="button" target="_blank" href="/business-class">Check out Business Class</a> </p> <hr> '),n.b(' </div> <div class="search-results-section js-search-suggestions clearfix hide"> <div class="search-results-section-header"> <h4>Did you mean…</h4> </div> <div class="js-search-suggestions-list"></div> </div> <div class="search-results-section js-saved-searches clearfix hide"> <div class="search-results-section-header"> <h4>Saved Searches</h4> </div> <p class="quiet hide js-no-saved-searches">You have no saved searches. To save a search, start searching and click “Save this Search” in the upper corner.</p> <div class="js-saved-searches-list"></div> <hr> </div> <div class="js-search-results clearfix relative hide"> <div class="search-results-section js-card-results clearfix hide"> <div class="search-results-section-header clearfix"> <h4>Cards</h4> </div> <div class="js-list"></div> <span href="#" class="search-loading hide js-loading-cards"><span class="spinner small"></span> Loading…</span> <a href="#" class="quiet-button quiet-button-large hide js-show-more-cards">Show more cards…</a> </div> <div class="search-results-section js-board-results clearfix hide"> <div class="search-results-section-header"> <h4>Boards</h4> </div> <ul class="sidebar-boards-list board-results-list js-list"></ul> <a href="#" class="quiet-button quiet-button-large hide js-show-more-boards">Show more boards…</a> </div> <div class="search-results-section js-member-results clearfix hide"> <div class="search-results-section-header"> <h4>Members</h4> </div> <ul class="js-list pop-over-member-list"></ul> <a href="#" class="quiet-button quiet-button-large hide js-show-more-members">Show more members…</a> </div> <div class="search-results-section js-org-results clearfix hide"> <div class="search-results-section-header"> <h4>Organizations</h4> </div> <ul class="org-list js-list"></ul> <a href="#" class="quiet-button quiet-button-large hide js-show-more-orgs">Show more organizations…</a> </div> </div> ')),n.b(' <div class="search-tips hide js-no-input"> <p class="search-tips-helper quiet js-search-tips-helper"> Refine your search with operators like @member, #label, is:archived, and has:attachments. <a href="#" class="js-show-search-tips">Learn more…</a> </p> <div class="search-tips-list js-search-tips-list hide"> <p class="quiet"> Search operators help you find specific cards and create highly tailored lists. Trello will suggest operators for you as you type, but here’s a full list to keep in mind. You can add “-” to any operator to do a negative search, such as -has:members to search for cards without any members assigned. </p> <dl> <dt>@name</dt> <dd> Returns cards assigned to a member. If you start typing @, Trello will suggest members for you. <strong>member:</strong> also works. <strong>@me</strong> will include only your cards. </dd> <dt>#label</dt> <dd> Returns labeled cards. Trello will suggest labels for you if you start typing # and the label you are looking for. <strong>label:</strong> also works. </dd> <dt>board:id</dt> <dd> Returns cards within a specific board. If you start typing <strong>board:</strong>, Trello will suggest boards for you. You can search by board name, too, such as “board:trello” to search only cards on boards with trello in the board name. </dd> <dt>list:name</dt> <dd> Returns cards within the list named “name”. Or whatever you type besides “name”. </dd> <dt>has:attachments</dt> <dd> Returns cards with attachments. <strong>has:description</strong>, <strong>has:cover</strong>, <strong>has:members</strong>, and <strong>has:stickers</strong> also work as you would expect. </dd> <dt>due:day</dt> <dd> Returns cards due within 24 hours. <strong>due:week</strong>, <strong>due:month</strong>, and <strong>due:overdue</strong> also work as expected. You can search for a specific day range. For example, adding <strong>due:14</strong> to search will include cards due in the next 14 days. </dd> <dt>created:day</dt> <dd> Returns cards created in the last 24 hours. <strong>created:week</strong> and <strong>created:month</strong> also work as expected. You can search for a specific day range. For example, adding <strong>created:14</strong> to the search will include cards created in the last 14 days. </dd> <dt>edited:day</dt> <dd> Returns cards edited in the last 24 hours. <strong>edited:week</strong> and <strong>edited:month</strong> also work as expected. You can search for a specific day range. For example, adding <strong>edited:21</strong> to the search will include cards edited in the last 21 days. </dd> <dt>description:, checklist:, comment:, and name:</dt> <dd> Returns cards matching the text of card descriptions, checklists, comments, or names. For example, comment:"FIX IT" will return cards with “FIX IT” in a comment. </dd> <dt>is:open and is:archived</dt> <dd> Returns cards that are either open or archived. Trello returns both types by default. </dd> <dt>is:starred</dt> <dd>Only include cards on starred boards.</dd> </dl> </div> </div> <p class="search-warning hide js-no-results">No results.</p> <p class="search-warning hide js-searching"><span class="spinner small inline-block"></span> Searching…</p> <p class="search-warning hide js-err">Your search produced an error.</p> '),n.fl()},templates.search_results_card=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="search-result-card-container js-list-card-container"> <div class="search-result-card-container-fade"></div> </div> <div class="search-result-card-details"> <p class="bottom"> <a class="search-result-card-details-name" href="'),n.b(n.v(n.f("url",e,t,0))),n.b('">'),n.b(n.v(n.f("name",e,t,0))),n.b("</a> </p> <p class='bottom quiet'>in <strong>"),n.b(n.v(n.f("listName",e,t,0))),n.b(n.v(n.f("archived",e,t,0))),n.b("</strong> on <strong>"),n.b(n.v(n.f("boardName",e,t,0))),n.b('</strong><span class="icon-sm icon-'),n.b(n.v(n.f("permLevel",e,t,0))),n.b('"/></p> </div> <a class="search-result-card-hover-target" href="'),n.b(n.v(n.f("url",e,t,0))),n.b('"></a> '),n.fl()},templates.search_suggetion=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" class="search-suggestion js-select-suggestion" data-suggestionphrase="'),n.b(n.v(n.f("phrase",e,t,0))),n.b('"> <span class="search-suggestion-string">'),n.b(n.v(n.f("phrase",e,t,0))),n.b('</span> <span class="search-suggestion-desc">'),n.b(n.v(n.f("description",e,t,0))),n.b("</span> </a> "),n.fl()},templates.search_suggetion_board=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" class="search-suggestion search-suggestion-board js-select-suggestion" data-suggestionphrase="'),n.b(n.v(n.f("phrase",e,t,0))),n.b('"> <span class="search-suggestion-board-image"></span> <span class="search-suggestion-dec">Cards on the board <strong>'),n.b(n.v(n.f("name",e,t,0))),n.b("</strong></span> </a> "),n.fl()},templates.search_suggetion_member=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a href="#" class="search-suggestion search-suggestion-member js-select-suggestion" data-suggestionphrase="'),n.b(n.v(n.f("phrase",e,t,0))),n.b('"> <span class="member search-suggestion-member-av">'),n.b(n.rp("member",e,t,"")),n.b("</span> <span>Cards assigned to <strong>"),n.b(n.v(n.f("fullName",e,t,0))),n.b("</strong></span> </a> "),n.fl()},templates.select_card=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li class="item"> <a href="#" class="name js-select-card" title="'),n.b(n.v(n.f("name",e,t,0))),n.b('" id="'),n.b(n.v(n.f("id",e,t,0))),n.b('"> <span class="item-name"> '),n.b(n.v(n.f("name",e,t,0))),n.b(" "),n.s(n.f("closed",e,t,1),e,t,0,133,170,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<span class="quiet">(Archived)</span>')}),e.pop()),n.b(" </span> "),n.s(n.f("boardName",e,t,1),e,t,0,204,254,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="sub-name"> in '),i.b(i.v(i.f("boardName",e,t,0))),i.b(" </span> ")}),e.pop()),n.b(" </a> </li> "),n.fl()},templates.select_emoji=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li class = "item"> <a href="#" class="name js-select-emoji" title='),n.b(n.v(n.f("name",e,t,0))),n.b('> <img src= "'),n.b(n.v(n.f("image",e,t,0))),n.b('" class="emoji"> <span class="emoji-name" name='),n.b(n.v(n.f("name",e,t,0))),n.b("> "),n.b(n.v(n.f("name",e,t,0))),n.b(" </span> </a> </li> "),n.fl()},templates.select_member=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<li class="item'),n.s(n.f("isActive",e,t,1),e,t,0,28,35,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" active")}),e.pop()),n.s(n.f("matchesFilter",e,t,1),e,t,0,66,81,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" matches-filter")}),e.pop()),n.s(n.f("exceedsLimit",e,t,1),e,t,0,116,130,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" exceeds-limit")}),e.pop()),n.s(n.f("unconfirmed",e,t,1),e,t,0,163,175,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" unconfirmed")}),e.pop()),n.s(n.f("isKnownMember",e,t,1),e,t,0,209,223,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" js-autoselect")}),e.pop()),n.b(' js-member-item"> <a href="'),n.s(n.f("url",e,t,1),e,t,0,276,283,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(i.v(i.f("url",e,t,0)))}),e.pop()),n.s(n.f("url",e,t,1),e,t,1,0,0,"")||n.b("#"),n.b('" class="name js-select-member '),n.s(n.f("extraText",e,t,1),e,t,0,353,363,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("multi-line")}),e.pop()),n.b('" idMember="'),n.b(n.v(n.f("id",e,t,0))),n.b('" title="'),n.b(n.v(n.f("fullName",e,t,0))),n.s(n.f("username",e,t,1),e,t,0,429,444,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(")")}),e.pop()),n.b('"> <span class="member js-member'),n.s(n.f("isVirtual",e,t,1),e,t,0,503,511,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" virtual")}),e.pop()),n.b('">'),n.b(n.rp("member",e,t,"")),n.b('</span> <span class="full-name" name="'),n.b(n.v(n.f("fullName",e,t,0))),n.s(n.f("username",e,t,1),e,t,0,602,617,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" ("),i.b(i.v(i.f("username",e,t,0))),i.b(")")}),e.pop()),n.b('"> '),n.b(n.v(n.f("fullName",e,t,0))),n.b(" "),n.s(n.f("username",e,t,1),e,t,0,659,704,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' (<span class="username">'),i.b(i.v(i.f("username",e,t,0))),i.b("</span>)")}),e.pop()),n.b(" </span> "),n.s(n.f("extraText",e,t,1),e,t,0,740,791,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b('<div class="extra-text quiet">('),i.b(i.v(i.f("extraText",e,t,0))),i.b(")</div>")}),e.pop()),n.b(' <span class="icon-sm icon-check checked-icon"/> <span class="icon-sm icon-rightarrow light option js-open-option"/> '),n.s(n.f("unconfirmed",e,t,1),e,t,0,938,1045,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div> <span class="quiet sub-name">Unconfirmed User</span> <span class="js-insert-tooltip"></span> </div> ')}),e.pop()),n.b(" </a> </li> "),n.fl()},templates.select_org_to_upgrade=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="select-org-to-upgrade"> <h2 class="select-org-to-upgrade-header">Select an organization to upgrade to Business Class.</h2> <ul class="select-org-to-upgrade-list"> '),n.s(n.f("orgs",e,t,1),e,t,0,184,1044,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <li class="select-org-to-upgrade-list-item"> <a href="'),i.b(i.v(i.f("orgUrl",e,t,0))),i.b('" class="select-org-to-upgrade-list-item-link'),i.s(i.f("isJPS",e,t,1),e,t,0,304,325,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" disabled js-disabled")}),e.pop()),i.b('"> <img class="select-org-to-upgrade-list-item-link-logo" '),i.s(i.f("logoHash",e,t,1),e,t,0,406,477,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' src="'),i.b(i.v(i.f("__logoDomain",e,t,0))),i.b("/"),i.b(i.v(i.f("logoHash",e,t,0))),i.b('/30.png" alt="'),i.b(i.v(i.f("displayName",e,t,0))),i.b(' logo" ')}),e.pop()),i.b(" "),i.s(i.f("logoHash",e,t,1),e,t,1,0,0,"")||i.b(' src="https://d78fikflryjgj.cloudfront.net/images/b8e08be89ac9461c0a1d543016926792/org-logo-large.png" alt="Default organization logo" '),i.b(' > <span class="select-org-to-upgrade-list-item-link-name"> '),i.b(i.v(i.f("displayName",e,t,0))),i.b(' </span> <span class="select-org-to-upgrade-list-item-link-details quiet"> '),i.b(i.v(i.f("memberCount",e,t,0))),i.b(". "),i.s(i.f("isPremium",e,t,1),e,t,0,833,948,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("isJPS",e,t,1),e,t,0,844,891,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" This organization already has Business Class. ")}),e.pop()),i.b(" "),i.s(i.f("isJPS",e,t,1),e,t,1,0,0,"")||i.b(" An update is available! "),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("isAdmin",e,t,1),e,t,1,0,0,"")||i.b(" You need to be an admin to upgrade. "),i.b(" </span> </a> </li> ")}),e.pop()),n.b(" </ul> "),n.s(n.f("orgs",e,t,1),e,t,1,0,0,"")||n.b(' <p style="margin: 24px 0;">You don’t have any organizations. <a href="#" class="js-create-org">Click here to create one.</a></p> '),n.b(" </div> "),n.fl()},templates.shortcuts=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="window-header clearfix"> <span class="window-header-icon icon-lg icon-info"/> <h2 class="window-title"> Keyboard Shortcuts </h2> </div> <div class="manual-shortcut-list markeddown"> <hr> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">&larr;</span> <span class="manual-shortcut-list-item-keys-key">&darr; / J</span> <span class="manual-shortcut-list-item-keys-key">&uarr; / K</span> <span class="manual-shortcut-list-item-keys-key">&rarr;</span> </div> <h3 class="manual-shortcut-list-item-header">Navigate Cards</h3> <p> Pressing the arrow keys will select adjacent cards on a board. Pressing “j” will select the card below the current card. Pressing “k” will select the card above the current card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">B</span> </div> <h3 class="manual-shortcut-list-item-header">Open Header Boards Menu</h3> <p> Pressing “b” opens the boards menu in the header. You can search for boards and navigate boards with the up and down arrows. Pressing enter with a board selected will open it. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">/</span> </div> <h3 class="manual-shortcut-list-item-header">Focus Search Box</h3> <p> Pressing “/” puts the cursor in the search box in the header. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">C</span> </div> <h3 class="manual-shortcut-list-item-header">Archive Card</h3> <p> Pressing “c” will archive a card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">D</span> </div> <h3 class="manual-shortcut-list-item-header">Due Date</h3> <p> Pressing “d” will open the due date picker for a card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">E</span> </div> <h3 class="manual-shortcut-list-item-header">Quick Edit Mode</h3> <p> If hovering over a card, pressing “e” will open quick edit mode, which lets you quickly edit the title and other card attributes. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">ESC</span> </div> <h3 class="manual-shortcut-list-item-header">Close Menu / Cancel Editing</h3> <p> Pressing “esc” will close an open dialog window or pop-over or cancel edits and comments you are composing. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">ENTER</span> </div> <h3 class="manual-shortcut-list-item-header">Open Card</h3> <p> Pressing “enter” will open the currently selected card. Pressing “shift + enter” while submitting a card will open it immediately after creating it. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">F</span> </div> <h3 class="manual-shortcut-list-item-header">Open Card Filter Menu</h3> <p> Use “f” to open the card filter menu. The search by title input is automatically focused. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">L</span> </div> <h3 class="manual-shortcut-list-item-header">Label</h3> <p> Pressing “l” opens a pop-over of the available labels. Clicking a label will add or remove it from the card. </p> <p> Pressing one of the following number keys, will apply or remove that label. </p> <table> <thead> <tr> <th>Key</th> <th>Label Color</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Green</td> </tr> <tr> <td>2</td> <td>Yellow</td> </tr> <tr> <td>3</td> <td>Orange</td> </tr> <tr> <td>4</td> <td>Red</td> </tr> <tr> <td>5</td> <td>Purple</td> </tr> <tr> <td>6</td> <td>Blue</td> </tr> </tbody> </table> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">M</span> </div> <h3 class="manual-shortcut-list-item-header">Add / Remove Members</h3> <p> Pressing “m” opens the add / remove members menu. Clicking a member’s avatar will assign or unassign that person. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">N</span> </div> <h3 class="manual-shortcut-list-item-header">Insert New Card</h3> <p> Pressing “n” opens a pop-over that allows you to add a card after the currently selected card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">&lt;</span> <span class="manual-shortcut-list-item-keys-key">&gt;</span> </div> <h3 class="manual-shortcut-list-item-header">Move Card to Adjacent List</h3> <p> Pressing the left or right angle brackets (&lt; and &gt;) will move a card to the adjacent left or right list. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">Q</span> </div> <h3 class="manual-shortcut-list-item-header">My Cards Filter</h3> <p> Pressing the “q” key toggles the “cards assigned to me” filter. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">S</span> </div> <h3 class="manual-shortcut-list-item-header">Subscribe</h3> <p> Pressing “s” will subscribe you to, or unsubscribe you from, a card. Subscribing to a card will give you notifications for most actions to that card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">SPACE</span> </div> <h3 class="manual-shortcut-list-item-header">Assign Self</h3> <p> Pressing “space” will assign (or unassign) yourself to a card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">T</span> </div> <h3 class="manual-shortcut-list-item-header">Edit Title</h3> <p> If viewing a card, pressing “t” will edit the title. If hovering over a card, pressing “t” will open the card and edit the title. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">V</span> </div> <h3 class="manual-shortcut-list-item-header">Vote</h3> <p> Pressing “v” will add (or remove) your vote on a card. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">W</span> </div> <h3 class="manual-shortcut-list-item-header">Toggle Board Sidebar</h3> <p> Pressing “w” will collapse or expand the board sidebar. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">X</span> </div> <h3 class="manual-shortcut-list-item-header">Clear All Filters</h3> <p> Use “x” to clear all active card filters. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">?</span> </div> <h3 class="manual-shortcut-list-item-header">Open Shortcuts Page</h3> <p> Pressing “?” will open the shortcuts page. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">@</span> </div> <h3 class="manual-shortcut-list-item-header">Autocomplete Members</h3> <p> When writing a comment, you can type “@” plus a member’s name, username, or initials and get a list of matching members. You can navigate that list with the up and down arrows. Pressing enter or tab with a member selected will mention that user in the comment. The mentioned user will get a notification once submitted. </p> <p> When adding a new card, you can use the same method to assign members to cards before submitting them. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">#</span> </div> <h3 class="manual-shortcut-list-item-header">Autocomplete Labels</h3> <p> When adding a new card, you can type “#” plus the label’s color or title and get a list of matching labels. You can use the up and down arrows to navigate the resulting list. Pressing enter or tab will add the label to the composed card. The labels will be added to the card when you submit. </p> </div> <div class="manual-shortcut-list-item"> <div class="manual-shortcut-list-item-keys"> <span class="manual-shortcut-list-item-keys-key">^</span> </div> <h3 class="manual-shortcut-list-item-header">Autocomplete Position</h3> <p> When adding a new card, you can type “^” plus a list name or position in a list. You can also type “top” or “bottom” to add to the top or bottom of the current list. You can use the up and down arrows to navigate the resulting list. Pressing enter or tab will automatically change the position of the composed card. </p> </div> </div> '),n.fl()
},templates.sidebar_boards_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="boards-drawer-header js-drawer-header"> <h3>Boards</h3> </div> <div class="board-drawer-content fancy-scrollbar"> <input type="text" class="js-search-boards" placeholder="Find boards by name…"> <div class="js-board-results-container hide"> <ul class="sidebar-boards-list js-board-results"></ul> <a class="quiet-button js-add-board-with-name" href="#"> Create board named “<span class="js-new-board-sidebar-name"></span>” </a> </div> <div class="js-boards-list-container"> <p class="quiet center hide js-no-boards" style="margin: 6px 4px 0 0; padding: 8px 12px;">No Boards</p> <div class="starred-sidebar-boards-list js-starred-boards"></div> <div class="js-recent-boards"></div> <div class="js-all-boards"></div> <a class="quiet-button js-add-board" href="#"> Create new board… </a> <a class="quiet-button hide js-pin" href="#"> Always keep this menu open. </a> <a class="quiet-button hide js-unpin" href="#"> Don’t keep this menu open. </a> <a class="quiet-button js-open-closed-boards" href="#"> See closed boards… </a> </div> </div> '),n.fl()},templates.spinner_css=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="spinner-css"> <span class="bar"/> <span class="bar"/> <span class="bar"/> </span> '),n.fl()},templates.sticker_on_card=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<img class="sticker-image" src="'),n.b(n.v(n.f("url",e,t,0))),n.b('" style="-webkit-transform: rotate('),n.b(n.v(n.f("rotate",e,t,0))),n.b("deg);transform: rotate("),n.b(n.v(n.f("rotate",e,t,0))),n.b('deg);" alt="'),n.b(n.v(n.f("image",e,t,0))),n.b('"> '),n.s(n.f("showEditControls",e,t,1),e,t,0,162,516,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="sticker-controls"> <span class="sticker-control-btn rotate-btn js-rotate-sticker"> ↻ <span class="text">Rotate</span> </span> <span class="sticker-control-btn move-btn js-move-sticker"> ☩ <span class="text">Move</span> </span> <span class="sticker-control-btn remove-btn js-remove-sticker"> ✘ <span class="text">Remove</span> </span> </div> ')}),e.pop()),n.b(" "),n.fl()},templates.sticker_on_promo_page=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="sticker" style="top: '),n.b(n.v(n.f("top",e,t,0))),n.b("%; left: "),n.b(n.v(n.f("left",e,t,0))),n.b('%;"> <img src="'),n.b(n.v(n.f("url",e,t,0))),n.b('" style=" -webkit-transform: scale('),n.b(n.v(n.f("scale",e,t,0))),n.b(") rotate("),n.b(n.v(n.f("rotate",e,t,0))),n.b("deg); transform: scale("),n.b(n.v(n.f("scale",e,t,0))),n.b(") rotate("),n.b(n.v(n.f("rotate",e,t,0))),n.b('deg); "> </div> '),n.fl()},templates.sticker_pack_selection_list=function(e,t,i){var n=this;return n.b(i=i||""),n.b("<h2>"),n.b(n.v(n.f("displayName",e,t,0))),n.b('</h2> <div class="sticker-list clearfix js-sticker-list relative"></div> '),n.fl()},templates.sticker_select=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="sticker-list clearfix js-standard-sticker-list"></div> <div class="js-premium-stickers"></div> <h2>Custom Stickers</h2> <div class="sticker-list clearfix js-custom-sticker-list"></div> '),n.fl()},templates.sticker_select_item=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("pending",e,t,1),e,t,0,12,85,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <img class="sticker-select-image sticker-select-pending" src="'),i.b(i.v(i.f("url",e,t,0))),i.b('"> ')}),e.pop()),n.b(" "),n.s(n.f("pending",e,t,1),e,t,1,0,0,"")||(n.b(' <img class="sticker-select-image sticker-select-shadow" src="'),n.b(n.v(n.f("url",e,t,0))),n.b('"> <img class="sticker-select-image sticker-select-fixed" src="'),n.b(n.v(n.f("url",e,t,0))),n.b('"> <img class="sticker-select-image sticker-select-peel" src="'),n.b(n.v(n.f("url",e,t,0))),n.b('"> ')),n.b(" "),n.s(n.f("id",e,t,1),e,t,0,341,602,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="sticker-select-option sticker-select-option-delete-button js-delete-sticker" title="Delete this sticker"> <span class="sticker-select-option-icon icon-sm icon-close"></span> <span class="sticker-select-option-text underline">Delete</span> </span> ')}),e.pop()),n.b(" "),n.s(n.f("error",e,t,1),e,t,0,620,724,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="sticker-select-option"> <span class="sticker-select-option-text">'),i.b(i.v(i.f("error",e,t,0))),i.b("</span> </span> ")}),e.pop()),n.b(" "),n.s(n.f("pending",e,t,1),e,t,0,747,920,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <span class="sticker-select-option"> <span class="spinner small left" style="margin-right: 4px;"></span> <span class="sticker-select-option-text">Uploading…</span> </span> ')}),e.pop()),n.b(" "),n.fl()},templates.sticker_select_item_upload=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<form action="/1/member/'),n.b(n.v(n.f("id",e,t,0))),n.b('/customStickers" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="format" value="http" /> <div class="sticker-select sticker-select-upload"> <span class="sticker-select-upload-icon icon-lg icon-add"></span> <input type="file" name="file" class="sticker-select-upload-input js-upload-image '),n.s(n.f("enabled_customStickers",e,t,1),e,t,1,0,0,"")||n.b(" disabled"),n.b('" multiple="multiple" accept="image/*"/> </div> </form> '),n.fl()},templates.surface_base=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div id="boards-drawer"></div> '),n.fl()},templates.sync_error=function(e,t,i){var n=this;return n.b(i=i||""),n.b('You have been disconnected from the Trello Server for too long.<br /> <a href="#" onclick="window.location.reload();">Reload now</a> '),n.fl()},templates.take_photo=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<video class="video'),n.s(n.f("connected",e,t,1),e,t,1,0,0,"")||n.b(" hide"),n.b('" autoplay style="width:100%"></video> '),n.s(n.f("error",e,t,1),e,t,0,101,133,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <p class="error">'),i.b(i.v(i.f("error",e,t,0))),i.b("</p> ")}),e.pop()),n.b(" "),n.s(n.f("connected",e,t,1),e,t,0,158,216,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <button class="primary wide js-snap">Snap Photo</button> ')}),e.pop()),n.b(" "),n.s(n.f("connected",e,t,1),e,t,1,0,0,"")||(n.b(" "),n.s(n.f("error",e,t,1),e,t,0,256,302,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" <p>Couldn't find a camera to connect to…</p> ")}),e.pop()),n.b(" "),n.s(n.f("error",e,t,1),e,t,1,0,0,"")||n.b(" <p>Trying to access your computer's camera… Check the banner at the top of the page.</p> "),n.b(' <p class="bottom"> <a href="#" class="quiet-button js-connect-camera">Try again</a> </p> ')),n.b(" "),n.fl()},templates.text_notification=function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("member",e,t,1),e,t,0,11,27,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.t(i.f("fullName",e,t,0))),i.b(" ")}),e.pop()),n.b(" "),n.s(n.f("entities",e,t,1),e,t,0,52,70,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("text_entity",e,t,"")),i.b(" ")}),e.pop()),n.b(" "),n.fl()},templates["tooltip-content"]=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="tooltip-content js-tooltip-content"> <span class="tooltip-close-button icon-sm icon-close js-tooltip-close-button"></span> <p>'),n.b(n.v(n.f("tooltipText",e,t,0))),n.b("</p> </div> "),n.fl()},templates.tooltip=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<span class="tooltip-trigger quiet js-tooltip-trigger"><span class="icon-info icon-sm js-tooltip-anchor"></span> '),n.b(n.v(n.f("linkText",e,t,0))),n.b("</span> "),n.fl()},templates.treat=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="treat-container obscured fade"> '),n.s(n.f("initials",e,t,1),e,t,0,57,105,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b(' <div class="treat-initials">'),i.b(i.v(i.f("initials",e,t,0))),i.b("</div> ")}),e.pop()),n.b(" "),n.s(n.f("initials",e,t,1),e,t,1,0,0,"")||(n.b(' <img class="treat-image" src="'),n.b(n.v(n.f("src",e,t,0))),n.b('"> ')),n.b(' <p class="food"> Send an email to feed Taco a treat! <span class="arrow"/> </p> </div> '),n.fl()},templates.upgrade=function(e,t,i){var n=this;return n.b(i=i||""),n.b("Update available!<br /> "),n.s(n.f("stopped",e,t,1),e,t,1,0,0,"")||(n.b("Trello will automatically update itself by reloading in "),n.b(n.v(n.f("timeInMinutes",e,t,0))),n.b(" minute"),n.s(n.f("plural",e,t,1),e,t,0,127,128,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("s")}),e.pop()),n.b(".<br />")),n.b(" "),n.s(n.f("stopped",e,t,1),e,t,0,171,195,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("When you’re ready…<br />")}),e.pop()),n.b(' <a class="js-upgrade" href="#">'),n.s(n.f("stopped",e,t,1),e,t,1,0,0,"")||n.b("Reload now"),n.s(n.f("stopped",e,t,1),e,t,0,285,302,"{{ }}")&&(n.rs(e,t,function(e,t,i){i.b("Okay, NOW reload.")}),e.pop()),n.b("</a> "),n.s(n.f("stopped",e,t,1),e,t,1,0,0,"")||n.b('<a class="js-stop-upgrade" href="#">Wait!</a>'),n.b(" "),n.fl()},templates.woof_header=function(e,t,i){var n=this;return n.b(i=i||""),n.b('<a class="header-btn header-woof" href="#"> <span class="taco-talk-small-icon"/> <span class="header-btn-text"><span class="left-arrow"></span><span class="js-phrase"></span></span> </a> '),n.fl()},function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=et.type(e);return"function"===i||et.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(et.isFunction(t))return et.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return et.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(at.test(t))return et.filter(t,e,i);t=et.filter(t,e)}return et.grep(e,function(e){return K.call(t,e)>=0!==i})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=mt[e]={};return et.each(e.match(ht)||[],function(e,i){t[i]=!0}),t}function s(){X.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),et.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=et.expando+Math.random()}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(_t,"-$1").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:yt.test(i)?et.parseJSON(i):i}catch(r){}vt.set(e,t,i)}else i=void 0;return i}function c(){return!0}function d(){return!1}function u(){try{return X.activeElement}catch(e){}}function p(e,t){return et.nodeName(e,"table")&&et.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function m(e){var t=Vt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function f(e,t){for(var i=0,n=e.length;n>i;i++)bt.set(e[i],"globalEval",!t||bt.get(t[i],"globalEval"))}function g(e,t){var i,n,r,o,s,a,l,c;if(1===t.nodeType){if(bt.hasData(e)&&(o=bt.access(e),s=bt.set(t,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(i=0,n=c[r].length;n>i;i++)et.event.add(t,r,c[r][i])}vt.hasData(e)&&(a=vt.access(e),l=et.extend({},a),vt.set(t,l))}}function b(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&et.nodeName(e,t)?et.merge([e],i):i}function v(e,t){var i=t.nodeName.toLowerCase();"input"===i&&xt.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function y(t,i){var n=et(i.createElement(t)).appendTo(i.body),r=e.getDefaultComputedStyle?e.getDefaultComputedStyle(n[0]).display:et.css(n[0],"display");return n.detach(),r}function _(e){var t=X,i=Ut[e];return i||(i=y(e,t),"none"!==i&&i||(Nt=(Nt||et("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Nt[0].contentDocument,t.write(),t.close(),i=y(e,t),Nt.detach()),Ut[e]=i),i}function w(e,t,i){var n,r,o,s,a=e.style;return i=i||Rt(e),i&&(s=i.getPropertyValue(t)||i[t]),i&&(""!==s||et.contains(e.ownerDocument,e)||(s=et.style(e,t)),Ft.test(s)&&zt.test(t)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function k(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,r=Gt.length;r--;)if(t=Gt[r]+i,t in e)return t;return n}function x(e,t,i){var n=Wt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function j(e,t,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===i&&(s+=et.css(e,i+kt[o],!0,r)),n?("content"===i&&(s-=et.css(e,"padding"+kt[o],!0,r)),"margin"!==i&&(s-=et.css(e,"border"+kt[o]+"Width",!0,r))):(s+=et.css(e,"padding"+kt[o],!0,r),"padding"!==i&&(s+=et.css(e,"border"+kt[o]+"Width",!0,r)));return s}function S(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),s="border-box"===et.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=w(e,t,o),(0>r||null==r)&&(r=e.style[t]),Ft.test(r))return r;n=s&&(Q.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+j(e,t,i||(s?"border":"content"),n,o)+"px"}function M(e,t){for(var i,n,r,o=[],s=0,a=e.length;a>s;s++)n=e[s],n.style&&(o[s]=bt.get(n,"olddisplay"),i=n.style.display,t?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Ct(n)&&(o[s]=bt.access(n,"olddisplay",_(n.nodeName)))):o[s]||(r=Ct(n),(i&&"none"!==i||!r)&&bt.set(n,"olddisplay",r?i:et.css(n,"display"))));for(s=0;a>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[s]||"":"none"));return e}function A(e,t,i,n,r){return new A.prototype.init(e,t,i,n,r)}function T(){return setTimeout(function(){Jt=void 0}),Jt=et.now()}function D(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)i=kt[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function O(e,t,i){for(var n,r=(ii[t]||[]).concat(ii["*"]),o=0,s=r.length;s>o;o++)if(n=r[o].call(i,t,e))return n}function P(e,t,i){var n,r,o,s,a,l,c,d=this,u={},p=e.style,h=e.nodeType&&Ct(e),m=bt.get(e,"fxshow");i.queue||(a=et._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,et.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=et.css(e,"display"),"none"===c&&(c=_(e.nodeName)),"inline"===c&&"none"===et.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Xt.exec(r)){if(delete t[n],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;h=!0}u[n]=m&&m[n]||et.style(e,n)}if(!et.isEmptyObject(u)){m?"hidden"in m&&(h=m.hidden):m=bt.access(e,"fxshow",{}),o&&(m.hidden=!h),h?et(e).show():d.done(function(){et(e).hide()}),d.done(function(){var t;bt.remove(e,"fxshow");for(t in u)et.style(e,t,u[t])});for(n in u)s=O(h?m[n]:0,n,d),n in m||(m[n]=s.start,h&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function L(e,t){var i,n,r,o,s;for(i in e)if(n=et.camelCase(i),r=t[n],o=e[i],et.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),s=et.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=r)}else t[n]=r}function E(e,t,i){var n,r,o=0,s=ti.length,a=et.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Jt||T(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,o=1-n,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,i]),1>o&&l?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:et.extend({},t),opts:et.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Jt||T(),duration:i.duration,tweens:[],createTween:function(t,i){var n=et.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),d=c.props;for(L(d,c.opts.specialEasing);s>o;o++)if(n=ti[o].call(c,e,d,c.opts))return n;return et.map(d,O,c),et.isFunction(c.opts.start)&&c.opts.start.call(e,c),et.fx.timer(et.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function B(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,o=t.toLowerCase().match(ht)||[];if(et.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function V(e,t,i,n){function r(a){var l;return o[a]=!0,et.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=e===wi;return r(t.dataTypes[0])||!o["*"]&&r("*")}function I(e,t){var i,n,r=et.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&et.extend(!0,e,n),e}function $(e,t,i){for(var n,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function N(e,t,i,n){var r,o,s,a,l,c={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=d.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],d.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function U(e,t,i,n){var r;if(et.isArray(t))et.each(t,function(t,r){i||ji.test(e)?n(e,r):U(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==et.type(t))n(e,t);else for(r in t)U(e+"["+r+"]",t[r],i,n)}function z(e){return et.isWindow(e)?e:9===e.nodeType&&e.defaultView}var F=[],R=F.slice,H=F.concat,W=F.push,K=F.indexOf,q={},Y=q.toString,G=q.hasOwnProperty,J="".trim,Q={},X=e.document,Z="2.1.0",et=function(e,t){return new et.fn.init(e,t)},tt=/^-ms-/,it=/-([\da-z])/gi,nt=function(e,t){return t.toUpperCase()};et.fn=et.prototype={jquery:Z,constructor:et,selector:"",length:0,toArray:function(){return R.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:R.call(this)},pushStack:function(e){var t=et.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return et.each(this,e,t)},map:function(e){return this.pushStack(et.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:F.sort,splice:F.splice},et.extend=et.fn.extend=function(){var e,t,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||et.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)i=s[t],n=e[t],s!==n&&(c&&n&&(et.isPlainObject(n)||(r=et.isArray(n)))?(r?(r=!1,o=i&&et.isArray(i)?i:[]):o=i&&et.isPlainObject(i)?i:{},s[t]=et.extend(c,o,n)):void 0!==n&&(s[t]=n));return s},et.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===et.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isPlainObject:function(e){if("object"!==et.type(e)||e.nodeType||et.isWindow(e))return!1;try{if(e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?q[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=et.trim(e),e&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(it,nt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,o=0,s=e.length,a=i(e);if(n){if(a)for(;s>o&&(r=t.apply(e[o],n),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],n),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":J.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?et.merge(n,"string"==typeof e?[e]:e):W.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:K.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],o=0,s=e.length,a=!i;s>o;o++)n=!t(e[o],o),n!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o=0,s=e.length,a=i(e),l=[];if(a)for(;s>o;o++)r=t(e[o],o,n),null!=r&&l.push(r);else for(o in e)r=t(e[o],o,n),null!=r&&l.push(r);return H.apply([],l)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(i=e[t],t=e,e=i),et.isFunction(e)?(n=R.call(arguments,2),r=function(){return e.apply(t||this,n.concat(R.call(arguments)))},r.guid=e.guid=e.guid||et.guid++,r):void 0},now:Date.now,support:Q}),et.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()});var rt=function(e){function t(e,t,i,n){var r,o,s,a,l,c,u,m,f,g;if((t?t.ownerDocument||t:U)!==P&&O(t),t=t||P,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(E&&!n){if(r=vt.exec(e))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return i;if(o.id===s)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&$(t,o)&&o.id===s)return i.push(o),i}else{if(r[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((s=r[3])&&C.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(s)),i}if(C.qsa&&(!B||!B.test(e))){if(m=u=N,f=t,g=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=p(e),(u=t.getAttribute("id"))?m=u.replace(_t,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=c.length;l--;)c[l]=m+h(c[l]);f=yt.test(e)&&d(t.parentNode)||t,g=c.join(",")}if(g)try{return Z.apply(i,f.querySelectorAll(g)),i}catch(b){}finally{u||t.removeAttribute("id")}}}return w(e.replace(lt,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>x.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[N]=!0,e}function r(e){var t=P.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=e.length;n--;)x.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var r,o=e([],i.length,t),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function d(e){return e&&typeof e.getElementsByTagName!==q&&e}function u(){}function p(e,i){var n,r,o,s,a,l,c,d=H[e+" "];if(d)return i?0:d.slice(0);for(a=e,l=[],c=x.preFilter;a;){(!n||(r=ct.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=dt.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(lt," ")}),a=a.slice(n.length));for(s in x.filter)!(r=mt[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):H(e,l).slice(0)}function h(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function m(e,t,i){var n=t.dir,r=i&&"parentNode"===n,o=F++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,o)}:function(t,i,s){var a,l,c=[z,o];if(s){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(l=t[N]||(t[N]={}),(a=l[n])&&a[0]===z&&a[1]===o)return c[2]=a[2];if(l[n]=c,c[2]=e(t,i,s))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function g(e,t,i,n,r){for(var o,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!i||i(o,n,r))&&(s.push(o),c&&t.push(a));return s}function b(e,t,i,r,o,s){return r&&!r[N]&&(r=b(r)),o&&!o[N]&&(o=b(o,s)),n(function(n,s,a,l){var c,d,u,p=[],h=[],m=s.length,f=n||_(t||"*",a.nodeType?[a]:a,[]),b=!e||!n&&t?f:g(f,p,e,a,l),v=i?o||(n?e:m||r)?[]:s:b;if(i&&i(b,v,a,l),r)for(c=g(v,h),r(c,[],a,l),d=c.length;d--;)(u=c[d])&&(v[h[d]]=!(b[h[d]]=u));if(n){if(o||e){if(o){for(c=[],d=v.length;d--;)(u=v[d])&&c.push(b[d]=u);o(null,v=[],c,l)}for(d=v.length;d--;)(u=v[d])&&(c=o?tt.call(n,u):p[d])>-1&&(n[c]=!(s[c]=u))}}else v=g(v===s?v.splice(m,v.length):v),o?o(null,s,v,l):Z.apply(s,v)})}function v(e){for(var t,i,n,r=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,l=m(function(e){return e===t},s,!0),c=m(function(e){return tt.call(t,e)>-1},s,!0),d=[function(e,i,n){return!o&&(n||i!==A)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];r>a;a++)if(i=x.relative[e[a].type])d=[m(f(d),i)];else{if(i=x.filter[e[a].type].apply(null,e[a].matches),i[N]){for(n=++a;r>n&&!x.relative[e[n].type];n++);return b(a>1&&f(d),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),i,n>a&&v(e.slice(a,n)),r>n&&v(e=e.slice(n)),r>n&&h(e))}d.push(i)}return f(d)}function y(e,i){var r=i.length>0,o=e.length>0,s=function(n,s,a,l,c){var d,u,p,h=0,m="0",f=n&&[],b=[],v=A,y=n||o&&x.find.TAG("*",c),_=z+=null==v?1:Math.random()||.1,w=y.length;for(c&&(A=s!==P&&s);m!==w&&null!=(d=y[m]);m++){if(o&&d){for(u=0;p=e[u++];)if(p(d,s,a)){l.push(d);break}c&&(z=_)}r&&((d=!p&&d)&&h--,n&&f.push(d))}if(h+=m,r&&m!==h){for(u=0;p=i[u++];)p(f,b,s,a);if(n){if(h>0)for(;m--;)f[m]||b[m]||(b[m]=Q.call(l));b=g(b)}Z.apply(l,b),c&&!n&&b.length>0&&h+i.length>1&&t.uniqueSort(l)}return c&&(z=_,A=v),f};return r?n(s):s}function _(e,i,n){for(var r=0,o=i.length;o>r;r++)t(e,i[r],n);return n}function w(e,t,i,n){var r,o,s,a,l,c=p(e);if(!n&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&C.getById&&9===t.nodeType&&E&&x.relative[o[1].type]){if(t=(x.find.ID(s.matches[0].replace(wt,kt),t)||[])[0],!t)return i;e=e.slice(o.shift().value.length)}for(r=mt.needsContext.test(e)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((l=x.find[a])&&(n=l(s.matches[0].replace(wt,kt),yt.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(r,1),e=n.length&&h(o),!e)return Z.apply(i,n),i;break}}return M(e,c)(n,t,!E,i,yt.test(e)&&d(t.parentNode)||t),i}var k,C,x,j,S,M,A,T,D,O,P,L,E,B,V,I,$,N="sizzle"+-new Date,U=e.document,z=0,F=0,R=i(),H=i(),W=i(),K=function(e,t){return e===t&&(D=!0),0},q="undefined",Y=1<<31,G={}.hasOwnProperty,J=[],Q=J.pop,X=J.push,Z=J.push,et=J.slice,tt=J.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=rt.replace("w","w#"),st="\\["+nt+"*("+rt+")"+nt+"*(?:([*^$|!~]?=)"+nt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ot+")|)|)"+nt+"*\\]",at=":("+rt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+st.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),dt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),pt=new RegExp(at),ht=new RegExp("^"+ot+"$"),mt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,bt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),kt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(J=et.call(U.childNodes),U.childNodes),J[U.childNodes.length].nodeType}catch(Ct){Z={apply:J.length?function(e,t){X.apply(e,et.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}C=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},O=t.setDocument=function(e){var t,i=e?e.ownerDocument||e:U,n=i.defaultView;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,L=i.documentElement,E=!S(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){O()},!1):n.attachEvent&&n.attachEvent("onunload",function(){O()})),C.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=bt.test(i.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),C.getById=r(function(e){return L.appendChild(e).id=N,!i.getElementsByName||!i.getElementsByName(N).length}),C.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==q&&E){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},x.filter.ID=function(e){var t=e.replace(wt,kt);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(wt,kt);return function(e){var i=typeof e.getAttributeNode!==q&&e.getAttributeNode("id");return i&&i.value===t}}),x.find.TAG=C.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==q?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},x.find.CLASS=C.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==q&&E?t.getElementsByClassName(e):void 0},V=[],B=[],(C.qsa=bt.test(i.querySelectorAll))&&(r(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&B.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||B.push("\\["+nt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||B.push(":checked")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&B.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),B.push(",.*:")
})),(C.matchesSelector=bt.test(I=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&r(function(e){C.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),V.push("!=",at)}),B=B.length&&new RegExp(B.join("|")),V=V.length&&new RegExp(V.join("|")),t=bt.test(L.compareDocumentPosition),$=t||bt.test(L.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=t?function(e,t){if(e===t)return D=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!C.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===U&&$(U,e)?-1:t===i||t.ownerDocument===U&&$(U,t)?1:T?tt.call(T,e)-tt.call(T,t):0:4&n?-1:1)}:function(e,t){if(e===t)return D=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:T?tt.call(T,e)-tt.call(T,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?s(l[r],c[r]):l[r]===U?-1:c[r]===U?1:0},i):P},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==P&&O(e),i=i.replace(ut,"='$1']"),!(!C.matchesSelector||!E||V&&V.test(i)||B&&B.test(i)))try{var n=I.call(e,i);if(n||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,P,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==P&&O(e),$(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==P&&O(e);var i=x.attrHandle[t.toLowerCase()],n=i&&G.call(x.attrHandle,t.toLowerCase())?i(e,t,!E):void 0;return void 0!==n?n:C.attributes||!E?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(D=!C.detectDuplicates,T=!C.sortStable&&e.slice(0),e.sort(K),D){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return T=null,e},j=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=j(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=j(t);return i},x=t.selectors={cacheLength:50,createPseudo:n,match:mt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,kt),e[3]=(e[4]||e[5]||"").replace(wt,kt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return mt.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:i&&pt.test(i)&&(t=p(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,kt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=R[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&R(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==q&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var o=t.attr(r,e);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var c,d,u,p,h,m,f=o!==s?"nextSibling":"previousSibling",g=t.parentNode,b=a&&t.nodeName.toLowerCase(),v=!l&&!a;if(g){if(o){for(;f;){for(u=t;u=u[f];)if(a?u.nodeName.toLowerCase()===b:1===u.nodeType)return!1;m=f="only"===e&&!m&&"nextSibling"}return!0}if(m=[s?g.firstChild:g.lastChild],s&&v){for(d=g[N]||(g[N]={}),c=d[e]||[],h=c[0]===z&&c[1],p=c[0]===z&&c[2],u=h&&g.childNodes[h];u=++h&&u&&u[f]||(p=h=0)||m.pop();)if(1===u.nodeType&&++p&&u===t){d[e]=[z,h,p];break}}else if(v&&(c=(t[N]||(t[N]={}))[e])&&c[0]===z)p=c[1];else for(;(u=++h&&u&&u[f]||(p=h=0)||m.pop())&&((a?u.nodeName.toLowerCase()!==b:1!==u.nodeType)||!++p||(v&&((u[N]||(u[N]={}))[e]=[z,p]),u!==t)););return p-=r,p===n||p%n===0&&p/n>=0}}},PSEUDO:function(e,i){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[N]?o(i):o.length>1?(r=[e,e,"",i],x.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=o(e,i),s=r.length;s--;)n=tt.call(e,r[s]),e[n]=!(t[n]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:n(function(e){var t=[],i=[],r=M(e.replace(lt,"$1"));return r[N]?n(function(e,t,i,n){for(var o,s=r(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,i),!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||j(t)).indexOf(e)>-1}}),lang:n(function(e){return ht.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,kt).toLowerCase(),function(t){var i;do if(i=E?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return ft.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},x.pseudos.nth=x.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[k]=a(k);for(k in{submit:!0,reset:!0})x.pseudos[k]=l(k);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,M=t.compile=function(e,t){var i,n=[],r=[],o=W[e+" "];if(!o){for(t||(t=p(e)),i=t.length;i--;)o=v(t[i]),o[N]?n.push(o):r.push(o);o=W(e,y(r,n))}return o},C.sortStable=N.split("").sort(K).join("")===N,C.detectDuplicates=!!D,O(),C.sortDetached=r(function(e){return 1&e.compareDocumentPosition(P.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(it,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);et.find=rt,et.expr=rt.selectors,et.expr[":"]=et.expr.pseudos,et.unique=rt.uniqueSort,et.text=rt.getText,et.isXMLDoc=rt.isXML,et.contains=rt.contains;var ot=et.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;et.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?et.find.matchesSelector(n,e)?[n]:[]:et.find.matches(e,et.grep(t,function(e){return 1===e.nodeType}))},et.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(et(e).filter(function(){for(t=0;i>t;t++)if(et.contains(r[t],this))return!0}));for(t=0;i>t;t++)et.find(e,r[t],n);return n=this.pushStack(i>1?et.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&ot.test(e)?et(e):e||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,dt=et.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ct.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof et?t[0]:t,et.merge(this,et.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),st.test(i[1])&&et.isPlainObject(t))for(i in t)et.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return n=X.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):et.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(et):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),et.makeArray(e,this))};dt.prototype=et.fn,lt=et(X);var ut=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};et.extend({dir:function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&et(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),et.fn.extend({has:function(e){var t=et(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(et.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,o=[],s=ot.test(e)||"string"!=typeof e?et(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&et.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?et.unique(o):o)},index:function(e){return e?"string"==typeof e?K.call(et(e),this[0]):K.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(et.unique(et.merge(this.get(),et(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),et.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return et.dir(e,"parentNode")},parentsUntil:function(e,t,i){return et.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return et.dir(e,"nextSibling")},prevAll:function(e){return et.dir(e,"previousSibling")},nextUntil:function(e,t,i){return et.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return et.dir(e,"previousSibling",i)},siblings:function(e){return et.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return et.sibling(e.firstChild)},contents:function(e){return e.contentDocument||et.merge([],e.childNodes)}},function(e,t){et.fn[e]=function(i,n){var r=et.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=et.filter(n,r)),this.length>1&&(pt[e]||et.unique(r),ut.test(e)&&r.reverse()),this.pushStack(r)}});var ht=/\S+/g,mt={};et.Callbacks=function(e){e="string"==typeof e?mt[e]||o(e):et.extend({},e);var t,i,n,r,s,a,l=[],c=!e.once&&[],d=function(o){for(t=e.memory&&o,i=!0,a=r||0,r=0,s=l.length,n=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,l&&(c?c.length&&d(c.shift()):t?l=[]:u.disable())},u={add:function(){if(l){var i=l.length;!function o(t){et.each(t,function(t,i){var n=et.type(i);"function"===n?e.unique&&u.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),n?s=l.length:t&&(r=i,d(t))}return this},remove:function(){return l&&et.each(arguments,function(e,t){for(var i;(i=et.inArray(t,l,i))>-1;)l.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(e){return e?et.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||u.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||i&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},et.extend({Deferred:function(e){var t=[["resolve","done",et.Callbacks("once memory"),"resolved"],["reject","fail",et.Callbacks("once memory"),"rejected"],["notify","progress",et.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return et.Deferred(function(i){et.each(t,function(t,o){var s=et.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&et.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?et.extend(e,n):n}},r={};return n.pipe=n.then,et.each(t,function(e,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=s.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,o=R.call(arguments),s=o.length,a=1!==s||e&&et.isFunction(e.promise)?s:0,l=1===a?e:et.Deferred(),c=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?R.call(arguments):r,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);s>r;r++)o[r]&&et.isFunction(o[r].promise)?o[r].promise().done(c(r,n,o)).fail(l.reject).progress(c(r,i,t)):--a;return a||l.resolveWith(n,o),l.promise()}});var ft;et.fn.ready=function(e){return et.ready.promise().done(e),this},et.extend({isReady:!1,readyWait:1,holdReady:function(e){e?et.readyWait++:et.ready(!0)},ready:function(e){(e===!0?--et.readyWait:et.isReady)||(et.isReady=!0,e!==!0&&--et.readyWait>0||(ft.resolveWith(X,[et]),et.fn.trigger&&et(X).trigger("ready").off("ready")))}}),et.ready.promise=function(t){return ft||(ft=et.Deferred(),"complete"===X.readyState?setTimeout(et.ready):(X.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),ft.promise(t)},et.ready.promise();var gt=et.access=function(e,t,i,n,r,o,s){var a=0,l=e.length,c=null==i;if("object"===et.type(i)){r=!0;for(a in i)et.access(e,t,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,et.isFunction(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(et(e),i)})),t))for(;l>a;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return r?e:c?t.call(e):l?t(e[0],i):o};et.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=et.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=a.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,et.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=i;else if(et.isEmptyObject(o))et.extend(this.cache[r],t);else for(n in t)o[n]=t[n];return o},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,et.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{et.isArray(t)?n=t.concat(t.map(et.camelCase)):(r=et.camelCase(t),t in s?n=[t,r]:(n=r,n=n in s?[n]:n.match(ht)||[])),i=n.length;for(;i--;)delete s[n[i]]}},hasData:function(e){return!et.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var bt=new a,vt=new a,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_t=/([A-Z])/g;et.extend({hasData:function(e){return vt.hasData(e)||bt.hasData(e)},data:function(e,t,i){return vt.access(e,t,i)},removeData:function(e,t){vt.remove(e,t)},_data:function(e,t,i){return bt.access(e,t,i)},_removeData:function(e,t){bt.remove(e,t)}}),et.fn.extend({data:function(e,t){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=vt.get(o),1===o.nodeType&&!bt.get(o,"hasDataAttrs"))){for(i=s.length;i--;)n=s[i].name,0===n.indexOf("data-")&&(n=et.camelCase(n.slice(5)),l(o,n,r[n]));bt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){vt.set(this,e)}):gt(this,function(t){var i,n=et.camelCase(e);if(o&&void 0===t){if(i=vt.get(o,e),void 0!==i)return i;if(i=vt.get(o,n),void 0!==i)return i;if(i=l(o,n,void 0),void 0!==i)return i}else this.each(function(){var i=vt.get(this,n);vt.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&vt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){vt.remove(this,e)})}}),et.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=bt.get(e,t),i&&(!n||et.isArray(i)?n=bt.access(e,t,et.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=et.queue(e,t),n=i.length,r=i.shift(),o=et._queueHooks(e,t),s=function(){et.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return bt.get(e,i)||bt.access(e,i,{empty:et.Callbacks("once memory").add(function(){bt.remove(e,[t+"queue",i])})})}}),et.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?et.queue(this[0],e):void 0===t?this:this.each(function(){var i=et.queue(this,e,t);et._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&et.dequeue(this,e)})},dequeue:function(e){return this.each(function(){et.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=et.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=bt.get(o[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kt=["Top","Right","Bottom","Left"],Ct=function(e,t){return e=t||e,"none"===et.css(e,"display")||!et.contains(e.ownerDocument,e)},xt=/^(?:checkbox|radio)$/i;!function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div"));t.innerHTML="<input type='radio' checked='checked' name='t'/>",Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var jt="undefined";Q.focusinBubbles="onfocusin"in e;var St=/^key/,Mt=/^(?:mouse|contextmenu)|click/,At=/^(?:focusinfocus|focusoutblur)$/,Tt=/^([^.]*)(?:\.(.+)|)$/;et.event={global:{},add:function(e,t,i,n,r){var o,s,a,l,c,d,u,p,h,m,f,g=bt.get(e);if(g)for(i.handler&&(o=i,i=o.handler,r=o.selector),i.guid||(i.guid=et.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return typeof et!==jt&&et.event.triggered!==t.type?et.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ht)||[""],c=t.length;c--;)a=Tt.exec(t[c])||[],h=f=a[1],m=(a[2]||"").split(".").sort(),h&&(u=et.event.special[h]||{},h=(r?u.delegateType:u.bindType)||h,u=et.event.special[h]||{},d=et.extend({type:h,origType:f,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&et.expr.match.needsContext.test(r),namespace:m.join(".")},o),(p=l[h])||(p=l[h]=[],p.delegateCount=0,u.setup&&u.setup.call(e,n,m,s)!==!1||e.addEventListener&&e.addEventListener(h,s,!1)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),et.event.global[h]=!0)},remove:function(e,t,i,n,r){var o,s,a,l,c,d,u,p,h,m,f,g=bt.hasData(e)&&bt.get(e);if(g&&(l=g.events)){for(t=(t||"").match(ht)||[""],c=t.length;c--;)if(a=Tt.exec(t[c])||[],h=f=a[1],m=(a[2]||"").split(".").sort(),h){for(u=et.event.special[h]||{},h=(n?u.delegateType:u.bindType)||h,p=l[h]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)d=p[o],!r&&f!==d.origType||i&&i.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(p.splice(o,1),d.selector&&p.delegateCount--,u.remove&&u.remove.call(e,d));s&&!p.length&&(u.teardown&&u.teardown.call(e,m,g.handle)!==!1||et.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)et.event.remove(e,h+t[c],i,n,!0);et.isEmptyObject(l)&&(delete g.handle,bt.remove(e,"events"))}},trigger:function(t,i,n,r){var o,s,a,l,c,d,u,p=[n||X],h=G.call(t,"type")?t.type:t,m=G.call(t,"namespace")?t.namespace.split("."):[];if(s=a=n=n||X,3!==n.nodeType&&8!==n.nodeType&&!At.test(h+et.event.triggered)&&(h.indexOf(".")>=0&&(m=h.split("."),h=m.shift(),m.sort()),c=h.indexOf(":")<0&&"on"+h,t=t[et.expando]?t:new et.Event(h,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:et.makeArray(i,[t]),u=et.event.special[h]||{},r||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!r&&!u.noBubble&&!et.isWindow(n)){for(l=u.delegateType||h,At.test(l+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||X)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?l:u.bindType||h,d=(bt.get(s,"events")||{})[t.type]&&bt.get(s,"handle"),d&&d.apply(s,i),d=c&&s[c],d&&d.apply&&et.acceptData(s)&&(t.result=d.apply(s,i),t.result===!1&&t.preventDefault());return t.type=h,r||t.isDefaultPrevented()||u._default&&u._default.apply(p.pop(),i)!==!1||!et.acceptData(n)||c&&et.isFunction(n[h])&&!et.isWindow(n)&&(a=n[c],a&&(n[c]=null),et.event.triggered=h,n[h](),et.event.triggered=void 0,a&&(n[c]=a)),t.result}},dispatch:function(e){e=et.event.fix(e);var t,i,n,r,o,s=[],a=R.call(arguments),l=(bt.get(this,"events")||{})[e.type]||[],c=et.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=et.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,n=((et.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(n=[],i=0;a>i;i++)o=t[i],r=o.selector+" ",void 0===n[r]&&(n[r]=o.needsContext?et(r,this).index(l)>=0:et.find(r,this,null,[l]).length),n[r]&&n.push(o);n.length&&s.push({elem:l,handlers:n})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||X,n=i.documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[et.expando])return e;var t,i,n,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Mt.test(r)?this.mouseHooks:St.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new et.Event(o),t=n.length;t--;)i=n[t],e[i]=o[i];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&et.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return et.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=et.extend(new et.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?et.event.trigger(r,null,t):et.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},et.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},et.Event=function(e,t){return this instanceof et.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.getPreventDefault&&e.getPreventDefault()?c:d):this.type=e,t&&et.extend(this,t),this.timeStamp=e&&e.timeStamp||et.now(),void(this[et.expando]=!0)):new et.Event(e,t)},et.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c,this.stopPropagation()}},et.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){et.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==n&&!et.contains(n,r))&&(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),Q.focusinBubbles||et.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){et.event.simulate(t,e.target,et.event.fix(e),!0)};et.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=bt.access(n,t);r||n.addEventListener(e,i,!0),bt.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=bt.access(n,t)-1;r?bt.access(n,t,r):(n.removeEventListener(e,i,!0),bt.remove(n,t))}}}),et.fn.extend({on:function(e,t,i,n,r){var o,s;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(s in e)this.on(s,t,i,e[s],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=d;else if(!n)return this;return 1===r&&(o=n,n=function(e){return et().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=et.guid++)),this.each(function(){et.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,et(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=d),this.each(function(){et.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){et.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?et.event.trigger(e,t,i,!0):void 0}});var Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ot=/<([\w:]+)/,Pt=/<|&#?\w+;/,Lt=/<(?:script|style|link)/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^$|\/(?:java|ecma)script/i,Vt=/^true\/(.*)/,It=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,$t={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$t.optgroup=$t.option,$t.tbody=$t.tfoot=$t.colgroup=$t.caption=$t.thead,$t.th=$t.td,et.extend({clone:function(e,t,i){var n,r,o,s,a=e.cloneNode(!0),l=et.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||et.isXMLDoc(e)))for(s=b(a),o=b(e),n=0,r=o.length;r>n;n++)v(o[n],s[n]);if(t)if(i)for(o=o||b(e),s=s||b(a),n=0,r=o.length;r>n;n++)g(o[n],s[n]);else g(e,a);return s=b(a,"script"),s.length>0&&f(s,!l&&b(e,"script")),a},buildFragment:function(e,t,i,n){for(var r,o,s,a,l,c,d=t.createDocumentFragment(),u=[],p=0,h=e.length;h>p;p++)if(r=e[p],r||0===r)if("object"===et.type(r))et.merge(u,r.nodeType?[r]:r);else if(Pt.test(r)){for(o=o||d.appendChild(t.createElement("div")),s=(Ot.exec(r)||["",""])[1].toLowerCase(),a=$t[s]||$t._default,o.innerHTML=a[1]+r.replace(Dt,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;et.merge(u,o.childNodes),o=d.firstChild,o.textContent=""}else u.push(t.createTextNode(r));for(d.textContent="",p=0;r=u[p++];)if((!n||-1===et.inArray(r,n))&&(l=et.contains(r.ownerDocument,r),o=b(d.appendChild(r),"script"),l&&f(o),i))for(c=0;r=o[c++];)Bt.test(r.type||"")&&i.push(r);return d},cleanData:function(e){for(var t,i,n,r,o,s,a=et.event.special,l=0;void 0!==(i=e[l]);l++){if(et.acceptData(i)&&(o=i[bt.expando],o&&(t=bt.cache[o]))){if(n=Object.keys(t.events||{}),n.length)for(s=0;void 0!==(r=n[s]);s++)a[r]?et.event.remove(i,r):et.removeEvent(i,r,t.handle);bt.cache[o]&&delete bt.cache[o]}delete vt.cache[i[vt.expando]]}}}),et.fn.extend({text:function(e){return gt(this,function(e){return void 0===e?et.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?et.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||et.cleanData(b(i)),i.parentNode&&(t&&et.contains(i.ownerDocument,i)&&f(b(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(et.cleanData(b(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return et.clone(this,e,t)})},html:function(e){return gt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Lt.test(e)&&!$t[(Ot.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Dt,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(et.cleanData(b(t,!1)),t.innerHTML=e);
t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,et.cleanData(b(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=H.apply([],e);var i,n,r,o,s,a,l=0,c=this.length,d=this,u=c-1,p=e[0],f=et.isFunction(p);if(f||c>1&&"string"==typeof p&&!Q.checkClone&&Et.test(p))return this.each(function(i){var n=d.eq(i);f&&(e[0]=p.call(this,i,n.html())),n.domManip(e,t)});if(c&&(i=et.buildFragment(e,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(r=et.map(b(i,"script"),h),o=r.length;c>l;l++)s=i,l!==u&&(s=et.clone(s,!0,!0),o&&et.merge(r,b(s,"script"))),t.call(this[l],s,l);if(o)for(a=r[r.length-1].ownerDocument,et.map(r,m),l=0;o>l;l++)s=r[l],Bt.test(s.type||"")&&!bt.access(s,"globalEval")&&et.contains(a,s)&&(s.src?et._evalUrl&&et._evalUrl(s.src):et.globalEval(s.textContent.replace(It,"")))}return this}}),et.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){et.fn[e]=function(e){for(var i,n=[],r=et(e),o=r.length-1,s=0;o>=s;s++)i=s===o?this:this.clone(!0),et(r[s])[t](i),W.apply(n,i.get());return this.pushStack(n)}});var Nt,Ut={},zt=/^margin/,Ft=new RegExp("^("+wt+")(?!px)[a-z%]+$","i"),Rt=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",o.appendChild(s);var t=e.getComputedStyle(a,null);i="1%"!==t.top,n="4px"===t.width,o.removeChild(s)}var i,n,r="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",o=X.documentElement,s=X.createElement("div"),a=X.createElement("div");a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(a),e.getComputedStyle&&et.extend(Q,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,i=a.appendChild(X.createElement("div"));return i.style.cssText=a.style.cssText=r,i.style.marginRight=i.style.width="0",a.style.width="1px",o.appendChild(s),t=!parseFloat(e.getComputedStyle(i,null).marginRight),o.removeChild(s),a.innerHTML="",t}})}(),et.swap=function(e,t,i,n){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=i.apply(e,n||[]);for(o in t)e.style[o]=s[o];return r};var Ht=/^(none|table(?!-c[ea]).+)/,Wt=new RegExp("^("+wt+")(.*)$","i"),Kt=new RegExp("^([+-])=("+wt+")","i"),qt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Gt=["Webkit","O","Moz","ms"];et.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=w(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=et.camelCase(t),l=e.style;return t=et.cssProps[a]||(et.cssProps[a]=C(l,a)),s=et.cssHooks[t]||et.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:l[t]:(o=typeof i,"string"===o&&(r=Kt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(et.css(e,t)),o="number"),null!=i&&i===i&&("number"!==o||et.cssNumber[a]||(i+="px"),Q.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l[t]="",l[t]=i)),void 0)}},css:function(e,t,i,n){var r,o,s,a=et.camelCase(t);return t=et.cssProps[a]||(et.cssProps[a]=C(e.style,a)),s=et.cssHooks[t]||et.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=w(e,t,n)),"normal"===r&&t in Yt&&(r=Yt[t]),""===i||i?(o=parseFloat(r),i===!0||et.isNumeric(o)?o||0:r):r}}),et.each(["height","width"],function(e,t){et.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&Ht.test(et.css(e,"display"))?et.swap(e,qt,function(){return S(e,t,n)}):S(e,t,n):void 0},set:function(e,i,n){var r=n&&Rt(e);return x(e,i,n?j(e,t,n,"border-box"===et.css(e,"boxSizing",!1,r),r):0)}}}),et.cssHooks.marginRight=k(Q.reliableMarginRight,function(e,t){return t?et.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),et.each({margin:"",padding:"",border:"Width"},function(e,t){et.cssHooks[e+t]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+kt[n]+t]=o[n]||o[n-2]||o[0];return r}},zt.test(e)||(et.cssHooks[e+t].set=x)}),et.fn.extend({css:function(e,t){return gt(this,function(e,t,i){var n,r,o={},s=0;if(et.isArray(t)){for(n=Rt(e),r=t.length;r>s;s++)o[t[s]]=et.css(e,t[s],!1,n);return o}return void 0!==i?et.style(e,t,i):et.css(e,t)},e,t,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ct(this)?et(this).show():et(this).hide()})}}),et.Tween=A,A.prototype={constructor:A,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(et.cssNumber[i]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,i=A.propHooks[this.prop];return this.pos=t=this.options.duration?et.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=et.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){et.fx.step[e.prop]?et.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[et.cssProps[e.prop]]||et.cssHooks[e.prop])?et.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},et.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},et.fx=A.prototype.init,et.fx.step={};var Jt,Qt,Xt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+wt+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[P],ii={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=Zt.exec(t),o=r&&r[3]||(et.cssNumber[e]?"":"px"),s=(et.cssNumber[e]||"px"!==o&&+n)&&Zt.exec(et.css(i.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+n||1;do a=a||".5",s/=a,et.style(i.elem,e,s+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return r&&(s=i.start=+s||+n||0,i.unit=o,i.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),i}]};et.Animation=et.extend(E,{tweener:function(e,t){et.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;r>n;n++)i=e[n],ii[i]=ii[i]||[],ii[i].unshift(t)},prefilter:function(e,t){t?ti.unshift(e):ti.push(e)}}),et.speed=function(e,t,i){var n=e&&"object"==typeof e?et.extend({},e):{complete:i||!i&&t||et.isFunction(e)&&e,duration:e,easing:i&&t||t&&!et.isFunction(t)&&t};return n.duration=et.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in et.fx.speeds?et.fx.speeds[n.duration]:et.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){et.isFunction(n.old)&&n.old.call(this),n.queue&&et.dequeue(this,n.queue)},n},et.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=et.isEmptyObject(e),o=et.speed(t,i,n),s=function(){var t=E(this,et.extend({},e),o);(r||bt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=et.timers,s=bt.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&ei.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));(t||!i)&&et.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=bt.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=et.timers,s=n?n.length:0;for(i.finish=!0,et.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),et.each(["toggle","show","hide"],function(e,t){var i=et.fn[t];et.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(D(t,!0),e,n,r)}}),et.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){et.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),et.timers=[],et.fx.tick=function(){var e,t=0,i=et.timers;for(Jt=et.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||et.fx.stop(),Jt=void 0},et.fx.timer=function(e){et.timers.push(e),e()?et.fx.start():et.timers.pop()},et.fx.interval=13,et.fx.start=function(){Qt||(Qt=setInterval(et.fx.tick,et.fx.interval))},et.fx.stop=function(){clearInterval(Qt),Qt=null},et.fx.speeds={slow:600,fast:200,_default:400},et.fn.delay=function(e,t){return e=et.fx?et.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),i=t.appendChild(X.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=i.selected,t.disabled=!0,Q.optDisabled=!i.disabled,e=X.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var ni,ri,oi=et.expr.attrHandle;et.fn.extend({attr:function(e,t){return gt(this,et.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){et.removeAttr(this,e)})}}),et.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===jt?et.prop(e,t,i):(1===o&&et.isXMLDoc(e)||(t=t.toLowerCase(),n=et.attrHooks[t]||(et.expr.match.bool.test(t)?ri:ni)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:(r=et.find.attr(e,t),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void et.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,o=t&&t.match(ht);if(o&&1===e.nodeType)for(;i=o[r++];)n=et.propFix[i]||i,et.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&et.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),ri={set:function(e,t,i){return t===!1?et.removeAttr(e,i):e.setAttribute(i,i),i}},et.each(et.expr.match.bool.source.match(/\w+/g),function(e,t){var i=oi[t]||et.find.attr;oi[t]=function(e,t,n){var r,o;return n||(o=oi[t],oi[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,oi[t]=o),r}});var si=/^(?:input|select|textarea|button)$/i;et.fn.extend({prop:function(e,t){return gt(this,et.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[et.propFix[e]||e]})}}),et.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,r,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!et.isXMLDoc(e),o&&(t=et.propFix[t]||t,r=et.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||si.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(et.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),et.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){et.propFix[this.toLowerCase()]=this});var ai=/[\t\r\n\f]/g;et.fn.extend({addClass:function(e){var t,i,n,r,o,s,a="string"==typeof e&&e,l=0,c=this.length;if(et.isFunction(e))return this.each(function(t){et(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(ht)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):" ")){for(o=0;r=t[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=et.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,r,o,s,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(et.isFunction(e))return this.each(function(t){et(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(ht)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):"")){for(o=0;r=t[o++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");s=e?et.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(et.isFunction(e)?function(i){et(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,r=et(this),o=e.match(ht)||[];t=o[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(i===jt||"boolean"===i)&&(this.className&&bt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":bt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ai," ").indexOf(t)>=0)return!0;return!1}});var li=/\r/g;et.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=et.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,et(this).val()):e,null==r?r="":"number"==typeof r?r+="":et.isArray(r)&&(r=et.map(r,function(e){return null==e?"":e+""})),t=et.valHooks[this.type]||et.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=et.valHooks[r.type]||et.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(li,""):null==i?"":i)}}}),et.extend({valHooks:{select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:n.length,l=0>r?a:o?r:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==r||(Q.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&et.nodeName(i.parentNode,"optgroup"))){if(t=et(i).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,o=et.makeArray(t),s=r.length;s--;)n=r[s],(n.selected=et.inArray(et(n).val(),o)>=0)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),et.each(["radio","checkbox"],function(){et.valHooks[this]={set:function(e,t){return et.isArray(t)?e.checked=et.inArray(et(e).val(),t)>=0:void 0}},Q.checkOn||(et.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),et.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){et.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),et.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var ci=et.now(),di=/\?/;et.parseJSON=function(e){return JSON.parse(e+"")},et.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&et.error("Invalid XML: "+e),t};var ui,pi,hi=/#.*$/,mi=/([?&])_=[^&]*/,fi=/^(.*?):[ \t]*([^\r\n]*)$/gm,gi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,bi=/^(?:GET|HEAD)$/,vi=/^\/\//,yi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,_i={},wi={},ki="*/".concat("*");try{pi=location.href}catch(Ci){pi=X.createElement("a"),pi.href="",pi=pi.href}ui=yi.exec(pi.toLowerCase())||[],et.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pi,type:"GET",isLocal:gi.test(ui[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ki,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":et.parseJSON,"text xml":et.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?I(I(e,et.ajaxSettings),t):I(et.ajaxSettings,e)},ajaxPrefilter:B(_i),ajaxTransport:B(wi),ajax:function(e,t){function i(e,t,i,s){var l,d,b,v,_,k=t;2!==y&&(y=2,a&&clearTimeout(a),n=void 0,o=s||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,i&&(v=$(u,w,i)),v=N(u,v,w,l),l?(u.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(et.lastModified[r]=_),_=w.getResponseHeader("etag"),_&&(et.etag[r]=_)),204===e||"HEAD"===u.type?k="nocontent":304===e?k="notmodified":(k=v.state,d=v.data,b=v.error,l=!b)):(b=k,(e||!k)&&(k="error",0>e&&(e=0))),w.status=e,w.statusText=(t||k)+"",l?m.resolveWith(p,[d,k,w]):m.rejectWith(p,[w,k,b]),w.statusCode(g),g=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[w,u,l?d:b]),f.fireWith(p,[w,k]),c&&(h.trigger("ajaxComplete",[w,u]),--et.active||et.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,o,s,a,l,c,d,u=et.ajaxSetup({},t),p=u.context||u,h=u.context&&(p.nodeType||p.jquery)?et(p):et.event,m=et.Deferred(),f=et.Callbacks("once memory"),g=u.statusCode||{},b={},v={},y=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s)for(s={};t=fi.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=v[i]=v[i]||e,b[e]=t),this},overrideMimeType:function(e){return y||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return n&&n.abort(t),i(0,t),this}};if(m.promise(w).complete=f.add,w.success=w.done,w.error=w.fail,u.url=((e||u.url||pi)+"").replace(hi,"").replace(vi,ui[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=et.trim(u.dataType||"*").toLowerCase().match(ht)||[""],null==u.crossDomain&&(l=yi.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===ui[1]&&l[2]===ui[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ui[3]||("http:"===ui[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=et.param(u.data,u.traditional)),V(_i,u,t,w),2===y)return w;c=u.global,c&&0===et.active++&&et.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!bi.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(di.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=mi.test(r)?r.replace(mi,"$1_="+ci++):r+(di.test(r)?"&":"?")+"_="+ci++)),u.ifModified&&(et.lastModified[r]&&w.setRequestHeader("If-Modified-Since",et.lastModified[r]),et.etag[r]&&w.setRequestHeader("If-None-Match",et.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",u.contentType),w.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+ki+"; q=0.01":""):u.accepts["*"]);for(d in u.headers)w.setRequestHeader(d,u.headers[d]);if(u.beforeSend&&(u.beforeSend.call(p,w,u)===!1||2===y))return w.abort();_="abort";for(d in{success:1,error:1,complete:1})w[d](u[d]);if(n=V(wi,u,t,w)){w.readyState=1,c&&h.trigger("ajaxSend",[w,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},u.timeout));try{y=1,n.send(b,i)}catch(k){if(!(2>y))throw k;i(-1,k)}}else i(-1,"No Transport");return w},getJSON:function(e,t,i){return et.get(e,t,i,"json")},getScript:function(e,t){return et.get(e,void 0,t,"script")}}),et.each(["get","post"],function(e,t){et[t]=function(e,i,n,r){return et.isFunction(i)&&(r=r||n,n=i,i=void 0),et.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),et.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){et.fn[t]=function(e){return this.on(t,e)}}),et._evalUrl=function(e){return et.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},et.fn.extend({wrapAll:function(e){var t;return et.isFunction(e)?this.each(function(t){et(this).wrapAll(e.call(this,t))}):(this[0]&&(t=et(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(et.isFunction(e)?function(t){et(this).wrapInner(e.call(this,t))}:function(){var t=et(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=et.isFunction(e);return this.each(function(i){et(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){et.nodeName(this,"body")||et(this).replaceWith(this.childNodes)}).end()}}),et.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},et.expr.filters.visible=function(e){return!et.expr.filters.hidden(e)};var xi=/%20/g,ji=/\[\]$/,Si=/\r?\n/g,Mi=/^(?:submit|button|image|reset|file)$/i,Ai=/^(?:input|select|textarea|keygen)/i;et.param=function(e,t){var i,n=[],r=function(e,t){t=et.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=et.ajaxSettings&&et.ajaxSettings.traditional),et.isArray(e)||e.jquery&&!et.isPlainObject(e))et.each(e,function(){r(this.name,this.value)});else for(i in e)U(i,e[i],t,r);return n.join("&").replace(xi,"+")},et.fn.extend({serialize:function(){return et.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=et.prop(this,"elements");return e?et.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!et(this).is(":disabled")&&Ai.test(this.nodeName)&&!Mi.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var i=et(this).val();return null==i?null:et.isArray(i)?et.map(i,function(e){return{name:t.name,value:e.replace(Si,"\r\n")}}):{name:t.name,value:i.replace(Si,"\r\n")}}).get()}}),et.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ti=0,Di={},Oi={0:200,1223:204},Pi=et.ajaxSettings.xhr();e.ActiveXObject&&et(e).on("unload",function(){for(var e in Di)Di[e]()}),Q.cors=!!Pi&&"withCredentials"in Pi,Q.ajax=Pi=!!Pi,et.ajaxTransport(function(e){var t;return Q.cors||Pi&&!e.crossDomain?{send:function(i,n){var r,o=e.xhr(),s=++Ti;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)o.setRequestHeader(r,i[r]);t=function(e){return function(){t&&(delete Di[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?n(o.status,o.statusText):n(Oi[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Di[s]=t("abort"),o.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:void 0}),et.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return et.globalEval(e),e}}}),et.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),et.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=et("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Li=[],Ei=/(=)\?(?=&|$)|\?\?/;et.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Li.pop()||et.expando+"_"+ci++;return this[e]=!0,e}}),et.ajaxPrefilter("json jsonp",function(t,i,n){var r,o,s,a=t.jsonp!==!1&&(Ei.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ei.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=et.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ei,"$1"+r):t.jsonp!==!1&&(t.url+=(di.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||et.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},n.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=i.jsonpCallback,Li.push(r)),s&&et.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),et.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||X;var n=st.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=et.buildFragment([e],t,r),r&&r.length&&et(r).remove(),et.merge([],n.childNodes))};var Bi=et.fn.load;et.fn.load=function(e,t,i){if("string"!=typeof e&&Bi)return Bi.apply(this,arguments);var n,r,o,s=this,a=e.indexOf(" ");return a>=0&&(n=e.slice(a),e=e.slice(0,a)),et.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&et.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(n?et("<div>").append(et.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){s.each(i,o||[e.responseText,t,e])}),this},et.expr.filters.animated=function(e){return et.grep(et.timers,function(t){return e===t.elem}).length};var Vi=e.document.documentElement;et.offset={setOffset:function(e,t,i){var n,r,o,s,a,l,c,d=et.css(e,"position"),u=et(e),p={};"static"===d&&(e.style.position="relative"),a=u.offset(),o=et.css(e,"top"),l=et.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(o+l).indexOf("auto")>-1,c?(n=u.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),et.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+r),"using"in t?t.using.call(e,p):u.css(p)}},et.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){et.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;if(o)return t=o.documentElement,et.contains(t,n)?(typeof n.getBoundingClientRect!==jt&&(r=n.getBoundingClientRect()),i=z(o),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===et.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),et.nodeName(e[0],"html")||(n=e.offset()),n.top+=et.css(e[0],"borderTopWidth",!0),n.left+=et.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-et.css(i,"marginTop",!0),left:t.left-n.left-et.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Vi;e&&!et.nodeName(e,"html")&&"static"===et.css(e,"position");)e=e.offsetParent;return e||Vi})}}),et.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n="pageYOffset"===i;et.fn[t]=function(r){return gt(this,function(t,r,o){var s=z(t);return void 0===o?s?s[i]:t[r]:void(s?s.scrollTo(n?e.pageXOffset:o,n?o:e.pageYOffset):t[r]=o)},t,r,arguments.length,null)}}),et.each(["top","left"],function(e,t){et.cssHooks[t]=k(Q.pixelPosition,function(e,i){return i?(i=w(e,t),Ft.test(i)?et(e).position()[t]+"px":i):void 0})}),et.each({Height:"height",Width:"width"},function(e,t){et.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){et.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||r===!0?"margin":"border");return gt(this,function(t,i,n){var r;return et.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?et.css(t,i,s):et.style(t,i,n,s)},t,o?n:void 0,o,null)}})}),et.fn.size=function(){return this.length},et.fn.andSelf=et.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return et});var Ii=e.jQuery,$i=e.$;return et.noConflict=function(t){return e.$===et&&(e.$=$i),t&&e.jQuery===et&&(e.jQuery=Ii),et},typeof t===jt&&(e.jQuery=e.$=et),et}),function(e,t){function i(t,i){var r,o,s,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(s=e("img[usemap=#"+o+"]")[0],!!s&&n(s)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,r,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function r(t,i,n,r){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(s,r(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,i)+"px")
})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r,o=e.ui[t].prototype;for(r in n)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([i,n[r]])},call:function(e,t,i){var n,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<r.length;n++)e.options[r[n][0]]&&r[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return t[n]>0?!0:(t[n]=1,r=t[n]>0,t[n]=0,r)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,i,n){var r,o,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],r=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},o=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete o._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(i){for(var r,o,s=n.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==t&&(i[r]=e.isPlainObject(o)?e.isPlainObject(i[r])?e.widget.extend({},i[r],o):e.widget.extend({},o):o);return i},e.widget.bridge=function(i,r){var o=r.prototype.widgetFullName||i;e.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,this.each(a?function(){var n,r=e.data(this,o);return r?e.isFunction(r[s])&&"_"!==s.charAt(0)?(n=r[s].apply(r,l),n!==r&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}:function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new r(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var r,o,s,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},r=i.split("."),i=r.shift(),r.length){for(o=a[i]=e.widget.extend({},this.options[i]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(i=r.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var r,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,s){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,d=l[2];d?r.delegate(d,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,o,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&n.delay(r.delay),s&&e.effects&&e.effects.effect[a]?n[t](r):a!==t&&n[a]?n[a](r.duration,r.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(h.test(e[0])?t/100:1),parseFloat(e[1])*(h.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function r(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,h=/%$/,m=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var i,n,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return e("body").append(r),i=s.offsetWidth,r.css("overflow","scroll"),n=s.offsetWidth,i===n&&(n=r[0].clientWidth),r.remove(),o=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return m.apply(this,arguments);t=e.extend({},t);var o,h,f,g,b,v,y=e(t.of),_=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(_),k=(t.collision||"flip").split(" "),C={};return v=r(y),y[0].preventDefault&&(t.at="left top"),h=v.width,f=v.height,g=v.offset,b=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",e=u.exec(n[0]),i=u.exec(n[1]),C[this]=[e?e[0]:0,i?i[0]:0],t[this]=[p.exec(n[0])[0],p.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?b.left+=h:"center"===t.at[0]&&(b.left+=h/2),"bottom"===t.at[1]?b.top+=f:"center"===t.at[1]&&(b.top+=f/2),o=i(C.at,h,f),b.left+=o[0],b.top+=o[1],this.each(function(){var r,c,d=e(this),u=d.outerWidth(),p=d.outerHeight(),m=n(this,"marginLeft"),v=n(this,"marginTop"),x=u+m+n(this,"marginRight")+w.width,j=p+v+n(this,"marginBottom")+w.height,S=e.extend({},b),M=i(C.my,d.outerWidth(),d.outerHeight());"right"===t.my[0]?S.left-=u:"center"===t.my[0]&&(S.left-=u/2),"bottom"===t.my[1]?S.top-=p:"center"===t.my[1]&&(S.top-=p/2),S.left+=M[0],S.top+=M[1],e.support.offsetFractions||(S.left=l(S.left),S.top=l(S.top)),r={marginLeft:m,marginTop:v},e.each(["left","top"],function(i,n){e.ui.position[k[i]]&&e.ui.position[k[i]][n](S,{targetWidth:h,targetHeight:f,elemWidth:u,elemHeight:p,collisionPosition:r,collisionWidth:x,collisionHeight:j,offset:[o[0]+M[0],o[1]+M[1]],my:t.my,at:t.at,within:_,elem:d})}),t.using&&(c=function(e){var i=g.left-S.left,n=i+h-u,r=g.top-S.top,o=r+f-p,l={target:{element:y,left:g.left,top:g.top,width:h,height:f},element:{element:d,left:S.left,top:S.top,width:u,height:p},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":r>0?"bottom":"middle"};u>h&&a(i+n)<h&&(l.horizontal="center"),p>f&&a(r+o)<f&&(l.vertical="middle"),l.important=s(a(i),a(n))>s(a(r),a(o))?"horizontal":"vertical",t.using.call(this,e,l)}),d.offset(e.extend(S,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,c=a+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&0>=c?(i=e.left+l+t.collisionWidth-o-r,e.left+=l-i):e.left=c>0&&0>=l?r:l>c?r+o-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,c=a+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&0>=c?(i=e.top+l+t.collisionHeight-o-r,e.top+=l-i):e.top=c>0&&0>=l?r:l>c?r+o-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,r=t.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-s-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,m=-2*t.offset[0];0>d?(i=e.left+p+h+m+t.collisionWidth-s-o,(0>i||i<a(d))&&(e.left+=p+h+m)):u>0&&(n=e.left-t.collisionPosition.marginLeft+p+h+m-l,(n>0||a(n)<u)&&(e.left+=p+h+m))},top:function(e,t){var i,n,r=t.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-s-l,p="top"===t.my[1],h=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,m="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];0>d?(n=e.top+h+m+f+t.collisionHeight-s-o,e.top+h+m+f>d&&(0>n||n<a(d))&&(e.top+=h+m+f)):u>0&&(i=e.top-t.collisionPosition.marginTop+h+m+f-l,e.top+h+m+f>u&&(i>0||a(i)<u)&&(e.top+=h+m+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,r,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)t.style[o]=n[o];t.appendChild(a),i=s||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=e(a).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;return r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),i=e(r.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,r,o,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),r=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(r.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("ui-draggable"),r=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,i){var n=e(this).data("ui-draggable"),r=this;e.each(n.sortables,function(){var o=!1,s=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),r=e(this).data("ui-draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,r=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();
this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,r,o,s,a,l,c,d,u,p,h=e(this).data("ui-draggable"),m=h.options,f=m.snapTolerance,g=i.offset.left,b=g+h.helperProportions.width,v=i.offset.top,y=v+h.helperProportions.height;for(u=h.snapElements.length-1;u>=0;u--)a=h.snapElements[u].left,l=a+h.snapElements[u].width,c=h.snapElements[u].top,d=c+h.snapElements[u].height,a-f>b||g>l+f||c-f>y||v>d+f||!e.contains(h.snapElements[u].item.ownerDocument,h.snapElements[u].item)?(h.snapElements[u].snapping&&h.options.snap.release&&h.options.snap.release.call(h.element,t,e.extend(h._uiHash(),{snapItem:h.snapElements[u].item})),h.snapElements[u].snapping=!1):("inner"!==m.snapMode&&(n=Math.abs(c-y)<=f,r=Math.abs(d-v)<=f,o=Math.abs(a-b)<=f,s=Math.abs(l-g)<=f,n&&(i.position.top=h._convertPositionTo("relative",{top:c-h.helperProportions.height,left:0}).top-h.margins.top),r&&(i.position.top=h._convertPositionTo("relative",{top:d,left:0}).top-h.margins.top),o&&(i.position.left=h._convertPositionTo("relative",{top:0,left:a-h.helperProportions.width}).left-h.margins.left),s&&(i.position.left=h._convertPositionTo("relative",{top:0,left:l}).left-h.margins.left)),p=n||r||o||s,"outer"!==m.snapMode&&(n=Math.abs(c-v)<=f,r=Math.abs(d-y)<=f,o=Math.abs(a-g)<=f,s=Math.abs(l-b)<=f,n&&(i.position.top=h._convertPositionTo("relative",{top:c,left:0}).top-h.margins.top),r&&(i.position.top=h._convertPositionTo("relative",{top:d-h.helperProportions.height,left:0}).top-h.margins.top),o&&(i.position.left=h._convertPositionTo("relative",{top:0,left:a}).left-h.margins.left),s&&(i.position.left=h._convertPositionTo("relative",{top:0,left:l-h.helperProportions.width}).left-h.margins.left)),!h.snapElements[u].snapping&&(n||r||o||s||p)&&h.options.snap.snap&&h.options.snap.snap.call(h.element,t,e.extend(h._uiHash(),{snapItem:h.snapElements[u].item})),h.snapElements[u].snapping=n||r||o||s||p)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),r=e(this).data("ui-draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,r=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_inBounds:function(e){return"function"==typeof this.options.inBounds?this.options.inBounds(e):!1}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var r,o,s=(e.positionAbs||e.position.absolute).left,a=s+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,c=l+e.helperProportions.height,d=i.offset.left,u=d+i.proportions.width,p=i.offset.top,h=p+i.proportions.height;switch(n){case"fit":return s>=d&&u>=a&&l>=p&&h>=c;case"intersect":return d<s+e.helperProportions.width/2&&a-e.helperProportions.width/2<u&&p<l+e.helperProportions.height/2&&c-e.helperProportions.height/2<h;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,o=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(o,p,i.proportions.height)&&t(r,d,i.proportions.width);case"touch":return(l>=p&&h>=l||c>=p&&h>=c||p>l&&c>h)&&(s>=d&&u>=s||a>=d&&u>=a||d>s&&a>u);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(r=0;r<a.length;r++)if(a[r]===o[n].element[0]){o[n].proportions.height=0;continue e}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===s&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions={width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&this._inBounds(i)&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,o,s=this._inBounds(i)&&e.ui.intersect(t,this,this.options.tolerance),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===r}),o.length&&(n=e.data(o[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(n=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var r,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this._storedZIndex=this.helper.css("zIndex")?this.helper.css("zIndex"):"auto",this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,r,o,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],r=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||n+c>a&&l>n+c,p="y"===this.options.axis||t+d>o&&s>t+d,h=u&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=i&&n,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:r&&("down"===r&&i||"up"===r&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,r,o,s=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(r=e(l[i]),n=r.length-1;n>=0;n--)o=e.data(r[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){s.push(this)});return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,r,o,s,a,l,c,d=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(i=p.length-1;i>=0;i--)for(r=e(p[i]),n=r.length-1;n>=0;n--)o=e.data(r[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(s=u[i][1],a=u[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",s),d.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,r,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=r.outerWidth(),n.height=r.outerHeight()),o=r.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===n&&r.attr("src",t.currentItem.attr("src")),i||r.css("visibility","hidden"),r},update:function(e,r){(!i||n.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var r,o,s,a,l,c,d,u,p,h,m=null,f=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(m&&e.contains(this.containers[r].element[0],m.element[0]))continue;m=this.containers[r],f=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",n,this._uiHash(this)),this.containers[r].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",n,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(s=1e4,a=null,h=m.floating||i(this.currentItem),l=h?"left":"top",c=h?"width":"height",d=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[f].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!h||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[l],p=!1,Math.abs(u-d)>Math.abs(u+this.items[o][c]-d)&&(p=!0,u+=this.items[o][c]),Math.abs(u-d)<s&&(s=Math.abs(u-d),a=this.items[o],this.direction=p?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[f].element,!0),this._trigger("change",n,this._uiHash()),this.containers[f]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",n,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],i=e(r.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,o=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);
this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(o.inline?t.parent()[0]:o.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function r(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var o,s="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,r,o;n=t.nodeName.toLowerCase(),r="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),o=this._newInst(e(t),r),o.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,o):r&&this._inlineDatepicker(t,o)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,s,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,r,o,s=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=e("<span class='"+this._appendClass+"'>"+s+"</span>"),t[a?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(r=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:r,title:r}):r)),t[a?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,o=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(i=0,n=0,r=0;r<e.length;r++)e[r].length>i&&(i=e[r].length,n=r);return n},o.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,s,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,o,a){var l,c,d,u,p,h=this._dialogInst;return h||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},e.data(this._dialogInput[0],s,h)),r(h.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(h,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,p=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+u,d/2-150+p]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],s,h),this},_destroyDatepicker:function(t){var i,n=e(t),r=e.data(t,s);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,s),"input"===i?(r.append.remove(),r.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,r=e(t),o=e.data(t,s);r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=r.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,r=e(t),o=e.data(t,s);r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=r.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,s)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,o){var s,a,l,c,d=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):d?"all"===n?e.extend({},d.settings):this._get(d,n):null:(s=n||{},"string"==typeof n&&(s={},s[n]=o),void(d&&(this._curInst===d&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),r(d.settings,s),null!==l&&s.dateFormat!==t&&s.minDate===t&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&s.dateFormat!==t&&s.maxDate===t&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),d),this._autoSize(d),this._setDate(d,a),this._updateAlternate(d),this._updateDatepicker(d))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,r,o=e.datepicker._getInst(t.target),s=!0,a=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),s=!1;break;case 13:return r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv),r[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0]),i=e.datepicker._get(o,"onSelect"),i?(n=e.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,r=e.datepicker._getInst(t.target);return e.datepicker._get(r,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(r){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,o,s,a,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),o=n?n.apply(t,[t,i]):{},o!==!1&&(r(i.settings,o),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|="fixed"===e(this).css("position"),!s}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),a=e.datepicker._checkOffset(i,a,s),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,o=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),r=n[1],s=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",s*r+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?r-s:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),r=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,r,o,a=this._curInst;!a||t&&a!==e.data(t,s)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),r=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[i]||e.effects[i])?a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,r):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,r),i||r(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var r=e(t),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var i,n=e(t),r=this._getInst(n[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(i=new Date,r.selectedDay=i.getDate(),r.drawMonth=r.selectedMonth=i.getMonth(),r.drawYear=r.selectedYear=i.getFullYear()),this._notifyChange(r),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var r=e(t),o=this._getInst(r[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(t,i,n,r){var o,s=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(o=this._getInst(s[0]),o.selectedDay=o.currentDay=e("a",r).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,r=e(t),o=this._getInst(r[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,r,o=this._get(t,"altField");o&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),r=this.formatDate(i,n,this._getFormatConfig(t)),e(o).each(function(){e(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var r,o,s,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,h=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,m=(n?n.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,b=-1,v=-1,y=!1,_=function(e){var i=r+1<t.length&&t.charAt(r+1)===e;return i&&r++,i},w=function(e){var t=_(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=new RegExp("^\\d{1,"+n+"}"),o=i.substring(l).match(r);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},k=function(t,n,r){var o=-1,s=e.map(_(t)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(s,function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(o=t[0],l+=n.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},C=function(){if(i.charAt(l)!==t.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<t.length;r++)if(y)"'"!==t.charAt(r)||_("'")?C():y=!1;else switch(t.charAt(r)){case"d":b=w("d");break;case"D":k("D",u,p);break;case"o":v=w("o");break;case"m":g=w("m");break;case"M":g=k("M",h,m);break;case"y":f=w("y");break;case"@":a=new Date(w("@")),f=a.getFullYear(),g=a.getMonth()+1,b=a.getDate();break;case"!":a=new Date((w("!")-this._ticksTo1970)/1e4),f=a.getFullYear(),g=a.getMonth()+1,b=a.getDate();break;case"'":_("'")?C():y=!0;break;default:C()}if(l<i.length&&(s=i.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===f?f=(new Date).getFullYear():100>f&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=f?0:-100)),v>-1)for(g=1,b=v;;){if(o=this._getDaysInMonth(f,g-1),o>=b)break;g++,b-=o}if(a=this._daylightSavingAdjust(new Date(f,g-1,b)),a.getFullYear()!==f||a.getMonth()+1!==g||a.getDate()!==b)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},d=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",p=!1;if(t)for(n=0;n<e.length;n++)if(p)"'"!==e.charAt(n)||l("'")?u+=e.charAt(n):p=!1;else switch(e.charAt(n)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),r,o);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),s,a);break;case"y":u+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":p=!0;break;default:u+=e.charAt(n)}return u},_possibleChars:function(e){var t,i="",n=!1,r=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||r("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":r("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,s=this._getFormatConfig(e);try{o=this.parseDate(i,n,s)||r}catch(a){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var r=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=r.getFullYear(),s=r.getMonth(),a=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":s+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,s));break;case"y":case"Y":o+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,s))}c=l.exec(i)}return new Date(o,s,a)},s=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:r(i):new Date(i.getTime());return s=s&&"Invalid Date"===s.toString()?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,o=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),r===e.selectedMonth&&o===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y,_,w,k,C,x,j,S,M,A,T,D,O,P,L,E,B,V,I,$,N,U=new Date,z=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),F=this._get(e,"isRTL"),R=this._get(e,"showButtonPanel"),H=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),q=this._get(e,"showCurrentAtPos"),Y=this._get(e,"stepMonths"),G=1!==K[0]||1!==K[1],J=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),X=this._getMinMaxDate(e,"max"),Z=e.drawMonth-q,et=e.drawYear;if(0>Z&&(Z+=12,et--),X)for(t=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-K[0]*K[1]+1,X.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-Y,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"e":"w")+"'>"+i+"</span></a>":H?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"e":"w")+"'>"+i+"</span></a>",r=this._get(e,"nextText"),r=W?this.formatDate(r,this._daylightSavingAdjust(new Date(et,Z+Y,1)),this._getFormatConfig(e)):r,o=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"w":"e")+"'>"+r+"</span></a>":H?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"w":"e")+"'>"+r+"</span></a>",s=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?J:z,s=W?this.formatDate(s,a,this._getFormatConfig(e)):s,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(F?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(F?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,u=this._get(e,"showWeek"),p=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),m=this._get(e,"monthNames"),f=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),b=this._get(e,"showOtherMonths"),v=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),_="",k=0;k<K[0];k++){for(C="",this.maxRows=4,x=0;x<K[1];x++){if(j=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",G){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(x){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(F?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(F?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===k?F?o:n:"")+(/all|right/.test(S)&&0===k?F?n:o:"")+this._generateMonthYearHeader(e,Z,et,Q,X,k>0||x>0,m,f)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;7>w;w++)T=(w+d)%7,A+="<th"+((w+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[T]+"'>"+h[T]+"</span></th>";for(M+=A+"</tr></thead><tbody>",D=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,D)),O=(this._getFirstDayOfMonth(et,Z)-d+7)%7,P=Math.ceil((O+D)/7),L=G&&this.maxRows>P?this.maxRows:P,this.maxRows=L,E=this._daylightSavingAdjust(new Date(et,Z,1-O)),B=0;L>B;B++){for(M+="<tr>",V=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(E)+"</td>":"",w=0;7>w;w++)I=g?g.apply(e.input?e.input[0]:null,[E]):[!0,""],$=E.getMonth()!==Z,N=$&&!v||!I[0]||Q&&Q>E||X&&E>X,V+="<td class='"+((w+d+6)%7>=5?" ui-datepicker-week-end":"")+($?" ui-datepicker-other-month":"")+(E.getTime()===j.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===E.getTime()&&y.getTime()===j.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+($&&!b?"":" "+I[1]+(E.getTime()===J.getTime()?" "+this._currentClass:"")+(E.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+($&&!b||!I[2]?"":" title='"+I[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+($&&!b?"&#xa0;":N?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===z.getTime()?" ui-state-highlight":"")+(E.getTime()===J.getTime()?" ui-state-active":"")+($?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);M+=V+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(G?"</div>"+(K[0]>0&&x===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=M}_+=C}return _+=c,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,n,r,o,s,a){var l,c,d,u,p,h,m,f,g=this._get(e,"changeMonth"),b=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",_="";if(o||!g)_+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=r&&r.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;12>d;d++)(!l||d>=n.getMonth())&&(!c||d<=r.getMonth())&&(_+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+a[d]+"</option>");
_+="</select>"}if(v||(y+=_+(!o&&g&&b?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!b)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(e,"yearRange").split(":"),p=(new Date).getFullYear(),h=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?p+parseInt(e,10):parseInt(e,10);return isNaN(t)?p:t},m=h(u[0]),f=Math.max(m,h(u[1]||"")),m=n?Math.max(m,n.getFullYear()):m,f=r?Math.min(f,r.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f>=m;m++)e.yearshtml+="<option value='"+m+"'"+(m===i?" selected='selected'":"")+">"+m+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),v&&(y+=(!o&&g&&b?"":"&#xa0;")+_),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),r=e.drawMonth+("M"===i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+("D"===i?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,o)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&i>t?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(0>t?t:r[0]*r[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),s=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!s||t.getFullYear()>=s)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),jQuery.cookie=function(e,t,i){if("undefined"==typeof t){var n=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),o=0;o<r.length;o++){var s=jQuery.trim(r[o]);if(s.substring(0,e.length+1)==e+"="){n=decodeURIComponent(s.substring(e.length+1));break}}return n}i=i||{},null===t&&(t="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var l;"number"==typeof i.expires?(l=new Date,l.setTime(l.getTime()+24*i.expires*60*60*1e3)):l=i.expires,a="; expires="+l.toUTCString()}var c=i.path?"; path="+i.path:"",d=i.domain?"; domain="+i.domain:"",u=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),a,c,d,u].join("")},function(e){var t=function(t,n){var r=this;e.extend(this.options,n),this.$image=e(t).wrap('<div class="'+i+'Frame"/>'),this.$frame=this.$image.parent(),this.$image.hide().addClass(i+"Image").data(i,this).on("mousedown."+i,function(t){t.preventDefault(),e(document).on("mousemove."+i,{mouse:{x:t.pageX,y:t.pageY},image:{x:parseInt(r.$image.css("left"),10),y:parseInt(r.$image.css("top"),10)}},e.proxy(r.drag,r)).on("mouseup."+i,function(){e(document).off("."+i)})}).on("load."+i,function(){if(r.width||(r.width=r.$image.width(),r.height=r.$image.height()),r.width){var e=r.options.width/r.width,t=r.options.height/r.height;r.minPercent=e>=t?r.width<r.options.width?r.options.width/r.width:e:r.height<r.options.height?r.options.height/r.height:t,r.focal={x:Math.round(r.width/2),y:Math.round(r.height/2)},r.zoom(r.minPercent),r.$image.fadeIn("fast")}}).load(),this.$frame.css({width:this.options.width,height:this.options.height}).append(this.options.loading),this.options.controls!==!1&&this.$frame.append(e("<div/>",{"class":i+"Controls"}).append(e("<span/>").append(this.options.controls)).append(e("<a/>",{"class":i+"ZoomIn"}).on("click."+i,e.proxy(this.zoomIn,this))).append(e("<a/>",{"class":i+"ZoomOut"}).on("click."+i,e.proxy(this.zoomOut,this))))},i="crop";e[i]=e.extend(t,{prototype:{width:0,height:0,result:{},percent:null,options:{width:320,height:180,zoom:10,loading:"Loading...",controls:"Click to drag"},zoom:function(e){this.percent=Math.max(this.minPercent,Math.min(1,e)),this.$image.width(Math.ceil(this.width*this.percent)),this.$image.css({left:t.fill(-Math.round(this.focal.x*this.percent-this.options.width/2),this.$image.width(),this.options.width),top:t.fill(-Math.round(this.focal.y*this.percent-this.options.height/2),this.$image.height(),this.options.height)}),this.update()},drag:function(e){this.$image.css({left:t.fill(e.data.image.x+e.pageX-e.data.mouse.x,this.$image.width(),this.options.width),top:t.fill(e.data.image.y+e.pageY-e.data.mouse.y,this.$image.height(),this.options.height)}),this.update()},zoomIn:function(){return!!this.zoom(this.percent+(1-this.minPercent)/(this.options.zoom-1||1))},zoomOut:function(){return!!this.zoom(this.percent-(1-this.minPercent)/(this.options.zoom-1||1))},update:function(){this.focal={x:Math.round((this.options.width/2-parseInt(this.$image.css("left"),10))/this.percent),y:Math.round((this.options.height/2-parseInt(this.$image.css("top"),10))/this.percent)},this.$image.trigger(e.Event("crop",this.result={cropX:-Math.floor(parseInt(this.$image.css("left"),10)/this.percent),cropY:-Math.floor(parseInt(this.$image.css("top"),10)/this.percent),cropW:Math.round(this.options.width/this.percent),cropH:Math.round(this.options.height/this.percent),stretch:this.minPercent>1}))}},fill:function(e,t,i){return i>e+t&&(e=i-t),e>0?0:e}}),e.fn[i]=function(e){return this.each(function(){new t(this,e)})}}(jQuery),function(e){function t(t){var i=t||window.event,n=[].slice.call(arguments,1),r=0,o=0,s=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(r=i.wheelDelta/120),i.detail&&(r=-i.detail/3),s=r,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(s=0,o=-1*r),void 0!==i.wheelDeltaY&&(s=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(o=-1*i.wheelDeltaX/120),n.unshift(t,r,o,s),(e.event.dispatch||e.event.handle).apply(this,n)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=i.length;n;)e.event.fixHooks[i[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e){var t,i={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},n='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],o=e(n).data("autosize",!0)[0];o.style.lineHeight="99px","99px"===e(o).css("lineHeight")&&r.push("lineHeight"),o.style.lineHeight="",e.fn.autosize=function(n){return this.length?(n=e.extend({},i,n||{}),o.parentNode!==document.body&&e(document.body).append(o),this.each(function(){function i(){var t,i=window.getComputedStyle?window.getComputedStyle(p,null):!1;i?(t=p.getBoundingClientRect().width,(0===t||"number"!=typeof t)&&(t=parseInt(i.width,10)),e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,n){t-=parseInt(i[n],10)})):t=h.width(),o.style.width=Math.max(t,0)+"px"}function s(){var s={};if(t=p,o.className=n.className,o.id=n.id,c=parseInt(h.css("maxHeight"),10),e.each(r,function(e,t){s[t]=h.css(t)}),e(o).css(s).attr("wrap",h.attr("wrap")),i(),window.chrome){var a=p.style.width;p.style.width="0px";{p.offsetWidth}p.style.width=a}}function a(){var e,r;t!==p?s():i(),o.value=!p.value&&n.placeholder?h.attr("placeholder")||"":p.value,o.value+=n.append||"",o.style.overflowY=p.style.overflowY,r=parseInt(p.style.height,10),o.scrollTop=0,o.scrollTop=9e4,e=o.scrollTop,c&&e>c?(p.style.overflowY="scroll",e=c):(p.style.overflowY="hidden",d>e&&(e=d)),e+=m,r!==e&&(p.style.height=e+"px",f&&n.callback.call(p,p),h.trigger("autosize.resized"))}function l(){clearTimeout(u),u=setTimeout(function(){var e=h.width();e!==b&&(b=e,a())},parseInt(n.resizeDelay,10))}var c,d,u,p=this,h=e(p),m=0,f=e.isFunction(n.callback),g={height:p.style.height,overflow:p.style.overflow,overflowY:p.style.overflowY,wordWrap:p.style.wordWrap,resize:p.style.resize},b=h.width(),v=h.css("resize");h.data("autosize")||(h.data("autosize",!0),("border-box"===h.css("box-sizing")||"border-box"===h.css("-moz-box-sizing")||"border-box"===h.css("-webkit-box-sizing"))&&(m=h.outerHeight()-h.height()),d=Math.max(parseInt(h.css("minHeight"),10)-m||0,h.height()),h.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===v?h.css("resize","none"):"both"===v&&h.css("resize","horizontal"),"onpropertychange"in p?"oninput"in p?h.on("input.autosize keyup.autosize",a):h.on("propertychange.autosize",function(){"value"===event.propertyName&&a()}):h.on("input.autosize",a),n.resizeDelay!==!1&&e(window).on("resize.autosize",l),h.on("autosize.resize",a),h.on("autosize.resizeIncludeStyle",function(){t=null,a()}),h.on("autosize.destroy",function(){t=null,clearTimeout(u),e(window).off("resize",l),h.off("autosize").off(".autosize").css(g).removeData("autosize")}),a())})):this}}(jQuery||$),this.JSON||(this.JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,r,o,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;o>i;i+=1)s[i]=str(i,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;o>i;i+=1)n=rep[i],"string"==typeof n&&(r=str(n,l),r&&s.push(quote(n)+(gap?": ":":")+r));else for(n in l)Object.hasOwnProperty.call(l,n)&&(r=str(n,l),r&&s.push(quote(n)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,r=e[t];if(r&&"object"==typeof r)for(i in r)Object.hasOwnProperty.call(r,i)&&(n=walk(r,i),void 0!==n?r[i]=n:delete r[i]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var e=Date,t=e.prototype,i=e.CultureInfo,n=function(e,t){return t||(t=2),("000"+e).slice(-1*t)};t.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},t.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new Date).clearTime()},e.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return t>e?-1:e>t?1:0;throw new TypeError(e+" - "+t)},e.equals=function(e,t){return 0===e.compareTo(t)},e.getDayNumberFromName=function(e){for(var t=i.dayNames,n=i.abbreviatedDayNames,r=i.shortestDayNames,o=e.toLowerCase(),s=0;s<t.length;s++)if(t[s].toLowerCase()==o||n[s].toLowerCase()==o||r[s].toLowerCase()==o)return s;return-1},e.getMonthNumberFromName=function(e){for(var t=i.monthNames,n=i.abbreviatedMonthNames,r=e.toLowerCase(),o=0;o<t.length;o++)if(t[o].toLowerCase()==r||n[o].toLowerCase()==r)return o;return-1},e.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},e.getDaysInMonth=function(t,i){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][i]},e.getTimezoneAbbreviation=function(e){for(var t=i.timezones,n=0;n<t.length;n++)if(t[n].offset===e)return t[n].name;return null},e.getTimezoneOffset=function(e){for(var t=i.timezones,n=0;n<t.length;n++)if(t[n].name===e.toUpperCase())return t[n].offset;return null},t.clone=function(){return new Date(this.getTime())},t.compareTo=function(e){return Date.compare(this,e)},t.equals=function(e){return Date.equals(this,e||new Date)},t.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},t.isAfter=function(e){return 1===this.compareTo(e||new Date)},t.isBefore=function(e){return-1===this.compareTo(e||new Date)},t.isToday=function(){return this.isSameDay(new Date)},t.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())},t.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},t.addSeconds=function(e){return this.addMilliseconds(1e3*e)},t.addMinutes=function(e){return this.addMilliseconds(6e4*e)},t.addHours=function(e){return this.addMilliseconds(36e5*e)},t.addDays=function(e){return this.setDate(this.getDate()+e),this},t.addWeeks=function(e){return this.addDays(7*e)},t.addMonths=function(t){var i=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(i,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},t.addYears=function(e){return this.addMonths(12*e)},t.add=function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var r,o,s;t.getWeek=function(){var e,t,i,n,a,l,c,d,u,p;return r=r?r:this.getFullYear(),o=o?o:this.getMonth()+1,s=s?s:this.getDate(),2>=o?(e=r-1,t=(e/4|0)-(e/100|0)+(e/400|0),i=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),u=t-i,a=0,l=s-1+31*(o-1)):(e=r,t=(e/4|0)-(e/100|0)+(e/400|0),i=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),u=t-i,a=u+1,l=s+(153*(o-3)+2)/5+58+u),c=(e+t)%7,n=(l+c-a)%7,d=l+3-n|0,p=0>d?53-((c-u)/5|0):d>364+u?1:(d/7|0)+1,r=o=s=null,p},t.getISOWeek=function(){return r=this.getUTCFullYear(),o=this.getUTCMonth()+1,s=this.getUTCDate(),n(this.getWeek())},t.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())},e._validate=function(e,t,i,n){if("undefined"==typeof e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(t>e||e>i)throw new RangeError(e+" is not a valid value for "+n+".");return!0},e.validateMillisecond=function(t){return e._validate(t,0,999,"millisecond")},e.validateSecond=function(t){return e._validate(t,0,59,"second")},e.validateMinute=function(t){return e._validate(t,0,59,"minute")},e.validateHour=function(t){return e._validate(t,0,23,"hour")},e.validateDay=function(t,i,n){return e._validate(t,1,e.getDaysInMonth(i,n),"day")},e.validateMonth=function(t){return e._validate(t,0,11,"month")},e.validateYear=function(t){return e._validate(t,0,9999,"year")},t.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&e._validate(t.week,0,53,"week")&&this.setWeek(t.week),this},t.moveToFirstDayOfMonth=function(){return this.set({day:1})},t.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},t.moveToNthOccurrence=function(e,t){var i=0;if(t>0)i=t-1;else if(-1===t)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(i)},t.moveToDayOfWeek=function(e,t){var i=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===i?i+=7*(t||1):i)},t.moveToMonth=function(e,t){var i=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===i?i+=12*(t||1):i)},t.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},t.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},t.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),i=-6*Number(e)/10;return this.addMinutes(i-t)},t.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},t.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},t.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},t.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return 0>t?(e=(t-1e4).toString(),e.charAt(0)+e.substr(2)):(e=(t+1e4).toString(),"+"+e.substr(1))},t.getElapsed=function(e){return(e||new Date)-this},t.toISOString||(t.toISOString=function(){function e(e){return 10>e?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),t._toString=t.toString,t.toString=function(e){var t=this;if(e&&1==e.length){var r=i.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(r.shortDate);case"D":return t.t(r.longDate);case"F":return t.t(r.fullDateTime);case"m":return t.t(r.monthDay);case"r":return t.t(r.rfc1123);case"s":return t.t(r.sortableDateTime);case"t":return t.t(r.shortTime);case"T":return t.t(r.longTime);case"u":return t.t(r.universalSortableDateTime);case"y":return t.t(r.yearMonth)}}var o=function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return n(t.h()<13?0===t.h()?12:t.h():t.h()-12);case"h":return t.h()<13?0===t.h()?12:t.h():t.h()-12;case"HH":return n(t.h());case"H":return t.h();case"mm":return n(t.getMinutes());case"m":return t.getMinutes();case"ss":return n(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return n(t.getFullYear(),4);case"yy":return n(t.getFullYear());case"dddd":return i.dayNames[t.getDay()];case"ddd":return i.abbreviatedDayNames[t.getDay()];case"dd":return n(t.getDate());case"d":return t.getDate();case"MMMM":return i.monthNames[t.getMonth()];case"MMM":return i.abbreviatedMonthNames[t.getMonth()];case"MM":return n(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?i.amDesignator.substring(0,1):i.pmDesignator.substring(0,1);case"tt":return t.h()<12?i.amDesignator:i.pmDesignator;case"S":return o(t.getDate());default:return e}}):this._toString()}}(),function(){var e=Date,t=e.prototype,i=e.CultureInfo,n=Number.prototype;t._orient=1,t._nth=null,t._is=!1,t._same=!1,t._isSecond=!1,n._dateElement="day",t.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},t.last=t.prev=t.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},t.is=function(){return this._is=!0,this},t.same=function(){return this._same=!0,this._isSecond=!1,this},t.today=function(){return this.same().day()},t.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},t.at=function(t){return"string"==typeof t?e.parse(this.toString("d")+" "+t):this.set(t)},n.fromNow=n.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)},n.ago=n.before=function(e){var t={};return t[this._dateElement]=-1*this,(e?e.clone():new Date).add(t)};var r,o="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),s="january february march april may june july august september october november december".split(/\s/),a="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),l="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),c="final first second third fourth fifth".split(/\s/);t.toObject=function(){for(var e={},t=0;t<a.length;t++)e[a[t].toLowerCase()]=this["get"+l[t]]();return e},e.fromObject=function(e){return e.week=null,Date.today().set(e)};for(var d=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var i=this._nth;this._nth=null;var n=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(t,i),this>n)throw new RangeError(e.getDayName(t)+" does not occur "+i+" times in the month of "+e.getMonthName(n.getMonth())+" "+n.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},u=function(t){return function(){var n=e.today(),r=t-n.getDay();return 0===t&&1===i.firstDayOfWeek&&0!==n.getDay()&&(r+=7),n.addDays(r)}},p=0;p<o.length;p++)e[o[p].toUpperCase()]=e[o[p].toUpperCase().substring(0,3)]=p,e[o[p]]=e[o[p].substring(0,3)]=u(p),t[o[p]]=t[o[p].substring(0,3)]=d(p);for(var h=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}},m=function(t){return function(){return e.today().set({month:t,day:1})}},f=0;f<s.length;f++)e[s[f].toUpperCase()]=e[s[f].toUpperCase().substring(0,3)]=f,e[s[f]]=e[s[f].substring(0,3)]=m(f),t[s[f]]=t[s[f].substring(0,3)]=h(f);for(var g=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var t=this.toObject(),i=(arguments[0]||new Date).toObject(),n="",r=e.toLowerCase(),o=a.length-1;o>-1;o--){if(n=a[o].toLowerCase(),t[n]!=i[n])return!1;if(r==n)break}return!0}return"s"!=e.substring(e.length-1)&&(e+="s"),this["add"+e](this._orient)}},b=function(e){return function(){return this._dateElement=e,this}},v=0;v<a.length;v++)r=a[v].toLowerCase(),t[r]=t[r+"s"]=g(a[v]),n[r]=n[r+"s"]=b(r);t._ss=g("Second");for(var y=function(e){return function(t){return this._same?this._ss(arguments[0]):t||0===t?this.moveToNthOccurrence(t,e):(this._nth=e,2!==e||void 0!==t&&null!==t?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},_=0;_<c.length;_++)t[c[_]]=y(0===_?-1:_)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(i){var n=i.match(t);if(n)return[n[0],i.substring(n[0].length)];throw new e.Exception(i)}},token:function(){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){for(var i=[],n=null;t.length;){try{n=e.call(this,t)}catch(r){i.push(n[0]),t=n[1];continue}break}return[i,t]}},many:function(e){return function(t){for(var i=[],n=null;t.length;){try{n=e.call(this,t)}catch(r){return[i,t]}i.push(n[0]),t=n[1]}return[i,t]}},optional:function(e){return function(t){var i=null;try{i=e.call(this,t)}catch(n){return[null,t]}return[i[0],i[1]]}},not:function(t){return function(i){try{t.call(this,i)}catch(n){return[null,i]}throw new e.Exception(i)}},ignore:function(e){return e?function(t){var i=null;return i=e.call(this,t),[null,i[1]]}:null},product:function(){for(var e=arguments[0],i=Array.prototype.slice.call(arguments,1),n=[],r=0;r<e.length;r++)n.push(t.each(e[r],i));return n},cache:function(t){var i={},n=null;return function(r){try{n=i[r]=i[r]||t.call(this,r)}catch(o){n=i[r]=o}if(n instanceof e.Exception)throw n;return n}},any:function(){var t=arguments;return function(i){for(var n=null,r=0;r<t.length;r++)if(null!=t[r]){try{n=t[r].call(this,i)}catch(o){n=null}if(n)return n}throw new e.Exception(i)}},each:function(){var t=arguments;return function(i){for(var n=[],r=null,o=0;o<t.length;o++)if(null!=t[o]){try{r=t[o].call(this,i)}catch(s){throw new e.Exception(i)}n.push(r[0]),i=r[1]}return[n,i]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(i,n,r){return n=n||t.rtoken(/^\s*/),r=r||null,1==i.length?i[0]:function(t){for(var o=null,s=null,a=[],l=0;l<i.length;l++){try{o=i[l].call(this,t)}catch(c){break}a.push(o[0]);try{s=n.call(this,o[1])}catch(d){s=null;break}t=s[1]}if(!o)throw new e.Exception(t);if(s)throw new e.Exception(s[1]);if(r)try{o=r.call(this,o[1])}catch(u){throw new e.Exception(o[1])}return[a,o?o[1]:t]}},between:function(e,i,n){n=n||e;var o=t.each(t.ignore(e),i,t.ignore(n));return function(e){var t=o.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,i,n){return i=i||t.rtoken(/^\s*/),n=n||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(i)),e.slice(-1),t.ignore(n)):t.each(t.many(t.each(e,t.ignore(i))),px,t.ignore(n))},set:function(i,n,r){return n=n||t.rtoken(/^\s*/),r=r||null,function(o){for(var s=null,a=null,l=null,c=null,d=[[],o],u=!1,p=0;p<i.length;p++){l=null,a=null,s=null,u=1==i.length;try{s=i[p].call(this,o)}catch(h){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!u)try{l=n.call(this,s[1])}catch(m){u=!0}else u=!0;if(u||0!==l[1].length||(u=!0),!u){for(var f=[],g=0;g<i.length;g++)p!=g&&f.push(i[g]);a=t.set(f,n).call(this,l[1]),a[0].length>0&&(c[0]=c[0].concat(a[0]),c[1]=a[1])}if(c[1].length<d[1].length&&(d=c),0===d[1].length)break}if(0===d[0].length)return d;if(r){try{l=r.call(this,d[1])}catch(b){throw new e.Exception(d[1])}d[1]=l[1]}return d}},forward:function(e,t){return function(i){return e[t].call(this,i)}},replace:function(e,t){return function(i){var n=e.call(this,i);
return[t,n[1]]}},process:function(e,t){return function(i){var n=e.call(this,i);return[t.call(this,n[0]),n[1]]}},min:function(t,i){return function(n){var r=i.call(this,n);if(r[0].length<t)throw new e.Exception(n);return r}}},i=function(e){return function(){var t=null,i=[];if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),!t)return e.apply(null,arguments);for(var n=0,r=t.shift();n<r.length;n++)return t.unshift(r[n]),i.push(e.apply(null,t)),t.shift(),i}},n="optional not ignore cache".split(/\s/),o=0;o<n.length;o++)t[n[o]]=i(t[n[o]]);for(var s=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},a="each any all".split(/\s/),l=0;l<a.length;l++)t[a[l]]=s(t[a[l]])}(),function(){var e=Date,t=(e.prototype,e.CultureInfo),i=function(e){for(var t=[],n=0;n<e.length;n++)e[n]instanceof Array?t=t.concat(i(e[n])):e[n]&&t.push(e[n]);return t};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var i=Number(e);this.year=e.length>2?i:i+(i+2e3<t.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var i=0;i<t.length;i++)t[i]&&t[i].call(this);var n=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=n.getDate()),this.year||(this.year=n.getFullYear()),this.month||0===this.month||(this.month=n.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(t){if(t=t instanceof Array?i(t):[t],0===t.length)return null;for(var n=0;n<t.length;n++)"function"==typeof t[n]&&t[n].call(this);var r=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(r=new Date);var o,s,a,l=!!(this.days&&null!==this.days||this.orient||this.operator);if(a="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||r.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,l=!0),!l&&this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),this.month||(this.month=c.getMonth()),this.year=c.getFullYear()}if(l&&this.weekday&&"month"!=this.unit&&(this.unit="day",o=e.getDayNumberFromName(this.weekday)-r.getDay(),s=7,this.days=o?(o+a*s)%s:a*s),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(r.set({day:1*this.value}),l||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,l=!0),l&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",o=this.month-r.getMonth(),s=12,this.months=o?(o+a*s)%s:a*s,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*a:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*a),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),c.getMonth()!==r.getMonth()&&(this.month=c.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(l&&this.timezone&&this.day&&this.days&&(this.day=this.days),l?r.add(this):r.set(this)):Date.today().setWeek(this.value)}};var n,r=e.Parsing.Operators,o=e.Grammar,s=e.Translator;o.datePartDelimiter=r.rtoken(/^([\s\-\.\,\/\x27]+)/),o.timePartDelimiter=r.stoken(":"),o.whiteSpace=r.rtoken(/^\s*/),o.generalDelimiter=r.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};o.ctoken=function(e){var i=a[e];if(!i){for(var n=t.regexPatterns,o=e.split(/\s+/),s=[],l=0;l<o.length;l++)s.push(r.replace(r.rtoken(n[o[l]]),o[l]));i=a[e]=r.any.apply(null,s)}return i},o.ctoken2=function(e){return r.rtoken(t.regexPatterns[e])},o.h=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),s.hour)),o.hh=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2])/),s.hour)),o.H=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),s.hour)),o.HH=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3])/),s.hour)),o.m=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),s.minute)),o.mm=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),s.minute)),o.s=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),s.second)),o.ss=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),s.second)),o.hms=r.cache(r.sequence([o.H,o.m,o.s],o.timePartDelimiter)),o.t=r.cache(r.process(o.ctoken2("shortMeridian"),s.meridian)),o.tt=r.cache(r.process(o.ctoken2("longMeridian"),s.meridian)),o.z=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),s.timezone)),o.zz=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),s.timezone)),o.zzz=r.cache(r.process(o.ctoken2("timezone"),s.timezone)),o.timeSuffix=r.each(r.ignore(o.whiteSpace),r.set([o.tt,o.zzz])),o.time=r.each(r.optional(r.ignore(r.stoken("T"))),o.hms,o.timeSuffix),o.d=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1]|\d)/),r.optional(o.ctoken2("ordinalSuffix"))),s.day)),o.dd=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1])/),r.optional(o.ctoken2("ordinalSuffix"))),s.day)),o.ddd=o.dddd=r.cache(r.process(o.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),o.M=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d|\d)/),s.month)),o.MM=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d)/),s.month)),o.MMM=o.MMMM=r.cache(r.process(o.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),s.month)),o.y=r.cache(r.process(r.rtoken(/^(\d\d?)/),s.year)),o.yy=r.cache(r.process(r.rtoken(/^(\d\d)/),s.year)),o.yyy=r.cache(r.process(r.rtoken(/^(\d\d?\d?\d?)/),s.year)),o.yyyy=r.cache(r.process(r.rtoken(/^(\d\d\d\d)/),s.year)),n=function(){return r.each(r.any.apply(null,arguments),r.not(o.ctoken2("timeContext")))},o.day=n(o.d,o.dd),o.month=n(o.M,o.MMM),o.year=n(o.yyyy,o.yy),o.orientation=r.process(o.ctoken("past future"),function(e){return function(){this.orient=e}}),o.operator=r.process(o.ctoken("add subtract"),function(e){return function(){this.operator=e}}),o.rday=r.process(o.ctoken("yesterday tomorrow today now"),s.rday),o.unit=r.process(o.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),o.value=r.process(r.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),o.expression=r.set([o.rday,o.operator,o.value,o.unit,o.orientation,o.ddd,o.MMM]),n=function(){return r.set(arguments,o.datePartDelimiter)},o.mdy=n(o.ddd,o.month,o.day,o.year),o.ymd=n(o.ddd,o.year,o.month,o.day),o.dmy=n(o.ddd,o.day,o.month,o.year),o.date=function(e){return(o[t.dateElementOrder]||o.mdy).call(this,e)},o.format=r.process(r.many(r.any(r.process(r.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(o[t])return o[t];throw e.Parsing.Exception(t)}),r.process(r.rtoken(/^[^dMyhHmstz]+/),function(e){return r.ignore(r.stoken(e))}))),function(e){return r.process(r.each.apply(null,e),s.finishExact)});var l={},c=function(e){return l[e]=l[e]||o.format(e)[0]};o.formats=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(c(e[i]));return r.any.apply(null,t)}return c(e)},o._formats=o.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),o._start=r.process(r.set([o.date,o.time,o.expression],o.generalDelimiter,o.whiteSpace),s.finish),o.start=function(e){try{var t=o._formats.call({},e);if(0===t[1].length)return t}catch(i){}return o._start.call({},e)},e._parse=e.parse,e.parse=function(t){var i=null;if(!t)return null;if(t instanceof Date)return t;try{i=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(n){return null}return 0===i[1].length?i[0]:null},e.getParseFunction=function(t){var i=e.Grammar.formats(t);return function(e){var t=null;try{t=i.call({},e)}catch(n){return null}return 0===t[1].length?t[0]:null}},e.parseExact=function(t,i){return e.getParseFunction(i)(t)}}(),function(){var e=this,t=e._,i={},n=Array.prototype,r=Object.prototype,o=Function.prototype,s=n.push,a=n.slice,l=n.concat,c=r.toString,d=r.hasOwnProperty,u=n.forEach,p=n.map,h=n.reduce,m=n.reduceRight,f=n.filter,g=n.every,b=n.some,v=n.indexOf,y=n.lastIndexOf,_=Array.isArray,w=Object.keys,k=o.bind,C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.6.0";var x=C.each=C.forEach=function(e,t,n){if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var s=C.keys(e),r=0,o=s.length;o>r;r++)if(t.call(n,e[s[r]],s[r],e)===i)return;return e};C.map=C.collect=function(e,t,i){var n=[];return null==e?n:p&&e.map===p?e.map(t,i):(x(e,function(e,r,o){n.push(t.call(i,e,r,o))}),n)};var j="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return n&&(t=C.bind(t,n)),r?e.reduce(t,i):e.reduce(t);if(x(e,function(e,o,s){r?i=t.call(n,i,e,o,s):(i=e,r=!0)}),!r)throw new TypeError(j);return i},C.reduceRight=C.foldr=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return n&&(t=C.bind(t,n)),r?e.reduceRight(t,i):e.reduceRight(t);var o=e.length;if(o!==+o){var s=C.keys(e);o=s.length}if(x(e,function(a,l,c){l=s?s[--o]:--o,r?i=t.call(n,i,e[l],l,c):(i=e[l],r=!0)}),!r)throw new TypeError(j);return i},C.find=C.detect=function(e,t,i){var n;return S(e,function(e,r,o){return t.call(i,e,r,o)?(n=e,!0):void 0}),n},C.filter=C.select=function(e,t,i){var n=[];return null==e?n:f&&e.filter===f?e.filter(t,i):(x(e,function(e,r,o){t.call(i,e,r,o)&&n.push(e)}),n)},C.reject=function(e,t,i){return C.filter(e,function(e,n,r){return!t.call(i,e,n,r)},i)},C.every=C.all=function(e,t,n){t||(t=C.identity);var r=!0;return null==e?r:g&&e.every===g?e.every(t,n):(x(e,function(e,o,s){return(r=r&&t.call(n,e,o,s))?void 0:i}),!!r)};var S=C.some=C.any=function(e,t,n){t||(t=C.identity);var r=!1;return null==e?r:b&&e.some===b?e.some(t,n):(x(e,function(e,o,s){return r||(r=t.call(n,e,o,s))?i:void 0}),!!r)};C.contains=C.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):S(e,function(e){return e===t})},C.invoke=function(e,t){var i=a.call(arguments,2),n=C.isFunction(t);return C.map(e,function(e){return(n?t:e[t]).apply(e,i)})},C.pluck=function(e,t){return C.map(e,C.property(t))},C.where=function(e,t){return C.filter(e,C.matches(t))},C.findWhere=function(e,t){return C.find(e,C.matches(t))},C.max=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var n=-1/0,r=-1/0;return x(e,function(e,o,s){var a=t?t.call(i,e,o,s):e;a>r&&(n=e,r=a)}),n},C.min=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var n=1/0,r=1/0;return x(e,function(e,o,s){var a=t?t.call(i,e,o,s):e;r>a&&(n=e,r=a)}),n},C.shuffle=function(e){var t,i=0,n=[];return x(e,function(e){t=C.random(i++),n[i-1]=n[t],n[t]=e}),n},C.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=C.values(e)),e[C.random(e.length-1)]):C.shuffle(e).slice(0,Math.max(0,t))};var M=function(e){return null==e?C.identity:C.isFunction(e)?e:C.property(e)};C.sortBy=function(e,t,i){return t=M(t),C.pluck(C.map(e,function(e,n,r){return{value:e,index:n,criteria:t.call(i,e,n,r)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,i,n){var r={};return i=M(i),x(t,function(o,s){var a=i.call(n,o,s,t);e(r,a,o)}),r}};C.groupBy=A(function(e,t,i){C.has(e,t)?e[t].push(i):e[t]=[i]}),C.indexBy=A(function(e,t,i){e[t]=i}),C.countBy=A(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,i,n){i=M(i);for(var r=i.call(n,t),o=0,s=e.length;s>o;){var a=o+s>>>1;i.call(n,e[a])<r?o=a+1:s=a}return o},C.toArray=function(e){return e?C.isArray(e)?a.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:a.call(e,0,t)},C.initial=function(e,t,i){return a.call(e,0,e.length-(null==t||i?1:t))},C.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var T=function(e,t,i){return t&&C.every(e,C.isArray)?l.apply(i,e):(x(e,function(e){C.isArray(e)||C.isArguments(e)?t?s.apply(i,e):T(e,t,i):i.push(e)}),i)};C.flatten=function(e,t){return T(e,t,[])},C.without=function(e){return C.difference(e,a.call(arguments,1))},C.partition=function(e,t){var i=[],n=[];return x(e,function(e){(t(e)?i:n).push(e)}),[i,n]},C.uniq=C.unique=function(e,t,i,n){C.isFunction(t)&&(n=i,i=t,t=!1);var r=i?C.map(e,i,n):e,o=[],s=[];return x(r,function(i,n){(t?n&&s[s.length-1]===i:C.contains(s,i))||(s.push(i),o.push(e[n]))}),o},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=a.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.contains(t,e)})})},C.difference=function(e){var t=l.apply(n,a.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=C.pluck(arguments,""+i);return t},C.object=function(e,t){if(null==e)return{};for(var i={},n=0,r=e.length;r>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},C.indexOf=function(e,t,i){if(null==e)return-1;var n=0,r=e.length;if(i){if("number"!=typeof i)return n=C.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,r+i):i}if(v&&e.indexOf===v)return e.indexOf(t,i);for(;r>n;n++)if(e[n]===t)return n;return-1},C.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(y&&e.lastIndexOf===y)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var r=n?i:e.length;r--;)if(e[r]===t)return r;return-1},C.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),r=0,o=new Array(n);n>r;)o[r++]=e,e+=i;return o};var D=function(){};C.bind=function(e,t){var i,n;if(k&&e.bind===k)return k.apply(e,a.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));D.prototype=e.prototype;var r=new D;D.prototype=null;var o=e.apply(r,i.concat(a.call(arguments)));return Object(o)===o?o:r}},C.partial=function(e){var t=a.call(arguments,1);return function(){for(var i=0,n=t.slice(),r=0,o=n.length;o>r;r++)n[r]===C&&(n[r]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},C.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return x(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var i={};return t||(t=C.identity),function(){var n=t.apply(this,arguments);return C.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},C.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(a.call(arguments,1)))},C.throttle=function(e,t,i){var n,r,o,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:C.now(),s=null,o=e.apply(n,r),n=r=null};return function(){var c=C.now();a||i.leading!==!1||(a=c);var d=t-(c-a);return n=this,r=arguments,0>=d?(clearTimeout(s),s=null,a=c,o=e.apply(n,r),n=r=null):s||i.trailing===!1||(s=setTimeout(l,d)),o}},C.debounce=function(e,t,i){var n,r,o,s,a,l=function(){var c=C.now()-s;t>c?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(o,r),o=r=null))};return function(){o=this,r=arguments,s=C.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(o,r),o=r=null),a}},C.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return C.partial(t,e)},C.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=function(e){if(!C.isObject(e))return[];if(w)return w(e);var t=[];for(var i in e)C.has(e,i)&&t.push(i);return t},C.values=function(e){for(var t=C.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=e[t[r]];return n},C.pairs=function(e){for(var t=C.keys(e),i=t.length,n=new Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]];return n},C.invert=function(e){for(var t={},i=C.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n];return t},C.functions=C.methods=function(e){var t=[];for(var i in e)C.isFunction(e[i])&&t.push(i);return t.sort()},C.extend=function(e){return x(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},C.pick=function(e){var t={},i=l.apply(n,a.call(arguments,1));return x(i,function(i){i in e&&(t[i]=e[i])}),t},C.omit=function(e){var t={},i=l.apply(n,a.call(arguments,1));for(var r in e)C.contains(i,r)||(t[r]=e[r]);return t},C.defaults=function(e){return x(a.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var O=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var r=c.call(e);if(r!=c.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=i.length;o--;)if(i[o]==e)return n[o]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!(C.isFunction(s)&&s instanceof s&&C.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;i.push(e),n.push(t);var l=0,d=!0;if("[object Array]"==r){if(l=e.length,d=l==t.length)for(;l--&&(d=O(e[l],t[l],i,n)););}else{for(var u in e)if(C.has(e,u)&&(l++,!(d=C.has(t,u)&&O(e[u],t[u],i,n))))break;if(d){for(u in t)if(C.has(t,u)&&!l--)break;d=!l}}return i.pop(),n.pop(),d};C.isEqual=function(e,t){return O(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=_||function(e){return"[object Array]"==c.call(e)},C.isObject=function(e){return e===Object(e)},x(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return d.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.property=function(e){return function(t){return t[e]}},C.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},C.times=function(e,t,i){for(var n=Array(Math.max(0,e)),r=0;e>r;r++)n[r]=t.call(i,r);return n},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=C.invert(P.escape);var L={escape:new RegExp("["+C.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(P.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(L[e],function(t){return P[e][t]})}}),C.result=function(e,t){if(null==e)return void 0;var i=e[t];return C.isFunction(i)?i.call(e):i},C.mixin=function(e){x(C.functions(e),function(t){var i=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),$.call(this,i.apply(C,e))}})};var E=0;C.uniqueId=function(e){var t=++E+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,i){var n;i=C.defaults({},i,C.templateSettings);var r=new RegExp([(i.escape||B).source,(i.interpolate||B).source,(i.evaluate||B).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(r,function(t,i,n,r,a){return s+=e.slice(o,a).replace(I,function(e){return"\\"+V[e]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+t.length,t}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(t)return n(t,C);var l=function(e){return n.call(this,e,C)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},C.chain=function(e){return C(e).chain()};var $=function(e){return this._chain?C(e).chain():e};C.mixin(C),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];C.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],$.call(this,i)}}),x(["concat","join","slice"],function(e){var t=n[e];C.prototype[e]=function(){return $.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return C})}.call(this),function(){var e,t=this,i=t.Backbone,n=[],r=n.push,o=n.slice,s=n.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="0.9.10";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i)for(var r in i)e[t].apply(e,[r,i[r]].concat(n));else{if(!l.test(i))return!0;for(var o=i.split(l),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(n))}},d=function(e,t){var i,n=-1,r=e.length;switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,t[0]);return;case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,t[0],t[1]);return;case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,t[0],t[1],t[2]);return;default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t)}},u=e.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var n=this,r=a.once(function(){n.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,i),this},off:function(e,t,i){var n,r,o,s,l,d,u,p;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(s=e?[e]:a.keys(this._events),l=0,d=s.length;d>l;l++)if(e=s[l],n=this._events[e]){if(o=[],t||i)for(u=0,p=n.length;p>u;u++)r=n[u],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&o.push(r);this._events[e]=o}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&d(i,t),n&&d(n,arguments),this},listenTo:function(e,t,i){var n=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=a.uniqueId("l"));return n[r]=e,e.on(t,"object"==typeof t?this:i,this),this},stopListening:function(e,t,i){var n=this._listeners;if(n){if(e)e.off(t,"object"==typeof t?this:i,this),t||i||delete n[e._listenerId];else{"object"==typeof t&&(i=this);for(var r in n)n[r].off(t,i,this);this._listeners={}}return this}}};u.bind=u.on,u.unbind=u.off,a.extend(e,u);var p=e.Model=function(e,t){var i,n=e||{};this.cid=a.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(i=a.result(this,"defaults"))&&(n=a.defaults({},n,i)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};a.extend(p.prototype,u,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,r,o,s,l,c,d,u;if(null==e)return this;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;o=i.unset,l=i.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=a.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(n in r)t=r[n],a.isEqual(u[n],t)||s.push(n),a.isEqual(d[n],t)?delete this.changed[n]:this.changed[n]=t,o?delete u[n]:u[n]=t;if(!l){s.length&&(this._pending=!0);for(var p=0,h=s.length;h>p;p++)this.trigger("change:"+s[p],this,u[s[p]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var r in e)a.isEqual(n[r],t=e[r])||((i||(i={}))[r]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,i,n){return e.set(e.parse(i,n),n)?void(t&&t(e,i,n)):!1},this.sync("read",this,e)},save:function(e,t,i){var n,r,o,s,l=this.attributes;return null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,!n||i&&i.wait||this.set(n,i)?(i=a.extend({validate:!0},i),this._validate(n,i)?(n&&i.wait&&(this.attributes=a.extend({},l,n)),void 0===i.parse&&(i.parse=!0),r=i.success,i.success=function(e,t,i){e.attributes=l;var o=e.parse(t,i);return i.wait&&(o=a.extend(n||{},o)),a.isObject(o)&&!e.set(o,i)?!1:void(r&&r(e,t,i))},o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=n),s=this.sync(o,this,i),n&&i.wait&&(this.attributes=l),s):!1):!1},destroy:function(e){e=e?a.clone(e):{};var t=this,i=e.success,n=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(e,t,r){(r.wait||e.isNew())&&n(),i&&i(e,t,r)},this.isNew())return e.success(this,null,e),!1;var r=this.sync("delete",this,e);return e.wait||n(),r},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||O();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,t||{}),!1):!0}});var h=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))};a.extend(h.prototype,u,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var i,n,o,l,c,d,u,p,h,m;for(u=[],p=t.at,h=this.comparator&&null==p&&0!=t.sort,m=a.isString(this.comparator)?this.comparator:null,i=0,n=e.length;n>i;i++)(o=this._prepareModel(l=e[i],t))?(c=this.get(o))?t.merge&&(c.set(l===o?o.attributes:l,t),h&&!d&&c.hasChanged(m)&&(d=!0)):(u.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,l,t);if(u.length&&(h&&(d=!0),this.length+=u.length,null!=p?s.apply(this.models,[p,0].concat(u)):r.apply(this.models,u)),d&&this.sort({silent:!0}),t.silent)return this;for(i=0,n=u.length;n>i;i++)(o=u[i]).trigger("add",o,this,t);return d&&this.trigger("sort",this,t),this},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var i,n,r,o;for(i=0,n=e.length;n>i;i++)o=this.get(e[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,t.silent||(t.index=r,o.trigger("remove",o,this,t)),this._removeReference(o));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])
},at:function(e){return this.models[e]},where:function(e){return a.isEmpty(e)?[]:this.filter(function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return a.invoke(this.models,"get",e)},update:function(e,t){t=a.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var i,n,r,o,s=[],l=[],c={};if(a.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(n=0,r=e.length;r>n;n++)i=e[n],o=this.get(i),t.remove&&o&&(c[o.cid]=!0),(t.add&&!o||t.merge&&o)&&s.push(i);if(t.remove)for(n=0,r=this.models.length;r>n;n++)i=this.models[n],c[i.cid]||l.push(i);return l.length&&this.remove(l,t),s.length&&this.add(s,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,i,n){var r=n.update?"update":"reset";e[r](i,n),t&&t(e,i,n)},this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,n=t.success;return t.success=function(e,t,r){r.wait&&i.add(e,r),n&&n(e,t,r)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var i=new this.model(e,t);return i._validate(e,t)?i:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,i){t||(t=this.comparator);var n=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,n,i)}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(m,function(e){h.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var f=["groupBy","countBy","sortBy"];a.each(f,function(e){h.prototype[e]=function(t,i){var n=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,n,i)}});var g=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},b=/\((.*?)\)/g,v=/(\(\?)?:\w+/g,y=/\*\w+/g,_=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(g.prototype,u,{initialize:function(){},route:function(t,i,n){return a.isRegExp(t)||(t=this._routeToRegExp(t)),n||(n=this[i]),e.history.route(t,a.bind(function(r){var o=this._extractParameters(t,r);n&&n.apply(this,o),this.trigger.apply(this,["route:"+i].concat(o)),this.trigger("route",i,o),e.history.trigger("route",this,i,o)},this)),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes)for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(_,"\\$&").replace(b,"(?:$1)?").replace(v,function(e,t){return t?e:"([^/]+)"}).replace(y,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var w=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},k=/^[#\/]|\s+$/g,C=/^\/+|\/+$/g,x=/msie [\w.]+/,j=/\/$/;w.started=!1,a.extend(w.prototype,u,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(j,"");e.indexOf(i)||(e=e.substr(i.length))}else e=this.getHash();return e.replace(k,"")},start:function(t){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,r=x.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(C,"/"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(k,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),w.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return i},navigate:function(e,t){if(!w.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var i=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),e.history=new w;var S=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},M=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];a.extend(S.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=a.result(this,"events"))){this.undelegateEvents();for(var t in e){var i=e[t];if(a.isFunction(i)||(i=this[e[t]]),!i)throw new Error('Method "'+e[t]+'" does not exist');var n=t.match(M),r=n[1],o=n[2];i=a.bind(i,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,i):this.$el.on(r,o,i)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,A)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var i=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}});var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.prepareData=function(e,t,i){return"create"==e||"update"==e||"patch"==e?JSON.stringify(t.toJSON(i)):null},e.sync=function(t,i,n){var r=T[t];a.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(n.url||(o.url=a.result(i,"url")||O()),null==n.data&&i&&(o.contentType="application/json",o.data=e.prepareData(t,i,n)),n.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",n.emulateJSON&&(o.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||n.emulateJSON||(o.processData=!1);var l=n.success;n.success=function(e){l&&l(i,e,n),i.trigger("sync",i,e,n)};var c=n.error;n.error=function(e){c&&c(i,e,n),i.trigger("error",i,e,n)};var d=n.xhr=e.ajax(a.extend(o,n));return i.trigger("request",i,d,n),d},e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var D=function(e,t){var i,n=this;i=e&&a.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},a.extend(i,n,t);var r=function(){this.constructor=i};return r.prototype=n.prototype,i.prototype=new r,e&&a.extend(i.prototype,e),i.__super__=n.prototype,i};p.extend=h.extend=g.extend=S.extend=w.extend=D;var O=function(){throw new Error('A "url" property or function must be specified')}}.call(this);var Hogan={};!function(e,t){function i(e){return String(null===e||void 0===e?"":e)}function n(e){return e=i(e),c.test(e)?e.replace(r,"&amp;").replace(o,"&lt;").replace(s,"&gt;").replace(a,"&#39;").replace(l,"&quot;"):e}e.Template=function(e,i,n,r){this.r=e||this.r,this.c=n,this.options=r,this.text=i||"",this.buf=t?[]:""},e.Template.prototype={r:function(){return""},v:n,t:i,render:function(e,t,i){return this.ri([e],t||{},i)},ri:function(e,t,i){return this.r(e,t,i)},rp:function(e,t,i,n){var r=i[e];return r?(this.c&&"string"==typeof r&&(r=this.c.compile(r,this.options)),r.ri(t,i,n)):""},rs:function(e,t,i){var n=e[e.length-1];if(!d(n))return void i(e,t,this);for(var r=0;r<n.length;r++)e.push(n[r]),i(e,t,this),e.pop()},s:function(e,t,i,n,r,o,s){var a;return d(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ls(e,t,i,n,r,o,s)),a=!!e,!n&&a&&t&&t.push("object"==typeof e?e:t[t.length-1]),a)},d:function(e,t,i,n){var r=e.split("."),o=this.f(r[0],t,i,n),s=null;if("."===e&&d(t[t.length-2]))return t[t.length-1];for(var a=1;a<r.length;a++)o&&"object"==typeof o&&r[a]in o?(s=o,o=o[r[a]]):o="";return n&&!o?!1:(n||"function"!=typeof o||(t.push(s),o=this.lv(o,t,i),t.pop()),o)},f:function(e,t,i,n){for(var r=!1,o=null,s=!1,a=t.length-1;a>=0;a--)if(o=t[a],o&&"object"==typeof o&&e in o){r=o[e],s=!0;break}return s?(n||"function"!=typeof r||(r=this.lv(r,t,i)),r):n?!1:""},ho:function(e,t,i,n,r){var o=this.c,s=e.call(t,n,function(e){return o.compile(e,{delimiters:r}).render(t,i)});return this.b(o.compile(s.toString(),{delimiters:r}).render(t,i)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,i,n,r,o,s){var a=t[t.length-1],l=null;if(!n&&this.c&&e.length>0)return this.ho(e,a,i,this.text.substring(r,o),s);if(l=e.call(a),"function"==typeof l){if(n)return!0;if(this.c)return this.ho(l,a,i,this.text.substring(r,o),s)}return l},lv:function(e,t,i){var n=t[t.length-1],r=e.call(n);return"function"==typeof r&&(r=r.call(n)),r=r.toString(),this.c&&~r.indexOf("{{")?this.c.compile(r).render(n,i):r}};var r=/&/g,o=/</g,s=/>/g,a=/\'/g,l=/\"/g,c=/[&<>\"\']/,d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof exports?exports:Hogan),function(e){function t(e){for(var t=0,i=-1;-1!=(i=e.indexOf("\n",i+1));)t++;return t}function i(e,t){function i(e){this.len_after=e,this.name="close_"+t}var n=e+"_state",r="strong"==e?"em_state":"strong_state";return function(o){if(this[n][0]==t)return this[n].shift(),[o.length,new i(o.length-t.length)];var s=this[r].slice(),a=this[n].slice();this[n].unshift(t);{var l=this.processInline(o.substr(t.length)),c=l[l.length-1];this[n].shift()}if(c instanceof i){l.pop();var d=o.length-c.len_after;return[d,[e].concat(l)]}return this[r]=s,this[n]=a,[t.length,t]}}function n(e){return m(e)&&e.length>1&&"object"==typeof e[1]&&!m(e[1])?e[1]:void 0}function r(e){for(var t=o(e),i={},n=0;n<t.length;++n)if(/^#/.test(t[n]))i.id=t[n].substring(1);else if(/^\./.test(t[n]))i["class"]=i["class"]?i["class"]+t[n].replace(/./," "):t[n].substring(1);else if(/=/.test(t[n])){var r=t[n].split(/=/);i[r[0]]=r[1]}return i}function o(e){for(var t=e.split(""),i=[""],n=!1;t.length;){var r=t.shift();switch(r){case" ":n?i[i.length-1]+=r:i.push("");break;case"'":case'"':n=!n;break;case"\\":r=t.shift();default:i[i.length-1]+=r}}return i}function s(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(e){if("string"==typeof e)return s(e);var t=e.shift(),i={},n=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(i=e.shift());e.length;)n.push(arguments.callee(e.shift()));var r="";for(var o in i){var a="";a="href"!=o&&"src"!=o||/^(\/|(https?|ftp):\/\/|mailto:)/.test(i[o])?i[o]:"#",r+=" "+o+'="'+s(a)+'"'}return"br"==t?"<"+t+r+" />":"<"+t+r+">"+n.join("")+"</"+t+">"}function c(e,t,i){i=i||{};var r=e.slice(0);"function"==typeof i.preprocessTreeNode&&(r=i.preprocessTreeNode(r,t));var o=n(r);if(o){r[1]={};for(var s in o)r[1][s]=o[s];o=r[1]}if("string"==typeof r)return r;switch(r[0]){case"header":r[0]="h"+r[1].level,delete r[1].level;break;case"bulletlist":r[0]="ul";break;case"numberlist":r[0]="ol";break;case"listitem":r[0]="li";break;case"para":r[0]="p";break;case"markdown":r[0]="html",o&&delete o.references;break;case"code_block":r[0]="pre";var s=o?2:1,a=["code"];a.push.apply(a,r.splice(s)),r[s]=a;break;case"inlinecode":r[0]="code";break;case"img":r[1].src=r[1].href,delete r[1].href;break;case"linebreak":r[0]="br";break;case"link":r[0]="a";break;case"link_ref":r[0]="a";var l=t[o.ref];if(!l)return o.original;delete o.ref,o.href=l.href,l.title&&(o.title=l.title),delete o.original}var s=1;if(o){for(var c in r[1])s=2;1===s&&r.splice(s,1)}for(;s<r.length;++s)r[s]=arguments.callee(r[s],t,i);return r}function d(e){for(var t=n(e)?2:1;t<e.length;)"string"==typeof e[t]?t+1<e.length&&"string"==typeof e[t+1]?e[t]+=e.splice(t+1,1)[0]:++t:(arguments.callee(e[t]),++t)}var u=e.Markdown=function f(e){switch(typeof e){case"undefined":this.dialect=f.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in f.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=f.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};e.parse=function(e,t,i){var n=new u(t);return n.options=i,n.toTree(e)},e.toHTML=function(t,i,n){var r=e.toHTMLTree(t,i,n);return e.renderJsonML(r)},e.toHTMLTree=function(e,t,i){"string"==typeof e&&(e=this.parse(e,t,i));var r=n(e),o={};r&&r.references&&(o=r.references);var s=c(e,o,i);return d(s),s};var h=u.mk_block=function(e,t,i){1==arguments.length&&(t="\n\n");var n=new String(e);return n.trailing=t,n.toSource=function(){return"Markdown.mk_block( "+uneval(e)+", "+uneval(t)+", "+uneval(i)+" )"},void 0!=i&&(n.lineNumber=i),n};u.prototype.split_blocks=function(e){var i,n=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,r=[],o=1;for(null!=(i=/^(\s*\n)/.exec(e))&&(o+=t(i[0]),n.lastIndex=i[0].length);null!=(i=n.exec(e));)r.push(h(i[1],i[2],o)),o+=t(i[0]);return r},u.prototype.processBlock=function(e,t){var i=this.dialect.block,n=i.__order__;if("__call__"in i)return i.__call__.call(this,e,t);for(var r=0;r<n.length;r++){var o=i[n[r]].call(this,e,t);if(o)return(!m(o)||o.length>0&&!m(o[0]))&&this.debug(n[r],"didn't return a proper array"),o}return[]},u.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},u.prototype.toTree=function(e,t){var i=e instanceof Array?e:this.split_blocks(e),n=this.tree;try{for(this.tree=t||this.tree||["markdown"];i.length;){var r=this.processBlock(i.shift(),i);r.length&&this.tree.push.apply(this.tree,r)}return this.tree}finally{t&&(this.tree=n)}},u.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,e)},u.prototype.loop_re_over_block=function(e,t,i){for(var n,r=t.valueOf();r.length&&null!=(n=e.exec(r));)r=r.substr(n[0].length),i.call(this,n);return r},u.dialects={},u.dialects.Gruber={block:{processBlock:function(){return null},atxHeader:function(e,t){var i=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!i)return void 0;var n=["header",{level:i[1].length}];return Array.prototype.push.apply(n,this.processInline(i[2])),i[0].length<e.length&&t.unshift(h(e.substr(i[0].length),e.trailing,e.lineNumber+2)),[n]},setextHeader:function(e,t){var i=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!i)return void 0;var n="="===i[2]?1:2,r=["header",{level:n},i[1]];return i[0].length<e.length&&t.unshift(h(e.substr(i[0].length),e.trailing,e.lineNumber+2)),[r]},code:function(e,t){var i=[],n=/^(?: {0,3}\t| {4})(.*)\n?/,r=e.match(n);if(!r)return void 0;e:for(;;){var o=this.loop_re_over_block(n,e.valueOf(),function(e){i.push(e[1])});if(o.length){t.unshift(h(o,e.trailing));break e}if(!t.length)break e;var r=t[0].match(n);if(!r)break e;i.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=t.shift()}return[["code_block",i.join("\n")]]},horizRule:function(e,t){var i=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!i)return void 0;var n=[["hr"]];return i[1]&&n.unshift.apply(n,this.processBlock(i[1],[])),i[3]&&t.unshift(h(i[3])),n},lists:function(){function e(e){return new RegExp("(?:^("+l+"{0,"+e+"} {0,3})("+o+")\\s+)|(^"+l+"{0,"+(e-1)+"}[ ]{0,4})")}function t(e){return e.replace(/ {0,3}\t/g,"    ")}function i(e,t,i,n){if(t)return void e.push(["para"].concat(i));var r=e[e.length-1]instanceof Array&&"para"==e[e.length-1][0]?e[e.length-1]:e;n&&e.length>1&&i.unshift(n);for(var o=0;o<i.length;o++){var s=i[o],a="string"==typeof s;a&&r.length>1&&"string"==typeof r[r.length-1]?r[r.length-1]+=s:r.push(s)}}function n(e,t){for(var i=new RegExp("^("+l+"{"+e+"}.*?\\n?)*$"),n=new RegExp("^"+l+"{"+e+"}","gm"),r=[];t.length>0;){if(i.exec(t[0])){var o=t.shift(),s=o.replace(n,"");r.push(h(s,o.trailing,o.lineNumber))}break}return r}function r(e,t,i){var n=e.list,r=n[n.length-1];if(!(r[1]instanceof Array&&"para"==r[1][0]))if(t+1==i.length)r.push(["para"].concat(r.splice(1)));else{var o=r.pop();r.push(["para"].concat(r.splice(1)),o)}}var o="[*+-]|\\d\\.",s=/[*+-]/,a=new RegExp("^( {0,3})("+o+")[ 	]+"),l="(?: {0,3}\\t| {4})";return function(o,l){function c(e){var t=s.exec(e[2])?["bulletlist"]:["numberlist"];return p.push({list:t,indent:e[1]}),t}var d=o.match(a);if(!d)return void 0;for(var u,p=[],h=c(d),m=!1,f=[p[0].list];;){for(var g=o.split(/(?=\n)/),b="",v=0;v<g.length;v++){var y="",_=g[v].replace(/^\n/,function(e){return y=e,""}),w=e(p.length);if(d=_.match(w),void 0!==d[1]){b.length&&(i(u,m,this.processInline(b),y),m=!1,b=""),d[1]=t(d[1]);var k=Math.floor(d[1].length/4)+1;if(k>p.length)h=c(d),u.push(h),u=h[1]=["listitem"];else{var C=p.some(function(e,t){return e.indent!=d[1]?!1:(h=e.list,p.splice(t+1),!0)});C||(k++,k<=p.length?(p.splice(k),h=p[k-1].list):(h=c(d),u.push(h))),u=["listitem"],h.push(u)}y=""}_.length>d[0].length&&(b+=y+_.substr(d[0].length))}b.length&&(i(u,m,this.processInline(b),y),m=!1,b="");var x=n(p.length,l);x.length>0&&(p.forEach(r,this),u.push.apply(u,this.toTree(x,[])));var j=l[0]&&l[0].valueOf()||"";if(!j.match(a)&&!j.match(/^ /))break;o=l.shift();var S=this.dialect.block.horizRule(o,l);if(S){f.push.apply(f,S);break}p.forEach(r,this),m=!0}return f}}(),blockquote:function(e,t){if(!e.match(/^>/m))return void 0;var i=[];if(">"!=e[0]){for(var n=e.split(/\n/),r=[];n.length&&">"!=n[0][0];)r.push(n.shift());e=n.join("\n"),i.push.apply(i,this.processBlock(r.join("\n"),[]))}for(;t.length&&">"==t[0][0];){var o=t.shift();e+=e.trailing+o,e.trailing=o.trailing}{var s=e.replace(/^> ?/gm,"");this.tree}return i.push(this.toTree(s,["blockquote"])),i},referenceDefn:function(e,t){var i=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!e.match(i))return void 0;n(this.tree)||this.tree.splice(1,0,{});var r=n(this.tree);void 0===r.references&&(r.references={});var o=this.loop_re_over_block(i,e,function(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var t=r.references[e[1].toLowerCase()]={href:e[2]};void 0!==e[4]?t.title=e[4]:void 0!==e[5]&&(t.title=e[5])});return o.length&&t.unshift(h(o,e.trailing)),[]},para:function(e){return[["para"].concat(this.processInline(e))]}}},u.dialects.Gruber.inline={__call__:function(e,t){function i(e){"string"==typeof e&&"string"==typeof r[r.length-1]?r[r.length-1]+=e:r.push(e)}for(var n,r=[],o=new RegExp("([\\s\\S]*?)("+(t.source||t)+")","g"),s=0;null!=(n=o.exec(e));){n[1]?i(n[1]):n[1]={length:0};var a;n[2]in this.dialect.inline&&(a=this.dialect.inline[n[2]].call(this,e.substr(n.index+n[1].length),n,r)),a=a||[n[2].length,n[2]];var l=a.shift();o.lastIndex+=l-n[2].length,a.forEach(i),s=o.lastIndex}return e.length>s&&i(e.substr(s)),r},"\\":function(e){return e.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)?[2,e[1]]:[1,"\\"]},"![":function(e){var t=e.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1)),t[2]==this.dialect.inline.__call__.call(this,t[2],/\\/)[0];var i={alt:t[1],href:t[2]||""};return void 0!==t[4]&&(i.title=t[4]),[t[0].length,["img",i]]}return t=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),t?[t[0].length,["img_ref",{alt:t[1],ref:t[2].toLowerCase(),text:t[0]}]]:[2,"!["]},"[":function(e){var t=e.match(/^\[([\s\S]*?)\][ \t]*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1)),t[2]=this.dialect.inline.__call__.call(this,t[2],/\\/)[0];var i={href:t[2]||""};void 0!==t[4]&&(i.title=t[4]);var n=["link",i];return Array.prototype.push.apply(n,this.processInline(t[1])),[t[0].length,n]}return t=e.match(/^\[([\s\S]*?)\](?: ?\[(.*?)\])?/),t?((void 0===t[2]||""===t[2])&&(t[2]=t[1]),i={ref:t[2].toLowerCase(),original:t[0]},n=["link_ref",i],Array.prototype.push.apply(n,this.processInline(t[1])),[t[0].length,n]):[1,"["]},"<":function(e){var t;return null!=(t=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?t[3]?[t[0].length,["link",{href:"mailto:"+t[3]},t[3]]]:"mailto"==t[2]?[t[0].length,["link",{href:t[1]},t[1].substr("mailto:".length)]]:[t[0].length,["link",{href:t[1]},t[1]]]:[1,"<"]},"`":function(e){var t=e.match(/(`+)(([\s\S]*?)\1)/);return t&&t[2]?[t[1].length+t[2].length,["inlinecode",t[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}},u.dialects.Gruber.inline["**"]=i("strong","**"),u.dialects.Gruber.inline.__=i("strong","__"),u.dialects.Gruber.inline["*"]=i("em","*"),u.dialects.Gruber.inline._=i("em","_"),u.buildBlockOrder=function(e){var t=[];for(var i in e)"__order__"!=i&&"__call__"!=i&&t.push(i);e.__order__=t},u.buildInlinePatterns=function(e){var t=[];for(var i in e)if("__call__"!=i){var n=i.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");t.push(1==i.length?n:"(?:"+n+")")}t=t.join("|");var r=e.__call__;e.__call__=function(e,i){return void 0!=i?r.call(this,e,i):r.call(this,e,t)}},u.subclassDialect=function(e){function t(){}function i(){}return t.prototype=e.block,i.prototype=e.inline,{block:new t,inline:new i}},u.buildBlockOrder(u.dialects.Gruber.block),u.buildInlinePatterns(u.dialects.Gruber.inline),u.dialects.Maruku=u.subclassDialect(u.dialects.Gruber),u.dialects.Maruku.block.document_meta=function(e){if(e.lineNumber>1)return void 0;if(!e.match(/^(?:\w+:.*\n)*\w+:.*$/))return void 0;n(this.tree)||this.tree.splice(1,0,{});var t=e.split(/\n/);for(p in t){var i=t[p].match(/(\w+):\s*(.*)$/),r=i[1].toLowerCase(),o=i[2];this.tree[1][r]=o}return[]},u.dialects.Maruku.block.block_meta=function(e){var t=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!t)return void 0;var i=r(t[2]);if(""===t[1]){var o=this.tree[this.tree.length-1],s=n(o);if("string"==typeof o)return void 0;s||(s={},o.splice(1,0,s));for(a in i)s[a]=i[a];return[]}var l=e.replace(/\n.*$/,""),c=this.processBlock(l,[]),s=n(c[0]);s||(s={},c[0].splice(1,0,s));for(a in i)s[a]=i[a];return c},u.dialects.Maruku.block.definition_list=function(e,t){var i=/^((?:[^\s:].*\n)+):\s+((?:\s\S)+)$/,n=["dl"];if(!(s=e.match(i)))return void 0;for(var r=[e];t.length&&i.exec(t[0]);)r.push(t.shift());for(var o=0;o<r.length;++o){for(var s=r[o].match(i),a=s[1].replace(/\n$/,"").split(/\n/),l=s[2].split(/\n:\s+/),c=0;c<a.length;++c)n.push(["dt",a[c]]);for(var c=0;c<l.length;++c)n.push(["dd"].concat(this.processInline(l[c].replace(/(\n)\s+/,"$1"))))}return[n]},u.dialects.Maruku.inline["{:"]=function(e,t,i){if(!i.length)return[2,"{:"];var o=i[i.length-1];if("string"==typeof o)return[2,"{:"];var s=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!s)return[2,"{:"];var a=r(s[1]),l=n(o);l||(l={},o.splice(1,0,l));for(var c in a)l[c]=a[c];return[s[0].length,""]},u.buildBlockOrder(u.dialects.Maruku.block),u.buildInlinePatterns(u.dialects.Maruku.inline);var m=e.isArray=function(e){return e instanceof Array||"array"==typeof e||Array.isArray(e)};e.renderJsonML=function(e,t){t=t||{},t.root=t.root||!1;var i=[];if(t.root)i.push(l(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)i.push(l(e.shift()));return i.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}()),function(){function e(e){var i=!1;return function(){if(i)throw new Error("Callback was already called.");i=!0,e.apply(t,arguments)}}var t,i,n={};t=this,null!=t&&(i=t.async),n.noConflict=function(){return t.async=i,n};var r=function(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i+=1)t(e[i],i,e)},o=function(e,t){if(e.map)return e.map(t);var i=[];return r(e,function(e,n,r){i.push(t(e,n,r))}),i},s=function(e,t,i){return e.reduce?e.reduce(t,i):(r(e,function(e,n,r){i=t(i,e,n,r)}),i)},a=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t};"undefined"!=typeof process&&process.nextTick?(n.nextTick=process.nextTick,n.setImmediate="undefined"!=typeof setImmediate?setImmediate:n.nextTick):"function"==typeof setImmediate?(n.nextTick=function(e){setImmediate(e)},n.setImmediate=n.nextTick):(n.nextTick=function(e){setTimeout(e,0)},n.setImmediate=n.nextTick),n.each=function(t,i,n){if(n=n||function(){},!t.length)return n();var o=0;r(t,function(r){i(r,e(function(e){e?(n(e),n=function(){}):(o+=1,o>=t.length&&n(null))}))})},n.forEach=n.each,n.eachSeries=function(e,t,i){if(i=i||function(){},!e.length)return i();var n=0,r=function(){t(e[n],function(t){t?(i(t),i=function(){}):(n+=1,n>=e.length?i(null):r())})};r()},n.forEachSeries=n.eachSeries,n.eachLimit=function(e,t,i,n){var r=l(t);r.apply(null,[e,i,n])},n.forEachLimit=n.eachLimit;var l=function(e){return function(t,i,n){if(n=n||function(){},!t.length||0>=e)return n();var r=0,o=0,s=0;!function a(){if(r>=t.length)return n();for(;e>s&&o<t.length;)o+=1,s+=1,i(t[o-1],function(e){e?(n(e),n=function(){}):(r+=1,s-=1,r>=t.length?n():a())})}()}},c=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.each].concat(t))}},d=function(e,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[l(e)].concat(i))}},u=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.eachSeries].concat(t))}},p=function(e,t,i,n){var r=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i,n){r[e.index]=n,t(i)})},function(e){n(e,r)})};n.map=c(p),n.mapSeries=u(p),n.mapLimit=function(e,t,i,n){return h(t)(e,i,n)};var h=function(e){return d(e,p)};n.reduce=function(e,t,i,r){n.eachSeries(e,function(e,n){i(t,e,function(e,i){t=i,n(e)})},function(e){r(e,t)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(e,t,i,r){var s=o(e,function(e){return e}).reverse();n.reduce(s,t,i,r)},n.foldr=n.reduceRight;var m=function(e,t,i,n){var r=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i){i&&r.push(e),t()})},function(){n(o(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.filter=c(m),n.filterSeries=u(m),n.select=n.filter,n.selectSeries=n.filterSeries;var f=function(e,t,i,n){var r=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i){i||r.push(e),t()})},function(){n(o(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.reject=c(f),n.rejectSeries=u(f);var g=function(e,t,i,n){e(t,function(e,t){i(e,function(i){i?(n(e),n=function(){}):t()})},function(){n()})};n.detect=c(g),n.detectSeries=u(g),n.some=function(e,t,i){n.each(e,function(e,n){t(e,function(e){e&&(i(!0),i=function(){}),n()})},function(){i(!1)})},n.any=n.some,n.every=function(e,t,i){n.each(e,function(e,n){t(e,function(e){e||(i(!1),i=function(){}),n()})},function(){i(!0)})},n.all=n.every,n.sortBy=function(e,t,i){n.map(e,function(e,i){t(e,function(t,n){t?i(t):i(null,{value:e,criteria:n})})},function(e,t){if(e)return i(e);var n=function(e,t){var i=e.criteria,n=t.criteria;return n>i?-1:i>n?1:0};i(null,o(t.sort(n),function(e){return e.value}))})},n.auto=function(e,t){t=t||function(){};var i=a(e);if(!i.length)return t(null);var o={},l=[],c=function(e){l.unshift(e)},d=function(e){for(var t=0;t<l.length;t+=1)if(l[t]===e)return void l.splice(t,1)},u=function(){r(l.slice(0),function(e){e()})};c(function(){a(o).length===i.length&&(t(null,o),t=function(){})}),r(i,function(i){var l=e[i]instanceof Function?[e[i]]:e[i],p=function(e){var s=Array.prototype.slice.call(arguments,1);if(s.length<=1&&(s=s[0]),e){var l={};r(a(o),function(e){l[e]=o[e]}),l[i]=s,t(e,l),t=function(){}}else o[i]=s,n.setImmediate(u)},h=l.slice(0,Math.abs(l.length-1))||[],m=function(){return s(h,function(e,t){return e&&o.hasOwnProperty(t)},!0)&&!o.hasOwnProperty(i)};if(m())l[l.length-1](p,o);else{var f=function(){m()&&(d(f),l[l.length-1](p,o))};c(f)}})},n.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length)return t();var r=function(e){return function(i){if(i)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),s=e.next();o.push(s?r(s):t),n.setImmediate(function(){e.apply(null,o)})}}};r(n.iterator(e))()};var b=function(e,t,i){if(i=i||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},i);else{var n={};e.each(a(t),function(e,i){t[e](function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),n[e]=r,i(t)})},function(e){i(e,n)
})}};n.parallel=function(e,t){b({map:n.map,each:n.each},e,t)},n.parallelLimit=function(e,t,i){b({map:h(t),each:l(t)},e,i)},n.series=function(e,t){if(t=t||function(){},e.constructor===Array)n.mapSeries(e,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},t);else{var i={};n.eachSeries(a(e),function(t,n){e[t](function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[t]=r,n(e)})},function(e){t(e,i)})}},n.iterator=function(e){var t=function(i){var n=function(){return e.length&&e[i].apply(null,arguments),n.next()};return n.next=function(){return i<e.length-1?t(i+1):null},n};return t(0)},n.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var v=function(e,t,i,n){var r=[];e(t,function(e,t){i(e,function(e,i){r=r.concat(i||[]),t(e)})},function(e){n(e,r)})};n.concat=c(v),n.concatSeries=u(v),n.whilst=function(e,t,i){e()?t(function(r){return r?i(r):void n.whilst(e,t,i)}):i()},n.doWhilst=function(e,t,i){e(function(r){return r?i(r):void(t()?n.doWhilst(e,t,i):i())})},n.until=function(e,t,i){e()?i():t(function(r){return r?i(r):void n.until(e,t,i)})},n.doUntil=function(e,t,i){e(function(r){return r?i(r):void(t()?i():n.doUntil(e,t,i))})},n.queue=function(t,i){function o(e,t,o,s){t.constructor!==Array&&(t=[t]),r(t,function(t){var r={data:t,callback:"function"==typeof s?s:null};o?e.tasks.unshift(r):e.tasks.push(r),e.saturated&&e.tasks.length===i&&e.saturated(),n.setImmediate(e.process)})}void 0===i&&(i=1);var s=0,a={tasks:[],concurrency:i,saturated:null,empty:null,drain:null,push:function(e,t){o(a,e,!1,t)},unshift:function(e,t){o(a,e,!0,t)},process:function(){if(s<a.concurrency&&a.tasks.length){var i=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),s+=1;var n=function(){s-=1,i.callback&&i.callback.apply(i,arguments),a.drain&&a.tasks.length+s===0&&a.drain(),a.process()},r=e(n);t(i.data,r)}},length:function(){return a.tasks.length},running:function(){return s}};return a},n.cargo=function(e,t){var i=!1,s=[],a={tasks:s,payload:t,saturated:null,empty:null,drain:null,push:function(e,i){e.constructor!==Array&&(e=[e]),r(e,function(e){s.push({data:e,callback:"function"==typeof i?i:null}),a.saturated&&s.length===t&&a.saturated()}),n.setImmediate(a.process)},process:function l(){if(!i){if(0===s.length)return void(a.drain&&a.drain());var n="number"==typeof t?s.splice(0,t):s.splice(0),c=o(n,function(e){return e.data});a.empty&&a.empty(),i=!0,e(c,function(){i=!1;var e=arguments;r(n,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},length:function(){return s.length},running:function(){return i}};return a};var y=function(e){return function(t){var i=Array.prototype.slice.call(arguments,1);t.apply(null,i.concat([function(t){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&r(i,function(t){console[e](t)}))}]))}};n.log=y("log"),n.dir=y("dir"),n.memoize=function(e,t){var i={},n={};t=t||function(e){return e};var r=function(){var r=Array.prototype.slice.call(arguments),o=r.pop(),s=t.apply(null,r);s in i?o.apply(null,i[s]):s in n?n[s].push(o):(n[s]=[o],e.apply(null,r.concat([function(){i[s]=arguments;var e=n[s];delete n[s];for(var t=0,r=e.length;r>t;t++)e[t].apply(null,arguments)}])))};return r.memo=i,r.unmemoized=e,r},n.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},n.times=function(e,t,i){for(var r=[],o=0;e>o;o++)r.push(o);return n.map(r,t,i)},n.timesSeries=function(e,t,i){for(var r=[],o=0;e>o;o++)r.push(o);return n.mapSeries(r,t,i)},n.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,i=Array.prototype.slice.call(arguments),r=i.pop();n.reduce(e,i,function(e,i,n){i.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,i){r.apply(t,[e].concat(i))})}};var _=function(e,t){var i=function(){var i=this,n=Array.prototype.slice.call(arguments),r=n.pop();return e(t,function(e,t){e.apply(i,n.concat([t]))},r)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return i.apply(this,n)}return i};n.applyEach=c(_),n.applyEachSeries=u(_),n.forever=function(e,t){function i(n){if(n){if(t)return t(n);throw n}e(i)}i()},"undefined"!=typeof define&&define.amd?define([],function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:t.async=n}(),function(e){e.fn.dragscrollable=function(t){var i=e.extend({acceptPropagatedEvent:!0,preventDefault:!0,fxIgnore:function(){return!1}},t||{}),n={mouseDownHandler:function(t){return t.data.fxIgnore(t)?void 0:1!=t.which||!t.data.acceptPropagatedEvent&&t.target!=this?!1:(t.data.lastCoord={left:t.clientX,top:t.clientY},e.event.add(document,"mouseup",n.mouseUpHandler,t.data),e.event.add(document,"mousemove",n.mouseMoveHandler,t.data),t.data.preventDefault?(t.preventDefault(),!1):void 0)},mouseMoveHandler:function(e){var t={left:e.clientX-e.data.lastCoord.left,top:e.clientY-e.data.lastCoord.top};return e.data.scrollable.scrollLeft(e.data.scrollable.scrollLeft()-t.left),e.data.scrollable.scrollTop(e.data.scrollable.scrollTop()-t.top),e.data.lastCoord={left:e.clientX,top:e.clientY},e.data.preventDefault?(e.preventDefault(),!1):void 0},mouseUpHandler:function(t){return e.event.remove(document,"mousemove",n.mouseMoveHandler),e.event.remove(document,"mouseup",n.mouseUpHandler),t.data.preventDefault?(t.preventDefault(),!1):void 0}};this.each(function(){var t={scrollable:e(this),acceptPropagatedEvent:i.acceptPropagatedEvent,preventDefault:i.preventDefault,fxIgnore:i.fxIgnore};e(this).bind("mousedown",t,n.mouseDownHandler)})}}(jQuery);var mixin,__slice=[].slice;mixin=function(){var e,t,i,n,r,o,s,a,l;for(n=2<=arguments.length?__slice.call(arguments,0,o=arguments.length-1):(o=0,[]),e=arguments[o++],s=0,a=n.length;a>s;s++){i=n[s],l=i.prototype;for(t in l)r=l[t],e.prototype[t]=r}return e};var SharedUtil,__slice=[].slice,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};async.assembly=function(e,t){var i;return i=_.map(e,function(e){return function(){var t,i,n,r;return t=2<=arguments.length?__slice.call(arguments,0,r=arguments.length-1):(r=0,[]),n=arguments[r++],i=function(){var e,i;return e=arguments[0],i=2<=arguments.length?__slice.call(arguments,1):[],0===i.length&&(i=t),n.apply(null,[e].concat(__slice.call(i)))},e.apply(null,[i].concat(__slice.call(t)))}}),async.waterfall(i,t)},_.mixin({mapObj:_.compose(_.object,_.map),chainOn:function(e){var t;return t={},_.extend(t,_.mapObj(_.functions(e),function(i){return[i,function(){return e[i].apply(e,arguments),t}]}))},partialMethod:function(){var e,t,i,n;return n=arguments[0],i=arguments[1],e=3<=arguments.length?__slice.call(arguments,2):[],t=_.bind(n[i],n),_.partial.apply(_,[t].concat(__slice.call(e)))}}),_.count=function(e,t){var i,n,r,o;for(null==t&&(t=function(){return!0}),i=0,r=0,o=e.length;o>r;r++)n=e[r],t(n)&&i++;return i},SharedUtil={minSpacing:.125,spacing:16384,maxPos:0x4000000000000,lowerCaseFirstChar:function(e){return e[0].toLowerCase()+e.substr(1)},checkId:function(e){return"ObjectID"===(null!=e?e.constructor.name:void 0)||24===(null!=e?e.length:void 0)&&/^[a-f0-9]*$/.test(e)},capitalize:function(e){return _.isString(e)&&!_.isEmpty(e)?e[0].toUpperCase()+e.substr(1):e},pluralize:function(e){return""+e+"s"},formatCount:function(e,t,i){return e||i?(t=SharedUtil.formatNoun(e,t),""+e+" "+t):""},formatNoun:function(e,t){return 1!==e&&(t+="s"),t},imageFileExtensions:["png","gif","jpg","jpeg","bmp","ico"],extensionIsImage:function(e){var t,i;return t=null!=(i=SharedUtil.fileExt(e))?i.toLowerCase():void 0,__indexOf.call(SharedUtil.imageFileExtensions,t)>=0},fileExt:function(e){var t,i,n;return null!=(t=null!=(i=/\.([a-z0-9]+)$/i.exec(e))&&null!=(n=i[1])?n.toLowerCase():void 0)?t:null},filenameFromUrl:function(e){var t;return null!=(t=/\/([^\/]+?)(?:\#|\?|$)/.exec(e))?t[1]:void 0},pathFromUrl:function(e){var t;return null!=(t=/^([^?\#]+)/.exec(e))?t[1]:void 0},traverse:function(e,t){var i,n,r;if(_.isEmpty(t)||!e)return e;if(_.isArray(t)){for(n=0,r=t.length;r>n&&(i=t[n],e=e[i],e);n++);return e}return e[t]},isSimpleObject:function(e){return e&&!_.isArray(e)&&!_.isDate(e)&&!e.prototype&&"object"==typeof e},escapeForRegex:function(e){return null!=e?e.replace(/[-[\]{}()*+?.,\\\/^$|#\s]/g,"\\$&"):void 0},hasProtocol:function(e){return/^\s*[a-z]+:/i.test(e)},makeSlug:function(e,t){var i;return null==t&&(t="-"),e&&(i=SharedUtil.removeAccents(e.toLowerCase()).replace(/[^a-z0-9]+/gi,t).replace(RegExp("^"+t+"|"+t+"$","g"),""),i.length>128&&(i=i.substr(0,128))),i||t},removeAccents:function(e){return e.replace(/[àáâãäåāăą]/g,"a").replace(/æ/g,"ae").replace(/[çćĉċč]/g,"c").replace(/[ďđ]/g,"d").replace(/[èéêëēĕėęě]/g,"e").replace(/[ĝğġģ]/g,"g").replace(/[ĥħ]/g,"h").replace(/[ìíîïĩīĭįı]/g,"i").replace(/[ñńņňŉŋ]/g,"n").replace(/[òóôõöōŏő]/g,"o").replace(/œ/g,"oe").replace(/[śŝşš]/g,"s").replace(/ß/g,"ss").replace(/[ùúûüũūŭůűų]/g,"u").replace(/[ýÿ]/g,"y")},isShortId:function(e){return/^[0-9]{1,8}$/.test(e)},isShortLink:function(e){return _.isString(e)&&/^[a-zA-Z0-9]{8}$/.test(e)},isValidCallback:function(e){return/^[$a-z_][$a-z0-9_\.]*$/i.test(e)},parseDate:function(e){return Date.parse(e)},getMs:function(e){var t,i,n,r,o,s,a,l;return t=e.days,i=e.hours,n=e.minutes,s=e.seconds,o=e.ms,l=e.years,r=e.months,a=e.weeks,null==t&&(t=0),null==i&&(i=0),null==n&&(n=0),null==s&&(s=0),null==o&&(o=0),l&&(t+=365*l),r&&(t+=30*r),a&&(t+=7*a),i+=24*t,n+=60*i,s+=60*n,o+=1e3*s},getSeconds:function(e){return this.getMs(e)/1e3},dateAfter:function(e){var t,i;return t=null!=(i=null!=e?e.date:void 0)?i:new Date,new Date(t.getTime()+this.getMs(e))},dateBefore:function(e){var t,i;return t=null!=(i=null!=e?e.date:void 0)?i:new Date,new Date(t.getTime()-this.getMs(e))},compareMemberType:function(e,t,i,n){var r,o,s,a,l;switch(null==n&&(n={}),l=n.mode,null==l&&(l="standard"),l){case"members":o=[["normal","admin"]];break;case"commentDelete":o=[["normal","org"],["admin"]];break;default:o=[["org"],["normal"],["admin"]]}return r=function(t){var i,n,r,s,a;for(r=e.getMemberType(t),n=s=0,a=o.length;a>s;n=++s)if(i=o[n],__indexOf.call(i,r)>=0)return n;return-1},s=r(t),a=r(i),s>a?1:a>s?-1:0},isValidSearch:function(e){return(null!=e?e.length:void 0)>=2||this.isShortId(e)},regexCardNumber:/\#(\d{1,7})(?=$|\s|[;:,.!?\)\}\]\<\>])/,regexLink:/\b((?:[\w-]+:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]|(\(([^\s()<>]|\([^\s()<>]+\))+\)))*\))+(?:\(([^\s()<>]|(\(([^\s()<>]|\([^\s()<>]+\))+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’])|[a-z0-9.\-]+[.](?:com|net|org|edu|gov|mil|co\.[a-z]{2})\b)/gi,cleanLink:function(e){return e.match(/^([\w-]+):\/\//)||(e="http://"+e),e},idToDate:function(e){return new Date(1e3*parseInt(null!=e?e.substr(0,8):void 0,16))},dateToId:function(e){return Math.floor(e.getTime()/1e3).toString(16)+"0000000000000000"},separateLargeNum:function(e,t){return null==t&&(t=","),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)},shortenLargeNum:function(e){var t,i,n,r;for(i=["","k","m"],n=0,r=i.length;r>n&&(t=i[n],!(1050>e));n++)e/=1e3;return(Math.round(10*e)/10).toString()+t},mapping:function(e,t,i){return async.map(e,t,function(t,n){var r,o,s,a,l;if(t)return i(t);for(s={},r=a=0,l=e.length;l>a;r=++a)o=e[r],s[o]=n[r];return i(null,s)})},queued:function(e,t){var i;return i=async.queue(function(t,i){var n;return n=t.shift(),t.push(i),e.apply(n,t)},t),function(){var e,t,n;return e=2<=arguments.length?__slice.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],e.unshift(this),_.isFunction(t)||(e.push(t),t=function(){}),i.push([e],t)}},labelNames:["green","yellow","orange","red","purple","blue"],preferScaledPreviews:function(e){var t;return t=_.filter(e,function(e){return e.scaled}),_.isEmpty(t)?e:t},smallestPreviewBiggerThan:function(e,t,i){var n,r,o,s;for(null==e&&(e=[]),null==t&&(t=0),null==i&&(i=0),r=[this.preferScaledPreviews(e),e],o=0,s=r.length;s>o;o++)e=r[o],_.isEmpty(n)&&(n=_.filter(e,function(e){return e.width>=t&&e.height>=i}));return this.smallestPreview(n)},previewBetween:function(e,t,i,n,r){var o;return null==e&&(e=[]),o=_.filter(this.preferScaledPreviews(e),function(e){var o,s;return t<=(o=e.width)&&n>=o&&i<=(s=e.height)&&r>=s}),this.biggestPreview(o)},biggestPreview:function(e){return 0===e.length?null:_.max(this.preferScaledPreviews(e),function(e){return Math.min(e.width,e.height)})},smallestPreview:function(e){return 0===e.length?null:_.min(this.preferScaledPreviews(e),function(e){return Math.max(e.width,e.height)})},rotateArr:function(e,t){return _.flatten([e.slice(-t),e.slice(0,-t)],!0)},humanReadableList:function(e){var t;return e.length<2?null!=(t=null!=e?e[0]:void 0)?t:"":2===e.length?e[0]+" and "+e[1]:(e[e.length-1]="and "+e[e.length-1],e.join(", "))},isNonPushstateAndroid:function(e){return/android(\s)*[3-4]\.[0-1][^0-9]/i.test(e)},strRepeat:function(e,t){return new Array(t+1).join(e)},md5:function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m;return r=0,n=function(e){return u(p(m(e)))},p=function(i){return e(t(d(i),8*i.length))},u=function(e){var t,i,n,o,s;try{}catch(a){t=a,r=0}for(i=r?"0123456789ABCDEF":"0123456789abcdef",o="",s=void 0,n=0;n<e.length;)s=e.charCodeAt(n),o+=i.charAt(s>>>4&15)+i.charAt(15&s),n++;return o},m=function(e){var t,i,n,r;for(i="",t=-1,n=void 0,r=void 0;++t<e.length;)n=e.charCodeAt(t),r=t+1<e.length?e.charCodeAt(t+1):0,n>=55296&&56319>=n&&r>=56320&&57343>=r&&(n=65536+((1023&n)<<10)+(1023&r),t++),127>=n?i+=String.fromCharCode(n):2047>=n?i+=String.fromCharCode(192|n>>>6&31,128|63&n):65535>=n?i+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):2097151>=n&&(i+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return i},d=function(e){var t,i;for(i=Array(e.length>>2),t=0;t<i.length;)i[t]=0,t++;for(t=0;t<8*e.length;)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32,t+=8;return i},e=function(e){var t,i;for(i="",t=0;t<32*e.length;)i+=String.fromCharCode(e[t>>5]>>>t%32&255),t+=8;return i},t=function(e,t){var i,n,r,o,d,u,p,m,f;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,i=1732584193,n=-271733879,r=-1732584194,o=271733878,d=0;d<e.length;)u=i,p=n,m=r,f=o,i=s(i,n,r,o,e[d+0],7,-680876936),o=s(o,i,n,r,e[d+1],12,-389564586),r=s(r,o,i,n,e[d+2],17,606105819),n=s(n,r,o,i,e[d+3],22,-1044525330),i=s(i,n,r,o,e[d+4],7,-176418897),o=s(o,i,n,r,e[d+5],12,1200080426),r=s(r,o,i,n,e[d+6],17,-1473231341),n=s(n,r,o,i,e[d+7],22,-45705983),i=s(i,n,r,o,e[d+8],7,1770035416),o=s(o,i,n,r,e[d+9],12,-1958414417),r=s(r,o,i,n,e[d+10],17,-42063),n=s(n,r,o,i,e[d+11],22,-1990404162),i=s(i,n,r,o,e[d+12],7,1804603682),o=s(o,i,n,r,e[d+13],12,-40341101),r=s(r,o,i,n,e[d+14],17,-1502002290),n=s(n,r,o,i,e[d+15],22,1236535329),i=a(i,n,r,o,e[d+1],5,-165796510),o=a(o,i,n,r,e[d+6],9,-1069501632),r=a(r,o,i,n,e[d+11],14,643717713),n=a(n,r,o,i,e[d+0],20,-373897302),i=a(i,n,r,o,e[d+5],5,-701558691),o=a(o,i,n,r,e[d+10],9,38016083),r=a(r,o,i,n,e[d+15],14,-660478335),n=a(n,r,o,i,e[d+4],20,-405537848),i=a(i,n,r,o,e[d+9],5,568446438),o=a(o,i,n,r,e[d+14],9,-1019803690),r=a(r,o,i,n,e[d+3],14,-187363961),n=a(n,r,o,i,e[d+8],20,1163531501),i=a(i,n,r,o,e[d+13],5,-1444681467),o=a(o,i,n,r,e[d+2],9,-51403784),r=a(r,o,i,n,e[d+7],14,1735328473),n=a(n,r,o,i,e[d+12],20,-1926607734),i=l(i,n,r,o,e[d+5],4,-378558),o=l(o,i,n,r,e[d+8],11,-2022574463),r=l(r,o,i,n,e[d+11],16,1839030562),n=l(n,r,o,i,e[d+14],23,-35309556),i=l(i,n,r,o,e[d+1],4,-1530992060),o=l(o,i,n,r,e[d+4],11,1272893353),r=l(r,o,i,n,e[d+7],16,-155497632),n=l(n,r,o,i,e[d+10],23,-1094730640),i=l(i,n,r,o,e[d+13],4,681279174),o=l(o,i,n,r,e[d+0],11,-358537222),r=l(r,o,i,n,e[d+3],16,-722521979),n=l(n,r,o,i,e[d+6],23,76029189),i=l(i,n,r,o,e[d+9],4,-640364487),o=l(o,i,n,r,e[d+12],11,-421815835),r=l(r,o,i,n,e[d+15],16,530742520),n=l(n,r,o,i,e[d+2],23,-995338651),i=c(i,n,r,o,e[d+0],6,-198630844),o=c(o,i,n,r,e[d+7],10,1126891415),r=c(r,o,i,n,e[d+14],15,-1416354905),n=c(n,r,o,i,e[d+5],21,-57434055),i=c(i,n,r,o,e[d+12],6,1700485571),o=c(o,i,n,r,e[d+3],10,-1894986606),r=c(r,o,i,n,e[d+10],15,-1051523),n=c(n,r,o,i,e[d+1],21,-2054922799),i=c(i,n,r,o,e[d+8],6,1873313359),o=c(o,i,n,r,e[d+15],10,-30611744),r=c(r,o,i,n,e[d+6],15,-1560198380),n=c(n,r,o,i,e[d+13],21,1309151649),i=c(i,n,r,o,e[d+4],6,-145523070),o=c(o,i,n,r,e[d+11],10,-1120210379),r=c(r,o,i,n,e[d+2],15,718787259),n=c(n,r,o,i,e[d+9],21,-343485551),i=h(i,u),n=h(n,p),r=h(r,m),o=h(o,f),d+=16;return Array(i,n,r,o)},o=function(e,t,n,r,o,s){return h(i(h(h(t,e),h(r,s)),o),n)},s=function(e,t,i,n,r,s,a){return o(t&i|~t&n,e,t,r,s,a)},a=function(e,t,i,n,r,s,a){return o(t&n|i&~n,e,t,r,s,a)},l=function(e,t,i,n,r,s,a){return o(t^i^n,e,t,r,s,a)},c=function(e,t,i,n,r,s,a){return o(i^(t|~n),e,t,r,s,a)},h=function(e,t){var i,n;return i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16),n<<16|65535&i},i=function(e,t){return e<<t|e>>>32-t},n}()};var Version;Version={},Version.Server=function(){function e(e){var t,i;return e?(t=e.split("."),void(this.parts=t.length>0?function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)i=t[e],r.push(parseInt(i,10)||0);return r}():[0])):null}return e.prototype.toString=function(){return this.parts.join(".")},e.prototype.toJSON=function(){return this.toString()},e.prototype.lessThan=function(e){var t;return t=this.compareTo(e),t&&0>t},e.prototype.greaterThan=function(e){var t;return t=this.compareTo(e),t&&t>0},e.prototype.equalTo=function(e){var t;return t=this.compareTo(e),t&&0===t},e.prototype.compareTo=function(e){var t,i,n,r,o,s,a;if(_.isString(e))e=new Version.Server(e);else if(!(e instanceof Version.Server))return null;for(t=Math.max(this.parts.length,e.parts.length),s=_.zip(this.parts,e.parts),r=0,o=s.length;o>r;r++){if(a=s[r],i=a[0],n=a[1],null==i&&(i=0),null==n&&(n=0),i>n)return t;if(n>i)return-t;t--}return 0},e.compareStringVersions=function(e,t){return new Version.Server(e).compareTo(t)},e.prototype.supports=function(e){var t,i;return i=e.minServerVersion,t=e.maxServerVersion,!(i&&!this.greaterThan(i)||t&&!this.lessThan(t))},e}(),Version.Client=function(){function e(e){var t;null==e&&(e={}),this.head=null!=(t=e.head)?t:"dev",this.version=parseInt(e.version)||0,this.patch=parseInt(e.patch)||0,this.minServerVersion=new Version.Server(e.minServerVersion),this.maxServerVersion=new Version.Server(e.maxServerVersion)}return e.prototype.toString=function(){return""+this.head+"-"+this.fullVersion()},e.prototype.toJSON=function(){return this.toString()},e.prototype.fullVersion=function(){return _.compact([this.version,this.patch]).join(".")||0},e}();var EntityListGenerator;EntityListGenerator=function(){function e(e){null==e&&(e={}),this.fullUrls=e.fullUrls,this.domain=e.domain}var t;return e.prototype.getId=function(e){var t,i;return null!=(t=null!=(i=e.id)?i:e._id)?t.toString():void 0},e.prototype.makeFullUrl=function(e){return this.fullUrls?""+this.domain+"/"+e:"/"+e},t=function(e){return(null!=e?e.toJSON:void 0)?e.toJSON():e},e.prototype.getCardUrl=function(e,i){return e=t(e),i=t(i),this.makeFullUrl(i.shortLink?"c/"+i.shortLink+"/"+i.idShort+"-"+Util.makeSlug(i.name):i.idShort?"card/"+Util.makeSlug(i.name)+"/"+this.getId(e)+"/"+i.idShort:"card/board/"+Util.makeSlug(i.name)+"/"+this.getId(e)+"/"+this.getId(i))},e.prototype.getBoardUrl=function(e){return e=t(e),this.makeFullUrl(e.shortLink?"b/"+e.shortLink+"/"+Util.makeSlug(e.name):"board/"+Util.makeSlug(e.name)+"/"+this.getId(e))},e.prototype.getOrganizationUrl=function(e){return this.makeFullUrl(this.getId(e))},e.prototype.getMember=function(){throw Error("not implemented")},e.prototype.getDateMs=function(){throw Error("not implemented")},e.prototype.getBoard=function(){return{}},e.prototype.memberEntity=function(e){var i,n;return n=t(this.getMember(e)),i=n?{type:"member",_id:""+this.idAction+"_"+n._id,id:this.getId(n),avatarHash:n.avatarHash,gravatarHash:n.gravatarHash,initials:n.initials,fullName:n.fullName,username:n.username}:{type:"member",_id:""+this.idAction+"_"+e}},e.prototype.textEntity=function(e,t,i){var n;return null==i&&(i=!1),n={type:"text",_id:""+this.idAction+"_"+e,text:e},i&&(n.hideIfContext=!0,n.idContext=t),n},e.prototype.relDateEntity=function(e,t){var i,n,r;return null==t&&(t=""),i=new Date(e).getTime(),r=new Date,n={type:"relDate",_id:""+this.idAction+"_"+e,text:t,date:e,current:""+(i>r?"is":"was")+" "+t+" "+getDateDeltaString(i,r,{timezoneAbbreviation:e.timezoneAbbreviation})}},e.prototype._getNameForBoard=function(e){var t,i;return e&&null!=e.id&&null==e.name?_.extend(e,null!=(t=null!=(i=this.getBoard(e.id))?i.toJSON():void 0)?t:{}):void 0},e.prototype.cardEntity=function(e,t,i){var n;return null==i&&(i=!1),n=_.extend({type:"card",hideIfContext:i,_id:""+this.idAction+"_"+e.id},e),t?(this._getNameForBoard(t),_.extend(n,{url:this.getCardUrl(t,e)})):n},e.prototype.boardEntity=function(e){return this._getNameForBoard(e),null!=(null!=e?e.name:void 0)?_.extend({type:"board",url:this.getBoardUrl(e),_id:""+this.idAction+"_"+e.id},e):this.textEntity("another board")},e.prototype.organizationEntity=function(e){return _.extend({type:"organization",url:this.getOrganizationUrl(e),_id:""+this.idAction+"_"+e.id},e)},e.prototype.listEntity=function(e,t){var i;return i=""+this.idAction+"_"+e.id,t&&(i+="_"+t),_.extend({type:"list",_id:i},e)},e.prototype.checklistEntity=function(e){return _.extend({type:"checklist",_id:""+this.idAction+"_"+e.id},e)},e.prototype.checkItemEntity=function(e,t){var i,n,r;return n=t.card,i=t.board,r={type:"checkItem",_id:""+this.idAction+"_"+e.id,nameHtml:TFM.checkItems.format(e.name,{card:n,board:i,textData:e.textData}).output},_.extend(r,e)},e.prototype.commentEntity=function(e,t){var i,n,r,o,s;return n=t.card,i=t.board,r=t.embedly,s=t.textData,o={type:"comment",_id:""+this.idAction+"_comment",text:e,textHtml:TFM.comments.format(e,{card:n,board:i,domain:this.domain,textData:s}).output},null!=r&&(o.embedly=r),o},e.prototype.labelEntity=function(e,t){var i;return i={type:"label",_id:""+this.idAction+"_label",color:e,text:t}},e.prototype.attachmentEntity=function(e){return e=_.extend({type:"attachment",_id:""+this.idAction+"_"+e.id},e),e.link=e.url&&!e.isDeleted,e},e.prototype.attachmentPreviewEntity=function(e){var t,i;return e=_.extend({type:"attachmentPreview",_id:""+this.idAction+"_"+e.id+"_preview"},e),t=e.url&&!e.isDeleted,e.isImage=t&&Util.extensionIsImage(e.url)&&("function"==typeof Util.isTrelloAttachment?Util.isTrelloAttachment(e.url):void 0),e.canPreview=e.isImage,e.originalUrl=e.url,e.url=null!=(i=e.previewUrl)?i:e.url,e},e.prototype.orderEntityList=function(e){var t,i,n,r;for(t=0,n=0,r=e.length;r>n;n++)i=e[n],i.order=t++;return e},e}();var addDays,dateFormats,formatDate,getDateDeltaString,isSameDay;dateFormats={time:"h:mm tt",monthDay:"MMM d",monthDayYear:"MMM d, yyyy"},formatDate=function(e,t){return e.toString(t)},isSameDay=function(e,t){return e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},addDays=function(e,t){return new Date(e.getTime()+24*t*60*60*1e3)},getDateDeltaString=function(e,t,i){var n,r,o,s,a,l,c,d,u;return u=null!=i?i:{},l=u.timeFormat,d=u.timezoneAbbreviation,n=new Date(e),a=Math.abs((t-n)/1e3),o=n>t,10>a?o?"now":"just now":120>a?o?"in a minute":"a minute ago":(s=Math.floor(a/60),60>s?o?"in "+s+" minutes":""+s+" minutes ago":120>s?o?"in an hour":"an hour ago":(r=Math.floor(s/60),c=" at "+formatDate(n,null!=l?l:dateFormats.time).toLowerCase(),null!=d&&(c+=" ("+d+")"),3>r?o?"in "+r+" hours":""+r+" hours ago":isSameDay(t,n)?"today"+c:isSameDay(addDays(t,-1),n)?"yesterday"+c:isSameDay(addDays(t,1),n)?"tomorrow"+c:Math.floor(r/24)<90?formatDate(n,dateFormats.monthDay)+c:formatDate(n,dateFormats.monthDayYear)+c))};var SharedActionList,__bind=function(e,t){return function(){return e.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};SharedActionList=null,function(){var e,t,i,n,r,o,s,a;return SharedActionList=function(e){function n(){this.groupActions=__bind(this.groupActions,this),this.getEntityLists=__bind(this.getEntityLists,this),this.getEntityList=__bind(this.getEntityList,this),this.getSingleEntityList=__bind(this.getSingleEntityList,this),this._getData=__bind(this._getData,this),this.getPowerUpEntityList=__bind(this.getPowerUpEntityList,this),this.getBoardInvitationEntityList=__bind(this.getBoardInvitationEntityList,this),this.getOrganizationInvitationEntityList=__bind(this.getOrganizationInvitationEntityList,this),this.getOrganizationEntityList=__bind(this.getOrganizationEntityList,this),this.getCheckItemEntityList=__bind(this.getCheckItemEntityList,this),this.getChecklistEntityList=__bind(this.getChecklistEntityList,this),this.getListEntityList=__bind(this.getListEntityList,this),this.getMemberEntityList=__bind(this.getMemberEntityList,this),this.getCardEntityList=__bind(this.getCardEntityList,this),this.getBoardEntityList=__bind(this.getBoardEntityList,this),this.visibleTypes=_.difference(a,i)}var o,s,l,c,d,u;return __extends(n,e),c=function(e){return/Card$/.test(e.type)},l=function(e){return e.idMemberCreator},u=function(e){return"commentCard"===e||"copyCommentCard"===e||"deleteCard"===e||"moveCardFromBoard"===e||"moveCardToBoard"===e||"addAttachmentToCard"===e},o=function(e,t){var i,n;return i=e.toJSON(),n=t.toJSON(),l(i)!==l(n)?!1:c(i)&&c(n)&&i.data.card&&n.data.card?i.data.card.id!==n.data.card.id?!1:u(i.type)||u(n.type)?!1:!0:!1},s=function(e,t){var i,n;return i=e.toJSON(),n=t.toJSON(),u(n.type)?!0:Math.abs(Util.parseDate(i.date)-Util.parseDate(n.date))>3e5?!0:c(i)&&c(n)&&l(i)!==l(n)?!0:!1},d=function(e){var t,i,n,r,o,s,a,l,c,d,u,p;if(1===e.length)return e;for(n={},l=function(e,t){var i,n,r,o,s,a;for(n=["name","desc","pos","closed"],r=0,o=n.length;o>r;r++)if(i=n[r],null!=(null!=(s=e.old)?s[i]:void 0)&&null!=(null!=(a=t.old)?a[i]:void 0))return!0;return null!=e.listBefore&&null!=t.listBefore},s=c=0,u=e.length;u>c;s=++c)for(t=e[s],a=d=0,p=e.length;p>d;a=++d)i=e[a],s!==a&&(n[t.id]||n[i.id]||(r=t.toJSON(),o=i.toJSON(),_.extend(r,r.data),_.extend(o,o.data),("addMemberToCard"===r.type&&"removeMemberFromCard"===o.type&&r.idMember===o.idMember||"voteOnCard"===r.type&&"voteOnCard"===o.type&&r.voted!==o.voted||"addLabelToCard"===r.type&&"removeLabelFromCard"===o.type&&r.value===o.value||"addAttachmentToCard"===r.type&&"deleteAttachmentFromCard"===o.type&&r.attachment.id===o.attachment.id||"addChecklistToCard"===r.type&&"removeChecklistFromCard"===o.type&&r.value===o.value||"updateCheckItemStateOnCard"===r.type&&"updateCheckItemStateOnCard"===o.type&&r.checkItem.name===o.checkItem.name&&r.checkItem.state!==o.checkItem.state)&&(n[t.id]=!0,n[i.id]=!0),a>s&&"updateCard"===r.type&&"updateCard"===o.type&&l(r,o)&&(n[i.id]=!0)));return _.reject(e,function(e){return n[e.id]})},n.prototype.getBoardEntityList=function(e,t){var i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y,_,w,k,C,x,j,S,M,A,T,D,O,P;switch(e.type){case"createBoard":return[this.textEntity("created"),this.boardEntity(e.board)];case"copyBoard":return[this.textEntity("copied this board from"),this.boardEntity(e.boardSource)];case"updateBoard":if(null!=(null!=(s=e.old)?s.name:void 0))return[this.textEntity("renamed"),this.boardEntity(e.board),this.textEntity("(from "+e.old.name+")")];if(null!=(null!=(a=e.old)?a.desc:void 0))return[this.textEntity("changed description of"),this.boardEntity(e.board)];if(null!=(null!=(v=e.old)?v.closed:void 0))return[this.textEntity(e.board.closed?"closed":"re-opened"),this.boardEntity(e.board)];if(null!=(null!=(S=e.old)&&null!=(M=S.prefs)?M.background:void 0))return[this.textEntity("changed the background of"),this.boardEntity(e.board)];if(null!=(null!=(A=e.old)?A.prefs:void 0)){if(n=function(t){return function(i,n,r,o){var s,a,l;return a=null!=(l=e.board.prefs)?l[i]:void 0,"none"===a||"disabled"===a?[t.textEntity(r),t.boardEntity(e.board)]:(s=function(){switch(a){case"members":case"private":return"its members";case"observers":return"members and observers";case"org":return"members of its organization";case"public":return"the public";case"admins":return"its admins"}}(),[t.textEntity(n),t.boardEntity(e.board),t.textEntity(""+o+" to "+s)])}}(this),o=function(t){return function(i,n){return[t.textEntity((i?"enabled":"disabled")+(" "+n+" on")),t.boardEntity(e.board)]}}(this),null!=(null!=(T=e.old)&&null!=(D=T.prefs)?D.voting:void 0))return n("voting","made voting on","disabled voting on","available");if(null!=(null!=(O=e.old)&&null!=(P=O.prefs)?P.comments:void 0))return n("comments","made commenting on","disabled commenting on","available");if(null!=(null!=(l=e.old)&&null!=(c=l.prefs)?c.invitations:void 0))return n("invitations","made inviting on","disabled inviting on","available");if(null!=(null!=(d=e.old)&&null!=(u=d.prefs)?u.permissionLevel:void 0))return n("permissionLevel","made","hid","visible");if(null!=(null!=(p=e.old)&&null!=(h=p.prefs)?h.selfJoin:void 0))return o(null!=(m=e.board.prefs)?m.selfJoin:void 0,"self join");if(null!=(null!=(f=e.old)&&null!=(g=f.prefs)?g.cardCovers:void 0))return o(null!=(b=e.board.prefs)?b.cardCovers:void 0,"card cover images");if(null!=(null!=(y=e.old)&&null!=(_=y.prefs)?_.cardAging:void 0))return r=POWERUP_STRINGS.cardAgingModes[null!=(w=e.board.prefs)?w.cardAging:void 0],[this.textEntity("changed card aging to "+r+" mode")];if(null!=(null!=(k=e.old)&&null!=(C=k.prefs)?C.calendarFeedEnabled:void 0))return r=POWERUP_STRINGS.calendarFeedEnabledVerbs[null!=(x=e.board.prefs)?x.calendarFeedEnabled:void 0],[this.textEntity(""+r+" the iCalendar feed on this board")]}break;case"addMemberToBoard":return null!=e.idMemberAdded&&e.idMemberAdded!==e.idMemberCreator?(i=[this.textEntity("added"),this.memberEntity(e.idMemberAdded),this.textEntity("to"),this.boardEntity(e.board)],null!=e.memberType&&"normal"!==e.memberType&&i.push(this.textEntity("as an "+e.memberType)),i):[this.textEntity("joined"),this.boardEntity(e.board)];case"removeMemberFromBoard":return e.idMember===t?[this.textEntity("left"),this.boardEntity(e.board)]:[this.textEntity("removed"),this.memberEntity(e.idMember),this.textEntity("from"),this.boardEntity(e.board)];case"addAdminToBoard":return[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("an admin of"),this.boardEntity(e.board)];case"removeAdminFromBoard":return e.idMember===t?[this.textEntity("became a normal user on"),this.boardEntity(e.board)]:[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("a normal user on"),this.boardEntity(e.board)];case"makeAdminOfBoard":return e.idMember===t?[this.textEntity("made themselves an admin of"),this.boardEntity(e.board)]:[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("an admin of"),this.boardEntity(e.board)];case"makeObserverOfBoard":return e.idMember===t?[this.textEntity("became an observer of"),this.boardEntity(e.board)]:[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("an observer of"),this.boardEntity(e.board)];case"makeNormalMemberOfBoard":return e.idMember===t?[this.textEntity("became a normal user on"),this.boardEntity(e.board)]:[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("a normal user on"),this.boardEntity(e.board)];case"addToOrganizationBoard":return[this.textEntity("added"),this.boardEntity(e.board),this.textEntity("to"),this.organizationEntity(e.organization)];case"removeFromOrganizationBoard":return[this.textEntity("removed"),this.boardEntity(e.board),this.textEntity("from"),this.organizationEntity(null!=(j=e.organization)?j:{})];case"moveCardFromBoard":return[this.textEntity("transferred"),this.cardEntity(e.card,e.boardTarget),this.textEntity("to"),this.boardEntity(e.boardTarget)];case"moveCardToBoard":return[this.textEntity("transferred"),this.cardEntity(e.card,e.board),this.textEntity("from"),this.boardEntity(e.boardSource)];
case"moveListFromBoard":return[this.textEntity("transferred"),this.listEntity(e.list),this.textEntity("to"),this.boardEntity(e.boardTarget)];case"moveListToBoard":return[this.textEntity("transferred"),this.listEntity(e.list),this.textEntity("from"),this.boardEntity(e.boardSource)]}},n.prototype.getCardEntityList=function(e,t,i){var n,r,o,s,a,l,c,d,u,p;if(o=null!=(l=i.grouped)?l:!1,i.includeBoard)return _.flatten([this.getCardEntityList(e,t,_.extend({},i,{includeBoard:!1})),this.textEntity("on"),this.boardEntity(e.board)]);switch(e.type){case"createCard":return[this.textEntity("added"),this.cardEntity(e.card,e.board),this.textEntity("to"),this.listEntity(e.list)];case"deleteCard":return[this.textEntity("deleted card #"+e.card.idShort),this.textEntity("from"),this.listEntity(e.list)];case"copyCard":return[this.textEntity("copied"),this.cardEntity(e.card,e.board),this.textEntity("from"),this.cardEntity(e.cardSource,e.board),this.textEntity("in list"),this.listEntity(e.list)];case"emailCard":return n=[this.textEntity("emailed"),this.cardEntity(e.card,e.board),this.textEntity("to"),this.listEntity(e.list)],null!=e.sourceEmail&&(n.push(this.textEntity("from")),n.push(this.textEntity(e.sourceEmail))),n;case"updateCard":if(null!=e.listBefore)return o?[this.textEntity("moved from"),this.listEntity(e.listBefore,"old"),this.textEntity("to"),this.listEntity(e.listAfter)]:[this.textEntity("moved"),this.cardEntity(e.card,e.board),this.textEntity("from"),this.listEntity(e.listBefore,"old"),this.textEntity("to"),this.listEntity(e.listAfter)];if(null!=(null!=(c=e.old)?c.name:void 0))return o?[this.textEntity("changed the name (from "+e.old.name+")")]:[this.textEntity("renamed"),this.cardEntity(e.card,e.board),this.textEntity("(from "+e.old.name+")")];if(null!=(null!=(d=e.old)?d.desc:void 0))return o?[this.textEntity("changed description")]:[this.textEntity("changed description of"),this.cardEntity(e.card,e.board)];if(null!=(null!=(u=e.old)?u.pos:void 0))return s=e.old.pos<e.card.pos,o?[this.textEntity("moved "+(s?"higher":"lower"))]:[this.textEntity("moved"),this.cardEntity(e.card,e.board),this.textEntity(s?"higher":"lower")];if(null!=(null!=(p=e.old)?p.closed:void 0))return o?[this.textEntity(e.card.closed?"archived":"sent to the board")]:(a=[this.textEntity(e.card.closed?"archived":"sent"),this.cardEntity(e.card,e.board)],e.card.closed||a.push(this.textEntity("to the board")),a);break;case"commentCard":return[this.textEntity("on",e.card.id,!0),this.cardEntity(e.card,e.board,!0),this.commentEntity(e.text,_.pick(e,["card","board","embedly","textData"]))];case"copyCommentCard":return[this.textEntity("copied comment by"),this.memberEntity(e.idOriginalCommenter),this.textEntity("from card"),this.cardEntity(e.cardSource,e.board,!0),this.commentEntity(e.text,_.pick(e,["card","board","embedly","textData"]))];case"addMemberToCard":return e.idMember===t?o?[this.textEntity("joined")]:[this.textEntity("joined"),this.cardEntity(e.card,e.board)]:o?[this.textEntity("added"),this.memberEntity(e.idMember)]:[this.textEntity("added"),this.memberEntity(e.idMember),this.textEntity("to"),this.cardEntity(e.card,e.board)];case"removeMemberFromCard":return e.idMember===t?o?[this.textEntity("left")]:[this.textEntity("left"),this.cardEntity(e.card,e.board)]:o?[this.textEntity("removed"),this.memberEntity(e.idMember)]:[this.textEntity("removed"),this.memberEntity(e.idMember),this.textEntity("from"),this.cardEntity(e.card,e.board)];case"addChecklistToCard":return o?[this.textEntity("added"),this.checklistEntity(e.checklist)]:[this.textEntity("added"),this.checklistEntity(e.checklist),this.textEntity("to"),this.cardEntity(e.card,e.board)];case"removeChecklistFromCard":return o?[this.textEntity("removed"),this.checklistEntity(e.checklist)]:[this.textEntity("removed"),this.checklistEntity(e.checklist),this.textEntity("from"),this.cardEntity(e.card,e.board)];case"voteOnCard":return[this.textEntity(e.voted?"voted for":"removed vote for"),this.cardEntity(e.card,e.board)];case"addLabelToCard":return o?[this.textEntity("added"),this.labelEntity(e.value,e.text)]:[this.textEntity("added the"),this.labelEntity(e.value,e.text),this.textEntity("label to"),this.cardEntity(e.card,e.board)];case"removeLabelFromCard":return o?[this.textEntity("removed"),this.labelEntity(e.value,e.text)]:[this.textEntity("removed the"),this.labelEntity(e.value,e.text),this.textEntity("label from"),this.cardEntity(e.card,e.board)];case"updateCheckItemStateOnCard":return r="complete"===e.checkItem.state,o?(a=[this.textEntity(r?"completed":"marked"),this.checkItemEntity(e.checkItem,_.pick(e,["card","board","checkItem"]))],r||a.push(this.textEntity("incomplete")),a):[this.textEntity(r?"completed":"marked"),this.checkItemEntity(e.checkItem,_.pick(e,["card","board","checkItem"])),this.textEntity(r?"on":"incomplete on"),this.cardEntity(e.card,e.board)];case"addAttachmentToCard":return o?[this.textEntity("attached"),this.attachmentEntity(e.attachment),this.attachmentPreviewEntity(e.attachment)]:[this.textEntity("attached"),this.attachmentEntity(e.attachment),this.textEntity("to"),this.cardEntity(e.card,e.board),this.attachmentPreviewEntity(e.attachment)];case"deleteAttachmentFromCard":return o?[this.textEntity("deleted"),this.attachmentEntity(e.attachment)]:[this.textEntity("deleted the"),this.attachmentEntity(e.attachment),this.textEntity("attachment from"),this.cardEntity(e.card,e.board)]}},n.prototype.getMemberEntityList=function(e){var t,i,n,r;switch(e.type){case"updateMember":if(null!=(null!=(t=e.old)?t.bio:void 0))return[this.textEntity("updated their bio")];if(null!=(null!=(i=e.old)?i.username:void 0))return[this.textEntity("updated their username")];if(null!=(null!=(n=e.old)?n.initials:void 0))return[this.textEntity("updated their initials")];if(null!=(null!=(r=e.old)?r.fullName:void 0))return[this.textEntity("updated their display name")]}},n.prototype.getListEntityList=function(e,t,i){var n,r,o,s,a,l;if(i.includeBoard)return _.flatten([this.getListEntityList(e,t,_.extend({},i,{includeBoard:!1})),this.textEntity("on"),this.boardEntity(e.board)]);switch(e.type){case"createList":return[this.textEntity("added"),this.listEntity(e.list),this.textEntity("to"),this.boardEntity(e.board)];case"updateList":if(null!=(null!=(o=e.old)?o.name:void 0))return[this.textEntity("renamed"),this.listEntity(e.list),this.textEntity("(from "+e.old.name+")")];if(null!=(null!=(s=e.old)?s.pos:void 0))return n=(null!=(a=e.old)?a.pos:void 0)>e.list.pos,[this.textEntity("moved"),this.listEntity(e.list),this.textEntity((n?"left":"right")+" on"),this.boardEntity(e.board)];if(null!=(null!=(l=e.old)?l.closed:void 0))return r=[this.textEntity(e.list.closed?"archived":"sent"),this.listEntity(e.list)],e.list.closed||r.push(this.textEntity("to the board")),r}},n.prototype.getChecklistEntityList=function(e){var t;switch(e.type){case"createChecklist":return[this.textEntity("created"),this.checklistEntity(e.checklist),this.textEntity("on"),this.boardEntity(e.board)];case"updateChecklist":if(null!=(null!=(t=e.old)?t.name:void 0))return[this.textEntity("renamed"),this.checklistEntity(e.checklist),this.textEntity("(from "+e.old.name+")")]}},n.prototype.getCheckItemEntityList=function(e){var t,i,n,r,o;switch(e.textData=null!=(n=e.checkItem)?n.textData:void 0,t=_.pick(e,["card","board","textData","checkItem"]),e.type){case"updateCheckItem":if(null!=(null!=(r=e.old)?r.name:void 0))return[this.textEntity("renamed"),this.checkItemEntity(e.checkItem,t),this.textEntity("(from "+e.old.name+")")];if(null!=(null!=(o=e.old)?o.pos:void 0))return i=e.old.pos>e.checkItem.pos,[this.textEntity("moved"),this.checkItemEntity(e.checkItem,t),this.textEntity((i?"higher":"lower")+" in the checklist"),this.checklistEntity(e.checklist)];break;case"deleteCheckItem":return[this.textEntity("deleted task"),this.checkItemEntity(e.checkItem,t),this.textEntity("on"),this.checklistEntity(e.checklist)];case"convertToCardFromCheckItem":return[this.textEntity("converted"),this.cardEntity(e.card,e.board),this.textEntity("from a checklist item on"),this.cardEntity(e.cardSource,e.board)]}},n.prototype.getOrganizationEntityList=function(e,t){var i,n,r,o,s;switch(e.type){case"createOrganization":return[this.textEntity("created"),this.organizationEntity(e.organization)];case"updateOrganization":if(null!=(null!=(n=e.old)?n.desc:void 0))return[this.textEntity("changed description of"),this.organizationEntity(e.organization)];if(null!=(null!=(r=e.old)?r.name:void 0))return[this.textEntity("changed name of"),this.organizationEntity(e.organization)];if(null!=(null!=(o=e.old)?o.displayName:void 0))return[this.textEntity("changed display name of"),this.organizationEntity(e.organization)];if(null!=(null!=(s=e.old)?s.website:void 0))return[this.textEntity("changed website of"),this.organizationEntity(e.organization)];break;case"addMemberToOrganization":return null!=e.idMemberAdded&&e.idMemberAdded!==e.idMemberCreator?(i=[this.textEntity("added"),this.memberEntity(e.idMemberAdded),this.textEntity("to"),this.organizationEntity(e.organization)],null!=e.memberType&&"normal"!==e.memberType&&i.push(this.textEntity("as an "+e.memberType)),i):[this.textEntity("joined"),this.organizationEntity(e.organization)];case"removeMemberFromOrganization":return e.idMember===t?[this.textEntity("left"),this.organizationEntity(e.organization)]:[this.textEntity("removed"),this.memberEntity(e.idMember),this.textEntity("from"),this.organizationEntity(e.organization)];case"makeAdminOfOrganization":return e.idMember===t?[this.textEntity("became an admin of"),this.boardEntity(e.organization)]:[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("an admin of"),this.boardEntity(e.organization)];case"makeNormalMemberOfOrganization":return e.idMember===t?[this.textEntity("became a normal user in"),this.boardEntity(e.organization)]:[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("a normal user in"),this.boardEntity(e.organization)];case"addAdminToOrganization":return[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("an admin of"),this.organizationEntity(e.organization)];case"removeAdminFromOrganization":return e.idMember===t?[this.textEntity("became a normal user on"),this.organizationEntity(e.organization)]:[this.textEntity("made"),this.memberEntity(e.idMember),this.textEntity("a normal user on"),this.organizationEntity(e.organization)]}},n.prototype.getOrganizationInvitationEntityList=function(e){switch(e.type){case"createOrganizationInvitation":return[this.textEntity("created an invitation to"),this.organizationEntity(e.organization)];case"unconfirmedOrganizationInvitation":return[this.textEntity("invited an unconfirmed member to"),this.organizationEntity(e.organization)];case"deleteOrganizationInvitation":return[this.textEntity("deleted an invitation to"),this.organizationEntity(e.organization)]}},n.prototype.getBoardInvitationEntityList=function(e){switch(e.type){case"createBoardInvitation":return[this.textEntity("created an invitation to"),this.boardEntity(e.board)];case"unconfirmedBoardInvitation":return[this.textEntity("invited an unconfirmed member to"),this.boardEntity(e.board)];case"deleteBoardInvitation":return[this.textEntity("deleted an invitation to"),this.boardEntity(e.board)]}},n.prototype.getPowerUpEntityList=function(e){var t;switch(t=e.value in POWERUP_STRINGS.powerUpNames?POWERUP_STRINGS.powerUpNames[e.value].toLowerCase():e.value,e.type){case"enablePowerUp":return[this.textEntity("enabled the "+t+" power-up")];case"disablePowerUp":return[this.textEntity("disabled the "+t+" power-up")]}},n.prototype._getData=function(e,t){var i,n,r,o,s,a,l;for(i=t.toJSON(),o=e.toJSON(),n=_.extend({},i,i.data),l=["card","list","board"],s=0,a=l.length;a>s;s++)r=l[s],null!=o.data[r]&&(n.data[r]=o.data[r]);return n},n.prototype.getSingleEntityList=function(e,t,i){var n,r,o,s;return n=this._getData(e,t),s=this.memberEntity(n.idMemberCreator),r={Board:"getBoardEntityList",Member:"getMemberEntityList",Card:"getCardEntityList",List:"getListEntityList",Checklist:"getChecklistEntityList",CheckItem:"getCheckItemEntityList",Organization:"getOrganizationEntityList",OrganizationInvitation:"getOrganizationInvitationEntityList",BoardInvitation:"getBoardInvitationEntityList",PowerUp:"getPowerUpEntityList"},o=function(e){return function(){var t,o;for(o in r)if(t=r[o],new RegExp(o+"$").test(n.type))return e[t](n,s.id,i)}}(this)(),null==o&&(o=[]),o.unshift(s),this.orderEntityList(o),o},n.prototype.getEntityList=function(e,i,n){var r,o,s,a,l,c,d,u,p,h,m,f,g;if(null==n&&(n={}),null==i&&(i=[e]),this.idAction=this.getId(i[0]),1===i.length)return d=this.getSingleEntityList(e,i[0],n),{entities:d,list:d};for(p=this.memberEntity(i[0].get("idMemberCreator")),l=_.find(i,function(e){var i;return i=e.get("type"),__indexOf.call(t,i)>=0}),o=[],h=0,m=i.length;m>h;h++)r=i[h],f=r.get("type"),__indexOf.call(t,f)<0&&(c=r.toJSON(),_.extend(c,c.data),this.idAction=this.getId(r),r=this.getCardEntityList(c,p.id,_.extend({},n,{grouped:!0})),r&&(this.orderEntityList(r),o.push({_id:this.idAction,entities:r,list:r})));return this.idAction=this.getId(i[0]),u=[p],l?(u=u.concat(this.getCardEntityList(this._getData(e,l),p.id,_.extend({},n,{grouped:!0}))),u.push(this.textEntity("and"))):(g=e.get("data"),a=g.card,s=g.board,u.push(this.textEntity("on",a.id,!0)),u.push(this.cardEntity(a,s,!0))),this.orderEntityList(u),{entities:u,list:u,children:o}},n.prototype.getMember=function(){throw Error("NotImplemented")},n.prototype.getBoard=function(){return{}},n.prototype.getEntityLists=function(e,t){var i,n,a,l,c,u,p,h,m,f,g,b,v,y,w,k,C;for(null==t&&(t={}),c={compact:!0},t=_.extend({},c,t),b=0,u=[],a={},p=v=0,w=e.length;w>v;p=++v)if(i=e[p],!a[i.id]){if(null!=t.limit&&b>=t.limit)break;for(n=[i],f=y=k=p+1,C=e.length;(C>=k?C>y:y>C)&&(m=e[f],!s(i,m));f=C>=k?++y:--y)o(i,m)&&(n.push(m),a[m.id]=!0);_.isEmpty(n)||(g=n[0],n=d(_.reject(n,r)),null!=t.excludeTypes&&(n=_.filter(n,function(){return function(e){var i;return i=e.get("type"),__indexOf.call(t.excludeTypes,i)<0}}(this))),_.isEmpty(n)||(h=_.pluck([g].concat(n),"id").join("_"),t.key&&(h=t.key+"_"+h),l=n[0].get("date"),u.push(_.extend(this.getEntityList(g,n,t),{db_id:this.getId(n[0]),_id:h,date:l})),b++))}return u},n.prototype.groupActions=function(e,t){var i,n,a,l,c,u,p,h,m,f,g,b,v;for(null==t&&(t={}),a={},c=[],l=_.filter(e,function(e){var i,n;return i=e.get("type"),__indexOf.call(null!=(n=t.excludeTypes)?n:[],i)<0&&!r(e)}),u=m=0,g=l.length;g>m;u=++m)if(i=l[u],!a[i.id]){if(null!=t.limit&&c.length>=t.limit)break;for(n=[i],h=f=b=u+1,v=l.length;(v>=b?v>f:f>v)&&(p=l[h],!s(i,p));h=v>=b?++f:--f)o(i,p)&&(n.push(p),a[p.id]=!0);n=d(n),_.isEmpty(n)||c.push(n)}return c},n}(EntityListGenerator),r=function(){return function(e){var t,n,r,o,s,a,l,c;return t=null!=(n="function"==typeof e.toJSON?e.toJSON():void 0)?n:e,"updateCard"!==t.type||null==t.data.listBefore&&null==(null!=(r=t.data.old)?r.closed:void 0)?"updateList"===t.type&&null!=(null!=(o=t.data.old)?o.closed:void 0)?!1:"updateMember"!==(s=t.type)&&"updateOrganization"!==s||null!=t.data.old&&(null==t.data.old.prefs||1!==_.keys(t.data.old).length)?"updateBoard"===(a=t.type)&&null!=(null!=(l=t.data.old)?l.labelNames:void 0)?!0:(c=t.type,__indexOf.call(i,c)>=0):!0:!1}}(this),t=["createCard","copyCard","emailCard"],a=["addAdminToBoard","addAdminToOrganization","addAttachmentToCard","addBoardsPinnedToMember","addChecklistToCard","addLabelToCard","addMemberToBoard","addMemberToCard","addMemberToOrganization","addToOrganizationBoard","commentCard","copyCommentCard","convertToCardFromCheckItem","copyBoard","createBoard","createBoardInvitation","createBoardPreference","createCard","copyCard","createChecklist","copyChecklist","createList","createOrganization","createOrganizationInvitation","deleteAttachmentFromCard","deleteBoardInvitation","deleteCard","deleteCheckItem","deleteOrganizationInvitation","disablePowerUp","emailCard","enablePowerUp","makeAdminOfBoard","makeAdminOfOrganization","makeNormalMemberOfBoard","makeNormalMemberOfOrganization","makeObserverOfBoard","memberJoinedTrello","moveCardFromBoard","moveListFromBoard","moveCardToBoard","moveListToBoard","removeAdminFromBoard","removeAdminFromOrganization","removeBoardsPinnedFromMember","removeChecklistFromCard","removeFromOrganizationBoard","removeLabelFromCard","removeMemberFromBoard","removeMemberFromCard","removeMemberFromOrganization","unconfirmedBoardInvitation","unconfirmedOrganizationInvitation","updateBoard","updateCard","updateCheckItem","updateCheckItemStateOnCard","updateChecklist","updateList","updateMember","updateOrganization","voteOnCard"],s=["updateCard:idList","updateCard:closed","updateCard:desc","updateCard:name","updateList:closed","updateList:name"],i=["addAdminToBoard","addAdminToOrganization","addBoardsPinnedToMember","addLabelToCard","copyChecklist","createBoardInvitation","createBoardPreference","createChecklist","createCheckItem","createOrganizationInvitation","deleteCheckItem","deleteComment","makeAdminOfOrganization","removeBoardsPinnedFromMember","removeLabelFromCard","removeMemberFromBoard","removeMemberFromOrganization","updateCard","updateCheckItem","updateComment","updateList","voteOnCard"],o=["addAttachmentToCard","addChecklistToCard","addMemberToCard","commentCard","copyCommentCard","convertToCardFromCheckItem","createCard","deleteAttachmentFromCard","removeChecklistFromCard","removeMemberFromCard","updateCard:closed","updateCard:desc","updateCard:name","updateCheckItemStateOnCard"],n=_.difference(i,["updateCard","updateList"]),e=_.difference(_.union(a,s),n),SharedActionList}();var Accounts,reverseStandings,standings,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};standings={none:-1,"new":0,processing:1,denied:2,good:3,overdue:4,disabled:5,cancelled:6,"change processing":7,"change denied":8,"change finished":9,authorizing:10,"product specific processing":11,"free trial":12,"pending product specific processing":13,"pending authorizing":14,deleted:15},reverseStandings=_.invert(standings),Accounts={init:function(e,t){var i,n,r;i=_.extend({},Accounts);for(n in e)r=e[n],n=parseInt(n,10),r=_.defaults(r,{interval:"monthly",hidden:!1,prebill:!0,perUser:!1}),i.products[n]=r.name,r.hidden||(i.productShortNames[r.shortName]=n),r.prebill&&i.prebilledProducts.push(n),r.perUser&&i.perUserProducts.push(n),i.productFeatures[n]=r.features,i.prices[n]=r.price,i.intervals[n]=r.interval;return _.extend(i,t)},standings:standings,reverseStandings:reverseStandings,activeStandings:[3,4,7,8,9,11,12,13,14],processingStandings:[1,7,10,11,13,14],overdueStandings:[4],needCCStandings:[2,5],cancelledStandings:[6],products:{},prices:{},intervals:{},productShortNames:{},prebilledProducts:[],productFeatures:{},perUserProducts:[],globalFeatures:[],_convertToId:function(e){return _.isString(e)?/^\d+$/.test(e)?parseInt(e,10):this.productShortNames[e]:e},getProductNumber:function(e){return this._convertToId(e)},getPrice:function(e){return this.prices[this._convertToId(e)]},formatPrice:function(e){var t,i,n;return t=null!=(n=this.getPrice(e))?n:"??",i=this.isPerUser(e)?" per user":"","$"+t+i},getInterval:function(e){return this.intervals[this._convertToId(e)]},isMonthly:function(e){return"monthly"===this.getInterval(e)},isPerUser:function(e){var t;return t=this._convertToId(e),__indexOf.call(this.perUserProducts,t)>=0},getYearlyDiscount:function(e,t){var i,n,r;return r=this.getPrice(e),n=12*this.getPrice(t),i=Math.round(100*(n-r)/n),""+i+"%"},features:function(e){var t;return _.unique(_.flatten(function(){var i,n,r,o;for(r=null!=e?e:[],o=[],i=0,n=r.length;n>i;i++)t=r[i],o.push(this.productFeatures[t]||[]);return o}.call(this)))},hasProduct:function(e){var t,i,n,r;for(r=null!=e?e:[],i=0,n=r.length;n>i;i++)if(t=r[i],t in this.products)return!0;return!1},hasAccount:function(e){return null!=e&&e!==Accounts.standings.none},active:function(e){var t;return null!=e&&(t=new Number(e.standing).valueOf(),__indexOf.call(Accounts.activeStandings,t)>=0)&&!_.isEmpty(e.products)},processing:function(e){var t;return Accounts.hasAccount(e)&&(t=new Number(e).valueOf(),__indexOf.call(Accounts.processingStandings,t)>=0)},problem:function(e){return e===Accounts.standings.overdue},cancelled:function(e){var t;return null==e?!1:(t=new Number(e.standing).valueOf(),Accounts.hasAccount(e.standing)&&(__indexOf.call(Accounts.cancelledStandings,t)>=0||__indexOf.call(Accounts.activeStandings,t)>=0&&__indexOf.call(Accounts.processingStandings,t)<0&&_.isEmpty(e.products)))},willExpire:function(e){var t,i;return(null!=(t=e.products)?t[0]:void 0)in(null!=(i=e.expirationDates)?i:{})},needCC:function(e){var t;return t=new Number(e).valueOf(),__indexOf.call(Accounts.needCCStandings,t)>=0},inactive:function(e){return Accounts.hasAccount(e)&&!Accounts.active(e)},standingName:function(e){return this.reverseStandings[e]},isFeatureEnabled:function(e,t){return __indexOf.call(this.globalFeatures,e)>=0||__indexOf.call(this.features(t),e)>=0}};var OrgFeatures,businessClassFeatures,businessClassFeatures_v2,products,__slice=[].slice;businessClassFeatures=["export","logo","observers","removal","activity","deactivated","orgCards","googleApps","orgMembersPage","superAdmins","prefs","inviteOrg","restrictVis","disableExternalMembers"],businessClassFeatures_v2=__slice.call(businessClassFeatures).concat(["goldMembers"],["csvExport"],["shortExportHistory"]),products={35:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:25,features:businessClassFeatures,hidden:!0,prebill:!1},36:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:200,features:businessClassFeatures,hidden:!0},39:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:50,features:businessClassFeatures,hidden:!0},40:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:500,features:businessClassFeatures,hidden:!0},96:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:5,features:businessClassFeatures_v2,perUser:!0},97:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:45,features:businessClassFeatures_v2,perUser:!0}},OrgFeatures=Accounts.init(products,{globalFeatures:["logo"]});var MemberFeatures,products,trelloGoldFeatures,trelloGoldFromBCFeatures,__slice=[].slice;trelloGoldFromBCFeatures=["additionalStickers","customStickers","additionalBoardBackgrounds","customBoardBackgrounds","largeAttachments","customEmoji","savedSearches"],trelloGoldFeatures=__slice.call(trelloGoldFromBCFeatures).concat(["crown"]),products={10:{shortName:"trelloGoldFromBC",name:"Trello Gold from BC",features:trelloGoldFromBCFeatures},37:{shortName:"trelloGoldMonthly",name:"Trello Gold",interval:"monthly",price:5,features:trelloGoldFeatures},38:{shortName:"trelloGoldYearly",name:"Trello Gold",interval:"yearly",price:45,features:trelloGoldFeatures}},MemberFeatures=Accounts.init(products);var SharedNotification,getDeltaString,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};getDeltaString=function(e){var t,i,n,r,o;return i=function(e){return e>1?"s":""},(n=e.getUTCDate())>1?(t=n-1,""+t+" day"+i(t)):(r=e.getUTCHours())>0?23===r?"1 day":""+r+" day"+i(r):(o=e.getUTCMinutes())>0?o>=55?"1 hour":""+o+" day"+i(o):"now"},SharedNotification=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getEntityList=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y,w;if(this.idAction=this.getId(e),_.isFunction(e.toJSON)&&(e=e.toJSON()),t=e.data,i=[],null!=e.idMemberCreator&&i.push(this.memberEntity(e.idMemberCreator)),/Card$/.test(e.type)){switch(e.type){case"addedMemberToCard":e.idMemberCreator===(null!=(s=t.member)?s.id:void 0)?i.push(this.textEntity("joined the card")):(i.push(this.textEntity("added")),i.push(this.memberEntity(null!=(a=t.member)?a.id:void 0)),i.push(this.textEntity("to the card")));break;case"removedMemberFromCard":e.idMemberCreator===(null!=(h=t.member)?h.id:void 0)?i.push(this.textEntity("left the card")):(i.push(this.textEntity("removed")),i.push(this.memberEntity(null!=(m=t.member)?m.id:void 0)),i.push(this.textEntity("from the card")));break;case"changeCard":i.push(null!=(null!=(f=t.old)?f.name:void 0)?this.textEntity("renamed the card"):null!=(null!=(g=t.old)?g.desc:void 0)?this.textEntity("updated the description of the card"):null!=(null!=(b=t.old)?b.closed:void 0)?t.card.closed?this.textEntity("archived the card"):this.textEntity("unarchived the card"):null!=(null!=(v=t.old)?v.due:void 0)||null===(null!=(y=t.old)?y.due:void 0)?null!=(null!=(w=t.old)?w.due:void 0)?this.textEntity("changed the due date on the card"):this.textEntity("added a due date to the card"):null!=t.listAfter?this.textEntity("moved the card"):this.textEntity("changed the card"));break;case"createdCard":i.push(this.textEntity("created"));break;case"addedAttachmentToCard":i.push(this.textEntity("attached "+t.name+" to"));break;case"updateCheckItemStateOnCard":null!=t.checkItem?(i.push(this.textEntity(""+("complete"===t.state?"":"un")+"checked ")),i.push(this.checkItemEntity(t.checkItem,{card:t.card,board:t.board})),i.push(this.textEntity("on"))):i.push(this.textEntity(""+("complete"===t.state?"":"un")+"checked "+t.name+" on"));break;default:i.push(this.textEntity({commentCard:"commented on the card",addedToCard:"added you to the card",removedFromCard:"removed you from the card",mentionedOnCard:"mentioned you on the card"}[e.type]))}i.push(this.cardEntity(t.card,t.board)),"changeCard"===e.type&&null!=t.listAfter?(i.push(this.textEntity("to")),i.push(this.listEntity(t.listAfter))):"createdCard"===e.type&&(i.push(this.textEntity("in")),i.push(this.listEntity(t.list))),i.push(this.textEntity("on")),i.push(this.boardEntity(t.board)),"commentCard"!==(l=e.type)&&"mentionedOnCard"!==l||null==t.text?"addedAttachmentToCard"===e.type&&t.attachment&&i.push(this.attachmentPreviewEntity(t.attachment)):i.push(this.commentEntity(t.text,{card:t.card,board:t.board}))}else if(/Board$/.test(e.type))i.push(this.textEntity({removedFromBoard:"removed you from the board",invitedToBoard:"invited you to the board",unconfirmedInvitedToBoard:"added you to the board",addedToBoard:"added you to the board",addAdminToBoard:"made you an admin on the board",makeAdminOfBoard:"made you an admin on the board",closeBoard:"closed the board",declinedInvitationToBoard:""+t.fullName+" "+(null!=t.email?"("+t.email+") ":"")+"declined your invitation to the board"}[e.type])),i.push(this.boardEntity(t.board)),"unconfirmedInvitedToBoard"===e.type&&i.push(this.textEntity("Confirm your email address to see it.")),"addedToBoard"!==e.type||"observer"!==(c=t.memberType)&&"admin"!==c||i.push(this.textEntity("as an "+t.memberType));else if(/List$/.test(e.type)){switch(e.type){case"createdList":i.push(this.textEntity("created the list"));break;case"changeList":i.push((null!=(d=t.old)?d.closed:void 0)===!0?this.textEntity("unarchived the list"):(null!=(u=t.old)?u.closed:void 0)===!1?this.textEntity("archived the list"):this.textEntity("changed the list"))}i.push.apply(i,[this.listEntity(t.list),this.textEntity("on"),this.boardEntity(t.board)])}else/Organization$/.test(e.type)?(i.push(this.textEntity({removedFromOrganization:"removed you from the organization",addedToOrganization:"added you to the organization",invitedToOrganization:"invited you to the organization",unconfirmedInvitedToOrganization:"invited you to the organization",addAdminToOrganization:"made you an admin on the organization",makeAdminOfOrganization:"made you an admin of the organization",declinedInvitationToOrganization:""+t.fullName+" "+(null!=t.email?"("+t.email+") ":"")+"declined your invitation to the organization"}[e.type])),i.push(this.organizationEntity(t.organization)),"unconfirmedInvitedToOrganization"===e.type&&i.push(this.textEntity("Confirm your email address to see it.")),"addedToOrganization"===e.type&&"admin"===(p=t.memberType)&&i.push(this.textEntity("as an "+t.memberType))):"memberJoinedTrello"===e.type?(i.push(this.textEntity("joined Trello on your recommendation.")),null!=t&&t.earnedCredit&&"gold"===t.creditType&&i.push(this.textEntity("You earned a free month of Trello Gold!"))):"cardDueSoon"===e.type&&(i.push(this.cardEntity(t.card,t.board)),i.push(this.textEntity("on")),i.push(this.boardEntity(t.board)),i.push(this.relDateEntity(t.card.due,"due")));for(r=0,o=i.length;o>r;r++)n=i[r],n[n.type+"Type"]=!0;return this.orderEntityList(i)},t.prototype.getEntityLists=function(e,t){var i,n,r,o;for(null==t&&(t={}),o=[],n=0,r=e.length;r>n;n++)i=e[n],o.push(this.getEntityList(i));return o},t}(EntityListGenerator);var SharedABTest;SharedABTest=function(){function e(){}return e.prototype.getDefaultId=function(){return""},e.prototype.event=function(){},e.prototype.percentage=function(){return 50},e.prototype.inTest=function(e,t){return null==t&&(t=this.getDefaultId()),this.personalPercentage(e,t)<this.percentage(e,t)},e.prototype.personalPercentage=function(e,t){return parseInt(this._hasher(t+e).substr(0,8),16)%100},e.prototype.templateData=function(e,t){var i,n,r,o,s;for(n=/{{[\#\^]AB_([a-z0-9_]*)}}/gi,i={};r=null!=(s=n.exec(e))?s[1]:void 0;)null==i[o="AB_"+r]&&(i[o]=this.inTest(r,t));return i},e}();var CreditCard,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};CreditCard={luhn:function(e){var t,i,n,r,o,s,a,l,c,d,u,p;for(o=e.toString(),s=0,i=!1,u=o.split("").reverse(),a=0,c=u.length;c>a;a++){for(t=u[a],n=parseInt(t)*(i?2:1),p=n.toString().split(""),l=0,d=p.length;d>l;l++)r=p[l],s+=parseInt(r);i=!i}return s%10===0},providerFromNumber:function(e){var t,i,n,r,o,s,a,l,c;return i=e.toString(),t=function(e){return parseInt(i.substring(0,e))},n=t(2),__indexOf.call([51,52,53,54,55],n)>=0?"MasterCard":4===(r=t(1))?"Visa":34===(o=t(2))||37===o?"American Express":65===(s=t(2))||(a=t(3),__indexOf.call([644,645,646,647,648,649],a)>=0)||6011===(l=t(4))||622126<(c=t(6))&&622925>c?"Discover":void 0}};var POWERUP_STRINGS;POWERUP_STRINGS={powerUpNames:{voting:"Voting",cardAging:"Card Aging",calendar:"Calendar"},cardAgingModes:{regular:"regular",pirate:"pirate"},calendarFeedEnabledVerbs:{"true":"enabled","false":"disabled"}};var TrelloEmoji;TrelloEmoji={100:"https://d78fikflryjgj.cloudfront.net/images/emoji/f65f447b748c49a5c11361d46686b304/100.png",1234:"https://d78fikflryjgj.cloudfront.net/images/emoji/27c4a96fa154f6d7fe005badf4da39d4/1234.png","+1":"https://d78fikflryjgj.cloudfront.net/images/emoji/a0a5d07f60da887f916b5540f7cc14d4/%2B1.png","-1":"https://d78fikflryjgj.cloudfront.net/images/emoji/9155e2acc3925a32e544021a4893ebef/-1.png","8ball":"https://d78fikflryjgj.cloudfront.net/images/emoji/2134b68e36afc98a06ba4cf75540a337/8ball.png",a:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d0405e9adbc2b7986ea686d2bd5827d/a.png",ab:"https://d78fikflryjgj.cloudfront.net/images/emoji/b6dbd185b8dcaa1586fd49ba598dcf19/ab.png",abc:"https://d78fikflryjgj.cloudfront.net/images/emoji/3b2083bc78851af8a4595b5505cd1a48/abc.png",abcd:"https://d78fikflryjgj.cloudfront.net/images/emoji/e3fa9e918aff67325c0f88390b33ddef/abcd.png",accept:"https://d78fikflryjgj.cloudfront.net/images/emoji/7635d65e4e1f4dff30489cd119949407/accept.png",aerial_tramway:"https://d78fikflryjgj.cloudfront.net/images/emoji/70760dfb407d2af49052b5ac0d5733ad/aerial_tramway.png",airplane:"https://d78fikflryjgj.cloudfront.net/images/emoji/513615dfa059c3e1afc284d04748d75a/airplane.png",alarm_clock:"https://d78fikflryjgj.cloudfront.net/images/emoji/ebfffc6f6b6707b5485fb97780a7b414/alarm_clock.png",alien:"https://d78fikflryjgj.cloudfront.net/images/emoji/f095de9b586d31a7b39e4693803ab55b/alien.png",ambulance:"https://d78fikflryjgj.cloudfront.net/images/emoji/ca4868124267b4744ac220a84b3bfe5e/ambulance.png",anchor:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2be64fa3b41d6762418f03909489bff/anchor.png",angel:"https://d78fikflryjgj.cloudfront.net/images/emoji/c6c5e2703f026c6eff0161f102c6b822/angel.png",anger:"https://d78fikflryjgj.cloudfront.net/images/emoji/41bb5affb89f9252d1d4567ee3ff5e14/anger.png",angry:"https://d78fikflryjgj.cloudfront.net/images/emoji/a31dcd53dbf675d061cd4b9852bfb105/angry.png",anguished:"https://d78fikflryjgj.cloudfront.net/images/emoji/db9e6186e95dac80d5a51490900cd813/anguished.png",ant:"https://d78fikflryjgj.cloudfront.net/images/emoji/c3ede4848beb57ac9897bd5f87b4c981/ant.png",apple:"https://d78fikflryjgj.cloudfront.net/images/emoji/7ff0f4ad7964033a1966636cc2168aff/apple.png",aquarius:"https://d78fikflryjgj.cloudfront.net/images/emoji/d65e843c6ea33f97a3f4c6d8b5e7afad/aquarius.png",aries:"https://d78fikflryjgj.cloudfront.net/images/emoji/dbc8f8436f732f1a45eac3b8ced51f03/aries.png",arrow_backward:"https://d78fikflryjgj.cloudfront.net/images/emoji/4895dce40fbcb582460345eb92da6577/arrow_backward.png",arrow_double_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/3323dfd40905fbc63a1b67103a3e5970/arrow_double_down.png",arrow_double_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/5cad5a6ff81608d7df7059a11c262bea/arrow_double_up.png",arrow_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/1f6cf1d57ed571effae25df20d6121d6/arrow_down.png",arrow_down_small:"https://d78fikflryjgj.cloudfront.net/images/emoji/817a34a371cbb6191baea750c4b0d23a/arrow_down_small.png",arrow_forward:"https://d78fikflryjgj.cloudfront.net/images/emoji/9c06f993cbfc2d5c74eeee0c8a58d4a5/arrow_forward.png",arrow_heading_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/d16bd0975cc8ef50a3792a63a6eba308/arrow_heading_down.png",arrow_heading_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/415b637ddde8164a6a1290321c17da75/arrow_heading_up.png",arrow_left:"https://d78fikflryjgj.cloudfront.net/images/emoji/970edb46f2ac979ec3ae817c0d59c5cc/arrow_left.png",arrow_lower_left:"https://d78fikflryjgj.cloudfront.net/images/emoji/c2b8892bbe774f360b3582b33e66dc0f/arrow_lower_left.png",arrow_lower_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/f3622ad9cfda99031538d4f853885d84/arrow_lower_right.png",arrow_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/aac8aa63620adf9e8eb8489f804f621f/arrow_right.png",arrow_right_hook:"https://d78fikflryjgj.cloudfront.net/images/emoji/08f6c3234dfaa6867f3ca2b695cce688/arrow_right_hook.png",arrow_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/33d4b33d12abb058b0f37aca546c6247/arrow_up.png",arrow_up_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/618782d4e35683708cd81da4a61dad11/arrow_up_down.png",arrow_up_small:"https://d78fikflryjgj.cloudfront.net/images/emoji/7a80168de52c6e9e4d24721d9777a621/arrow_up_small.png",arrow_upper_left:"https://d78fikflryjgj.cloudfront.net/images/emoji/f3b11dd90e83e1f434060db7f3cebda2/arrow_upper_left.png",arrow_upper_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/c4598dddacd6af5d0f9559b777ddaef3/arrow_upper_right.png",arrows_clockwise:"https://d78fikflryjgj.cloudfront.net/images/emoji/782415cdd05f781df95f32438d7b5c35/arrows_clockwise.png",arrows_counterclockwise:"https://d78fikflryjgj.cloudfront.net/images/emoji/685335514e840b18be585d961e64f00a/arrows_counterclockwise.png",art:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d7730a4e6ac638412a51897a4352d30/art.png",articulated_lorry:"https://d78fikflryjgj.cloudfront.net/images/emoji/c2517a23d5dfc6518378218334877f4c/articulated_lorry.png",astonished:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae65dd6706611d78533382bcab005037/astonished.png",athletic_shoe:"https://d78fikflryjgj.cloudfront.net/images/emoji/36f024ff008ccbefda7ddffaf401aaed/athletic_shoe.png",atm:"https://d78fikflryjgj.cloudfront.net/images/emoji/53028816affc2803dea922c9b2038acb/atm.png",b:"https://d78fikflryjgj.cloudfront.net/images/emoji/2629cd16fbbac832ed1fcc905fa10e40/b.png",baby:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae245c721d7db60310b0cc09e25e4962/baby.png",baby_bottle:"https://d78fikflryjgj.cloudfront.net/images/emoji/b4be51a36913c6bb9294c4d22b476dd6/baby_bottle.png",baby_chick:"https://d78fikflryjgj.cloudfront.net/images/emoji/d0ab4e589537ab00b98aa85bde6070b1/baby_chick.png",baby_symbol:"https://d78fikflryjgj.cloudfront.net/images/emoji/cc09ba45643a58b24f951f23054c43a8/baby_symbol.png",back:"https://d78fikflryjgj.cloudfront.net/images/emoji/8d79972932f839571f1e2cad5ca2a8a5/back.png",baggage_claim:"https://d78fikflryjgj.cloudfront.net/images/emoji/260f28422e44ab2af3383aee09d36759/baggage_claim.png",balloon:"https://d78fikflryjgj.cloudfront.net/images/emoji/ad9cc73a83609752659638dc2b4a9c1d/balloon.png",ballot_box_with_check:"https://d78fikflryjgj.cloudfront.net/images/emoji/c274eb079d03223789da5e14c986d4f9/ballot_box_with_check.png",bamboo:"https://d78fikflryjgj.cloudfront.net/images/emoji/3811c429564c04e0728c8a0f149fe140/bamboo.png",banana:"https://d78fikflryjgj.cloudfront.net/images/emoji/5a96d729610eab1350a420d4dbd51f47/banana.png",bangbang:"https://d78fikflryjgj.cloudfront.net/images/emoji/7acb7907006e24728f4d5af4ede60d2e/bangbang.png",bank:"https://d78fikflryjgj.cloudfront.net/images/emoji/c2940c1118dca2daee17c635f3d2c395/bank.png",bar_chart:"https://d78fikflryjgj.cloudfront.net/images/emoji/141185d56ded3e0381e8f5e9c695691e/bar_chart.png",barber:"https://d78fikflryjgj.cloudfront.net/images/emoji/3649eccef1edffbd66a6518b665a41b9/barber.png",baseball:"https://d78fikflryjgj.cloudfront.net/images/emoji/5ae8159911acce8e1734bca36843dc13/baseball.png",basketball:"https://d78fikflryjgj.cloudfront.net/images/emoji/6d9587095cdb75d766ae87a196194c67/basketball.png",bath:"https://d78fikflryjgj.cloudfront.net/images/emoji/cfe863d3f3fbe7d70aa385ac11c5e499/bath.png",bathtub:"https://d78fikflryjgj.cloudfront.net/images/emoji/c8dd639751bd74cae2b96b4d12ae87c6/bathtub.png",battery:"https://d78fikflryjgj.cloudfront.net/images/emoji/045a933fef69fbdc861a63eb239cebb9/battery.png",bear:"https://d78fikflryjgj.cloudfront.net/images/emoji/4cac59632e8a729e84eeecfca7527e97/bear.png",bee:"https://d78fikflryjgj.cloudfront.net/images/emoji/a6c6f8b940f42688743046634de7a85f/bee.png",beer:"https://d78fikflryjgj.cloudfront.net/images/emoji/97564e2d91aee1c7078986f8502c9d61/beer.png",beers:"https://d78fikflryjgj.cloudfront.net/images/emoji/7ca64d7c7a8cda6e33b5b8c52e2f48c1/beers.png",beetle:"https://d78fikflryjgj.cloudfront.net/images/emoji/604df6d4431397d9a5b816d5161dd3db/beetle.png",beginner:"https://d78fikflryjgj.cloudfront.net/images/emoji/d47b8ed705bb89b6d7132e7f6228d465/beginner.png",bell:"https://d78fikflryjgj.cloudfront.net/images/emoji/ec1800a348078bcf5bcedade18b22bff/bell.png",bento:"https://d78fikflryjgj.cloudfront.net/images/emoji/0f026275236850b7d1db8e26055a06ec/bento.png",bicyclist:"https://d78fikflryjgj.cloudfront.net/images/emoji/90ab8806c66df3b19472c9750456d27c/bicyclist.png",bike:"https://d78fikflryjgj.cloudfront.net/images/emoji/e27110732dc3f0feb62e1e38e5896146/bike.png",bikini:"https://d78fikflryjgj.cloudfront.net/images/emoji/6daaca695f8b474deb1aaa5adb1d5863/bikini.png",bird:"https://d78fikflryjgj.cloudfront.net/images/emoji/33802943d9dd72fada05a061cedfab63/bird.png",birthday:"https://d78fikflryjgj.cloudfront.net/images/emoji/82b7253fa54d813b628a487b7a5946ee/birthday.png",black_circle:"https://d78fikflryjgj.cloudfront.net/images/emoji/a05b4473b907df89d71390ffa09e0a5b/black_circle.png",black_joker:"https://d78fikflryjgj.cloudfront.net/images/emoji/cf9a197eb11b7bb718404d19a01cbeda/black_joker.png",black_large_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/ca3fd8c5e4852ffbbd215ed4e88cfe48/black_large_square.png",black_medium_small_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/841a440c565e5539d57f06cc2d245b4a/black_medium_small_square.png",black_medium_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/e821f72ec5816a81246491ac4501c236/black_medium_square.png",black_nib:"https://d78fikflryjgj.cloudfront.net/images/emoji/e03a3f291d3219f4f916cd08a16a06b4/black_nib.png",black_small_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/398859c1676c00eb126f038ee7008176/black_small_square.png",black_square_button:"https://d78fikflryjgj.cloudfront.net/images/emoji/176be6ab8eae54ab2db9524adb76ae5b/black_square_button.png",blossom:"https://d78fikflryjgj.cloudfront.net/images/emoji/34fe17fa9e128061362f9b2c34997a12/blossom.png",blowfish:"https://d78fikflryjgj.cloudfront.net/images/emoji/048420e2651ef0874cf8588c20acd4d2/blowfish.png",blue_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/74707f1e4d7581c732dbb5c6a53fbbc9/blue_book.png",blue_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/32715857a405b8e6a3dc206f9ac12bdf/blue_car.png",blue_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/1e579d7bece1db6081416d5205a62474/blue_heart.png",blush:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b2cfd1772f827cf9fe052036b217c56/blush.png",boar:"https://d78fikflryjgj.cloudfront.net/images/emoji/5838786ec7b7b2fcb54b2adf563afe0a/boar.png",boat:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1c1c4dcaa77f509b36a3a170347c90c/boat.png",bomb:"https://d78fikflryjgj.cloudfront.net/images/emoji/435963333346d6cf4011e4d4de7825bc/bomb.png",book:"https://d78fikflryjgj.cloudfront.net/images/emoji/6561272c5be33e5e300e71e8e87ca634/book.png",bookmark:"https://d78fikflryjgj.cloudfront.net/images/emoji/2a7a1cee2c2e9b117dfe33079b80b599/bookmark.png",bookmark_tabs:"https://d78fikflryjgj.cloudfront.net/images/emoji/59b4ea688ffbca172d24a8e32e877764/bookmark_tabs.png",books:"https://d78fikflryjgj.cloudfront.net/images/emoji/d607a5044b2dd6c9a5360881efbd9870/books.png",boom:"https://d78fikflryjgj.cloudfront.net/images/emoji/ddf586005f3efb385fba44b4cf3f5ecf/boom.png",boot:"https://d78fikflryjgj.cloudfront.net/images/emoji/ffa15e8b3d6318b6e960d0f2ede0cb72/boot.png",bouquet:"https://d78fikflryjgj.cloudfront.net/images/emoji/397e712e135bf9cd01f4ca4e8fbe2686/bouquet.png",bow:"https://d78fikflryjgj.cloudfront.net/images/emoji/958f788ff97c7ce25a43758ba8879e96/bow.png",bowling:"https://d78fikflryjgj.cloudfront.net/images/emoji/3c4b641b87a7858fe05533b0cb4d997e/bowling.png",bowtie:"https://d78fikflryjgj.cloudfront.net/images/emoji/73de09ce6675cadd59755fc9297f7c49/bowtie.png",boy:"https://d78fikflryjgj.cloudfront.net/images/emoji/026d0e331ac06675ac08ca7e39504aa2/boy.png",bread:"https://d78fikflryjgj.cloudfront.net/images/emoji/383b7d154f96fb76abc5dac273f807db/bread.png",bride_with_veil:"https://d78fikflryjgj.cloudfront.net/images/emoji/ff57d51ad4cdb06dbd74f19e445dec3a/bride_with_veil.png",bridge_at_night:"https://d78fikflryjgj.cloudfront.net/images/emoji/ebe6fd47f403775923b6ceb54972befa/bridge_at_night.png",briefcase:"https://d78fikflryjgj.cloudfront.net/images/emoji/3f797c75bb6d36ae87cd1253f91f331c/briefcase.png",broken_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/0df631a3bd1141202f5f2f677c56adba/broken_heart.png",bug:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d1ce95a08e19f1c72e1ce3bc23023b1/bug.png",bulb:"https://d78fikflryjgj.cloudfront.net/images/emoji/4956e92e137d7306f517583ab588be82/bulb.png",bullettrain_front:"https://d78fikflryjgj.cloudfront.net/images/emoji/bd01d91592d56c6475acfde8301e7196/bullettrain_front.png",bullettrain_side:"https://d78fikflryjgj.cloudfront.net/images/emoji/9990dca7fb2548dafa221339361ed9be/bullettrain_side.png",bus:"https://d78fikflryjgj.cloudfront.net/images/emoji/8bbaca73ae1d1f2601fc40872f5c2f6a/bus.png",busstop:"https://d78fikflryjgj.cloudfront.net/images/emoji/775c2e2d813860e90786786dcf1dc7c5/busstop.png",bust_in_silhouette:"https://d78fikflryjgj.cloudfront.net/images/emoji/046812f68be8c8e15e15e07dfc20bb5e/bust_in_silhouette.png",busts_in_silhouette:"https://d78fikflryjgj.cloudfront.net/images/emoji/823bca4a1d8446fc02b516d844f15b99/busts_in_silhouette.png",cactus:"https://d78fikflryjgj.cloudfront.net/images/emoji/8f1a8aa7e80a85b9f862dbd7b69166d2/cactus.png",cake:"https://d78fikflryjgj.cloudfront.net/images/emoji/5854edbfed9e4aad0348c9d05f040648/cake.png",calendar:"https://d78fikflryjgj.cloudfront.net/images/emoji/126ce5c060840732c989979c63ed5b4c/calendar.png",calling:"https://d78fikflryjgj.cloudfront.net/images/emoji/05d38f25e8de098d71badaac0d90e474/calling.png",camel:"https://d78fikflryjgj.cloudfront.net/images/emoji/13800b13aa272e06d742e0f0a0e4b116/camel.png",camera:"https://d78fikflryjgj.cloudfront.net/images/emoji/53706742d28518821162817960cf6a80/camera.png",cancer:"https://d78fikflryjgj.cloudfront.net/images/emoji/81f91c28b72082a2ed24b3c4446210b1/cancer.png",candy:"https://d78fikflryjgj.cloudfront.net/images/emoji/da956b278978a716822152cbb069b727/candy.png",capital_abcd:"https://d78fikflryjgj.cloudfront.net/images/emoji/79030dbcc2f40414b005023b6a3fc0d6/capital_abcd.png",capricorn:"https://d78fikflryjgj.cloudfront.net/images/emoji/ddb5c888a789b257ae043d658c434683/capricorn.png",car:"https://d78fikflryjgj.cloudfront.net/images/emoji/abf1ef7270298b7e4faa51585b584e4f/car.png",card_index:"https://d78fikflryjgj.cloudfront.net/images/emoji/50fbce751e0a5c5509b8b0601b6b1672/card_index.png",carousel_horse:"https://d78fikflryjgj.cloudfront.net/images/emoji/e54c22c9ebf5713cc3f76fe5f4a95e52/carousel_horse.png",cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/b2ebe9876a60d236f74e40c0d0c437dd/cat.png",cat2:"https://d78fikflryjgj.cloudfront.net/images/emoji/1a554677df4b067a1dad860a788b7997/cat2.png",cd:"https://d78fikflryjgj.cloudfront.net/images/emoji/404a244b5ef4676baaaf9dd58b4c2a05/cd.png",chart:"https://d78fikflryjgj.cloudfront.net/images/emoji/b9ef3ef8c6e52f683f08f07c2e2b29f4/chart.png",chart_with_downwards_trend:"https://d78fikflryjgj.cloudfront.net/images/emoji/ffc0498b51d6cbc9b0f3d2393b9fd3c9/chart_with_downwards_trend.png",chart_with_upwards_trend:"https://d78fikflryjgj.cloudfront.net/images/emoji/b2db9c7e04da9028dbf2ed04b7c4895d/chart_with_upwards_trend.png",checkered_flag:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b0272076cb1bca9d89728132c35326c/checkered_flag.png",cherries:"https://d78fikflryjgj.cloudfront.net/images/emoji/eee1d6ba5624741ba3d87711f2040025/cherries.png",cherry_blossom:"https://d78fikflryjgj.cloudfront.net/images/emoji/e881179fbb3f810db386263b6780a417/cherry_blossom.png",chestnut:"https://d78fikflryjgj.cloudfront.net/images/emoji/9bf1cca63f07d7aed4315f0dd389aad9/chestnut.png",chicken:"https://d78fikflryjgj.cloudfront.net/images/emoji/ce9c66ca8d427412639a26aeba3295ce/chicken.png",children_crossing:"https://d78fikflryjgj.cloudfront.net/images/emoji/336d27ad6e975b47aa0ba6c3f6ed3373/children_crossing.png",chocolate_bar:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e645f96a5c19091407ceaa27e00c3d9/chocolate_bar.png",christmas_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ea555974a24e4eb4d03eb50aafa3fce/christmas_tree.png",church:"https://d78fikflryjgj.cloudfront.net/images/emoji/88e45a879eeaf285d1e200ea91940dfc/church.png",cinema:"https://d78fikflryjgj.cloudfront.net/images/emoji/4ca7678e60458476dba410085b446687/cinema.png",circus_tent:"https://d78fikflryjgj.cloudfront.net/images/emoji/4de404d51d4cd64fcdc8799955a7a68f/circus_tent.png",city_sunrise:"https://d78fikflryjgj.cloudfront.net/images/emoji/825eac0574320ec85dbca9277a7398f3/city_sunrise.png",city_sunset:"https://d78fikflryjgj.cloudfront.net/images/emoji/6954a73653866780cdd646ee59826f64/city_sunset.png",cl:"https://d78fikflryjgj.cloudfront.net/images/emoji/efb8a21b2574383c3528c5b21f9ec807/cl.png",clap:"https://d78fikflryjgj.cloudfront.net/images/emoji/f342a9b46d2ca0d96910452dc1e41291/clap.png",clapper:"https://d78fikflryjgj.cloudfront.net/images/emoji/e00bbd737549d1d4dbd775bf719465eb/clapper.png",clipboard:"https://d78fikflryjgj.cloudfront.net/images/emoji/53cec595ea2b473936cd1a24b30844cd/clipboard.png",clock1:"https://d78fikflryjgj.cloudfront.net/images/emoji/882daa0961d027f5647f01af5ece88b4/clock1.png",clock10:"https://d78fikflryjgj.cloudfront.net/images/emoji/b8e179ff2facab085c56e3851545e962/clock10.png",clock1030:"https://d78fikflryjgj.cloudfront.net/images/emoji/278aacf0a0afb23ff3de325f6b334f44/clock1030.png",clock11:"https://d78fikflryjgj.cloudfront.net/images/emoji/70ca65cbbe3c0c11a78182b48af0a6f7/clock11.png",clock1130:"https://d78fikflryjgj.cloudfront.net/images/emoji/204db35096fb2abbfd60fafb6afc5364/clock1130.png",clock12:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a89764b0a9df58e3a441abe234494a8/clock12.png",clock1230:"https://d78fikflryjgj.cloudfront.net/images/emoji/272c0b90efdcf0d8dc3c5e0c505a669b/clock1230.png",clock130:"https://d78fikflryjgj.cloudfront.net/images/emoji/32283ffcad745398e4b0340f612c17d0/clock130.png",clock2:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b88e0e539e7655f78456b39368a6d41/clock2.png",clock230:"https://d78fikflryjgj.cloudfront.net/images/emoji/fcf50a6152560afa3a86b075e692a884/clock230.png",clock3:"https://d78fikflryjgj.cloudfront.net/images/emoji/932ebeec5f924e2af9931afeda9e6193/clock3.png",clock330:"https://d78fikflryjgj.cloudfront.net/images/emoji/7a33814d8ee52c9cab018ec1ff40a4a3/clock330.png",clock4:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a666c2f9b19e0231c7215add0181937/clock4.png",clock430:"https://d78fikflryjgj.cloudfront.net/images/emoji/f8236e3c52e8ca50a1109f931f46b6b7/clock430.png",clock5:"https://d78fikflryjgj.cloudfront.net/images/emoji/102b4a2a58cdeaca12d04c0bf3cac376/clock5.png",clock530:"https://d78fikflryjgj.cloudfront.net/images/emoji/8918b8ab2093c0adb3e2c7c7857124b7/clock530.png",clock6:"https://d78fikflryjgj.cloudfront.net/images/emoji/620b5d603eb3022245f502d7ee3f5ee2/clock6.png",clock630:"https://d78fikflryjgj.cloudfront.net/images/emoji/789389003fa4763cb89a47e6066364a7/clock630.png",clock7:"https://d78fikflryjgj.cloudfront.net/images/emoji/5c5032d8bb9aefc097c02e0e27ba1539/clock7.png",clock730:"https://d78fikflryjgj.cloudfront.net/images/emoji/8a2d8833a8ec29eeba369d95cf3ba543/clock730.png",clock8:"https://d78fikflryjgj.cloudfront.net/images/emoji/a7a708c4e98b7e3fb17782e9d2efaed2/clock8.png",clock830:"https://d78fikflryjgj.cloudfront.net/images/emoji/19cb7852c06c21ff44eed74663813c6b/clock830.png",clock9:"https://d78fikflryjgj.cloudfront.net/images/emoji/7e4a201f0deb352b815881fd3dacad46/clock9.png",clock930:"https://d78fikflryjgj.cloudfront.net/images/emoji/65eabdccef310d3e364a6b1ca518978d/clock930.png",closed_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/aa33e361d68e9a87c22bede82e7acde0/closed_book.png",closed_lock_with_key:"https://d78fikflryjgj.cloudfront.net/images/emoji/ff3b3f7d7cc9b04edc4f9ebcc5943510/closed_lock_with_key.png",closed_umbrella:"https://d78fikflryjgj.cloudfront.net/images/emoji/350ad377b4d5f8dfee65b1b17c867b5e/closed_umbrella.png",cloud:"https://d78fikflryjgj.cloudfront.net/images/emoji/ea4bc0ec71175efd1adb964d0f0eee62/cloud.png",clubs:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d095eee11154d4854afdae13fc08a21/clubs.png",cn:"https://d78fikflryjgj.cloudfront.net/images/emoji/aeb25fda6ec7a7808f579cb9a0686df2/cn.png",cocktail:"https://d78fikflryjgj.cloudfront.net/images/emoji/c6a9668b74f9ccd61e38372c80331cc3/cocktail.png",coffee:"https://d78fikflryjgj.cloudfront.net/images/emoji/06d4e6dde787543889ca7e1d56b4b3f9/coffee.png",cold_sweat:"https://d78fikflryjgj.cloudfront.net/images/emoji/2f8e5a29bd79abcbf50716ad042c3789/cold_sweat.png",collision:"https://d78fikflryjgj.cloudfront.net/images/emoji/ddf586005f3efb385fba44b4cf3f5ecf/collision.png",computer:"https://d78fikflryjgj.cloudfront.net/images/emoji/73f6916b80552a9097ae888aaa6d4d8c/computer.png",confetti_ball:"https://d78fikflryjgj.cloudfront.net/images/emoji/95e4252669cec7287354aa724e078232/confetti_ball.png",confounded:"https://d78fikflryjgj.cloudfront.net/images/emoji/5ca7ecb902509845a629b3a0615bdf2d/confounded.png",confused:"https://d78fikflryjgj.cloudfront.net/images/emoji/6f7200921e0c36c8b57bce7f3a676755/confused.png",congratulations:"https://d78fikflryjgj.cloudfront.net/images/emoji/7d2be25699dec42913058d5a84a82885/congratulations.png",construction:"https://d78fikflryjgj.cloudfront.net/images/emoji/7f749f79f760b06c42217d22f8dfe11c/construction.png",construction_worker:"https://d78fikflryjgj.cloudfront.net/images/emoji/761ea847a6d7315b2835474ccbee8c6d/construction_worker.png",convenience_store:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ee9dd3caa0c06aa1fefea40febceb38/convenience_store.png",cookie:"https://d78fikflryjgj.cloudfront.net/images/emoji/4c2450f40a6cb7f786d9ddc8862ca83b/cookie.png",cool:"https://d78fikflryjgj.cloudfront.net/images/emoji/2827c50fae225439ff6ac51b1bf0a632/cool.png",cop:"https://d78fikflryjgj.cloudfront.net/images/emoji/a8e2b51d2610a2855586960c0f231217/cop.png",copyright:"https://d78fikflryjgj.cloudfront.net/images/emoji/fbe3b4b1d8d3efbcb0a9557ee693e348/copyright.png",corn:"https://d78fikflryjgj.cloudfront.net/images/emoji/e4e4b373ecd30b2235ee472ea9bbea06/corn.png",couple:"https://d78fikflryjgj.cloudfront.net/images/emoji/3b65de8238a0fb2476f4c04cc86efda9/couple.png",couple_with_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/168c8e4217f747c6a0a193d66d918814/couple_with_heart.png",couplekiss:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e0dcb6791032bf0557f547bdb21a124/couplekiss.png",cow:"https://d78fikflryjgj.cloudfront.net/images/emoji/d03207d5c7511efa4eb98479fbfd0be3/cow.png",cow2:"https://d78fikflryjgj.cloudfront.net/images/emoji/d8cc045dea278f2683c9ef6b280096bc/cow2.png",credit_card:"https://d78fikflryjgj.cloudfront.net/images/emoji/b6b6e9e0a208b6817dc39352392fe238/credit_card.png",crescent_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/49d88f3cfd07a0ae7165a1fddfc82ab1/crescent_moon.png",crocodile:"https://d78fikflryjgj.cloudfront.net/images/emoji/fb903ea20a7aa4ebe688533adba2df2c/crocodile.png",crossed_flags:"https://d78fikflryjgj.cloudfront.net/images/emoji/4439c680ceee55e77d8a0dfdf27e18de/crossed_flags.png",crown:"https://d78fikflryjgj.cloudfront.net/images/emoji/0fd502ff4ca02a7934abb3947343c01d/crown.png",cry:"https://d78fikflryjgj.cloudfront.net/images/emoji/50b0d14555ae34b2589bac53f0961736/cry.png",crying_cat_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/84d8a8dbf5a88fdb4176deaa394b90cc/crying_cat_face.png",crystal_ball:"https://d78fikflryjgj.cloudfront.net/images/emoji/99ea5d015548be3c0b2c5d7a4dd7fe48/crystal_ball.png",cupid:"https://d78fikflryjgj.cloudfront.net/images/emoji/81615531eae0568a9fcbdd28cf4f3603/cupid.png",curly_loop:"https://d78fikflryjgj.cloudfront.net/images/emoji/368b97171bdc7f20894a37cea0de5858/curly_loop.png",currency_exchange:"https://d78fikflryjgj.cloudfront.net/images/emoji/e70fa67a563b9809747038832719707b/currency_exchange.png",curry:"https://d78fikflryjgj.cloudfront.net/images/emoji/5f58d7055cca67b52e3a6a062c8585e2/curry.png",custard:"https://d78fikflryjgj.cloudfront.net/images/emoji/92c388864c6b043df093e554271c257c/custard.png",customs:"https://d78fikflryjgj.cloudfront.net/images/emoji/fe7ace16f33e07ae83e8e0861c53b71c/customs.png",cyclone:"https://d78fikflryjgj.cloudfront.net/images/emoji/24dc815c9286f1e64808da2eb7662e5b/cyclone.png",dancer:"https://d78fikflryjgj.cloudfront.net/images/emoji/d6000eabf08d50191b110ecd1bb7555e/dancer.png",dancers:"https://d78fikflryjgj.cloudfront.net/images/emoji/45190bfcdc3a46fcef007ccb353e4699/dancers.png",dango:"https://d78fikflryjgj.cloudfront.net/images/emoji/90f46f7317db550ec18b349caf0791a8/dango.png",dart:"https://d78fikflryjgj.cloudfront.net/images/emoji/23775f9b6e2c85c19354758824c563dd/dart.png",dash:"https://d78fikflryjgj.cloudfront.net/images/emoji/69da06f1eafe70f7d21ca25e9c789c84/dash.png",date:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb5d858c0ea28f4f5cfc2e125d72830e/date.png",de:"https://d78fikflryjgj.cloudfront.net/images/emoji/fd6b1db4c5c636b0db109f6078896aec/de.png",deciduous_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/6cfb9c3655b657f6b5a3299d9709a561/deciduous_tree.png",department_store:"https://d78fikflryjgj.cloudfront.net/images/emoji/0f36f9fdd0b33cad6e7f2e8811b5c09c/department_store.png",diamond_shape_with_a_dot_inside:"https://d78fikflryjgj.cloudfront.net/images/emoji/c0243db9d3d5558faa351bbd2617f8c7/diamond_shape_with_a_dot_inside.png",diamonds:"https://d78fikflryjgj.cloudfront.net/images/emoji/62f886cd7ab0be6b5878277a7f000ebf/diamonds.png",disappointed:"https://d78fikflryjgj.cloudfront.net/images/emoji/4145de5ddf63f745d4608e9dbf5485f3/disappointed.png",disappointed_relieved:"https://d78fikflryjgj.cloudfront.net/images/emoji/a7b1dae660fd732c0b74740551a457e8/disappointed_relieved.png",dizzy:"https://d78fikflryjgj.cloudfront.net/images/emoji/919453cbe211895258cf14a9401fd02d/dizzy.png",dizzy_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/4b7a43b87b92f14f0dc7d6de6d609141/dizzy_face.png",do_not_litter:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d32cd9a84403711040758a1863b51fa/do_not_litter.png",dog:"https://d78fikflryjgj.cloudfront.net/images/emoji/7e4b2365f2611866c041969f8f0a0aa3/dog.png",dog2:"https://d78fikflryjgj.cloudfront.net/images/emoji/0826ceb6b5d734768aacca88b6b61322/dog2.png",dollar:"https://d78fikflryjgj.cloudfront.net/images/emoji/16ffaa41863419b583f6758aac236cf9/dollar.png",dolls:"https://d78fikflryjgj.cloudfront.net/images/emoji/f0474864d3917c86f682ba1b10a3b9a4/dolls.png",dolphin:"https://d78fikflryjgj.cloudfront.net/images/emoji/e2681094bda06307b66364a4daff006f/dolphin.png",door:"https://d78fikflryjgj.cloudfront.net/images/emoji/c2712508b20cd87e4f7e4937c8b96b76/door.png",doughnut:"https://d78fikflryjgj.cloudfront.net/images/emoji/a282bf5cba01abf01f0dc9a266a55891/doughnut.png",dragon:"https://d78fikflryjgj.cloudfront.net/images/emoji/0d123d0ba37d50c824a4ca6340833680/dragon.png",dragon_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/4b40408361ab7ad90ceac2ee7a590a71/dragon_face.png",dress:"https://d78fikflryjgj.cloudfront.net/images/emoji/178d46b4a471314bb8d2078f022c297f/dress.png",dromedary_camel:"https://d78fikflryjgj.cloudfront.net/images/emoji/fae304ce06580c780c58ef6efaf7f9b1/dromedary_camel.png",droplet:"https://d78fikflryjgj.cloudfront.net/images/emoji/3f1f9931b25e05ad3599f681334000d1/droplet.png",dvd:"https://d78fikflryjgj.cloudfront.net/images/emoji/b451d5693f2bc61fe69b0ab3c6b68ced/dvd.png","e-mail":"https://d78fikflryjgj.cloudfront.net/images/emoji/fba7b6ecc5456013513ed1474bee9b90/e-mail.png",ear:"https://d78fikflryjgj.cloudfront.net/images/emoji/17f8979cf99e502c164140be9056211f/ear.png",ear_of_rice:"https://d78fikflryjgj.cloudfront.net/images/emoji/12a11a324fc8ef0ea903013af13394c3/ear_of_rice.png",earth_africa:"https://d78fikflryjgj.cloudfront.net/images/emoji/131d46af66224436762df67f7a799e3c/earth_africa.png",earth_americas:"https://d78fikflryjgj.cloudfront.net/images/emoji/c710661fa6000ba3ffdbe42f70219063/earth_americas.png",earth_asia:"https://d78fikflryjgj.cloudfront.net/images/emoji/a6d220eb13015f762054d243f06e75a3/earth_asia.png",egg:"https://d78fikflryjgj.cloudfront.net/images/emoji/bbcc80f6035892002a94f7dff30cea61/egg.png",eggplant:"https://d78fikflryjgj.cloudfront.net/images/emoji/c6743d7582b47d54cb672fc68cfb725d/eggplant.png",eight:"https://d78fikflryjgj.cloudfront.net/images/emoji/d01706294ea77a538496376c9429c77b/eight.png",eight_pointed_black_star:"https://d78fikflryjgj.cloudfront.net/images/emoji/7bc21d67acd4b44d248ae89283bf87e8/eight_pointed_black_star.png",eight_spoked_asterisk:"https://d78fikflryjgj.cloudfront.net/images/emoji/97ec7f4a6266aff7b7f07e4bca7f1358/eight_spoked_asterisk.png",electric_plug:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ffacdb29ec38cfc327ec6f784d77443/electric_plug.png",elephant:"https://d78fikflryjgj.cloudfront.net/images/emoji/75d89b44a9d974425369472ee00414ad/elephant.png",email:"https://d78fikflryjgj.cloudfront.net/images/emoji/1fabc149ec15ded868eb7d32d9d10daa/email.png",end:"https://d78fikflryjgj.cloudfront.net/images/emoji/5793390e4de633d7baec09fc6cbfa7b3/end.png",envelope:"https://d78fikflryjgj.cloudfront.net/images/emoji/1fabc149ec15ded868eb7d32d9d10daa/envelope.png",envelope_with_arrow:"https://d78fikflryjgj.cloudfront.net/images/emoji/e2b6bc654f1d5170735fd7fa5de02d8b/envelope_with_arrow.png",es:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e8a8d6bc5e64afbdb9839e58454f6b8/es.png",euro:"https://d78fikflryjgj.cloudfront.net/images/emoji/96ee1235d3a4339cac0d9a515a5d0ccb/euro.png",european_castle:"https://d78fikflryjgj.cloudfront.net/images/emoji/608b39899571685e3c95dd071f4e8e2a/european_castle.png",european_post_office:"https://d78fikflryjgj.cloudfront.net/images/emoji/70c6c39af8cc1df2f0a4438401688c6f/european_post_office.png",evergreen_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/d6abc94c9825ae86175b09c4d005d056/evergreen_tree.png",exclamation:"https://d78fikflryjgj.cloudfront.net/images/emoji/56399206fd046f4499d820e1bed93f43/exclamation.png",expressionless:"https://d78fikflryjgj.cloudfront.net/images/emoji/b5484b7b019c8d96bd0cd59fd027102a/expressionless.png",eyeglasses:"https://d78fikflryjgj.cloudfront.net/images/emoji/caffd40ac5e0dd54145128c212772a27/eyeglasses.png",eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/eb697aad09b733789a819b908acfbae6/eyes.png",facepalm:"https://d78fikflryjgj.cloudfront.net/images/emoji/2288768c1bed245ca6801c6cdf6fe029/facepalm.png",facepunch:"https://d78fikflryjgj.cloudfront.net/images/emoji/0902dded44c402bd7707bcd447dbe33c/facepunch.png",factory:"https://d78fikflryjgj.cloudfront.net/images/emoji/f55dfda77c13bd3a7ed49a4a5e7945ec/factory.png",fallen_leaf:"https://d78fikflryjgj.cloudfront.net/images/emoji/95358eb5cfc87a496db7848bafa88740/fallen_leaf.png",family:"https://d78fikflryjgj.cloudfront.net/images/emoji/d95fc7aa21ebc573c11a85c3881d3927/family.png",fast_forward:"https://d78fikflryjgj.cloudfront.net/images/emoji/3bc55373d7e7d053e0c0fc37116c3e6b/fast_forward.png",fax:"https://d78fikflryjgj.cloudfront.net/images/emoji/65afa262a89b88935ae2182bab928fd5/fax.png",fearful:"https://d78fikflryjgj.cloudfront.net/images/emoji/3b8b18c0108ef96ba9f8b9cf230b4224/fearful.png",feelsgood:"https://d78fikflryjgj.cloudfront.net/images/emoji/4fab33ad41d47ca1e4104662adba4a96/feelsgood.png",feet:"https://d78fikflryjgj.cloudfront.net/images/emoji/a8fda9184043373f1891bdc8bfff8919/feet.png",ferris_wheel:"https://d78fikflryjgj.cloudfront.net/images/emoji/94232f8c9ed9e17408e19d641fc2f23e/ferris_wheel.png",file_folder:"https://d78fikflryjgj.cloudfront.net/images/emoji/3e6fbd09769b2718dec27d89d3c42767/file_folder.png",finnadie:"https://d78fikflryjgj.cloudfront.net/images/emoji/a06963383cf98607925b04ac460867c3/finnadie.png",fire:"https://d78fikflryjgj.cloudfront.net/images/emoji/ed6d1412dd1363f8e943dc274baa80e9/fire.png",fire_engine:"https://d78fikflryjgj.cloudfront.net/images/emoji/51e5132bd36d91c9c0b12c7e6fdc3738/fire_engine.png",fireworks:"https://d78fikflryjgj.cloudfront.net/images/emoji/dfe615f29d76e6c294faf0e90037d2d0/fireworks.png",first_quarter_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/fa4cec74535c853115923bf73f7284a0/first_quarter_moon.png",first_quarter_moon_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/49fd3137f67a10767a3ababfc1377bdb/first_quarter_moon_with_face.png",fish:"https://d78fikflryjgj.cloudfront.net/images/emoji/217da876c1f56ddaf68dd7872fd5d52d/fish.png",fish_cake:"https://d78fikflryjgj.cloudfront.net/images/emoji/59ecf24c2d47f9d0477f5db83602e142/fish_cake.png",fishing_pole_and_fish:"https://d78fikflryjgj.cloudfront.net/images/emoji/3e4752beaec776965bad466532d44f1c/fishing_pole_and_fish.png",fist:"https://d78fikflryjgj.cloudfront.net/images/emoji/e43314959a71c5371221a0941776f382/fist.png",five:"https://d78fikflryjgj.cloudfront.net/images/emoji/1ac6e38d32f78a82bbe66c28a1e12171/five.png",flags:"https://d78fikflryjgj.cloudfront.net/images/emoji/26007c146603038de9dc2bffe4c184aa/flags.png",flashlight:"https://d78fikflryjgj.cloudfront.net/images/emoji/4674188219042dcd733b7a7e6612da14/flashlight.png",flipper:"https://d78fikflryjgj.cloudfront.net/images/emoji/e2681094bda06307b66364a4daff006f/flipper.png",floppy_disk:"https://d78fikflryjgj.cloudfront.net/images/emoji/ea0837ae63ec0ad4a04d350020da5496/floppy_disk.png",flower_playing_cards:"https://d78fikflryjgj.cloudfront.net/images/emoji/dca4585185d51c3d3793cffe35d785d1/flower_playing_cards.png",flushed:"https://d78fikflryjgj.cloudfront.net/images/emoji/a592c4f95188fbcc4e785ca0847fe2b0/flushed.png",foggy:"https://d78fikflryjgj.cloudfront.net/images/emoji/0e0f07212b04fa6d115ea989bf7d0c96/foggy.png",football:"https://d78fikflryjgj.cloudfront.net/images/emoji/2d58ac46fb26501cd23262c2a7ea014c/football.png",footprints:"https://d78fikflryjgj.cloudfront.net/images/emoji/f10532514820e5bc2a7809a41594eb3e/footprints.png",fork_and_knife:"https://d78fikflryjgj.cloudfront.net/images/emoji/2dc66dcde7d4b6a1d2556d0facf4eb8b/fork_and_knife.png",fountain:"https://d78fikflryjgj.cloudfront.net/images/emoji/d455da22e5c3ef3180f9b0d41fe1cdd2/fountain.png",four:"https://d78fikflryjgj.cloudfront.net/images/emoji/aac6493750398c1169b9343c6902f2cc/four.png",four_leaf_clover:"https://d78fikflryjgj.cloudfront.net/images/emoji/40d3669cc88281aaf23e4bff8f31d51f/four_leaf_clover.png",fr:"https://d78fikflryjgj.cloudfront.net/images/emoji/2c80adb041ec39143c3098f053868d8f/fr.png",free:"https://d78fikflryjgj.cloudfront.net/images/emoji/b54e770c12c83060703037f621cfe17b/free.png",fried_shrimp:"https://d78fikflryjgj.cloudfront.net/images/emoji/9c6a592d04832f5139cf8aa6de597736/fried_shrimp.png",fries:"https://d78fikflryjgj.cloudfront.net/images/emoji/08ab69eb404574615f3bb9569d496ca3/fries.png",frog:"https://d78fikflryjgj.cloudfront.net/images/emoji/d3b3f0dc3416f8f5f4a4e5b4d742c687/frog.png",frowning:"https://d78fikflryjgj.cloudfront.net/images/emoji/d2e23f78eef57f6683f5e3e4c0e16343/frowning.png",fu:"https://d78fikflryjgj.cloudfront.net/images/emoji/cac361a2a3da22d4bea4f192ca0ab151/fu.png",fuelpump:"https://d78fikflryjgj.cloudfront.net/images/emoji/ad90f27571ec9a002efb795b1c21bdea/fuelpump.png",full_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/dacc780014fc85556767221e2112bbc7/full_moon.png",full_moon_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/5ac3188cf68489fb38e6d8e9ce256da7/full_moon_with_face.png",game_die:"https://d78fikflryjgj.cloudfront.net/images/emoji/5e420fdbf01d1db3f1cd4f4f01ea6a15/game_die.png",gb:"https://d78fikflryjgj.cloudfront.net/images/emoji/085a66819b0bbc0133620b7b8688da1d/gb.png",gem:"https://d78fikflryjgj.cloudfront.net/images/emoji/3c47cd174e9ee92020168ccfb17d6d59/gem.png",gemini:"https://d78fikflryjgj.cloudfront.net/images/emoji/6563bbc6da452d335ede6f1e3de063d0/gemini.png",ghost:"https://d78fikflryjgj.cloudfront.net/images/emoji/01d789f3fe24b5c9c6a67a116fc516db/ghost.png",gift:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a7f536b329eeb9c60d9238a3ab9595d/gift.png",gift_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/e459178df0ca62152725273abf19bdfd/gift_heart.png",girl:"https://d78fikflryjgj.cloudfront.net/images/emoji/465c49417b71ccae1d41fad2cdcb1bd1/girl.png",globe_with_meridians:"https://d78fikflryjgj.cloudfront.net/images/emoji/e659ff5ef8a530d4c1a25f949f8d1b9b/globe_with_meridians.png",goat:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a6d61612c7a7f1370e37b4f65f443f6/goat.png",goberserk:"https://d78fikflryjgj.cloudfront.net/images/emoji/7eb1342916d725e1c970f0c3521a687e/goberserk.png",godmode:"https://d78fikflryjgj.cloudfront.net/images/emoji/349eb939241a6514e49c8cef3d2cb03b/godmode.png",golf:"https://d78fikflryjgj.cloudfront.net/images/emoji/ec72de4b5a8e13b5e5af372d4e4e6f7d/golf.png",grapes:"https://d78fikflryjgj.cloudfront.net/images/emoji/2d68ac5f4c47083f592809b231b17bd7/grapes.png",green_apple:"https://d78fikflryjgj.cloudfront.net/images/emoji/06b8a11f08563454f2f4cae1e4e67f28/green_apple.png",green_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/c36f6132347c57ac36fa49d5f12aab05/green_book.png",green_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/9a0ed337039fcf450ae95739a2fe3e18/green_heart.png",grey_exclamation:"https://d78fikflryjgj.cloudfront.net/images/emoji/72629bcca32cd65180aa8f0d27841969/grey_exclamation.png",grey_question:"https://d78fikflryjgj.cloudfront.net/images/emoji/c06c1d0b519b96c541c23335c9f088c4/grey_question.png",grimacing:"https://d78fikflryjgj.cloudfront.net/images/emoji/ebe859c119c9e383559bb5fb441f0687/grimacing.png",grin:"https://d78fikflryjgj.cloudfront.net/images/emoji/c15d783a8ecbd12cb276a85e54002bc6/grin.png",grinning:"https://d78fikflryjgj.cloudfront.net/images/emoji/dafb0c0c3345e8da60e93973c353ea12/grinning.png",guardsman:"https://d78fikflryjgj.cloudfront.net/images/emoji/d071c494323aed0ffb5edee581408590/guardsman.png",guitar:"https://d78fikflryjgj.cloudfront.net/images/emoji/1743c39f2a1c335faf174bc6294b3a4b/guitar.png",gun:"https://d78fikflryjgj.cloudfront.net/images/emoji/48545d1c648f1e835afd46a9a75ef877/gun.png",haircut:"https://d78fikflryjgj.cloudfront.net/images/emoji/40023b2c6af14da6f35801037094b680/haircut.png",hamburger:"https://d78fikflryjgj.cloudfront.net/images/emoji/36d446caf9e1bb7738ac994665caa9d6/hamburger.png",hammer:"https://d78fikflryjgj.cloudfront.net/images/emoji/9494abc1928a405a7f91500dce41560e/hammer.png",hamster:"https://d78fikflryjgj.cloudfront.net/images/emoji/086e2141c22bb6657325e41151c31879/hamster.png",hand:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb59e7620a3028058a5ed6c51d1890fa/hand.png",handbag:"https://d78fikflryjgj.cloudfront.net/images/emoji/3a915be880b3e31d99b090fd905b9251/handbag.png",hankey:"https://d78fikflryjgj.cloudfront.net/images/emoji/62d03c1e2d8608f29540b097b7cf1ab1/hankey.png",hash:"https://d78fikflryjgj.cloudfront.net/images/emoji/75c61a8abc5e41eb9b5d8c34b174425f/hash.png",hatched_chick:"https://d78fikflryjgj.cloudfront.net/images/emoji/18dd00d94aaad388a43e209e69d2a136/hatched_chick.png",hatching_chick:"https://d78fikflryjgj.cloudfront.net/images/emoji/8aa993affa31b0c6788ef7b322895d1d/hatching_chick.png",headphones:"https://d78fikflryjgj.cloudfront.net/images/emoji/6349aaddf8a1d0b1f2b963a740022ef4/headphones.png",hear_no_evil:"https://d78fikflryjgj.cloudfront.net/images/emoji/b9099bbabde151e8d1979e57c51e521c/hear_no_evil.png",heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/cd1d2bed2bd302bca7fd6d2c61a8c1c9/heart.png",heart_decoration:"https://d78fikflryjgj.cloudfront.net/images/emoji/a7da588b4ef5e3084670c5aa9e5d9715/heart_decoration.png",heart_eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/e6f06b33a6dd19ea5eff73b94456a9ac/heart_eyes.png",heart_eyes_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/18e218a3ccf076c35b446149946a6e62/heart_eyes_cat.png",heartbeat:"https://d78fikflryjgj.cloudfront.net/images/emoji/21b870f4b04731d17732b16a323bcdeb/heartbeat.png",heartpulse:"https://d78fikflryjgj.cloudfront.net/images/emoji/b8149aecdddda64c6129e3b58d9dda3f/heartpulse.png",hearts:"https://d78fikflryjgj.cloudfront.net/images/emoji/017db558db824576d0de1de798d9998f/hearts.png",heavy_check_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/a01e0f7d345acc3abd919d51db30104c/heavy_check_mark.png",heavy_division_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/c74e2ce77d25af618a6b96c90041fe48/heavy_division_sign.png",heavy_dollar_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/9efb3dd47af22cfb9fcd7115a8393c50/heavy_dollar_sign.png",heavy_exclamation_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/56399206fd046f4499d820e1bed93f43/heavy_exclamation_mark.png",heavy_minus_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/af4eb6738ce85d3ea39c241fec531573/heavy_minus_sign.png",heavy_multiplication_x:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ea18860059daa65721dd9cae3e48a7f/heavy_multiplication_x.png",heavy_plus_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/8cbea532738b413d46013c55090c0185/heavy_plus_sign.png",helicopter:"https://d78fikflryjgj.cloudfront.net/images/emoji/d6092527a7653ed25389077c5dc9eb3b/helicopter.png",herb:"https://d78fikflryjgj.cloudfront.net/images/emoji/b7807160c3409a46346d9dc8ffbdcc46/herb.png",hibiscus:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e8c93b5644b65f050be2648177af4e5/hibiscus.png",high_brightness:"https://d78fikflryjgj.cloudfront.net/images/emoji/06dab0a332d9d4b7e838b2ada7d0bca4/high_brightness.png",high_heel:"https://d78fikflryjgj.cloudfront.net/images/emoji/339854302caba793574eeefa675fac6d/high_heel.png",hocho:"https://d78fikflryjgj.cloudfront.net/images/emoji/39da9e0c736f3c0e9c1881b5f22cb657/hocho.png",honey_pot:"https://d78fikflryjgj.cloudfront.net/images/emoji/c0cf25d01c5573c3c273852bf4746732/honey_pot.png",honeybee:"https://d78fikflryjgj.cloudfront.net/images/emoji/a6c6f8b940f42688743046634de7a85f/honeybee.png",horse:"https://d78fikflryjgj.cloudfront.net/images/emoji/4c7a2b0d09f7d488a0a7387537d6ce31/horse.png",horse_racing:"https://d78fikflryjgj.cloudfront.net/images/emoji/778b4b19d5daef7f307f1187c36b5339/horse_racing.png",hospital:"https://d78fikflryjgj.cloudfront.net/images/emoji/28c0bf64a3f77113803e6fc599d65a89/hospital.png",hotel:"https://d78fikflryjgj.cloudfront.net/images/emoji/f0960a574518f14ac547696c26b4198f/hotel.png",hotsprings:"https://d78fikflryjgj.cloudfront.net/images/emoji/7082c89dfc0e26b9e1b8954e7061e114/hotsprings.png",hourglass:"https://d78fikflryjgj.cloudfront.net/images/emoji/46d4b9d4790023470d33e1ed44f9e79a/hourglass.png",hourglass_flowing_sand:"https://d78fikflryjgj.cloudfront.net/images/emoji/a2476f6ddb1b611309a0273e62468638/hourglass_flowing_sand.png",house:"https://d78fikflryjgj.cloudfront.net/images/emoji/13e39bb5bc594a5aeb3d692517e7e28a/house.png",house_with_garden:"https://d78fikflryjgj.cloudfront.net/images/emoji/b419ea4a988ec696481380ead96e0994/house_with_garden.png",hurtrealbad:"https://d78fikflryjgj.cloudfront.net/images/emoji/3a9763040f4d724ecbd596db875b5ec7/hurtrealbad.png",hushed:"https://d78fikflryjgj.cloudfront.net/images/emoji/a9f825f3b828a6e1bcd133cff7e292ec/hushed.png",ice_cream:"https://d78fikflryjgj.cloudfront.net/images/emoji/0eaffdfd183f2fc5da2eeea9361d0090/ice_cream.png",icecream:"https://d78fikflryjgj.cloudfront.net/images/emoji/9f43da7088e343f857fecdd7b1f3c288/icecream.png",id:"https://d78fikflryjgj.cloudfront.net/images/emoji/a5d7678912379dec7a0692bd616266ab/id.png",ideograph_advantage:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b36fdb07b35abe6d2277f50fad40d3a/ideograph_advantage.png",imp:"https://d78fikflryjgj.cloudfront.net/images/emoji/aa80e7bfc8da6a05f2e321aea6c31f70/imp.png",inbox_tray:"https://d78fikflryjgj.cloudfront.net/images/emoji/156701c7ff5b68ff82e4146d00d24b48/inbox_tray.png",incoming_envelope:"https://d78fikflryjgj.cloudfront.net/images/emoji/a70057747af68fbb6342c9b4b8d007ce/incoming_envelope.png",information_desk_person:"https://d78fikflryjgj.cloudfront.net/images/emoji/f63fade86e02ed609af315d2dedf4b32/information_desk_person.png",information_source:"https://d78fikflryjgj.cloudfront.net/images/emoji/60509a206d963ee971cded6331f56cc5/information_source.png",innocent:"https://d78fikflryjgj.cloudfront.net/images/emoji/b9607bffbadcba3ecd752edee529d313/innocent.png",interrobang:"https://d78fikflryjgj.cloudfront.net/images/emoji/e829a530301e217e92835bcd94e688c0/interrobang.png",iphone:"https://d78fikflryjgj.cloudfront.net/images/emoji/0fdf60a9c7442152b745a1dd50476a0a/iphone.png",it:"https://d78fikflryjgj.cloudfront.net/images/emoji/f9e55f1296649f6ee155349ffcfca32d/it.png",izakaya_lantern:"https://d78fikflryjgj.cloudfront.net/images/emoji/b44fed7fe34b70be7f70649a002bbd0c/izakaya_lantern.png",jack_o_lantern:"https://d78fikflryjgj.cloudfront.net/images/emoji/47e5081c9f4b79087a9e0c1fbfb68a78/jack_o_lantern.png",japan:"https://d78fikflryjgj.cloudfront.net/images/emoji/8916ca263393ed4ab6f39f28c2e86cfd/japan.png",japanese_castle:"https://d78fikflryjgj.cloudfront.net/images/emoji/41653c7ccb48b2a0d330aa4931ce752f/japanese_castle.png",japanese_goblin:"https://d78fikflryjgj.cloudfront.net/images/emoji/702e368ae4dc45326bbc396a709c74ea/japanese_goblin.png",japanese_ogre:"https://d78fikflryjgj.cloudfront.net/images/emoji/089910184703190781a1c80515c37f93/japanese_ogre.png",jeans:"https://d78fikflryjgj.cloudfront.net/images/emoji/8b5313bcb8724428fe77d373d7cb765c/jeans.png",joy:"https://d78fikflryjgj.cloudfront.net/images/emoji/636a452085e2c332a4c71911e6a85c8f/joy.png",joy_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/488a8a3a2aad5c2b72d155c0257497ae/joy_cat.png",jp:"https://d78fikflryjgj.cloudfront.net/images/emoji/7729a2e82da52292549ccd653555a7d2/jp.png",key:"https://d78fikflryjgj.cloudfront.net/images/emoji/e1fa3fe5469224bbd122ada8a28a8ce7/key.png",keycap_ten:"https://d78fikflryjgj.cloudfront.net/images/emoji/73d4356aeaf44638d50054e33da200a4/keycap_ten.png",kimono:"https://d78fikflryjgj.cloudfront.net/images/emoji/11d856c22b4c8510d6d38d0096c0ab88/kimono.png",kiss:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d4222bcfdc05251c9286407c4fc7940/kiss.png",kissing:"https://d78fikflryjgj.cloudfront.net/images/emoji/acf2ff3b8da32c02f20c4d6af0623995/kissing.png",kissing_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/2f68401a7d27bb033c65e440649d6656/kissing_cat.png",kissing_closed_eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/649cbca78ac5d84807b7c542179fe2c8/kissing_closed_eyes.png",kissing_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/8b694693575c6f8ab2f5f26a73493d28/kissing_heart.png",kissing_smiling_eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/ea98be72feacb0bbc4bf2f95060187ea/kissing_smiling_eyes.png",koala:"https://d78fikflryjgj.cloudfront.net/images/emoji/3b4cba0d6c71d792a5b74c57548205fd/koala.png",koko:"https://d78fikflryjgj.cloudfront.net/images/emoji/5eae4c99b86771bcfb0f5f9e9206ffba/koko.png",kr:"https://d78fikflryjgj.cloudfront.net/images/emoji/c034218c74762c36ada955b885b47d38/kr.png",lantern:"https://d78fikflryjgj.cloudfront.net/images/emoji/b44fed7fe34b70be7f70649a002bbd0c/lantern.png",large_blue_circle:"https://d78fikflryjgj.cloudfront.net/images/emoji/72c7834e2bd3209314296621113ffc73/large_blue_circle.png",large_blue_diamond:"https://d78fikflryjgj.cloudfront.net/images/emoji/655cc16a2c4901ce7b5647b79d8b93b3/large_blue_diamond.png",large_orange_diamond:"https://d78fikflryjgj.cloudfront.net/images/emoji/aaa43e423d6092941d25d9b1d76b253e/large_orange_diamond.png",last_quarter_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/4296435a74885d8582214998f3080853/last_quarter_moon.png",last_quarter_moon_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2f8a0faae72959046a99b59bc2d5677/last_quarter_moon_with_face.png",laughing:"https://d78fikflryjgj.cloudfront.net/images/emoji/f5f1d1dc4c1737305d7089d46dd996bf/laughing.png",leaves:"https://d78fikflryjgj.cloudfront.net/images/emoji/cefbf86a652c6fbe7634bebc9198beb3/leaves.png",ledger:"https://d78fikflryjgj.cloudfront.net/images/emoji/0f801705318a9a96df30ec7f45b4eb7d/ledger.png",left_luggage:"https://d78fikflryjgj.cloudfront.net/images/emoji/086274676f1a061d29eee36c9927590f/left_luggage.png",left_right_arrow:"https://d78fikflryjgj.cloudfront.net/images/emoji/adad9c8fe7641f36ead88a19f9050b41/left_right_arrow.png",leftwards_arrow_with_hook:"https://d78fikflryjgj.cloudfront.net/images/emoji/8e99f8a048788b0ceeb6fae5c0b0547a/leftwards_arrow_with_hook.png",lemon:"https://d78fikflryjgj.cloudfront.net/images/emoji/c37f06948ca7cf986810616ac5b2c0e4/lemon.png",leo:"https://d78fikflryjgj.cloudfront.net/images/emoji/54aca40c97d642279d2faf5f1455aa42/leo.png",leopard:"https://d78fikflryjgj.cloudfront.net/images/emoji/addce2e8d62e7f3eab9246555fc7e785/leopard.png",libra:"https://d78fikflryjgj.cloudfront.net/images/emoji/91b2bce4c73a7588dd26999853f2266f/libra.png",light_rail:"https://d78fikflryjgj.cloudfront.net/images/emoji/04ce285024390d3d106af5eb7ca8d95f/light_rail.png",link:"https://d78fikflryjgj.cloudfront.net/images/emoji/7a4f4c929a2e52c6886d33d9e4a24f2d/link.png",lips:"https://d78fikflryjgj.cloudfront.net/images/emoji/b3b04b940fd2d69178d2fef1d385d485/lips.png",lipstick:"https://d78fikflryjgj.cloudfront.net/images/emoji/76e7e9726e472f415e10da211ee1c1a1/lipstick.png",lock:"https://d78fikflryjgj.cloudfront.net/images/emoji/cebb6a4d3266954c9590a9b6da12fd25/lock.png",lock_with_ink_pen:"https://d78fikflryjgj.cloudfront.net/images/emoji/b2b3fc83d455eda3effb2869470e92b8/lock_with_ink_pen.png",lollipop:"https://d78fikflryjgj.cloudfront.net/images/emoji/1e0a1f81b3786f6fb9aaf7dc794367e5/lollipop.png",loop:"https://d78fikflryjgj.cloudfront.net/images/emoji/79848c1d1b6267d36be821a0d640facb/loop.png",loudspeaker:"https://d78fikflryjgj.cloudfront.net/images/emoji/16b66988ccb6b0f087686b9b39404336/loudspeaker.png",love_hotel:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ec7826bd541fef623438512197b080c/love_hotel.png",love_letter:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a06d6209cacfc0be2296cd2a3849082/love_letter.png",low_brightness:"https://d78fikflryjgj.cloudfront.net/images/emoji/1c59fc780f17cef0158a99dfdb143e4a/low_brightness.png",m:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1cecf01098bccfbf72061dbb3aac7eb/m.png",mag:"https://d78fikflryjgj.cloudfront.net/images/emoji/e8e3fb2f552f35238b2c123cc315637f/mag.png",mag_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/54c6493e4ad20cd1f1b30ed3bdebcb67/mag_right.png",mahjong:"https://d78fikflryjgj.cloudfront.net/images/emoji/3340fc9be1bbfae133700ec7ff9012db/mahjong.png",mailbox:"https://d78fikflryjgj.cloudfront.net/images/emoji/a31a438a7add9390d9fdaa6f282a6121/mailbox.png",mailbox_closed:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae370d245fb136322a5b7e688b4c8a82/mailbox_closed.png",mailbox_with_mail:"https://d78fikflryjgj.cloudfront.net/images/emoji/12adf52a9ba0fa79f8a502565ab9f1b3/mailbox_with_mail.png",mailbox_with_no_mail:"https://d78fikflryjgj.cloudfront.net/images/emoji/6bf04d14cdd4a67c3361403d6936d2cd/mailbox_with_no_mail.png",man:"https://d78fikflryjgj.cloudfront.net/images/emoji/1577b06c8e417060cda41b778cbde84e/man.png",man_with_gua_pi_mao:"https://d78fikflryjgj.cloudfront.net/images/emoji/5ea246d8336a7860252e1d04da923c8c/man_with_gua_pi_mao.png",man_with_turban:"https://d78fikflryjgj.cloudfront.net/images/emoji/824acad4c2bb299ec7f42a03d6989f7a/man_with_turban.png",mans_shoe:"https://d78fikflryjgj.cloudfront.net/images/emoji/d5161dfe10dd32fcdaeb81a14cad6697/mans_shoe.png",maple_leaf:"https://d78fikflryjgj.cloudfront.net/images/emoji/90e99ec31f7aa5e298962dac4c6b6a32/maple_leaf.png",mask:"https://d78fikflryjgj.cloudfront.net/images/emoji/cae71f039823518cfce8686dad8cc17e/mask.png",massage:"https://d78fikflryjgj.cloudfront.net/images/emoji/24cae3ab3cd299e47205ae57e2aea6c3/massage.png",meat_on_bone:"https://d78fikflryjgj.cloudfront.net/images/emoji/70d83288d413d9d3eb861a00de114a5a/meat_on_bone.png",mega:"https://d78fikflryjgj.cloudfront.net/images/emoji/da36aeb77941f1c8cb98a4332ab732d7/mega.png",melon:"https://d78fikflryjgj.cloudfront.net/images/emoji/5e6bef7c2a5205af4a2ea06bfefadb1d/melon.png",memo:"https://d78fikflryjgj.cloudfront.net/images/emoji/f6cfa3a3462ba1190ed39229b86a1a10/memo.png",mens:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d0d61c1bdab0af397f29508e6c9a3fe/mens.png",metal:"https://d78fikflryjgj.cloudfront.net/images/emoji/19a06afa1c2bf8f82f6f3b25ccfb6545/metal.png",metro:"https://d78fikflryjgj.cloudfront.net/images/emoji/cbdcc310fb83a886bb71e7dde93c6c0c/metro.png",microphone:"https://d78fikflryjgj.cloudfront.net/images/emoji/ee594eb27e0618d93f970a4135565aa5/microphone.png",microscope:"https://d78fikflryjgj.cloudfront.net/images/emoji/331c2818c8bce4bfd81ea1ce86ef3f04/microscope.png",milky_way:"https://d78fikflryjgj.cloudfront.net/images/emoji/e7a4ab2eda7760b45bd7aedb277b96e3/milky_way.png",minibus:"https://d78fikflryjgj.cloudfront.net/images/emoji/25eb106c8b48f87149f7c9e9651d7fa4/minibus.png",minidisc:"https://d78fikflryjgj.cloudfront.net/images/emoji/67d1609432bed2a9ae967d73c3cdef70/minidisc.png",mobile_phone_off:"https://d78fikflryjgj.cloudfront.net/images/emoji/7456a8db603180bbe6189e8034bd88e7/mobile_phone_off.png",money_with_wings:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae262ef34240d2944b2cd741d29a4a3e/money_with_wings.png",moneybag:"https://d78fikflryjgj.cloudfront.net/images/emoji/9efcc0c67a26df55b14eb6e3f3d05bcf/moneybag.png",monkey:"https://d78fikflryjgj.cloudfront.net/images/emoji/a706cb475889c4f45e51c63c79127d07/monkey.png",monkey_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/1b4df9455e64e7be3c051c3e044c4819/monkey_face.png",monorail:"https://d78fikflryjgj.cloudfront.net/images/emoji/37c4f4b4b635839dec0ea6b7c2f057a0/monorail.png",moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1c65fc03c3c8cb9a54b16ec2a408e4e/moon.png",mortar_board:"https://d78fikflryjgj.cloudfront.net/images/emoji/f9ee64820c57ac5555525a11d1e92117/mortar_board.png",mount_fuji:"https://d78fikflryjgj.cloudfront.net/images/emoji/041fc11a3612d68a8eaeb3d0fa5a9713/mount_fuji.png",mountain_bicyclist:"https://d78fikflryjgj.cloudfront.net/images/emoji/21a249d3f9414bad776bf5070b5e8621/mountain_bicyclist.png",mountain_cableway:"https://d78fikflryjgj.cloudfront.net/images/emoji/d93e6a284c0b4b140ab2c83a913a0af4/mountain_cableway.png",mountain_railway:"https://d78fikflryjgj.cloudfront.net/images/emoji/d21f8250957890156e5f60e75252fb31/mountain_railway.png",mouse:"https://d78fikflryjgj.cloudfront.net/images/emoji/c0de488a582a0a97f64e155a8c65de18/mouse.png",mouse2:"https://d78fikflryjgj.cloudfront.net/images/emoji/c927300435aa070e3fddd65e4974a6e1/mouse2.png",movie_camera:"https://d78fikflryjgj.cloudfront.net/images/emoji/ebccb1d2c6dc92bd3a51da8eae9fd354/movie_camera.png",moyai:"https://d78fikflryjgj.cloudfront.net/images/emoji/43b67438400b69f3a9beed6121c22688/moyai.png",muscle:"https://d78fikflryjgj.cloudfront.net/images/emoji/7187e328aab3950edb42439d40328607/muscle.png",mushroom:"https://d78fikflryjgj.cloudfront.net/images/emoji/a59c3afc18365c6fa6a0f54e8fb5554d/mushroom.png",music:"https://d78fikflryjgj.cloudfront.net/images/emoji/361f0f4a517fc60e63bb22b9ea76b0b2/music.jpg",musical_keyboard:"https://d78fikflryjgj.cloudfront.net/images/emoji/3aee034296f32ec83c2bd1c20fc00e6d/musical_keyboard.png",musical_note:"https://d78fikflryjgj.cloudfront.net/images/emoji/71bc5277028326ed7755b5c94dd7b888/musical_note.png",musical_score:"https://d78fikflryjgj.cloudfront.net/images/emoji/b35bd7ef3f4a6068656639824cd1fe4e/musical_score.png",mute:"https://d78fikflryjgj.cloudfront.net/images/emoji/4ffdbb077fd861e1fa62782b6d2c72d2/mute.png",nail_care:"https://d78fikflryjgj.cloudfront.net/images/emoji/35f7cf66f35a659c5428be8ade972986/nail_care.png",name_badge:"https://d78fikflryjgj.cloudfront.net/images/emoji/25aa610337041e819f07d4d542976f11/name_badge.png",neckbeard:"https://d78fikflryjgj.cloudfront.net/images/emoji/518e18ca0e08f31f8052a131642f3205/neckbeard.png",necktie:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d08459a90e6cf7e02b3f1b99c98ae3e/necktie.png",negative_squared_cross_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/e60fb1507239236215739a1a76ad44a0/negative_squared_cross_mark.png",neutral_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/fc2ed49a98346a5dbbc6869435eabb7a/neutral_face.png","new":"https://d78fikflryjgj.cloudfront.net/images/emoji/d95933a8bd68f0805aed8aecc0159e7b/new.png",new_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/9b85eeb013d04d1e939d17ac007d0a20/new_moon.png",new_moon_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/4975ad970c876ee3d1036693237235d6/new_moon_with_face.png",newspaper:"https://d78fikflryjgj.cloudfront.net/images/emoji/5e0ceab7b2f18a18b7d26ba5d8c200f0/newspaper.png",ng:"https://d78fikflryjgj.cloudfront.net/images/emoji/6c58dd8212db140eb21510cd0849db77/ng.png",nine:"https://d78fikflryjgj.cloudfront.net/images/emoji/df004afc8313840dc25c313785f4b118/nine.png",no_bell:"https://d78fikflryjgj.cloudfront.net/images/emoji/38c2d31067ddb724760775b50938aef3/no_bell.png",no_bicycles:"https://d78fikflryjgj.cloudfront.net/images/emoji/a1f2222d0575aa1bc0dd553825e4f21d/no_bicycles.png",no_entry:"https://d78fikflryjgj.cloudfront.net/images/emoji/e631b022ac357962d30a670f3b6456d6/no_entry.png",no_entry_sign:"https://d78fikflryjgj.cloudfront.net/images/emoji/89ff918256b6b1716a47d71bf68c33cb/no_entry_sign.png",no_good:"https://d78fikflryjgj.cloudfront.net/images/emoji/6562b71960c6c0404ad5a559c7eef3dc/no_good.png",no_mobile_phones:"https://d78fikflryjgj.cloudfront.net/images/emoji/61a340d367e756ff8ba919fca9d3f095/no_mobile_phones.png",no_mouth:"https://d78fikflryjgj.cloudfront.net/images/emoji/7c85e801f438e3f43214b94ead1ba67c/no_mouth.png",no_pedestrians:"https://d78fikflryjgj.cloudfront.net/images/emoji/89f0375ae34ef8572f47a1e8daaad6af/no_pedestrians.png",no_smoking:"https://d78fikflryjgj.cloudfront.net/images/emoji/e22ff4bcc817f10f8b8d9190ef17f2d0/no_smoking.png","non-potable_water":"https://d78fikflryjgj.cloudfront.net/images/emoji/41f9e3518129dfdc82cd0234bed9d8ac/non-potable_water.png",nose:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b882e710946c61069bc3d4b378690d5/nose.png",notebook:"https://d78fikflryjgj.cloudfront.net/images/emoji/9ecc79ee62d1828463f809befc04a719/notebook.png",notebook_with_decorative_cover:"https://d78fikflryjgj.cloudfront.net/images/emoji/6990f2bd9df9c926df9586bf253dbe20/notebook_with_decorative_cover.png",notes:"https://d78fikflryjgj.cloudfront.net/images/emoji/07a93240a9643e4514be61eee9b5d7b3/notes.png",nut_and_bolt:"https://d78fikflryjgj.cloudfront.net/images/emoji/b578e531c38f5b0502a70c19b93ff209/nut_and_bolt.png",o:"https://d78fikflryjgj.cloudfront.net/images/emoji/6492aeed3ab36bcf58c1d063fd142ed0/o.png",o2:"https://d78fikflryjgj.cloudfront.net/images/emoji/71f85cf734c09341867599108d92da2d/o2.png",ocean:"https://d78fikflryjgj.cloudfront.net/images/emoji/f4f0b6f057dd0e7b831cf3fc1aca5ad4/ocean.png",octocat:"https://d78fikflryjgj.cloudfront.net/images/emoji/11603b5f852fff5dac56f151f584f6f0/octocat.png",octopus:"https://d78fikflryjgj.cloudfront.net/images/emoji/5bb8ee408b94d1c8034123dbc13aa5b5/octopus.png",oden:"https://d78fikflryjgj.cloudfront.net/images/emoji/859ac805cdd8ed4c3f2fe7cc3ae55257/oden.png",office:"https://d78fikflryjgj.cloudfront.net/images/emoji/99b1e97dbeac60dcd5a1ca143c14acb7/office.png",ok:"https://d78fikflryjgj.cloudfront.net/images/emoji/61c87d0539163f93393c23aeeb0a17ea/ok.png",ok_hand:"https://d78fikflryjgj.cloudfront.net/images/emoji/7ce53418730e9e756c0c2cae2788614e/ok_hand.png",ok_woman:"https://d78fikflryjgj.cloudfront.net/images/emoji/03c5344a3bd8a7c5d814f179da4aba57/ok_woman.png",older_man:"https://d78fikflryjgj.cloudfront.net/images/emoji/713c3600cf40e669d4006e52adc58faf/older_man.png",older_woman:"https://d78fikflryjgj.cloudfront.net/images/emoji/6194efd58fed29a0be4f5fbf0cf1150a/older_woman.png",on:"https://d78fikflryjgj.cloudfront.net/images/emoji/a586fc7fb16e85cf5dc5eccc03ce106b/on.png",oncoming_automobile:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ee7c5290461c967016ae03359b0a118/oncoming_automobile.png",oncoming_bus:"https://d78fikflryjgj.cloudfront.net/images/emoji/c19a2aeb7ec1e2b2dad9ddfcabf1bd61/oncoming_bus.png",oncoming_police_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ca38748b269a8502a72b28aa4c84f59/oncoming_police_car.png",oncoming_taxi:"https://d78fikflryjgj.cloudfront.net/images/emoji/402d341a1f3d41b75c668b8ba7e795d3/oncoming_taxi.png",one:"https://d78fikflryjgj.cloudfront.net/images/emoji/c029957ab6ca4a748d0ec334d5edd3d5/one.png",open_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/6561272c5be33e5e300e71e8e87ca634/open_book.png",open_file_folder:"https://d78fikflryjgj.cloudfront.net/images/emoji/791b80441b131c75f15f731d39a5e2b0/open_file_folder.png",open_hands:"https://d78fikflryjgj.cloudfront.net/images/emoji/59cfbdcdf4f323dfa6b8fec35d79aaaf/open_hands.png",open_mouth:"https://d78fikflryjgj.cloudfront.net/images/emoji/b18226f8245ffeca723ba0fb971c76af/open_mouth.png",ophiuchus:"https://d78fikflryjgj.cloudfront.net/images/emoji/5499c05d99613c748340aeb43366278b/ophiuchus.png",orange_book:"https://d78fikflryjgj.cloudfront.net/images/emoji/a0684b83602ec9ef586028f976a76b6f/orange_book.png",outbox_tray:"https://d78fikflryjgj.cloudfront.net/images/emoji/4f422591f29fa0da13d42eae03e44d85/outbox_tray.png",ox:"https://d78fikflryjgj.cloudfront.net/images/emoji/f86c1314dc3a6356aa64786b57d65f69/ox.png","package":"https://d78fikflryjgj.cloudfront.net/images/emoji/05e8c1b57c20f0027f9aa377111fb0f0/package.png",page_facing_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/2b3a048e8e3d5565633f25467830cdb1/page_facing_up.png",page_with_curl:"https://d78fikflryjgj.cloudfront.net/images/emoji/cfc926669509cc197c2163e27f9c17cf/page_with_curl.png",pager:"https://d78fikflryjgj.cloudfront.net/images/emoji/c5a864179c023e12b23bc894e7b1a91f/pager.png",palm_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/2b1089d4a70fa8e4caea20863b63e866/palm_tree.png",panda_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/41e65ae1364b355bb8d9cc7e3331faa1/panda_face.png",paperclip:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2dfa71ed7df1c249f9262183fbf6d9b/paperclip.png",parking:"https://d78fikflryjgj.cloudfront.net/images/emoji/7ab7803b39ad97188911dd4af353d319/parking.png",part_alternation_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/0791db87fb9785e78a4b6f29fce93263/part_alternation_mark.png",partly_sunny:"https://d78fikflryjgj.cloudfront.net/images/emoji/2602a711a92b9291fb23791f054c9261/partly_sunny.png",passport_control:"https://d78fikflryjgj.cloudfront.net/images/emoji/9855ebf10f38524bfefe9762865f0729/passport_control.png",paw_prints:"https://d78fikflryjgj.cloudfront.net/images/emoji/a8fda9184043373f1891bdc8bfff8919/paw_prints.png",peach:"https://d78fikflryjgj.cloudfront.net/images/emoji/374080a5b22616916d8da5fddcab0213/peach.png",pear:"https://d78fikflryjgj.cloudfront.net/images/emoji/a5ce0a642565ea62643c8f6ca7e6cee8/pear.png",pencil:"https://d78fikflryjgj.cloudfront.net/images/emoji/f6cfa3a3462ba1190ed39229b86a1a10/pencil.png",pencil2:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2ec4e6af86cca9294ad9449c940481a/pencil2.png",penguin:"https://d78fikflryjgj.cloudfront.net/images/emoji/d0cb90399627f60db83b98d638ad02e4/penguin.png",pensive:"https://d78fikflryjgj.cloudfront.net/images/emoji/f1413fc2e99b52d4000309a8ae1e205b/pensive.png",performing_arts:"https://d78fikflryjgj.cloudfront.net/images/emoji/399b4bfafd5cd1d0011dee64574c90f3/performing_arts.png",persevere:"https://d78fikflryjgj.cloudfront.net/images/emoji/3e8b834b5dd8982ba994ca61a9f6cd00/persevere.png",person_frowning:"https://d78fikflryjgj.cloudfront.net/images/emoji/771b66dbb62e496bb605f98a0fc47b0e/person_frowning.png",person_with_blond_hair:"https://d78fikflryjgj.cloudfront.net/images/emoji/e90b426aa7a0b030a51a82691ffcaf92/person_with_blond_hair.png",person_with_pouting_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/270f674632a95053eb392857a8861898/person_with_pouting_face.png",phone:"https://d78fikflryjgj.cloudfront.net/images/emoji/63303b0721fe2adafa094bcca0e346aa/phone.png",pig:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2d2664ade06a1953f952ed85d23ec14/pig.png",pig2:"https://d78fikflryjgj.cloudfront.net/images/emoji/d9be6f23c45b8b2fff067e93f5b5656a/pig2.png",pig_nose:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ba39600b630c38592cd8107d44061d0/pig_nose.png",pill:"https://d78fikflryjgj.cloudfront.net/images/emoji/b1b7e477bd5c84b4a6709b5bbc886278/pill.png",pineapple:"https://d78fikflryjgj.cloudfront.net/images/emoji/bb96567f9cab8e6432c9d5d4e1001a78/pineapple.png",pisces:"https://d78fikflryjgj.cloudfront.net/images/emoji/030c43061ed25086517350f519753cf1/pisces.png",pizza:"https://d78fikflryjgj.cloudfront.net/images/emoji/9f2a86bc2b4310fbff890752c4b53d46/pizza.png",point_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/8e7ab4e1b5954e9692d2d1a2aa4a1dc1/point_down.png",point_left:"https://d78fikflryjgj.cloudfront.net/images/emoji/fe58cda82393f6ed8a8dc202a9b9e08a/point_left.png",point_right:"https://d78fikflryjgj.cloudfront.net/images/emoji/5cbb5a27c9880bea349237a886c73dc4/point_right.png",point_up:"https://d78fikflryjgj.cloudfront.net/images/emoji/4805888040f92847e9622369411b4e4f/point_up.png",point_up_2:"https://d78fikflryjgj.cloudfront.net/images/emoji/df44d25e90861f72ef32af899f8605c8/point_up_2.png",police_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/c5260b647c8c1c35c1c3075232a40b79/police_car.png",poodle:"https://d78fikflryjgj.cloudfront.net/images/emoji/4527790ab71140e5318ad60cdf05d63c/poodle.png",poop:"https://d78fikflryjgj.cloudfront.net/images/emoji/62d03c1e2d8608f29540b097b7cf1ab1/poop.png",post_office:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ade4130dd0c510afed780e715aa97a6/post_office.png",postal_horn:"https://d78fikflryjgj.cloudfront.net/images/emoji/4022a22938b199c5d55821237b6855af/postal_horn.png",postbox:"https://d78fikflryjgj.cloudfront.net/images/emoji/ee26132ee651347d38bd25b3204a7706/postbox.png",potable_water:"https://d78fikflryjgj.cloudfront.net/images/emoji/759ced65bb8ab040bd726ef177898396/potable_water.png",pouch:"https://d78fikflryjgj.cloudfront.net/images/emoji/64d1082c34458b69127140c6351dc607/pouch.png",poultry_leg:"https://d78fikflryjgj.cloudfront.net/images/emoji/ca4741488b6f5da0cecb1b697bc8324c/poultry_leg.png",pound:"https://d78fikflryjgj.cloudfront.net/images/emoji/9e06d52c8dbb4dc46e2855e1e11fb8f6/pound.png",pouting_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/4351ec51799f825cda20db3c275b9f27/pouting_cat.png",pray:"https://d78fikflryjgj.cloudfront.net/images/emoji/85aed007f516935008b3b0805fdfcf6d/pray.png",princess:"https://d78fikflryjgj.cloudfront.net/images/emoji/43eb5b6c78a40f98aeb3822c3b1b3892/princess.png",punch:"https://d78fikflryjgj.cloudfront.net/images/emoji/0902dded44c402bd7707bcd447dbe33c/punch.png",purple_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/d3bc83d90ed2945042afc3be196b408c/purple_heart.png",purse:"https://d78fikflryjgj.cloudfront.net/images/emoji/b17c7b853c4b6cbcd9a0b8897c9e9c4c/purse.png",pushpin:"https://d78fikflryjgj.cloudfront.net/images/emoji/dfa27faa78f3f465d951c36e623e14cb/pushpin.png",put_litter_in_its_place:"https://d78fikflryjgj.cloudfront.net/images/emoji/c8cc8331921d14a3facb2cc7b8a0984d/put_litter_in_its_place.png",question:"https://d78fikflryjgj.cloudfront.net/images/emoji/ee8d27253348b9d7d7a2d19324b6cd30/question.png",rabbit:"https://d78fikflryjgj.cloudfront.net/images/emoji/0e92e27e564a86fde4fdcc31e376887d/rabbit.png",rabbit2:"https://d78fikflryjgj.cloudfront.net/images/emoji/8a1c9ab0194c3053dc9775127d4abdbc/rabbit2.png",racehorse:"https://d78fikflryjgj.cloudfront.net/images/emoji/3cddf4d88285a1af630a83cf0eec8e26/racehorse.png",radio:"https://d78fikflryjgj.cloudfront.net/images/emoji/a22945426a36edae0077be7382b86413/radio.png",radio_button:"https://d78fikflryjgj.cloudfront.net/images/emoji/c194f475ecddd76a3eb73018b7470d97/radio_button.png",rage:"https://d78fikflryjgj.cloudfront.net/images/emoji/d45b08290d40d64174c5e31b1d32cb5d/rage.png",rage1:"https://d78fikflryjgj.cloudfront.net/images/emoji/99af14cd4602ac04b9f106a6953c4446/rage1.png",rage2:"https://d78fikflryjgj.cloudfront.net/images/emoji/b9b041ae30d95826dbf8e7bdc3647993/rage2.png",rage3:"https://d78fikflryjgj.cloudfront.net/images/emoji/ba38f5caeb38b839048349bd40bd0bec/rage3.png",rage4:"https://d78fikflryjgj.cloudfront.net/images/emoji/cc3cf42b2362565bf0f456a76e879feb/rage4.png",railway_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/cca6ec820134c0aaf652c4088fad5065/railway_car.png",rainbow:"https://d78fikflryjgj.cloudfront.net/images/emoji/27846ff7537f3f00734c520c6321998c/rainbow.png",raised_hand:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb59e7620a3028058a5ed6c51d1890fa/raised_hand.png",raised_hands:"https://d78fikflryjgj.cloudfront.net/images/emoji/209d64742c31ac9ffe446f7469e7c7b6/raised_hands.png",raising_hand:"https://d78fikflryjgj.cloudfront.net/images/emoji/ab19218df270318c8756ba197e166d38/raising_hand.png",ram:"https://d78fikflryjgj.cloudfront.net/images/emoji/df6513ef97d0acd33b61b6bf6b43c417/ram.png",ramen:"https://d78fikflryjgj.cloudfront.net/images/emoji/487fb3bb0723ff71fa4eeb73b366d390/ramen.png",rat:"https://d78fikflryjgj.cloudfront.net/images/emoji/c7dc9b9477e4d0f2651b98e978ba339f/rat.png",recycle:"https://d78fikflryjgj.cloudfront.net/images/emoji/7c1e1793a9e79acceb2173f7d9da1f54/recycle.png",red_car:"https://d78fikflryjgj.cloudfront.net/images/emoji/abf1ef7270298b7e4faa51585b584e4f/red_car.png",red_circle:"https://d78fikflryjgj.cloudfront.net/images/emoji/153f03a0ad9a4d5a18bfc57059afd636/red_circle.png",registered:"https://d78fikflryjgj.cloudfront.net/images/emoji/f7894c9f4446abfc4d37623186ec953c/registered.png",relaxed:"https://d78fikflryjgj.cloudfront.net/images/emoji/3f154c14aace003c1fca160133b772ab/relaxed.png",relieved:"https://d78fikflryjgj.cloudfront.net/images/emoji/2c2868a75fe9ad1d75515bc5e717c675/relieved.png",repeat:"https://d78fikflryjgj.cloudfront.net/images/emoji/2b115f0853f4546303fa67afc33a8af6/repeat.png",repeat_one:"https://d78fikflryjgj.cloudfront.net/images/emoji/e914db414db7e58e60116dea187a6c71/repeat_one.png",restroom:"https://d78fikflryjgj.cloudfront.net/images/emoji/c29c5275ef27edf0f14ffe8ae335df4d/restroom.png",revolving_hearts:"https://d78fikflryjgj.cloudfront.net/images/emoji/3db37c791c853f199e886bd972edfb96/revolving_hearts.png",rewind:"https://d78fikflryjgj.cloudfront.net/images/emoji/f9460239b03da9344e31ea3ba52746d5/rewind.png",ribbon:"https://d78fikflryjgj.cloudfront.net/images/emoji/4f2b6a292ba60d862e40e2ef13e2a62a/ribbon.png",rice:"https://d78fikflryjgj.cloudfront.net/images/emoji/35c9a0c0b4830ca3f75de2c85e53c700/rice.png",rice_ball:"https://d78fikflryjgj.cloudfront.net/images/emoji/6b9c5b2f0698b31537e43aa93c8438a9/rice_ball.png",rice_cracker:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb1b26860f72f23a9709aeac30617e5f/rice_cracker.png",rice_scene:"https://d78fikflryjgj.cloudfront.net/images/emoji/2f97f5bed6acd05d769be29275fa62fe/rice_scene.png",ring:"https://d78fikflryjgj.cloudfront.net/images/emoji/2908bc63e660771fc7708c2218fea126/ring.png",rocket:"https://d78fikflryjgj.cloudfront.net/images/emoji/be56f079c737a67020cd6994f3f3b13f/rocket.png",roller_coaster:"https://d78fikflryjgj.cloudfront.net/images/emoji/f0b7bb125e9cefc573ea3914053c546b/roller_coaster.png",rooster:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b3c725ce3eb9c9849b7dd5641328c1b/rooster.png",rose:"https://d78fikflryjgj.cloudfront.net/images/emoji/2e1af2089c900f0ed6fa7bf3a23f4c08/rose.png",rotating_light:"https://d78fikflryjgj.cloudfront.net/images/emoji/643ae146ac155d47d60541f9ef96301a/rotating_light.png",round_pushpin:"https://d78fikflryjgj.cloudfront.net/images/emoji/35674e63d4925731eb1875e43c541d3b/round_pushpin.png",rowboat:"https://d78fikflryjgj.cloudfront.net/images/emoji/6d2517405400de0bdcf73410f819b15a/rowboat.png",ru:"https://d78fikflryjgj.cloudfront.net/images/emoji/edc8c0c6b2c2869090606a1882e75f47/ru.png",rugby_football:"https://d78fikflryjgj.cloudfront.net/images/emoji/c3744fb02e7d1f3a4a32fbc6a6943792/rugby_football.png",runner:"https://d78fikflryjgj.cloudfront.net/images/emoji/4e3175b51a9c997f085181cfa8da7c36/runner.png",running:"https://d78fikflryjgj.cloudfront.net/images/emoji/4e3175b51a9c997f085181cfa8da7c36/running.png",running_shirt_with_sash:"https://d78fikflryjgj.cloudfront.net/images/emoji/3181720b903304fa1e2da3766cf62bf0/running_shirt_with_sash.png",sa:"https://d78fikflryjgj.cloudfront.net/images/emoji/bd8299075344913c5e923a0702a7f143/sa.png",sagittarius:"https://d78fikflryjgj.cloudfront.net/images/emoji/8debd5e660dde3cad7f2bb4b7a13c9c2/sagittarius.png",sailboat:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1c1c4dcaa77f509b36a3a170347c90c/sailboat.png",sake:"https://d78fikflryjgj.cloudfront.net/images/emoji/9b07b746a9d397a7200a68e8a2d16a03/sake.png",sandal:"https://d78fikflryjgj.cloudfront.net/images/emoji/e215e96ad7a2b296e0fefb3e005bd45f/sandal.png",santa:"https://d78fikflryjgj.cloudfront.net/images/emoji/790b6c33d2b13c296bfe4472affb8f50/santa.png",satellite:"https://d78fikflryjgj.cloudfront.net/images/emoji/a016460345a00fe9d93ed067834552d7/satellite.png",satisfied:"https://d78fikflryjgj.cloudfront.net/images/emoji/f5f1d1dc4c1737305d7089d46dd996bf/satisfied.png",saxophone:"https://d78fikflryjgj.cloudfront.net/images/emoji/79863731d88ccf9dcdd0e110929b59c0/saxophone.png",school:"https://d78fikflryjgj.cloudfront.net/images/emoji/cd789b11d96ce09e99b354ae219f2890/school.png",school_satchel:"https://d78fikflryjgj.cloudfront.net/images/emoji/b90a70c87a38c0d30b9ff3b0bbe3687b/school_satchel.png",scissors:"https://d78fikflryjgj.cloudfront.net/images/emoji/8ca7f1e5ec3a423e591c77a6c4a059ae/scissors.png",scorpius:"https://d78fikflryjgj.cloudfront.net/images/emoji/517b5593aca229b1ea153bd7d886506d/scorpius.png",scream:"https://d78fikflryjgj.cloudfront.net/images/emoji/57f9298e911d478258de5d7f2a814f4a/scream.png",scream_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/7800fc2bad7a7c15f627808565478120/scream_cat.png",scroll:"https://d78fikflryjgj.cloudfront.net/images/emoji/9934ae517aa1827a8166c9e157b742f1/scroll.png",seat:"https://d78fikflryjgj.cloudfront.net/images/emoji/e54262ec6414ceedc36aa66350d6b905/seat.png",secret:"https://d78fikflryjgj.cloudfront.net/images/emoji/400f5564a3036103c18ec3a87a210071/secret.png",see_no_evil:"https://d78fikflryjgj.cloudfront.net/images/emoji/e372b8c7f97db8e0dadcc4715c579b3d/see_no_evil.png",seedling:"https://d78fikflryjgj.cloudfront.net/images/emoji/a76ebecb541e69df48e734cccf806381/seedling.png",seven:"https://d78fikflryjgj.cloudfront.net/images/emoji/6630566add5e4b2910bfa93fcae43056/seven.png",shaved_ice:"https://d78fikflryjgj.cloudfront.net/images/emoji/7d6eb0eb12fd345870f116199f24400e/shaved_ice.png",sheep:"https://d78fikflryjgj.cloudfront.net/images/emoji/61346bec218f84bcd3c2ec4a68e4ce29/sheep.png",shell:"https://d78fikflryjgj.cloudfront.net/images/emoji/27667826fd1fb9122b34cbee12146446/shell.png",ship:"https://d78fikflryjgj.cloudfront.net/images/emoji/da1c239ed3806392f65cfcc048d36c4e/ship.png",shipit:"https://d78fikflryjgj.cloudfront.net/images/emoji/0bf1d3de309a89d9ed70ae91f6271a7f/shipit.png",shirt:"https://d78fikflryjgj.cloudfront.net/images/emoji/1866b19c5130fc17b2900229704c9608/shirt.png",shit:"https://d78fikflryjgj.cloudfront.net/images/emoji/62d03c1e2d8608f29540b097b7cf1ab1/shit.png",shoe:"https://d78fikflryjgj.cloudfront.net/images/emoji/d5161dfe10dd32fcdaeb81a14cad6697/shoe.png",shower:"https://d78fikflryjgj.cloudfront.net/images/emoji/c70ad692456e572e23fc067e844e3903/shower.png",signal_strength:"https://d78fikflryjgj.cloudfront.net/images/emoji/428a66f5fa6b7f97d343ba1ba6937179/signal_strength.png",six:"https://d78fikflryjgj.cloudfront.net/images/emoji/2c861fa8bd6f03cfcfecb765465f74e5/six.png",six_pointed_star:"https://d78fikflryjgj.cloudfront.net/images/emoji/4cfa8ed6a68dc7ac38087ea14d653cab/six_pointed_star.png",ski:"https://d78fikflryjgj.cloudfront.net/images/emoji/65886f19620b20a71254f60808691ed3/ski.png",skull:"https://d78fikflryjgj.cloudfront.net/images/emoji/ad7bcba8783a07fc4444c6c25b35addc/skull.png",sleeping:"https://d78fikflryjgj.cloudfront.net/images/emoji/99a9e3d2172b41efd65cc6c406d4db20/sleeping.png",sleepy:"https://d78fikflryjgj.cloudfront.net/images/emoji/e31e7d8333ab3f2625cbccef6b7410fd/sleepy.png",slot_machine:"https://d78fikflryjgj.cloudfront.net/images/emoji/d8ab6936c64111c75fa32f6a789eabff/slot_machine.png",small_blue_diamond:"https://d78fikflryjgj.cloudfront.net/images/emoji/53006f4b102d9f9fe4cb6af5b506524b/small_blue_diamond.png",small_orange_diamond:"https://d78fikflryjgj.cloudfront.net/images/emoji/45cf6cb9bc145ac734919ac6a4d18c73/small_orange_diamond.png",small_red_triangle:"https://d78fikflryjgj.cloudfront.net/images/emoji/9f7504b356189f8839c6387cb048bd2e/small_red_triangle.png",small_red_triangle_down:"https://d78fikflryjgj.cloudfront.net/images/emoji/064d5341cbd34a902a0b8059e0bc2afd/small_red_triangle_down.png",smile:"https://d78fikflryjgj.cloudfront.net/images/emoji/5775d67cea2ecad4c070825998771a6e/smile.png",smile_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/95e73996308563e468df6b1c3389594d/smile_cat.png",smiley:"https://d78fikflryjgj.cloudfront.net/images/emoji/5fece00c22bedab7e68fe9965257125b/smiley.png",smiley_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/9ff0f77cdf0ba721199a48ac3a7d9a9d/smiley_cat.png",smiling_imp:"https://d78fikflryjgj.cloudfront.net/images/emoji/fad5de08b04e1e37961fc13604599224/smiling_imp.png",smirk:"https://d78fikflryjgj.cloudfront.net/images/emoji/ae6679e96d5cfbb2f5e92546869c553d/smirk.png",smirk_cat:"https://d78fikflryjgj.cloudfront.net/images/emoji/25298f805ca971c30cc8409938187fd4/smirk_cat.png",smoking:"https://d78fikflryjgj.cloudfront.net/images/emoji/d00d7ff8880a8dbe3d0cd2b8750d9750/smoking.png",snail:"https://d78fikflryjgj.cloudfront.net/images/emoji/3eccdd2bf9fe2d499f56f85e51559d8b/snail.png",snake:"https://d78fikflryjgj.cloudfront.net/images/emoji/85a978664ce446513cb20e53387498a4/snake.png",snowboarder:"https://d78fikflryjgj.cloudfront.net/images/emoji/c7b2a02eeab2d3f318f287945b752ff0/snowboarder.png",snowflake:"https://d78fikflryjgj.cloudfront.net/images/emoji/df30263aeb1a565a706e67e2f22b12ac/snowflake.png",snowman:"https://d78fikflryjgj.cloudfront.net/images/emoji/a492f35208fc9dc36a13521c2cdeada3/snowman.png",sob:"https://d78fikflryjgj.cloudfront.net/images/emoji/81a73de58d64024e1b3383c37084706e/sob.png",soccer:"https://d78fikflryjgj.cloudfront.net/images/emoji/d9427086aeb6ddaeef57112373cc6d90/soccer.png",soon:"https://d78fikflryjgj.cloudfront.net/images/emoji/206a1f60b9e323da74d63dda430a63b5/soon.png",sos:"https://d78fikflryjgj.cloudfront.net/images/emoji/d1b40a70d2e39cd4285806033c9d3320/sos.png",sound:"https://d78fikflryjgj.cloudfront.net/images/emoji/ba2d95d9bc4eb1245d4117f2de12034a/sound.png",space_invader:"https://d78fikflryjgj.cloudfront.net/images/emoji/404045d4be25a77fa0f52075b623344f/space_invader.png",spades:"https://d78fikflryjgj.cloudfront.net/images/emoji/90f63f6f53181f5a059f3e7d92ad1688/spades.png",spaghetti:"https://d78fikflryjgj.cloudfront.net/images/emoji/e74bd04f2cb78b489d2bab0592b16b5e/spaghetti.png",sparkle:"https://d78fikflryjgj.cloudfront.net/images/emoji/d8fc28d64dea0f3b4ddb5d7dc749f919/sparkle.png",sparkler:"https://d78fikflryjgj.cloudfront.net/images/emoji/a7ecc1b95d673056032f2979d1221c35/sparkler.png",sparkles:"https://d78fikflryjgj.cloudfront.net/images/emoji/8c75ed365b460add98076391364659f0/sparkles.png",sparkling_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/a3744535f6732553e9c070def252bbee/sparkling_heart.png",speak_no_evil:"https://d78fikflryjgj.cloudfront.net/images/emoji/0fb82c9a1d1f0756335cfb28c1992071/speak_no_evil.png",speaker:"https://d78fikflryjgj.cloudfront.net/images/emoji/ab3a8634abb65fcd4718a06a20dcb6cb/speaker.png",speech_balloon:"https://d78fikflryjgj.cloudfront.net/images/emoji/8a4e6e0a31475cd998bf512fc701d432/speech_balloon.png",speedboat:"https://d78fikflryjgj.cloudfront.net/images/emoji/2e278ce36190a1b1cc8febcef84bfa02/speedboat.png",squirrel:"https://d78fikflryjgj.cloudfront.net/images/emoji/0bf1d3de309a89d9ed70ae91f6271a7f/squirrel.png",star:"https://d78fikflryjgj.cloudfront.net/images/emoji/f2ba498e88e4b9a73fb7e4e4a558c647/star.png",star2:"https://d78fikflryjgj.cloudfront.net/images/emoji/28bcbfd07530922fc075e19d13707308/star2.png",stars:"https://d78fikflryjgj.cloudfront.net/images/emoji/16a1589022608f2cb1e689ffa9bcd8bf/stars.png",station:"https://d78fikflryjgj.cloudfront.net/images/emoji/7376eef48ff3aeb51fced2e467ab8c6c/station.png",statue_of_liberty:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1a8a8b67bb8cc914ace6ea63b8fcf3d/statue_of_liberty.png",steam_locomotive:"https://d78fikflryjgj.cloudfront.net/images/emoji/9711ed6bc30bb5658d15b9a0cbc02578/steam_locomotive.png",stew:"https://d78fikflryjgj.cloudfront.net/images/emoji/e0d035b528f38b1b885460c5c638b914/stew.png",straight_ruler:"https://d78fikflryjgj.cloudfront.net/images/emoji/38d99cfad89b24d6ca699a5f7a3b945c/straight_ruler.png",strawberry:"https://d78fikflryjgj.cloudfront.net/images/emoji/d7a9638f5c3dbd8281738333a1ce65b2/strawberry.png",stuck_out_tongue:"https://d78fikflryjgj.cloudfront.net/images/emoji/627b9f7379294f54c6f6fb62bf779497/stuck_out_tongue.png",stuck_out_tongue_closed_eyes:"https://d78fikflryjgj.cloudfront.net/images/emoji/1273fc479bf7656b0ea69f20473f5b60/stuck_out_tongue_closed_eyes.png",stuck_out_tongue_winking_eye:"https://d78fikflryjgj.cloudfront.net/images/emoji/490c7380e7c4b7b7f8c8290cad357db4/stuck_out_tongue_winking_eye.png",sun_with_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/9bd63acca4a614303285fd5ee647ac36/sun_with_face.png",sunflower:"https://d78fikflryjgj.cloudfront.net/images/emoji/554132252fa931c08fea8e13c977ff29/sunflower.png",sunglasses:"https://d78fikflryjgj.cloudfront.net/images/emoji/390ca63b9d9cf84bbabba4b7aaf01849/sunglasses.png",sunny:"https://d78fikflryjgj.cloudfront.net/images/emoji/549a15109922d8e5ed86f633da40406e/sunny.png",sunrise:"https://d78fikflryjgj.cloudfront.net/images/emoji/4d064e69798287743acc5b49b9b99e03/sunrise.png",sunrise_over_mountains:"https://d78fikflryjgj.cloudfront.net/images/emoji/be7d45dc5cd7283878d3373b4865dbda/sunrise_over_mountains.png",surfer:"https://d78fikflryjgj.cloudfront.net/images/emoji/69cca50b4ca7ea90977b2ecfceef1e35/surfer.png",sushi:"https://d78fikflryjgj.cloudfront.net/images/emoji/1c873a340c556e04ade1e987b32fcc28/sushi.png",suspect:"https://d78fikflryjgj.cloudfront.net/images/emoji/db65956050a52b22a9f5cb63ad3e65e4/suspect.png",suspension_railway:"https://d78fikflryjgj.cloudfront.net/images/emoji/d645165583968a5825712a5688c5cf72/suspension_railway.png",sweat:"https://d78fikflryjgj.cloudfront.net/images/emoji/34e53931ca583f957cf81a6bfda7a4ff/sweat.png",sweat_drops:"https://d78fikflryjgj.cloudfront.net/images/emoji/5f4be5e62b0f84665428da112871b968/sweat_drops.png",sweat_smile:"https://d78fikflryjgj.cloudfront.net/images/emoji/c9d6fa912d567e3da8b418ba48f534f4/sweat_smile.png",sweet_potato:"https://d78fikflryjgj.cloudfront.net/images/emoji/1dff26ec90da43620b6f7d3e32eaa81d/sweet_potato.png",swimmer:"https://d78fikflryjgj.cloudfront.net/images/emoji/6aa2b26f03ff21df0ee1207a79cbd966/swimmer.png",symbols:"https://d78fikflryjgj.cloudfront.net/images/emoji/dbab88d0365a222934a00b2636f5aa6e/symbols.png",syringe:"https://d78fikflryjgj.cloudfront.net/images/emoji/3658598f6e49bc6564dc510c29ff6d1d/syringe.png",tada:"https://d78fikflryjgj.cloudfront.net/images/emoji/5c16e39356ee25a426b1bde2bb95c7ed/tada.png",tanabata_tree:"https://d78fikflryjgj.cloudfront.net/images/emoji/c021fba2f312c83b032924493613ec3c/tanabata_tree.png",tangerine:"https://d78fikflryjgj.cloudfront.net/images/emoji/9794070c5ad8ed629b71afccb83b6999/tangerine.png",taurus:"https://d78fikflryjgj.cloudfront.net/images/emoji/679ac7db83dfc87974a2fb069d890208/taurus.png",taxi:"https://d78fikflryjgj.cloudfront.net/images/emoji/5b0c3ffe99c4cd2f0ee33b61952f5a4e/taxi.png",tea:"https://d78fikflryjgj.cloudfront.net/images/emoji/7c4d51f8aa1263cb3c7b39fba8c58aa2/tea.png",telephone:"https://d78fikflryjgj.cloudfront.net/images/emoji/63303b0721fe2adafa094bcca0e346aa/telephone.png",telephone_receiver:"https://d78fikflryjgj.cloudfront.net/images/emoji/a472b9c87f8815d445b8d40f67d20faa/telephone_receiver.png",telescope:"https://d78fikflryjgj.cloudfront.net/images/emoji/479cc4ee5f8c7b26c34ba2455eb74ffa/telescope.png",tennis:"https://d78fikflryjgj.cloudfront.net/images/emoji/6e2702957fa61c43a60568e3f5326f3b/tennis.png",tent:"https://d78fikflryjgj.cloudfront.net/images/emoji/bebe8125747e06d31dd85418fe9defe2/tent.png",test:"https://d78fikflryjgj.cloudfront.net/images/emoji/03413f12d41cfce4ccc5cda97cbe8cbc/test.png",thought_balloon:"https://d78fikflryjgj.cloudfront.net/images/emoji/3c4f37563f8d42f1ea9d04472028e819/thought_balloon.png",three:"https://d78fikflryjgj.cloudfront.net/images/emoji/bbe5d45683a714b2f65998b7de3f1bdc/three.png",thumbsdown:"https://d78fikflryjgj.cloudfront.net/images/emoji/9155e2acc3925a32e544021a4893ebef/thumbsdown.png",thumbsup:"https://d78fikflryjgj.cloudfront.net/images/emoji/a0a5d07f60da887f916b5540f7cc14d4/thumbsup.png",ticket:"https://d78fikflryjgj.cloudfront.net/images/emoji/a95bb7de3d822f3ddcfc0604fe6478ef/ticket.png",tiger:"https://d78fikflryjgj.cloudfront.net/images/emoji/56645d43216f3fa4b3c534a6db5bebba/tiger.png",tiger2:"https://d78fikflryjgj.cloudfront.net/images/emoji/09fb18054f72b37c0a4b1efd7680feff/tiger2.png",tired_face:"https://d78fikflryjgj.cloudfront.net/images/emoji/8cf92ef6a062a0bafa67ac1b93dacdc0/tired_face.png",tm:"https://d78fikflryjgj.cloudfront.net/images/emoji/0077f29b078e5330722defa7522779f2/tm.png",toilet:"https://d78fikflryjgj.cloudfront.net/images/emoji/fcfec1156ffa738c3a05414b195989f7/toilet.png",tokyo_tower:"https://d78fikflryjgj.cloudfront.net/images/emoji/8d46bcc6c5028df07ad07e7a415db044/tokyo_tower.png",tomato:"https://d78fikflryjgj.cloudfront.net/images/emoji/b271e89f2aede82ece941a17ea3aebd7/tomato.png",tongue:"https://d78fikflryjgj.cloudfront.net/images/emoji/7a455eb0a18c0e87e2163c109d87ea47/tongue.png",top:"https://d78fikflryjgj.cloudfront.net/images/emoji/30d83f9d01bba1989dfcd4c1352c2251/top.png",tophat:"https://d78fikflryjgj.cloudfront.net/images/emoji/36fe71ebb25980fa89ca457aa2d63559/tophat.png",tractor:"https://d78fikflryjgj.cloudfront.net/images/emoji/1ea4f35288b452593c6376d0a95cc6a0/tractor.png",traffic_light:"https://d78fikflryjgj.cloudfront.net/images/emoji/df5246b38a44113d0e32a8e121224a0b/traffic_light.png",train:"https://d78fikflryjgj.cloudfront.net/images/emoji/cca6ec820134c0aaf652c4088fad5065/train.png",train2:"https://d78fikflryjgj.cloudfront.net/images/emoji/1acc1187f262982c36c6c5cafccef13e/train2.png",tram:"https://d78fikflryjgj.cloudfront.net/images/emoji/0abd978a7dc96b6ee455651ed1f0edb2/tram.png",trello:"https://d78fikflryjgj.cloudfront.net/images/emoji/7e5b95544db0fb00888df1f2b84c0db2/trello.png",triangular_flag_on_post:"https://d78fikflryjgj.cloudfront.net/images/emoji/477168e101d89cc2eef4e5ccc1b76b30/triangular_flag_on_post.png",triangular_ruler:"https://d78fikflryjgj.cloudfront.net/images/emoji/9ace5dbdbd3157870aef9bfafa8a2c9f/triangular_ruler.png",trident:"https://d78fikflryjgj.cloudfront.net/images/emoji/9c001c9bf8f6fed83128fefb47acb8f2/trident.png",triumph:"https://d78fikflryjgj.cloudfront.net/images/emoji/7b80feb3faaa633af5ad085792befb51/triumph.png",trolleybus:"https://d78fikflryjgj.cloudfront.net/images/emoji/861c78992149c2ca1e8cd1c9bfdf3239/trolleybus.png",trollface:"https://d78fikflryjgj.cloudfront.net/images/emoji/93f9726f88efd7f6f8479389e102d935/trollface.png",trophy:"https://d78fikflryjgj.cloudfront.net/images/emoji/1d243a4df44a30152577eb9e33b7f614/trophy.png",tropical_drink:"https://d78fikflryjgj.cloudfront.net/images/emoji/ffcfbaea8b297adeeb07db754e2b83e0/tropical_drink.png",tropical_fish:"https://d78fikflryjgj.cloudfront.net/images/emoji/62ba4a76b2ea1a69461c8decbb5dbfab/tropical_fish.png",truck:"https://d78fikflryjgj.cloudfront.net/images/emoji/12ac0c24b7c1b919339adc6d0abdabc4/truck.png",trumpet:"https://d78fikflryjgj.cloudfront.net/images/emoji/b4d97484e9e674c54d01c8c63a150bbe/trumpet.png",tshirt:"https://d78fikflryjgj.cloudfront.net/images/emoji/1866b19c5130fc17b2900229704c9608/tshirt.png",tulip:"https://d78fikflryjgj.cloudfront.net/images/emoji/a4ae9efea459037ba4b17a90631a5bd9/tulip.png",turtle:"https://d78fikflryjgj.cloudfront.net/images/emoji/a0eab36accde8b29e48e437cd604e0fd/turtle.png",tv:"https://d78fikflryjgj.cloudfront.net/images/emoji/4b08354d48edfefab1da03f0e9056969/tv.png",twisted_rightwards_arrows:"https://d78fikflryjgj.cloudfront.net/images/emoji/496d24c75e3bd388f8882c047226af32/twisted_rightwards_arrows.png",two:"https://d78fikflryjgj.cloudfront.net/images/emoji/a86c3871b01d888ca0cf11d5ec3ae5b1/two.png",two_hearts:"https://d78fikflryjgj.cloudfront.net/images/emoji/107751de07a81c5f39c7e94e833ccaf9/two_hearts.png",two_men_holding_hands:"https://d78fikflryjgj.cloudfront.net/images/emoji/9a95cae792c89e28a34894391f7032cc/two_men_holding_hands.png",two_women_holding_hands:"https://d78fikflryjgj.cloudfront.net/images/emoji/bc182f077cc5c1ef640100397913222c/two_women_holding_hands.png",u5272:"https://d78fikflryjgj.cloudfront.net/images/emoji/6d3ca765b3c2fe5f13912464029ddf7c/u5272.png",u5408:"https://d78fikflryjgj.cloudfront.net/images/emoji/470eada08e8d24dafab0d2ed812ceeae/u5408.png",u55b6:"https://d78fikflryjgj.cloudfront.net/images/emoji/fb270596e34e915331a1a226bd2419ba/u55b6.png",u6307:"https://d78fikflryjgj.cloudfront.net/images/emoji/1dd2e526123a4782216ebb5f1ca939da/u6307.png",u6708:"https://d78fikflryjgj.cloudfront.net/images/emoji/0f55eb63f3485080cf27ad1d29524ae0/u6708.png",u6709:"https://d78fikflryjgj.cloudfront.net/images/emoji/b7fde66ea5a96310b97561ee136a4bbe/u6709.png",u6e80:"https://d78fikflryjgj.cloudfront.net/images/emoji/0ad845150281cc80623978f9071a32b1/u6e80.png",u7121:"https://d78fikflryjgj.cloudfront.net/images/emoji/68ec1036d9c3b8b26a2b1bacdfb8f0c2/u7121.png",u7533:"https://d78fikflryjgj.cloudfront.net/images/emoji/274fc9ee47d010043a572e409cc21974/u7533.png",u7981:"https://d78fikflryjgj.cloudfront.net/images/emoji/01e00306dbad69bcf5665e072e82c38f/u7981.png",u7a7a:"https://d78fikflryjgj.cloudfront.net/images/emoji/5bb1d2a4be31b3e282dd15b22f23c7c3/u7a7a.png",uk:"https://d78fikflryjgj.cloudfront.net/images/emoji/085a66819b0bbc0133620b7b8688da1d/uk.png",umbrella:"https://d78fikflryjgj.cloudfront.net/images/emoji/969e870efe593fc59be4ad0a295ae207/umbrella.png",unamused:"https://d78fikflryjgj.cloudfront.net/images/emoji/1276c788d2fad3e5423cfe4c7ef8be08/unamused.png",underage:"https://d78fikflryjgj.cloudfront.net/images/emoji/f54553f1b72238d146ce3afcec3220e2/underage.png",unlock:"https://d78fikflryjgj.cloudfront.net/images/emoji/954e8e99a860ac6389ab68005e9f7a92/unlock.png",up:"https://d78fikflryjgj.cloudfront.net/images/emoji/3dae50b31b73a42e3fe8a3f83b61ea15/up.png",us:"https://d78fikflryjgj.cloudfront.net/images/emoji/f1e97e62423aba4a74ee886bbffbb30e/us.png",v:"https://d78fikflryjgj.cloudfront.net/images/emoji/265337288a2e1e0ee5376526efcb71a0/v.png",vertical_traffic_light:"https://d78fikflryjgj.cloudfront.net/images/emoji/1a500844d64984f4c97ee0ef22b3dcb0/vertical_traffic_light.png",vhs:"https://d78fikflryjgj.cloudfront.net/images/emoji/929b344d9e819467362e4cd5c81e2585/vhs.png",vibration_mode:"https://d78fikflryjgj.cloudfront.net/images/emoji/7db092d9758b28380a947c862943e036/vibration_mode.png",video_camera:"https://d78fikflryjgj.cloudfront.net/images/emoji/cacb16494c5f57458ae51bff07c61dde/video_camera.png",video_game:"https://d78fikflryjgj.cloudfront.net/images/emoji/90752f7986d347eb97279c2a37c2bd4d/video_game.png",violin:"https://d78fikflryjgj.cloudfront.net/images/emoji/14e7c491894adb8f7c4c57f000c634d8/violin.png",virgo:"https://d78fikflryjgj.cloudfront.net/images/emoji/0dba6af4e199d839b8a290343c6a5bab/virgo.png",volcano:"https://d78fikflryjgj.cloudfront.net/images/emoji/483647aaa8a1f9cd74c2a75089d26d71/volcano.png",vs:"https://d78fikflryjgj.cloudfront.net/images/emoji/cde6b45fe7b3064d80304cf4bd116704/vs.png",walking:"https://d78fikflryjgj.cloudfront.net/images/emoji/a2b0b05da920d1875635ed544ae41da8/walking.png",waning_crescent_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/dfff27056486b05662704fe32755c037/waning_crescent_moon.png",waning_gibbous_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/771b7eee2ad90deeb49edf0f1e8afaa3/waning_gibbous_moon.png",warning:"https://d78fikflryjgj.cloudfront.net/images/emoji/98ce0e63a6477613fd5c93e10e721347/warning.png",watch:"https://d78fikflryjgj.cloudfront.net/images/emoji/62ac3ef7e2a45a50f73be5ba61c6ab86/watch.png",water_buffalo:"https://d78fikflryjgj.cloudfront.net/images/emoji/57d998fe8ff188403cb8ab2d18b944d7/water_buffalo.png",watermelon:"https://d78fikflryjgj.cloudfront.net/images/emoji/b50831dff4921536447a33ced3704dad/watermelon.png",wave:"https://d78fikflryjgj.cloudfront.net/images/emoji/49af2bc8b93c120a6c78f71190f7ddeb/wave.png",wavy_dash:"https://d78fikflryjgj.cloudfront.net/images/emoji/52f8d90726752ff326a79450a370ebe4/wavy_dash.png",waxing_crescent_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/881b888a50215af333b8af93304c67e5/waxing_crescent_moon.png",waxing_gibbous_moon:"https://d78fikflryjgj.cloudfront.net/images/emoji/c1c65fc03c3c8cb9a54b16ec2a408e4e/waxing_gibbous_moon.png",wc:"https://d78fikflryjgj.cloudfront.net/images/emoji/d9a415b30a1165a6a0944d286443e01a/wc.png",weary:"https://d78fikflryjgj.cloudfront.net/images/emoji/39fb5de7a7ea04f81626d00a859aff5d/weary.png",wedding:"https://d78fikflryjgj.cloudfront.net/images/emoji/4ec62cc9b6d543f6c9aaa71061845862/wedding.png",whale:"https://d78fikflryjgj.cloudfront.net/images/emoji/cb70a122ec80e35de873e114102570d9/whale.png",whale2:"https://d78fikflryjgj.cloudfront.net/images/emoji/8321f58cc3c1bb348248855be2ddbdd3/whale2.png",wheelchair:"https://d78fikflryjgj.cloudfront.net/images/emoji/ffc57fc2b6c5bd3603c5f6ece486afbe/wheelchair.png",white_check_mark:"https://d78fikflryjgj.cloudfront.net/images/emoji/52b7898655c0dc2e738e47119c2725ee/white_check_mark.png",white_circle:"https://d78fikflryjgj.cloudfront.net/images/emoji/24414ac269eb83605cb54b8a27543110/white_circle.png",white_flower:"https://d78fikflryjgj.cloudfront.net/images/emoji/fcc845d9ed5188b7e37a0ee886563ffc/white_flower.png",white_large_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/abe3c5affc70379045f106c921e8902c/white_large_square.png",white_medium_small_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/6a9d4eee072764def24da5c67218829b/white_medium_small_square.png",white_medium_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/29ea5ed9b49466266fa460e497c4bca0/white_medium_square.png",white_small_square:"https://d78fikflryjgj.cloudfront.net/images/emoji/00b3954259034244db1fac19fd24b67c/white_small_square.png",white_square_button:"https://d78fikflryjgj.cloudfront.net/images/emoji/5d936ce92087fdec6aab2c97ffa98ce7/white_square_button.png",wind_chime:"https://d78fikflryjgj.cloudfront.net/images/emoji/e041ab21fd38ec8b0849c037cd454919/wind_chime.png",wine_glass:"https://d78fikflryjgj.cloudfront.net/images/emoji/23a75834f5d67ae20c697a90bb7d3c20/wine_glass.png",wink:"https://d78fikflryjgj.cloudfront.net/images/emoji/83fff972417765e6f3224e3be0e1522b/wink.png",wolf:"https://d78fikflryjgj.cloudfront.net/images/emoji/b96f9a3696bdf4dd1c20f7fb5abd0d63/wolf.png",woman:"https://d78fikflryjgj.cloudfront.net/images/emoji/07ff6878b3db138c8e015f637494072e/woman.png",womans_clothes:"https://d78fikflryjgj.cloudfront.net/images/emoji/c3221918effc3fe7ea90a5d7fa87e501/womans_clothes.png",womans_hat:"https://d78fikflryjgj.cloudfront.net/images/emoji/020d56b5affcb3ce3eb278b3119e5380/womans_hat.png",womens:"https://d78fikflryjgj.cloudfront.net/images/emoji/78c01e391b892354f650d8e410fabb86/womens.png",worried:"https://d78fikflryjgj.cloudfront.net/images/emoji/506b4c5bd9355073e5f09c330cd0406c/worried.png",wrench:"https://d78fikflryjgj.cloudfront.net/images/emoji/09d2bd1ee197a5d1e40442e35427f31c/wrench.png",x:"https://d78fikflryjgj.cloudfront.net/images/emoji/42ab430c65cbcf8df9561ca3ec89a6ec/x.png",yellow_heart:"https://d78fikflryjgj.cloudfront.net/images/emoji/890f59007121ead636867c0307873248/yellow_heart.png",yen:"https://d78fikflryjgj.cloudfront.net/images/emoji/d71335520e7df5b0391cfd8f96820050/yen.png",yum:"https://d78fikflryjgj.cloudfront.net/images/emoji/d9559425ef6df9d85fcd042968f006b7/yum.png",zap:"https://d78fikflryjgj.cloudfront.net/images/emoji/32a6549c8137f1f5a265fab7cd344116/zap.png",zero:"https://d78fikflryjgj.cloudfront.net/images/emoji/2910daa978f87df3bb359e78064f65a8/zero.png",zzz:"https://d78fikflryjgj.cloudfront.net/images/emoji/f21df57a654483f76ca9e22c5edeab1c/zzz.png"};
var ARTISTS,STICKERPACKS,STICKER_SIZE,Stickers;ARTISTS={jason:{name:"Jason Gammon",link:"http://www.objectunknown.com/"},meg:{name:"Meghan Robichaud",link:"http://meghanrobichaud.com/"},glenn:{name:"Glenn Thomas",link:"http://thefoxandking.com"},jared:{name:"Jared K. Nickerson",link:"http://jthreeconcepts.com/"},tim:{name:"Timothy J. Reynolds",link:"http://www.turnislefthome.com/"}},STICKERPACKS={taco:{displayName:"Taco Pack"},pete:{displayName:"Pete the Computer"}},STICKER_SIZE=80,Stickers={check:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7f8b93da6962dbdbd8ad8ca9725b70d4/check.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7f8b93da6962dbdbd8ad8ca9725b70d4/check.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fa8dbd7aacfe2a7210f1d0097f60cb59/check%402x.png"}]},heart:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/040c2a5c2384e6a865a0c3b5826c84dc/heart.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/040c2a5c2384e6a865a0c3b5826c84dc/heart.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/019d22c5e040aae741ee22320e87918c/heart%402x.png"}]},warning:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8d09ca694f4f701c4af7662f1db43bf4/warning.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8d09ca694f4f701c4af7662f1db43bf4/warning.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6997a499c0fb650e00356a17bdc6ab1/warning%402x.png"}]},clock:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5efd3f442437ce78b55acf1bd871c39c/clock.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5efd3f442437ce78b55acf1bd871c39c/clock.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/87b5fbcfe44dc9e169f899a42c2be236/clock%402x.png"}]},smile:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9cb14e79838122328b26afd226ab12ce/smile.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9cb14e79838122328b26afd226ab12ce/smile.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/998875a36221574672f57f6554961ba8/smile%402x.png"}]},laugh:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/43ce225d4422d0a8389bf1477b5d0ce6/laugh.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/43ce225d4422d0a8389bf1477b5d0ce6/laugh.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/1e13f5e64ace6f8af25079ac1292da6f/laugh%402x.png"}]},huh:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9217db04d28bf20f990f7afe16bd5450/huh.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9217db04d28bf20f990f7afe16bd5450/huh.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/1ff113c90b481b17f1c83fe7adb0e0b2/huh%402x.png"}]},frown:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3499b916bb0e55fb9ee349fa920cefb2/frown.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3499b916bb0e55fb9ee349fa920cefb2/frown.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/a018fdb9bcc928299c268a3fe7cd77e7/frown%402x.png"}]},thumbsup:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4526d8454c53066ee45a2bdd2669119c/thumbsup.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4526d8454c53066ee45a2bdd2669119c/thumbsup.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/823c320becd3162e37ef746471ef56b2/thumbsup%402x.png"}]},thumbsdown:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/28a8538f495707e41d1204b3af945e02/thumbsdown.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/28a8538f495707e41d1204b3af945e02/thumbsdown.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ddb64e7188c37eb55b02aa65002630fc/thumbsdown%402x.png"}]},star:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3ec82cf81a9cb4809919c824f3a51eb6/star.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3ec82cf81a9cb4809919c824f3a51eb6/star.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f73bd3b8454e5eaf399a678f425cc90f/star%402x.png"}]},rocketship:{type:"standard",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9ec91c204d89c5439b4f86884be13724/rocketship.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9ec91c204d89c5439b4f86884be13724/rocketship.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0eb0a91e4ede66800bad335ddef2721e/rocketship%402x.png"}]},"taco-love":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"}]},"taco-confused":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/06668f130b632bf4ba0dc7f492628e00/taco-confused%402x.png"}]},"taco-cool":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8f4ac7820629d5aac2e2faca5b013e4c/taco-cool%402x.png"}]},"taco-angry":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/88141aecd4c8fbdc3ff11ef292b4526f/taco-angry%402x.png"}]},"taco-celebrate":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"}]},"taco-robot":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e1ac5a98088053a8b1ae90cd8f3f056e/taco-robot%402x.png"}]},"taco-alert":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"}]},"taco-active":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/afe6f31288619ede4f82d516cad6a11e/taco-active%402x.png"}]},"taco-money":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f0130dd81ed48f6e4626cbdc233b2fda/taco-money%402x.png"}]},"taco-reading":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0c3110a4622a680fd4a9b63de14521da/taco-reading%402x.png"}]},"taco-trophy":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9143546ce5c8a3e43736be79803ead39/taco-trophy%402x.png"}]},"taco-sleeping":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9a51d634e8521dc0e19c09db4df95d8e/taco-sleeping%402x.png"}]},"taco-pixel":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3751a48869a42911093b6eae9d0a7f8c/taco-pixel%402x.png"}]},"taco-proto":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/51def85cdcf3c1a58cb1ab2ac3749251/taco-proto%402x.png"}]},"taco-embarrassed":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/02663f87e33a2c79828098d1f2d9a086/taco-embarrassed%402x.png"}]},"taco-clean":{type:"premium",pack:STICKERPACKS.taco,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7c593a77fe481b61a2cad4b74b2f8c1c/taco-clean%402x.png"}]},"pete-happy":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0663bc183a0cf0d039498cd8c5db8043/pete-happy%402x.png"}]},"pete-love":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e461f2c1917d10063fb169a33bb1191/pete-love%402x.png"}]},"pete-broken":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6d84909328bf960bdfcab760e46c886f/pete-broken%402x.png"}]},"pete-alert":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3453c1a26ddd1187e56431940c7aedfc/pete-alert%402x.png"}]},"pete-talk":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/217a5d2b04a6dea23726a7949dae9ac7/pete-talk%402x.png"}]},"pete-vacation":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/060295310e437200bf334ff7322eede1/pete-vacation%402x.png"}]},"pete-confused":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7ff61659ad2cd4837aacd999aedcd233/pete-confused%402x.png"}]},"pete-shipped":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d9ff936d513aae5a67c8f9653a5c49e/pete-shipped%402x.png"}]},"pete-busy":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/35503951628d67da2c8aaabd49aaf769/pete-busy%402x.png"}]},"pete-completed":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3197b9305f52b722df47abdb84c063f8/pete-completed%402x.png"}]},"pete-space":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/aa9cb8354739fb355a4abd1c977d975a/pete-space%402x.png"}]},"pete-sketch":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3808b148cca5b1ed3da001b7c13d5110/pete-sketch%402x.png"}]},"pete-ghost":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4a28ad313694864c5a661b964a9510ff/pete-ghost%402x.png"}]},"pete-award":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/43dd35d5e48a876a50fc6c63f53f005e/pete-award%402x.png"}]},"pete-music":{type:"premium",pack:STICKERPACKS.pete,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/df6a7a7b952e8826916f00e69b503af1/pete-music%402x.png"}]}};var BACKGROUNDPACKS,Backgrounds,CC_License;CC_License="http://creativecommons.org/licenses/by/2.0/deed.en",BACKGROUNDPACKS={photos:{name:"Photos"},patterns:{name:"Patterns and Textures"}},Backgrounds={blue:{type:"default",brightness:"dark",color:"#23719F"},green:{type:"default",brightness:"dark",color:"#5A966E"},orange:{type:"default",brightness:"dark",color:"#BD6F32"},red:{type:"default",brightness:"dark",color:"#BF4A40"},grey:{type:"default",brightness:"dark",color:"#707070"},purple:{type:"default",brightness:"dark",color:"#6D5798"},mountain:{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/171b0c9aea08e21f0020f359408b73e4/full.jpg",scaled:[{width:2400,height:1696,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/46616ebeae7245d4a16cf00cf1e21e86/large.jpg"},{width:1024,height:724,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/07627e0760eb74e7109a82057ac86881/medium.jpg"},{width:320,height:227,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/da8d70dd70d666361767b9e30acdba65/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/62681247@N00/6575973407/",name:"jqmj (Queralt)",license:CC_License}},cosmos:{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/92448e055514fdc92923c9b591aa31df/full.jpg",scaled:[{width:2047,height:1638,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/be5121d350dd3e3ac97e209c3a7fce58/large.jpg"},{width:1600,height:1280,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/f95acce485fc44f9a07853aa15965f90/medium.jpg"},{width:320,height:256,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/0646808c900b7409dbeb96d36f55e980/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/gsfc/6945160410/",name:"NASA Goddard Space Flight Center",license:CC_License}},rain:{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/2e8209ee9f21d7147a24cac28ea61358/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/9de9b88a694019ab77d129f1729b05b7/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/b8ac88f9c4e8097c1ef8cc269d66e089/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/e9147244c93e3990f361bc8123cacca9/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/vinothchandar/5243641910/",name:"Vinoth Chandar",license:CC_License}},dew:{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/1d638bc56d179d5a8c35177305d4ea09/full.jpg",scaled:[{width:2400,height:1594,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/5b5f4c5cd0d7e144e40168345c8c6075/large.jpg"},{width:1024,height:680,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/3c8daf991e3132f453ad0c822175b34d/medium.jpg"},{width:320,height:212,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/71633df28ad4038a6fb6f647c1b29b27/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/jenny-pics/5584430423/",name:"Jenny Downing",license:CC_License}},"snow-bokeh":{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/75b2ce11e6652e76ad0d3629d9886ca5/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/11fc1afae97ec97b3b46b149d701e180/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/9f4c60883dec8b5aa5bc949607081505/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/d74c2d921e28c822e92b881b3e2cb10b/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/tabor-roeder/5337595458/",name:"Phil Roeder",license:CC_License}},city:{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/1bbbf09d491d444d207e5d8b792a86ba/full.jpg",scaled:[{width:2400,height:1594,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/d23508735801f1190b365330eb8ec0a5/large.jpg"},{width:1024,height:680,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/a7eea5e35c08388ec3da7dbc814f1da2/medium.jpg"},{width:320,height:212,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/27e00a7bee7a783ae7568a819fa9bb97/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/nosha/2907855809/",name:"Nathan Siemers",license:CC_License}},canyon:{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/0c35d8049641c307de51cac7d449bf4e/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/ee79179217e377e332d217cbe10405b4/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/976ada2d506ebb7c2f8708f2ccc47192/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/1478a9382a5ab8c493685223ff36e6f7/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/wolfgangstaudt/2252688630/",name:"Wolfgang Staudt",license:CC_License}},ocean:{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/4ce437330ab9d2fe40dd3d8504a143e6/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/ede6927e92b4515102b2d86e919c77fa/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/c8a238f606e3288c461fc7ea3daa36d9/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/2de3527d131722c66ec5315205d64104/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mattphipps/4635112852/",name:"MattJP",license:CC_License}},river:{type:"premium",pack:BACKGROUNDPACKS.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/b031ec422c9048f4b6fb3b53f80eba3c/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/801d937c765a9996d4eccf4aee6bfc36/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/67c2c39a74a32f383ffd10dc53ffb535/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/15967f866d002762d13d20d258140418/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/22746515@N02/3114276532/",name:"Bert Kaufmann",license:CC_License}},fall:{type:"premium",pack:BACKGROUNDPACKS.photos,discontinued:!0,fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/72c32b15d265b78e7058896d4bc85c3b/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/a42f50fe10ff082519a499a2e86be1dc/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/a999e10749c6db57a5acd9960324ed6f/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/8c8e3c5c5eebeac446c7e19ee36d23ae/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mendhak/4107993637/",name:"mendhak",license:CC_License}},snow:{type:"premium",pack:BACKGROUNDPACKS.photos,discontinued:!0,fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/d5dd0a98d6b0a7ebcaff02dad1535fab/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/149d6adb0c746612aa21ec3c46455583/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/147471be1b6fa8858c40febf9702795b/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/da5f83eace8c3f4e13f1287cefd07956/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/zachd1_618/5386165480/",name:"Zach Dischner",license:CC_License}},purty_wood_dark:{type:"premium",pack:BACKGROUNDPACKS.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/7a14a57fef9435b0def0f613d0114334/purty_wood_dark.png",attribution:{url:"http://subtlepatterns.com/purty-wood/",name:"Richard Tabor",license:CC_License}},"subtle-irongrip":{type:"premium",pack:BACKGROUNDPACKS.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/c9f15836db29df79c2a0092a6758d81e/subtle-irongrip.png",attribution:{url:"http://subtlepatterns.com/iron-grip/",name:"Tony Kinard",license:CC_License}},"red-sweater":{type:"premium",pack:BACKGROUNDPACKS.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/17d3a6bc27bdcd05caeae11f67fa46d6/red-sweater.png",attribution:{url:"http://subtlepatterns.com/wild-oliva/",name:"Badhon Ebrahim",license:CC_License}},hex:{type:"premium",pack:BACKGROUNDPACKS.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/2e2cb18ce229869faec815b4d8fe2770/hex.png"},wave:{type:"premium",pack:BACKGROUNDPACKS.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/bb289a4f00f13e8ca52e67afd11c1648/wave.png"},bricks:{type:"premium",pack:BACKGROUNDPACKS.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/5e21dfb838e99d8a7c540a2b90d36f29/bricks.png"},"purple-blur":{type:"premium",pack:BACKGROUNDPACKS.patterns,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/3a02eab932195316109bd905d3341323/purple-blur.png"},"orange-blur":{type:"premium",pack:BACKGROUNDPACKS.patterns,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/07a3436eabfd187ee94ae8c578584d07/orange-blur.png"}};var SelectionRange,TrelloMarkdown,__slice=[].slice,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};TrelloMarkdown=function(){function e(t){var i,n,r;this.options=null!=t?t:{},null==(i=this.options).shouldOpenLinkInNewTab&&(i.shouldOpenLinkInNewTab=function(){return!1}),this.lexerBlockRules=this.options.inlineOnly?[e.lexerBlockRules.error]:this._expandRules(e.lexerBlockRules,null!=(n=this.options.restrict)?n.block:void 0),this.lexerInlineRules=this._expandRules(e.lexerInlineRules,null!=(r=this.options.restrict)?r.inline:void 0)}var t,i,n;return e.prototype._expandRules=function(e,t){var i,n,r,o,s,a,l,c,d;s=_.sortBy(_.keys(e),function(e){return-e.length}),a=RegExp(""+s.join("|"),"g"),t=null!=t?t.concat(function(){var t;t=[];for(c in e)l=e[c],(l.required||null==l.token)&&t.push(c);return t}()):function(){var t,i;i=[];for(o in e)l=e[o],(null!=(t=l.nondefault)?t:!1)||i.push(o);return i}(),e=_.pick(e,_.intersection(_.keys(e),t)),i=function(){return function(t){var n,r;return n=e[t]=_.clone(e[t]),n.compiled=!0,r=n.match.source.replace(a,function(t){var n,r;return r=e[t],null!=(null!=r?r.match:void 0)?(r.compiled||i(t),n=r.match):n=/[]/,n.source.replace(/(^|[^\[])\^/g,"$1")}),n.match=RegExp(""+r),n.match_i=RegExp(""+r,"i"),n.match_gim=RegExp(""+r,"gim"),n}}(this);for(c in e)d=e[c],r=d.match,n=d.compiled,null==r||n||i(c);return e},e.lexerBlockRules={newline:{match:/^\n/,token:function(e,t,i){var n;return n=e[0],{type:"space",canCondense:!0,children:{text:n,ranges:i.slice(0,n)}}}},code:{match:/^(\x20{4}[^\n]+\n*)+/,token:function(e){var t;return t=e[0],{type:"code",text:t.replace(/^ {4}/gm,"").replace(/\n+$/,"")}}},fencedCode:{match:/^\x20*(`{3,}|~{3,})\x20*(\S+)?\x20*\n([\s\S]+?)\s*?\1\x20*(?:\n+|$)/,token:function(e){var t,i,n,r;return t=e[0],i=e[1],n=e[2],r=e[3],{type:"code",language:n,text:r}}},heading:{match:RegExp("^(\\x20*(\\#{1,6})\\x20*)([^\\n]+?)\\x20*\\#*\\x20*(?:\\n+|$)"),token:function(e,t,i){var n,r,o,s;return n=e[0],r=e[1],o=e[2],s=e[3],{type:"heading",depth:o.length,children:{text:s,ranges:i.slice(r.length,s)}}}},lheading:{match:/^([^\n]+)\n\x20*(=|-){3,}\x20*\n*/,token:function(e,t,i){var n,r,o;return n=e[0],o=e[1],r=e[2],{type:"heading",depth:"="===r?1:2,children:{text:o,ranges:i.slice(0,o)}}}},hr:{match:/^(?:\x20*[-*_]){3,}\x20*(?:\n|$)/,token:function(){return{type:"hr"}}},blockquote:{match:/^(\x20*>[^\n]+(\n[^\n]+)*\n*)+/,token:function(e,t,i){var n,r,o,s;return n=e[0],s=[],o=n.replace(/^ *> ?/gm,function(e,t){var n,r,o,a;for(a=i.slice(t,e).spans,r=0,o=a.length;o>r;r++)n=a[r],s.push(n);return""}),r=i.subtract(new SelectionRange(s)),[{type:"blockquote_start"}].concat(__slice.call(this.blockLex(o,t,r)),[{type:"blockquote_end"}])}},num:{match:/(?:\d+\.)/},dash:{match:/(?:[*+-])/},bullet:{match:/(?:dash|num)/},item:{match:/^(\x20*)(bullet)\x20[^\n]*(?:\n(?!\1bullet\x20)[^\n]*)*/},list:{match:/^(\x20*)(?:(dash)\x20[\s\S]+?(?:\nhr|\n{2,}(?=def|(?!\x20))(?!\1dash\x20)\n*|\s*$)|(num)\x20[\s\S]+?(?:\nhr|\n{2,}(?=def|(?!\x20))(?!\1num\x20)\n*|\s*$))/,token:function(e,t,i){var n,r,o,s,a,l,c,d,u;return n=e[0],d=e[1],r=e[2],c=e[3],l=!1,o=0,a=[],u=null!=r?"ul":"ol",s=n.match(this.lexerBlockRules.item.match_gim).length,n.replace(this.lexerBlockRules.item.match_gim,function(e){return function(){var n,r,c,d,p,h,m,f,g;return c=arguments[0],r=4<=arguments.length?__slice.call(arguments,1,g=arguments.length-2):(g=1,[]),d=arguments[g++],n=arguments[g++],p=i.slice(d,c),m=l||/\n\n(?!\s*$)/.test(c),o!==s-1&&(l="\n"===c[c.length-1],m||(m=l)),f=c.length,c=c.replace(/^\x20*([*+-]|\d+\.)\x20+/,function(e){return p=p.subtract(p.slice(0,e)),""}),f-=c.length,h=p.clone(),c=c.replace(RegExp("^\\x20{1,"+f+"}","gm"),function(e,t){return p=p.subtract(h.slice(t,e)),""}),a.push([{type:"list_item_start",tag:u,condense:!m,index:o}].concat(__slice.call(e.blockLex(c,_.extend({},t,{top:!1}),p)),[{type:"list_item_end"}])),o++,""}}(this)),[{type:"list_start",tag:u}].concat(__slice.call(_.flatten(a)),[{type:"list_end"}])}},def:{top:!0,match:/^\x20*\[([^\]]+)\]:\x20*<?([^\s>]+)>?(?:\x20+["(]([^\n]+)[")])?\x20*(?:\n+|$)/,token:function(e,t){var i,n,r,o,s;return i=e[0],n=e[1],s=e[2],o=e[3],r=t.references,null!=r&&r.set(n,{url:s,title:o}),null}},blockAtMention:{nondefault:!0,match:/^@([a-z0-9_]+)(?=\n|$)/,token:function(e){var t,i;return t=e[0],i=e[1],{type:"atMention",username:i}}},paragraph:{top:!0,match:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|def|blockAtMention))+)\n*/,token:function(e,t,i){var n,r,o;return n=e[0],r=e[1],o=r.replace(/\n$/,""),{type:"text",children:{text:o,ranges:i.slice(0,o)}}}},text:{required:!0,match:/^[^\n]+/,token:function(e,t,i){var n;return n=e[0],{type:"text",canCondense:!0,children:{text:n,ranges:i.slice(0,n)}}}},error:{required:!0,match:/^[\s\S]+/,token:function(e){var t;throw t=e[0],Error("invalid block input "+t)}}},i=function(e){var t,i,n,r,o,s;return t=e.image,n=e.text,s=e.url,r=e.title,i=e.ranges,o={title:r,url:s},t?(o.type="image",o.text=n):(o.type="link",o.children={text:n,ranges:i.slice(1,n)}),o},e.lexerInlineRules={escape:{required:!0,match:/^\\([\\`*{}\[\]()\#+\-.!_>~|@:])/,token:function(e){var t,i;return t=e[0],i=e[1],{type:"text",text:i}}},tld:{match:/(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)/},bareLink:{match:/([a-z0-9\-]+\.)+(?:tld)/},autolink:{match:/^<(?:(email)|(url|bareLink))>/,token:function(e){var t,i,n;return t=e[0],i=e[1],n=e[2],null!=i?{type:"mailto",email:i}:/^[\w-]+:/.test(n)?{type:"link",url:n}:{type:"link",url:"http://"+n,text:n}}},email:{match:/^[-a-z0-9\+\._'%]+@[a-z0-9-\.]+\.[a-z]{2,}/,token:function(e){var t;return t=e[0],{type:"mailto",email:t}}},inside:{match:/(?:\[[^\]\[]*\]|[^\]\[]|\](?=[^\[]*\]))*/},href:{match:/\s*<?((?:[^\s\(\)]?(?:\([^\s()<>]*\)|\()?)+)>?(?:\s+['"]([\s\S]*?)['"])?\s*/},emailLink:{match:/^\[(inside)\]\((email)\)/,token:function(e){var t,i,n;return t=e[0],n=e[1],i=e[2],{type:"mailto",email:i,text:n}}},link:{match:/^\[(inside)\]\(href\)/,token:function(e,t,n){var r,o,s,a;return r=e[0],o=e[1],a=e[2],s=e[3],i({text:o,url:a,title:s,ranges:n})}},image:{match:/^(!)\[(inside)\]\(href\)/,token:function(e,t,n){var r,o,s,a,l;return r=e[0],o=e[1],s=e[2],l=e[3],a=e[4],i({image:!0,text:s,url:l,title:a,ranges:n})}},reflink:{match:/^(!?)\[(inside)\]\s*\[([^\]]*)\]/,token:function(e,t,n){var r,o,s,a,l,c;return r=e[0],o=e[1],l=e[2],a=e[3],null==(s=null!=(c=t.references)?c.get(a||l):void 0)?!1:i({image:o,text:l,url:s.url,title:s.title,ranges:n})}},nolink:{match:/^(!?)\[((?:\[[^\]]*\]|[^\[\]])*)\]/,token:function(e,t,n){var r,o,s,a,l;return r=e[0],o=e[1],a=e[2],null==(s=null!=(l=t.references)?l.get(a):void 0)?!1:i({image:o,text:a,url:s.url,title:s.title,ranges:n})}},url:{match:/^((?:[\w-]+:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’])|(?:bareLink)\b)/,token:function(e){var t;return t=e[0],/^[a-z]+:/.test(t)?{type:"link",url:t}:{type:"link",url:"http://"+t,text:t}}},strong:{match:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,token:function(e,t,i){var n,r,o,s;return n=e[0],s=e[1],r=e[2],o=null!=s?s:r,[{type:"strong_start"}].concat(__slice.call(this.inlineLex(o,t,i.slice(2,o))),[{type:"strong_end"}])}},em:{match:/^\b_([\s\S]+?)_\b|^\*([\s\S]+?)\*(?!\*)/,token:function(e,t,i){var n,r,o,s;return n=e[0],s=e[1],r=e[2],o=null!=s?s:r,[{type:"em_start"}].concat(__slice.call(this.inlineLex(o,t,i.slice(1,o))),[{type:"em_end"}])}},strikethrough:{match:/^~~([\s\S]+?)~~/,token:function(e,t,i){var n,r,o;return n=e[0],r=e[1],o=r,[{type:"strikethrough_start"}].concat(__slice.call(this.inlineLex(o,t,i.slice(2,o))),[{type:"strikethrough_end"}])}},code:{match:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,token:function(e){var t,i,n;return t=e[0],n=e[1],i=e[2],{type:"code",text:i}}},"break":{match:/^\x20*\n(?!\s*$)/,token:function(){return{type:"break"}}},atMention:{match:/^@([a-z0-9_]+)/,token:function(e){var t,i;return t=e[0],i=e[1],{type:"atMention",username:i}}},cardReference:{match:/^\#([\d]+)/,token:function(e){var t,i;return t=e[0],i=e[1],{type:"cardReference",number:i}}},emoji:{match:/^:([a-z0-9_+-]+):/,token:function(e){var t,i;return t=e[0],i=e[1],{type:"emoji",emoji:i}}},hashtag:{nondefault:!0,match:/^\#([\S]+)/,token:function(e){var t,i;return t=e[0],i=e[1],{type:"text",text:t}}},text:{required:!0,match:/^[\s\S]+?(?:\w[@\#\:][\s\S]+?)?(?=[\\<!\[_*`~]|\x20*\n|[@\#:]|(?:\b(?:url|email))|$)/,token:function(e){var t;return t=e[0],{type:"text",text:t}}},error:{required:!0,match:/^[\s\S]+/,token:function(e){var t;throw t=e[0],Error("invalid inline input "+t)}}},t=function(e){var t,i,n,r;return n=e.username,null!=this.options.lookupMember&&(r=this.options.lookupMember(n,this.state),i=r[0],t=r[1],null!=i)?this.html("span","@"+n,{attrs:{"class":"atMention"+(t?" me":""),title:""+i}}):this.text("@"+n)},e.prototype.parseBlockOutput={space:function(){return""},hr:function(){return this.htmln("hr",null)},heading:function(e){var t,i;return i=e.depth,t=e.children,this.htmln("h"+i,this.children(t))},blockquote_start:function(){return this.htmln("blockquote",this.process("blockquote_end"),{newlineAfterTag:!0})},list_start:function(e){var t;return t=e.tag,this.htmln(t,this.process("list_end"),{newlineAfterTag:!0})},list_item_start:function(e){var t;return t=e.condense,this.htmln("li",this.process("list_item_end",t))},text:function(e){var t;return t=e.children,this.htmln("p",this.children(t))},code:function(e){var t;return t=e.text,this.htmln("code",this.text(t),{preTag:"<pre>",postTag:"</pre>"})},atMention:t},e.prototype.parseInlineOutput={text:function(e){var t;return t=e.text,this.text(t)},strong_start:function(){return this.html("strong",this.process("strong_end"))},em_start:function(){return this.html("em",this.process("em_end"))},strikethrough_start:function(){return this.html("del",this.process("strikethrough_end"))},code:function(e){var t;return t=e.text,this.html("code",this.escape(t))},"break":function(){return this.html("br",null)},link:function(e){var t,i,n,r,o,s;return s=e.url,r=e.text,o=e.title,t=e.children,i=null!=t?this.children(t):this.escape(null!=r?r:s),n=this.options.shouldOpenLinkInNewTab(s)?"_blank":null,this.html("a",i,{attrs:{href:s,title:o,target:n}})},mailto:function(e){var t,i;return t=e.email,i=e.text,this.html("a",this.escape(null!=i?i:t),{attrs:{href:"mailto:"+t}})},image:function(e){var t,i,n;return n=e.url,i=e.title,t=e.text,this.html("img",null,{attrs:{src:n,alt:t,title:i}})},atMention:t,cardReference:function(e){var t,i,n;return i=e.number,t="function"==typeof(n=this.options).lookupCardInfo?n.lookupCardInfo(i,this.state):void 0,this.html("a","#"+i,{attrs:{href:""+t.url,title:""+t.title}})},emoji:function(e){var t,i,n;return t=e.emoji,i="function"==typeof(n=this.options).lookupEmoji?n.lookupEmoji(t,this.state):void 0,null!=i?this.html("img",null,{attrs:{src:i,title:t,"class":"emoji"}}):this.text(":"+t+":")}},e.prototype.parseBlockOutputText={space:function(){return this.plaintextn("")},hr:function(){return this.plaintextn("")},heading:function(e){var t,i;return i=e.depth,t=e.children,this.plaintextn(this.textChildren(t))},blockquote_start:function(){return this.plaintext(this.textProcess("blockquote_end"))},list_start:function(e){var t,i;return i=e.tag,function(){var e,i,n,r;for(n=this.textProcess("list_end").split("\n"),r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(this.plaintextn(" "+t));return r}.call(this).join("")},list_item_start:function(e){var t,i,n,r;return r=e.tag,n=e.index,i=e.condense,t="ol"===r?""+(n+1)+".":"*",this.plaintextn(""+t+" "+this.textProcess("list_item_end",i))},text:function(e){var t;return t=e.children,this.plaintextn(""+this.textChildren(t)+"\n")},code:function(e){var t;return t=e.text,this.plaintextn(t)},atMention:function(e){var t;return t=e.username,this.plaintextn(text)}},e.prototype.parseInlineOutputText={text:function(e){var t;return t=e.text,this.plaintext(t)},strong_start:function(){return this.plaintext(this.textProcess("strong_end"))},em_start:function(){return this.plaintext(this.textProcess("em_end"))},code:function(e){var t;return t=e.text,this.plaintext(t)},"break":function(){return this.plaintext("\n")},link:function(e){var t,i,n,r;return r=e.url,i=e.text,n=e.title,t=e.children,this.plaintext(null!=t?""+this.textChildren(t)+" ("+r+")":null!=i?""+i+" ("+r+")":r)},mailto:function(e){var t,i;return t=e.email,i=e.text,this.plaintext(null!=i?""+i+" ("+t+")":t)},image:function(e){var t,i,n;return n=e.url,i=e.title,t=e.text,this.plaintext(null!=i?i:"")},atMention:function(e){var t;return t=e.username,this.plaintext(t)},cardReference:function(e){var t;return t=e.number,this.plaintext("#"+t)},emoji:function(e){var t;return t=e.emoji,this.plaintext(":"+t+":")}},e.prototype.lex=function(e,t,i,n){var r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y,w,k,C,x,j;for(null==i&&(i={}),null==i.top&&(i.top=!0),null==i.locations&&(i.locations=[]),c=n.clone(),t=t.replace(/^\x20+$/gm,function(e,t){return n=n.subtract(c.slice(t,e)),""}),o=[],a=0;t;)for(d in e)if(C=e[d],l=C.match_i,f=C.token,b=C.top,null!=f&&(null==b||i.top===b)&&null!=(s=l.exec(t))){if(r=s[0],g=n.slice(a,r),u=f.call(this,s,i,g),u===!1)continue;if(null!=u)for(_.isArray(u)||(u=[u]),v=0,w=u.length;w>v;v++)m=u[v],o.push(m);if(0===r.length)throw Error("infinite loop");for(t=t.substr(r.length),x=g.spans,y=0,k=x.length;k>y;y++)j=x[y],p=j[0],h=j[1],i.locations.push({start:p,stop:h,rule:d});a+=r.length;break}return o},e.prototype._expandChildren=function(e,t,i){var n,r,o,s,a,l,c,d,u,p,h,m,f,g;if(0!==e.length){if(i)for(s=e[0],c=2<=e.length?__slice.call(e,1):[],a=[s],r=function(e,t){return e.canCondense&&null!=e.children&&e.type===t},o=p=0,m=c.length;m>p;o=++p)u=c[o],r(s,"text")&&(r(u,"text")||r(u,"space")&&r(c[o+1],"text"))?s.children={text:s.children.text+u.children.text,ranges:new SelectionRange(__slice.call(s.children.ranges.spans).concat(__slice.call(u.children.ranges.spans)))}:(a.push(u),s=u);else a=e;for(h=0,f=a.length;f>h;h++)u=a[h],null!=u.children&&(g=u.children,d=g.text,l=g.ranges,n=this.inlineLex(d,t,l),this._expandChildren(n,t),u.children=n)}},e.prototype.blockLex=function(e,t,i,n){var r;return null==i&&(i=SelectionRange.fromString(e)),null==t.references&&(t.references={map:{},set:function(e,t){return this.map[e.toLowerCase()]=t},get:function(e){return this.map[e.toLowerCase()]}}),r=this.lex(this.lexerBlockRules,e,t,i),n&&this._expandChildren(r,t,!0),r},e.prototype.inlineLex=function(e,t,i,n){var r;return null==i&&(i=SelectionRange.fromString(e)),r=this.lex(this.lexerInlineRules,e,t,i),n&&this._expandChildren(r,t,!0),r
},e.prototype.parse=function(e,t,i){var n;return n={options:this.options,state:i,index:0,next:function(){return this.current=t[this.index++]},process:function(t,i){var r,o,s;return r=function(){var r;for(r=[];null!=(s=this.next())&&s.type!==t;)if(i&&"text"===s.type)r.push(n.children(s.children));else{if(o=e[s.type],null==o)throw Error("invalid token type "+s.type);r.push(o.call(n,s))}return r}.call(this),r.join("")},textProcess:function(t,i){var r,o,s;return r=function(){var r;for(r=[];null!=(s=this.next())&&s.type!==t;)if(i&&"text"===s.type)r.push(n.textChildren(s.children));else{if(o=e[s.type],null==o)throw Error("invalid token type "+s.type);r.push(o.call(n,s))}return r}.call(this),r.join("")},children:function(e){return function(t){return e.parseInline(t,i)}}(this),textChildren:function(e){return function(t){return e.parseInlineText(t,i)}}(this),escape:function(e){return null==e&&(e="undefined"),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},safeUrl:function(e){return/^\//.test(e)?e:/^[^\/]*:/.test(e)?e.replace(/^[^:]*/,function(e){return e=e.toLowerCase().replace(/[^\w-]/g,""),!e||/script|data/.test(e)?"http":e}):"http://"+e},text:function(e){return this.escape(e)},plaintext:function(e){return e},plaintextn:function(e){return this.plaintext(e)+"\n"},html:function(e,t,i){var n,r,o,s,a,l,c,d;if(d=null!=i?i:{},n=d.attrs,o=d.newlineAfterTag,l=d.preTag,a=d.postTag,s="",null!=l&&(s+=l),s+="<"+e,null!=n)for(r in n)c=n[r],null!=c&&(("src"===r||"href"===r)&&(c=this.safeUrl(c)),s+=" "+(""+r+'="'+this.escape(c)+'"'));return s+=">",o&&(s+="\n"),null!=t&&(s+=t+("</"+e+">"),null!=a&&(s+=a)),s},htmln:function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this.html.apply(this,e)+"\n"}},n.process()},e.prototype.parseBlocks=function(e,t){return null==t&&(t={}),this.parse(this.parseBlockOutput,e,t)},e.prototype.parseInline=function(e,t){return null==t&&(t={}),this.parse(this.parseInlineOutput,e,t)},e.prototype.parseBlocksText=function(e,t){return null==t&&(t={}),this.parse(this.parseBlockOutputText,e,t)},e.prototype.parseInlineText=function(e,t){return null==t&&(t={}),this.parse(this.parseInlineOutputText,e,t)},n=function(e){return e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n")},e.prototype.format=function(e,t){var i,r;return null==t&&(t={}),e=n(e),i=this.options.inlineOnly?this.formatInline(e,t):(t=_.extend({top:!0},t),r=this.blockLex(e,t,null,!0),this.parseBlocks(r,t)),{output:i,locations:t.locations}},e.prototype.formatInline=function(e,t,i){return null==t&&(t={}),null==i&&(i=null),this.parseInline(this.inlineLex(e,t,i,!0),t)},e.prototype.text=function(e,t){var i,r;return null==t&&(t={}),e=n(e),i=this.options.inlineOnly?this.textInline(e,t):(t=_.extend({top:!0},t),r=this.blockLex(e,t,null,!0),this.parseBlocksText(r,t)),i=i.replace(/^\s*|\s*$/g,"").replace(/\n(\x20*\n)+/g,"\n\n"),{output:i,locations:t.locations}},e.prototype.textInline=function(e,t){return null==t&&(t={}),this.parseInlineText(this.inlineLex(e,t,ranges,!0),t)},e.prototype.analyze=function(e,t){return null==t&&(t={}),e=n(e),this.options.inlineOnly?this.inlineLex(e,t):(t=_.extend({top:!0},t),this.blockLex(e,t,null,!0)),t.locations},e.prototype.getMatches=function(e,t,i){var n,r,o,s,a,l,c,d;null==i&&(i={}),r=this.analyze(e),a={};for(l in t)a[l]=[];for(c=0,d=r.length;d>c;c++)n=r[c],n.rule in t&&(o=e.slice(n.start,n.stop),s=n.rule in i?i[n.rule](o):o,a[n.rule].push(s));return a},e.prototype.replace=function(e,t,i){var n,r,o,s,a,l,c,d,u;for(n=_.sortBy(this.analyze(e),function(e){var t;return t=e.start,-t}),r=e.length,o=e,c=0,d=n.length;d>c;c++)u=n[c],s=u.rule,a=u.start,l=u.stop,__indexOf.call(t,s)>=0&&r>=l&&(o=[o.slice(0,a),i(o.slice(a,l),{rule:s,options:this.options}),o.slice(l)].join(""),r=a);return o},e}(),SelectionRange=function(){function e(e){this.spans=null!=e?e:[]}var t,i,n;return e.fromString=function(t){return new e([[0,t.length]])},e.prototype.clone=function(){return new e(_.clone(this.spans))},n=function(e,t){var i,n,r,o,s,a,l,c,d;for(i=[],s=_.clone(e),l=0;s.length;)n=s.shift(),l>=t.length?i.push(n):(o=n[0],r=n[1],d=t[l],c=d[0],a=d[1],o>=a?(s.unshift(n),l++):c>=r?i.push(n):o>=c&&r>a?(s.unshift([a,r]),l++):o>=c&&a>=r||(c>o&&r>a?(i.push([o,c]),s.unshift([a,r]),l++):c>o&&a>=r&&i.push([o,c])));return i},e.prototype.subtract=function(t){return new e(n(this.spans,t.spans))},t=function(e,t){var i,n,r,o,s,a;for(o=0,s=e.length;s>o;o++){if(a=e[o],n=a[0],r=a[1],i=r-n,i>=t)return n+t;t-=i}throw Error("invalid position")},i=function(e,i,r){var o,s,a,l;return a=t(e,i),l=t(e,r),s=[0,a],o=[l,_.last(e)[1]],n(e,[s,o])},e.prototype.slice=function(t,n){return _.isString(n)?this.slice(t,t+n.length):new e(i(this.spans,t,n))},e}();var ClientVersion;ClientVersion=new(ClientVersion=function(){function e(){var e,t;this.version=new Version.Client(window.clientVersion),this.server={version:null!=(e=window.pageVersion)?e:"0.0.0",environment:null!=(t=window.pageEnvironment)?t:"dev"},Object.defineProperty(window,"TrelloVersion",{get:function(e){return function(){var t;return"Server: "+e.server.version+" ("+e.server.environment+")\nClient: "+e.version+" ("+(null!=(t=window.channels)?t.active:void 0)+")"}}(this)})}return e.prototype.compareWithClient=function(e){return Version.compareStringVersions(e,this.version)},e.prototype.greaterThanClient=function(e){return this.compareWithClient(e)>0},e.prototype.lessThanClient=function(e){return this.compareWithClient(e)<0},e.prototype.setServerVersion=function(e){var t,i;t=!1;for(i in this.server)this.server[i]!==e[i]&&(t=!0,this.server[i]=e[i]);return t?$(this).triggerHandler("change:serverVersion"):void 0},e.prototype.setServerVersionFromResponse=function(e){var t,i;return i=e.getResponseHeader("X-Trello-Version"),t=e.getResponseHeader("X-Trello-Environment"),null!=i&&(this.server.version=i),null!=t?this.server.environment=t:void 0},e.prototype.getVersionDisplay=function(){return this.showVersionInformation()?window.TrelloVersion:""},e.prototype.showVersionInformation=function(){var e;return"dev"===(null!=(e=window.channels)?e.active:void 0)||"dev"===this.version.head&&"dev"!==this.server.environment},e.prototype.versionCompatible=function(){var e,t;return this.version===this.server.version?!0:(e=!this.server.versionMin||!this.greaterThanClient(this.server.versionMin),t=!this.server.versionMax||!this.lessThanClient(this.server.versionMax),e&&t)},e.prototype.advertiseUpgrade=function(){return!1},e}());var Profiler;Profiler=new(function(){function e(){this.profilerEnabled=$.cookie("profiler"),this.timeStarts={},this.completed=[],this.profilerEnabled&&setInterval(function(e){return function(){return e.render()}}(this),250),this.getTime=null!=("undefined"!=typeof performance&&null!==performance?performance.now:void 0)?function(){return performance.now()}:function(){return+new Date}}return e.prototype.render=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g;if($("#surface").length){for($(".js-profiler").length||$("#surface").append(templates.fill("profiler",{})),$(".js-profiler").empty(),n=[],p=this.completed,s=0,c=p.length;c>s;s++)h=p[s],r=h.name,o=h.startTime,e=h.endTime,(null!=(m=t=_.last(n))?m.name:void 0)===r?(null==t.count&&(t.count=1),t.count++,t.time+=e-o):n.push({name:r,time:e-o});for(a=0,d=n.length;d>a;a++)i=n[a],i.time=""+Math.floor(100*i.time)/100+"ms";f=this.timeStarts;for(r in f)o=f[r],n.push({name:r,time:"pending..."});for(g=[],l=0,u=n.length;u>l;l++)i=n[l],g.push($(".profiler").append(templates.fill("profiler_entry",i)));return g}},e.prototype.time=function(e){return this.timeStarts[e]=this.getTime()},e.prototype.timeEnd=function(e,t){var i,n,r,o,s;return s=null!=t?t:{},r=s.reportToServer,o=s.serverName,i=s.data,n=this.getTime(),this.timeStarts[e]?(this.completed.push({name:e,startTime:this.timeStarts[e],endTime:n}),r&&ABTest.inTest("client_profiler_reports")&&$.post("/clientTiming",{name:o,time:n-this.timeStarts[e],data:i,version:ClientVersion.version.toString()}),delete this.timeStarts[e]):void log("END WITH NO START: "+e)},e}());var track;track=function(e,t,i,n){return"function"==typeof window.ga&&window.ga("send","event",e,t,i,n),"function"==typeof window.sp?window.sp("trackStructEvent",e,t,i,"",n):void 0};var ABTest,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};ABTest=new(function(e){function t(){null!=window._abPercentagesAtLoad?(this._ready=!0,this._percentages=window._abPercentagesAtLoad):(this._ready=!1,this._percentages={}),this._pending=[],this._cookie=$.cookie("ab"),this._hasher=_.memoize(SharedUtil.md5)}return __extends(t,e),t.prototype.getDefaultId=function(){var e;return e=this.__getDefaultId()},t.prototype.__getDefaultId=function(){return"everything"===this._cookie?this._cookie:Auth.isLoggedIn()?Auth.myId():this._cookie?this._cookie:(this._cookie=this._hasher(""+Math.random()).substr(0,16),$.cookie("ab",this._cookie,{path:"/",expires:60}),this._cookie)},t.prototype.event=function(e,t){return null==t&&(t=this.getDefaultId()),$.post("/ab",{id:t,event:e})},t.prototype.tests=function(e){return null==e&&(e=this.getDefaultId()),_.mapObj(this._percentages,function(t){return function(i,n){return["AB_"+n,t.inTest(n,e)]}}(this))},t.prototype.refreshPercentages=function(){return $.ajax("/ab/enabled",{dataType:"json"}).success(function(e){return function(t){var i,n,r,o,s;for(e._percentages=t,e._ready=!0,n=e._pending,e._pending=[],s=[],r=0,o=n.length;o>r;r++)i=n[r],s.push("function"==typeof i?i():void 0);return s}}(this))},t.prototype.percentage=function(e,t){return"everything"===t?100:this._percentages[e]},t.prototype.ready=function(e){return this._ready?"function"==typeof e?e():void 0:this._pending.push(e)},t.prototype.track=function(e,t){var i,n,r;return r=Util.idToDate(Auth.myId())<Util.dateBefore({days:7}),i=r?"old account":"new account",n=this.inTest(e)?"In":"Out",track("AB",e,""+t+": "+n+": "+i)},t}(SharedABTest)),ABTest._ready||ABTest.refreshPercentages(),function(){var e,t,i,n;return e=[],i=2,n=null,t=function(t,r,o,s,a){var l,c,d;if(RegExp("https?://("+location.host+"|[a-z0-9]+\\.cloudfront\\.net|a.trellocdn.com)/").test(r)&&!(0>=i))return l={name:null!=a?a.name:void 0,msg:null!=(c=null!=a?a.message:void 0)?c:t,url:r,line:o,col:s,stack:null!=a?a.stack:void 0,ua:"undefined"!=typeof navigator&&null!==navigator?navigator.userAgent:void 0,browser:"undefined"!=typeof Browser&&null!==Browser?Browser.asString:void 0,language:null!=(d=navigator.language)?d:navigator.browserLanguage,clientVersion:clientVersion},("undefined"!=typeof Auth&&null!==Auth?Auth.isLoggedIn():void 0)&&(l.idMember=Auth.myId()),_.any(e,function(e){return _.isEqual(e,l)})||(i--,e.push(l),"function"==typeof n&&n()),!1},$(function(){return(n=_.debounce(function(){var t;if(e.length>0){try{$.post("/err",{errors:e})}catch(i){t=i}return e=[]}},1e3))()}),window.onerror=t,window.crashTest=function(){return setTimeout(function(){return thingThatDoesNotExist.crash},1)}}();var payloads_boardActions,payloads_boardChecklists,payloads_boardFieldsFull,payloads_boardFieldsMinimal,payloads_boardFieldsMinimalMemberships,payloads_boardFieldsMinimalSubscribed,payloads_boardFieldsUnread,payloads_boardMinimal,payloads_boardRecentActions,payloads_boardUnread,payloads_boardsMenu,payloads_boardsMenuMinimal,payloads_card,payloads_cardActions,payloads_cardCopy,payloads_cardDetails,payloads_cardFieldsBulk,payloads_cardVoters,payloads_currentBoardMinimal,payloads_memberAccount,payloads_memberActions,payloads_memberBoards,payloads_memberCards,payloads_memberFields,payloads_memberFieldsAndPremOrgsAdmin,payloads_memberFieldsStatus,payloads_memberMinimal,payloads_memberPaidAccount,payloads_memberProfile,payloads_memberProfile_daysBack,payloads_memberUnreadBoards,payloads_notifications,payloads_orgMemberCards,payloads_organization,payloads_organizationBoards,payloads_organizationBoardsPage,payloads_organizationExports,payloads_organizationFieldsMinimal,payloads_organizationFieldsMinimalMemberships,payloads_organizationMembers,payloads_organizationMembersMinimal,payloads_organizationMinimal,payloads_organizationPaidAccount,payloads_organizations;payloads_cardActions=["addAttachmentToCard","addChecklistToCard","addMemberToCard","commentCard","copyCommentCard","convertToCardFromCheckItem","createCard","copyCard","deleteAttachmentFromCard","emailCard","moveCardFromBoard","moveCardToBoard","removeChecklistFromCard","removeMemberFromCard","updateCard:idList","updateCard:closed","updateCheckItemStateOnCard"].join(","),payloads_boardActions=[payloads_cardActions,"addMemberToBoard","addToOrganizationBoard","copyBoard","createBoard","createList","deleteCard","disablePowerUp","enablePowerUp","makeAdminOfBoard","makeNormalMemberOfBoard","makeObserverOfBoard","moveListFromBoard","moveListToBoard","removeFromOrganizationBoard","unconfirmedBoardInvitation","unconfirmedOrganizationInvitation","updateBoard","updateList:closed"].join(","),payloads_memberActions=[payloads_boardActions,"updateMember"].join(","),payloads_boardFieldsUnread=["dateLastActivity","dateLastView"],payloads_boardFieldsMinimal=["name","closed","dateLastActivity","dateLastView","idOrganization","prefs","shortLink","shortUrl","url"].join(","),payloads_boardFieldsFull=[payloads_boardFieldsMinimal,"desc","descData","invitations","invited","labelNames","memberships","pinned","powerUps","subscribed"].join(","),payloads_boardFieldsMinimalSubscribed=[payloads_boardFieldsMinimal,"subscribed"].join(","),payloads_boardFieldsMinimalMemberships=["name","closed","memberships"].join(","),payloads_memberFields=["fullName","initials","memberType","username","avatarHash","bio","bioData","confirmed","products","url"].join(","),payloads_memberFieldsAndPremOrgsAdmin=[payloads_memberFields,"idPremOrgsAdmin"].join(","),payloads_memberFieldsStatus=[payloads_memberFields,"status"].join(","),payloads_organizationFieldsMinimal=["name","displayName","products","prefs","logoHash"].join(","),payloads_organizationFieldsMinimalMemberships=[payloads_organizationFieldsMinimal,"memberships"],payloads_cardFieldsBulk=["badges","closed","dateLastActivity","desc","descData","due","idAttachmentCover","idList","idBoard","idMembers","idShort","labels","name","pos","shortUrl","shortLink","subscribed","url"].join(","),payloads_boardMinimal={fields:payloads_boardFieldsMinimal,organization:!0,organization_fields:payloads_organizationFieldsMinimal,myPermLevel:!0},payloads_boardsMenuMinimal={boards:"open,starred",board_fields:payloads_boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:payloads_organizationFieldsMinimal,board_organization:!0,board_organization_fields:payloads_organizationFieldsMinimal,board_myPermLevel:!0},payloads_boardsMenu={fields:"",board_fields:payloads_boardFieldsMinimal,organizations:"all",organization_fields:payloads_organizationFieldsMinimal,board_organization:!0,board_organization_fields:payloads_organizationFieldsMinimal,paid_account:!0},payloads_memberUnreadBoards={fields:"",boards:"open,starred",board_fields:payloads_boardFieldsUnread},payloads_boardUnread={fields:payloads_boardFieldsUnread},payloads_card={fields:"all",stickers:!0,attachments:!0},payloads_cardDetails={actions:payloads_cardActions,action_memberCreator_fields:payloads_memberFieldsAndPremOrgsAdmin,members:!0,member_fields:payloads_memberFieldsStatus,attachments:!0,fields:"email",checklists:"all"},payloads_cardVoters={fields:"idMembersVoted",membersVoted:!0},payloads_cardCopy={members:!0,member_fields:payloads_memberFieldsStatus,attachments:!0,stickers:!0,fields:"",checklists:"all"},payloads_currentBoardMinimal={lists:"all",cards:"visible",card_attachments:"cover",card_stickers:!0,card_fields:payloads_cardFieldsBulk,card_checklists:"none",members:"all",member_fields:payloads_memberFieldsStatus,membersInvited:"all",membersInvited_fields:payloads_memberFields,checklists:"none",organization:!0,organization_fields:"name,displayName,desc,descData,url,website,prefs,memberships,logoHash,products",myPrefs:!0,fields:payloads_boardFieldsFull},payloads_boardRecentActions={fields:"",actions:payloads_boardActions,actions_limit:50,action_memberCreator_fields:payloads_memberFieldsAndPremOrgsAdmin},payloads_boardChecklists={fields:"",checklists:"none",cards:"visible",card_fields:"",card_checklists:"all"},payloads_memberAccount={tokens:"all",sessions:"all",credentials:"all",paid_account:!0,credits:"invitation,promoCode",organizations:"all",logins:!0},payloads_memberPaidAccount={paid_account:!0},payloads_memberBoards={boards:"open,starred",board_fields:payloads_boardFieldsMinimalSubscribed,boardStars:!0,boardsInvited:"all",boardsInvited_fields:payloads_boardFieldsMinimalSubscribed,board_organization:!0,board_organization_fields:payloads_organizationFieldsMinimal,credits:"invitation,promoCode",organizations:"all",organization_fields:payloads_organizationFieldsMinimal,organizationsInvited:"all",organizationsInvited_fields:payloads_organizationFieldsMinimal,paid_account:!0},payloads_orgMemberCards={board:!0,list:!0,fields:"badges,closed,due,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,url",attachments:"true",members:"true",stickers:"all",member_fields:payloads_memberFields},payloads_memberCards={boards:"open",board_fields:"name,closed,idOrganization,prefs",board_lists:"open",board_memberships:"me",cards:"visible",card_fields:payloads_cardFieldsBulk,card_attachments:"true",card_stickers:!0,card_members:"true",card_member_fields:payloads_memberFields,organizations:"all",organization_fields:"displayName,name,prefs,products",organization_memberships:"me",paid_account:!0},payloads_memberMinimal={fields:payloads_memberFields},payloads_memberProfile={actions:"all",actions_limit:10,organizations:"all",organization_fields:payloads_organizationFieldsMinimal,boards:"open",board_fields:"name,prefs,idOrganization",paid_account:!0},payloads_memberProfile_daysBack=30,payloads_organization={boards:"open",board_fields:payloads_boardFieldsMinimalSubscribed,fields:"all",members:"all",member_fields:payloads_memberFieldsStatus,membersInvited:"all",membersInvited_fields:payloads_memberFields,paid_account:!0},payloads_organizationExports={exports:!0,fields:"all",paid_account:!0},payloads_organizationBoardsPage={boards:"open",board_fields:payloads_boardFieldsMinimalSubscribed,fields:"all",paid_account:!0},payloads_organizationPaidAccount={paid_account:!0},payloads_organizationMembers={member_activity:!0,boards:"open",board_fields:payloads_boardFieldsMinimalMemberships,fields:"all",members:"all",member_fields:payloads_memberFieldsStatus,membersInvited:"all",membersInvited_fields:payloads_memberFields,paid_account:!0},payloads_organizationMembersMinimal={members:"all",fields:payloads_organizationFieldsMinimalMemberships},payloads_organizationBoards={boards:"all",board_fields:payloads_boardFieldsMinimalSubscribed,fields:""},payloads_organizationMinimal={fields:"all"},payloads_notifications={notifications:"all",notifications_limit:5,notification_memberCreator_fields:payloads_memberFields,organizations:"all",organization_paid_account:!0,organization_fields:"name,displayName",paid_account:!0,savedSearches:!0},payloads_organizations={organizations:"all",organization_paid_account:!0};var Storage;Storage=new(function(){function e(){}return e.prototype._storage=window.localStorage,e.prototype.enabled=function(){return null!=this._storage},e.prototype.set=function(e,t){var i;try{return null!=(i=this._storage)?i[e]=JSON.stringify(t):void 0}catch(n){}},e.prototype.get=function(e){var t,i,n;if(i=null!=(n=this._storage)?n[e]:void 0,!i)return null;try{return JSON.parse(i)}catch(r){return t=r,null}},e.prototype.unset=function(e){var t,i;return null!=(null!=(t=this._storage)?t[e]:void 0)&&null!=(i=this._storage)?delete i[e]:void 0},e}());var Logger,log,__slice=[].slice;Logger=function(){function e(){var e;this.enabled=null!=(e=Storage.get("loggers"))?e:{},this.historyMap={},this.logHistory=!1,this.timeSpent={},this.timing={}}return e.prototype.log=function(){var e,t,i,n;i=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],("undefined"!=typeof console&&null!==console?console.log:void 0)&&(t=!1,0===e.length?(t=!0,e.push(i),i="all"):t=this.enabled.all||this.enabled[i],t&&(1===e.length&&_.isArray(e[0])&&(e=e[0]),e.unshift(i),$("body").is(".chrome")?console.log(e):console.dir(e)),this.logHistory&&(null==(n=this.historyMap)[i]&&(n[i]=[]),this.historyMap[i].push(e)))},e.prototype.enable=function(e){null==e&&(e="all"),this.enabled[e]=!0,this.save()},e.prototype.disable=function(e){null==e&&(e="all"),delete this.enabled[e],this.save()},e.prototype.disableAll=function(){this.enabled={},this.save()},e.prototype.enableAll=function(){this.enabled.all=!0,this.save()},e.prototype.history=function(e){var t,i,n,r;if(e in this.historyMap)for(r=this.historyMap[e],i=0,n=r.length;n>i;i++)t=r[i],"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(t)},e.prototype.list=function(){"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(_.keys(this.historyMap))},e.prototype.save=function(){Storage.set("loggers",this.enabled)},e.prototype.time=function(e){return this.timing[e]=performance.now()},e.prototype.endTime=function(e){var t,i;return t=performance.now()-this.timing[e],null==(i=this.timeSpent)[e]&&(i[e]=0),this.timeSpent[e]+=t},e}(),log=Logger.prototype.log.bind(new Logger),window.Logger=Logger;var Browser,BrowserDetect,b,browserDetect;BrowserDetect=function(){function e(){this.browser=this.searchString(this.dataBrowser)||"unknown-browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown-browser-version",this.OS=this.searchString(this.dataOS)||"unknown-os"}return e.prototype.searchString=function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)if(t=e[i],this.versionSearchString=t.versionSearch||t.identity,t.string&&-1!==t.string.indexOf(t.subString)||t.prop)return t.identity},e.prototype.searchVersion=function(e){var t;return t=e.indexOf(this.versionSearchString),-1!==t?parseFloat(e.substring(t+this.versionSearchString.length+1)):void 0},e.prototype.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],e.prototype.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],e}(),b=browserDetect=new BrowserDetect,Browser=new(function(){function e(){this.browserStr=b.browser.toLowerCase(),this.browserVersionStr=(""+b.browser+"-"+b.version).toLowerCase(),this.osStr=b.OS.toLowerCase(),this.asString=""+this.browserStr+" "+this.browserVersionStr+" "+this.osStr,$(function(e){return function(){return $("body").addClass(e.asString)}}(this))}return e.prototype.isTouch=function(){var e;return"ipad"===(e=this.osStr)||"iphone"===e||"android"===e},e.prototype.isHighDPI=function(){return window.devicePixelRatio>1},e.prototype.allowsDynamicFavicon=function(){var e;return"chrome"===(e=this.browserStr)||"firefox"===e},e.prototype.hasDownloadAttribute=function(){var e;return"chrome"===(e=this.browserStr)||"firefox"===e||"opera"===e},e.prototype.detectCustomWebkitScrollbars=function(){var e;try{return $("::-webkit-scrollbar"),e="body-webkit-scrollbars"}catch(t){return e="body-no-webkit-scrollbars"}finally{$("body").addClass(e)}},e}());var Auth,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};Auth=new(function(){function e(){this.check()}var t,i,n,r;return t="notLoggedIn",i=null,n=null,r="token"+window.location.port,e.prototype.isLoggedIn=function(){return i!==t},e.prototype.myId=function(){return i},e.prototype.myUsername=function(){var e;return null!=(e=this.me())?e.get("username"):void 0},e.prototype.myToken=function(){return n},e.prototype.me=function(){var e,n,r,o,s,a;if(r=Member.get("header",i),null==r&&!this.isLoggedIn()){n=ModelCacheCache["for"]("header"),r=new Member({id:t,notLoggedIn:!0},{modelCache:n}),n.add(r),s=ModelCacheCache._caches;for(o in s)e=s[o],a=e.getCacheType(),__indexOf.call(ModelCache.fullCacheTypes,a)>=0&&e.add(new Member({id:t,notLoggedIn:!0},{modelCache:e}))}return r},e.prototype.isMe=function(e){return(null!=e?e.id:void 0)?this.isMe(e.id):e===i},e.prototype.confirmed=function(){return this.me().get("confirmed")},e.prototype.canLogIn=function(){var e,t;return!_.isEmpty(null!=(e=null!=(t=this.me())?t.get("loginTypes"):void 0)?e:[])},e.prototype.check=function(){this.updateToken(),"undefined"!=typeof rpc&&null!==rpc&&rpc.handleLogin()},e.prototype.updateToken=function(){return n=$.cookie(r)||"",i=n.split("/")[0]||t},e.prototype.consistencyCheck=function(e){var t;return t=!this.isLoggedIn()||this.isMe(this.me()),t||($.cookie(r,null,{path:"/"}),e.reloadOnError&&window.location.reload()),t},e.prototype.logoutPost=function(){return $("<form>").attr({method:"post",action:"/logout"}).append('<input name="dsc" value="'+window.dsc+'">').css({display:"none"}).appendTo("body").submit()},e}());var Key_0,Key_1,Key_2,Key_3,Key_4,Key_5,Key_6,Key_7,Key_8,Key_9,Key_A,Key_Alt,Key_Arrow_Down,Key_Arrow_Left,Key_Arrow_Right,Key_Arrow_Up,Key_B,Key_Backspace,Key_C,Key_Caps_Lock,Key_Comma,Key_Control,Key_D,Key_Delete,Key_E,Key_End,Key_Enter,Key_Escape,Key_F,Key_Forward_Slash,Key_G,Key_H,Key_Home,Key_I,Key_J,Key_K,Key_L,Key_LineFeed,Key_M,Key_N,Key_Numpad_0,Key_Numpad_1,Key_Numpad_2,Key_Numpad_3,Key_Numpad_4,Key_Numpad_5,Key_Numpad_6,Key_Numpad_7,Key_Numpad_8,Key_Numpad_9,Key_O,Key_P,Key_Page_Down,Key_Page_Up,Key_Period,Key_Q,Key_Question_Mark,Key_R,Key_S,Key_Shift,Key_Space,Key_T,Key_Tab,Key_U,Key_V,Key_W,Key_X,Key_Y,Key_Z,Keys_Arrow,Keys_Control;Key_Backspace=8,Key_Tab=9,Key_LineFeed=10,Key_Enter=13,Key_Escape=27,Key_Space=32,Key_Delete=46,Key_Shift=16,Key_Control=17,Key_Alt=18,Key_Caps_Lock=20,Key_Page_Up=33,Key_Page_Down=34,Key_End=35,Key_Home=36,Key_Arrow_Up=38,Key_Arrow_Right=39,Key_Arrow_Down=40,Key_Arrow_Left=37,Key_Question_Mark=63,Key_Comma=188,Key_Period=190,Key_Forward_Slash=191,Key_A=65,Key_B=Key_A+1,Key_C=Key_A+2,Key_D=Key_A+3,Key_E=Key_A+4,Key_F=Key_A+5,Key_G=Key_A+6,Key_H=Key_A+7,Key_I=Key_A+8,Key_J=Key_A+9,Key_K=Key_A+10,Key_L=Key_A+11,Key_M=Key_A+12,Key_N=Key_A+13,Key_O=Key_A+14,Key_P=Key_A+15,Key_Q=Key_A+16,Key_R=Key_A+17,Key_S=Key_A+18,Key_T=Key_A+19,Key_U=Key_A+20,Key_V=Key_A+21,Key_W=Key_A+22,Key_X=Key_A+23,Key_Y=Key_A+24,Key_Z=Key_A+25,Key_0=48,Key_1=Key_0+1,Key_2=Key_0+2,Key_3=Key_0+3,Key_4=Key_0+4,Key_5=Key_0+5,Key_6=Key_0+6,Key_7=Key_0+7,Key_8=Key_0+8,Key_9=Key_0+9,Key_Numpad_0=96,Key_Numpad_1=Key_Numpad_0+1,Key_Numpad_2=Key_Numpad_0+2,Key_Numpad_3=Key_Numpad_0+3,Key_Numpad_4=Key_Numpad_0+4,Key_Numpad_5=Key_Numpad_0+5,Key_Numpad_6=Key_Numpad_0+6,Key_Numpad_7=Key_Numpad_0+7,Key_Numpad_8=Key_Numpad_0+8,Key_Numpad_9=Key_Numpad_0+9,Keys_Control=[Key_Shift,Key_Control,Key_Alt,Key_Escape,Key_Caps_Lock],Keys_Arrow=[Key_Arrow_Left,Key_Arrow_Right,Key_Arrow_Up,Key_Arrow_Down];var Util,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},__hasProp={}.hasOwnProperty;Util=_.extend(SharedUtil,{stopPropagation:function(e){return null!=e?e.stopPropagation():void 0},preventDefault:function(e){return null!=e?e.preventDefault():void 0},stop:function(e){return Util.stopPropagation(e),Util.preventDefault(e)},securePage:function(){return"https:"===document.location.protocol},getNaturalNumber:function(e){var t;if(_.isString(e)||(e=String(e)),e){if("1"===e.charAt(e.length-2))return""+e+"th";switch(t=e.charAt(e.length-1)){case"4":case"5":case"6":case"7":case"8":case"9":case"0":return""+e+"th";case"1":return""+e+"st";case"2":return""+e+"nd";case"3":return""+e+"rd"}}},checkEmail:function(e,t){return null==t&&(t=""),RegExp('^[^"@\\s\\[\\]\\(\\),:;<>\\\\]+@[-a-z0-9\\.'+t+"]+\\.[a-z"+t+"]+$","i").test(e)},removeDomainFromEmailAddress:function(e,t){return null==t&&(t=""),e.replace(RegExp("@[-a-z0-9\\."+t+"]+\\.[a-z"+t+"]+$"),"")},validName:function(e){return e.length>3||e.length>1&&this.hasChineseCharacters(e)},hasChineseCharacters:function(e){return/[\u3400-\u9FBF\s]/.test(e)},spaces:function(e){for(this.longStr||(this.longStr=" ");this.longStr.length<e;)this.longStr=this.longStr+this.longStr;return this.longStr.substr(0,e)},_pad:function(e,t,i,n){var r,o;return null==i&&(i=" "),e=e.toString(),e.length>t?e.substr(0,t):(r=t-e.length,o=" "===i?this.spaces(r):this.times(i,r),n?o+e:e+o)},rpad:function(e,t,i){return this._pad(e,t,i,!1)},lpad:function(e,t,i){return this._pad(e,t,i,!0)},times:function(e,t){var i;return _.map(function(){i=[];for(var e=0;t>=0?t>e:e>t;t>=0?e++:e--)i.push(e);return i}.apply(this),function(){return e}).join("")},truncate:function(e,t){var i;return!(null!=e?e.length:void 0)||e.length<t?e:(i=e.substr(0,e.lastIndexOf(" ",t)),i?i:e.substr(0,t))},scrollToTop:function(){return $(window).scrollTop(0)},isSubmitKey:function(e){return null!=e&&(e===Key_Enter||e===Key_LineFeed||Util.isSubmitKey(e.keyCode)||Util.isSubmitKey(e.which))},isForceSubmitKey:function(e){return Util.isSubmitKey(e)&&(e.ctrlKey||e.metaKey)&&!e.shiftKey},getProtocol:function(e){var t,i;return e&&null!=(t=null!=(i=/^([a-z]+):/i.exec(e))?i[1]:void 0)?t:""},makeHttp:function(e){return e?(e=e.replace(/^[a-z]*:\/*/i,""),"http://"+e):""},sanitizeWebAddress:function(e){var t;return"http"!==(t=Util.getProtocol(e))&&"https"!==t?Util.makeHttp(e):e},isInPosition:function(e,t,i){var n;return null==(null!=i?i.id:void 0)?!1:(n=t[e],(null!=n?n.id:void 0)===i.id)},calcPos:function(e,t,i,n,r){var o,s,a,l,c,d,u,p,h;return s=65536,c=t.select(function(e){return!(null!=i&&i.id===e.id&&!r||n&&!n(e))}),Util.isInPosition(e,c,i)?null!=(h=i.pos)?h:i.get("pos"):(o=Math.min(Math.max(e,0),c.length),l=c[o-1],a=c[o],d=(null!=i?i.get("pos"):void 0)||-1,p=null!=l?l.get("pos"):-1,u=null!=a?a.get("pos"):-1,-1===u?i&&d>p?d:p+s:i&&d>p&&u>d?d:p>=0?(u+p)/2:u/2)},pushSupport:function(){return!(!window.history||!window.history.pushState||Util.isNonPushstateAndroid())},parseDate:function(e){return Dates.parse(e)},randomWait:function(e,t){return Math.floor(e+Math.random()*t)},toTitleCase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},calcBoardLayout:function(){return $(window).trigger("resize")},navMenuList:function(e,t,i){var n,r,o,s,a,l,c,d;return o=e.find(t),d=e.find(""+t+".selected:first")[0],c=_.indexOf(o,d),r=o[0],s=o[o.length-1],l=0>c-1?s:o[c-1],a=c+1>o.length?r:o[c+1],i===Key_Arrow_Down&&(n=a),i===Key_Arrow_Up&&(n=l),this.selectMenuItem(e,t,n)},selectMenuItem:function(e,t,i){return e.find(t).removeClass("selected"),$(i).addClass("selected")},insertSelection:function(e,t,i,n){var r;return e=Util.getElem(e),r=$(e).val(),i||n?($(e).val(""===r.substring(n)?""+(r.substring(0,i)+t):""+(r.substring(0,i)+t+r.substring(n))),this.setCaretPosition(e,i+(""+t).length)):($(e).val(""+(r+t)),this.setCaretPosition(e,(""+(r+t)).length)),$(e).focus()
},_nextWhitespace:function(e,t){var i,n;return i=e.indexOf("\n",t),-1===i&&(i=1/0),n=e.indexOf(" ",t),-1===n&&(n=1/0),Math.min(i,n,e.length)},getWordFromIndex:function(e,t){var i,n,r,o;return r=Math.max(e.lastIndexOf("\n",t-1),e.lastIndexOf(" ",t-1)),r+=1,i=this._nextWhitespace(e,t),n=i-r,o=e.slice(r,i),{start:r,end:i,length:n,str:o}},getWordFromCaret:function(e){var t,i;return e=Util.getElem(e),i=$(e).val(),t=this.getCaretPosition(e),this.getWordFromIndex(i,t)},getLineFromIndex:function(e,t){var i,n,r,o;return r=e.lastIndexOf("\n",t-1),r+=1,i=this._nextWhitespace(e,t),n=i-r,o=e.slice(r,i),{start:r,end:i,length:n,str:o}},getLineFromCaret:function(e){var t,i;return e=Util.getElem(e),i=$(e).val(),t=this.getCaretPosition(e),this.getLineFromIndex(i,t)},getCaretPosition:function(e){var t,i,n;return e=Util.getElem(e),e.selectionStart?t=e.selectionStart:__indexOf.call(document,"selection")>=0&&(e.focus(),i=document.selection.createRange(),n=document.selection.createRange().text.length,i.moveStart("character",-e.value.length),t=i.text.length-n),t},setCaretPosition:function(e,t){var i;return e=Util.getElem(e),e.setSelectionRange?(e.focus(),e.setSelectionRange(t,t)):e.createTextRange?(i=e.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()):void 0},setCaretAtEnd:function(e){var t;return e?(t=$(e).val().length,this.setCaretPosition(e,t)):void 0},getLastWord:function(e){var t;return t=$(e).val().split(" "),_.last(t)},replaceLastWord:function(e,t){var i,n,r;return i=RegExp(""+this.getLastWord(e)+"$"),r=$(e).val(),n=r.replace(i,""),$(e).val(""+(n+t))},removeWordOnCaret:function(e){var t,i,n;n=RegExp(""+Util.getWordFromCaret(e).str),i=$(e).val(),t=i.replace(n,""),$(e).val(""+t)},removeWordAtIndex:function(e,t){var i,n,r;return r=Util.getWordFromIndex(e,t),i=e.slice(0,r.start),n=e.slice(r.end),i+n},removeStringsFromInput:function(e,t){var i,n,r;return null==t&&(t=[]),r=$(e).val(),t.length>0?(i=RegExp(""+t.join("|"),"g"),n=r.replace(i,"").trim(),$(e).val(n)):void 0},removeStringFromInput:function(e,t){var i,n;return n=$(e).val(),i=n.replace(t,""),$(e).val(i.trim())},addStringToInput:function(e,t){var i,n;return n=$(e).val(),i=""+n+" "+t,$(e).val(i)},toggleStringInInput:function(e,t,i){return i?this.addStringToInput(e,t):this.removeStringFromInput(e,t)},stripExtraSpaces:function(e){return null!=e?e.replace(/\s+/g," ").trim():void 0},stripExtraSpacesFromInput:function(e){var t;return t=$(e).val(),t=this.stripExtraSpaces(t),$(e).val(t)},getMemNameArray:function(e,t){var i,n,r,o;return _.isString(t)&&(t=Member.get(e,t)),null==t?[]:i=(""+(null!=(n=t.get("username"))?n.toLowerCase():void 0)+" "+(null!=(r=t.get("fullName"))?r.toLowerCase():void 0)+" "+(null!=(o=t.get("initials"))?o.toLowerCase():void 0)).split(" ")},filterMembers:function(e,t,i){var n,r,o,s,a,l;for(s=RegExp("^"+Util.escapeForRegex(t),"i"),n=[],a=0,l=i.length;l>a;a++)r=i[a],o=Util.getMemNameArray(e,r),_.find(o,function(e){return s.test(e)})&&n.push(r);return n},filterLabels:function(e){var t,i,n,r,o,s,a;for(r=RegExp("^"+Util.escapeForRegex(e),"i"),i=[],a=Util.labels,o=0,s=a.length;s>o;o++)t=a[o],n=boardView.model.getLabelName(t).split(" "),n.push(t),_.find(n,function(e){return r.test(e)})&&i.push(t);return i},jqGetActiveElement:function(){var e;try{return $(document.activeElement)}catch(t){return e=t,$()}},getImgHeightAndWidth:function(e,t){var i;return i=new Image,i.src=e,i.onload=function(){var e;return e={height:this.height,width:this.width},t(e)}},getQueryParameter:function(e,t){var i,n,r,o;return null==t&&(t=""),n=RegExp("[?&]"+e+"=([^?&]*)"),i=null!=(o=n.exec(location.search))?o:n.exec(location.hash),r=null!=i?i[1]:void 0,null!=r?decodeURIComponent(r.replace(/\+/g," ")):t},validFileSize:function(e,t){return null==t&&(t=10485760),(null!=e?e.size:void 0)<t},validCardUpload:function(e){var t;return(null!=(t=Auth.me())?t.isFeatureEnabled("largeAttachments"):void 0)?this.validFileSize(e,262144e3):this.validFileSize(e,10485760)},uploadFile:function(e,t){var i,n;return n=_.uniqueId("iframe"),i=$("<iframe>").attr("name",n).css("display","none").appendTo("body").load(function(){var e,n;_.defer(function(){return i.remove()});try{n=i.contents().text()}catch(r){return e=r,t("File too large")}return/File too large/i.test(n)?t(n):t()}),e.closest("form").attr("target",n).find("input[name=token]").val(Auth.myToken()).end().submit(),_.defer(function(){return e.val("")})},hasValidInviteTokenFor:function(e,t){var i,n;return this.hasInviteTokenFor(t)&&(i=Board.get(e,t)||Organization.get(e,t))?(n=Member.get(e,Util.inviteTokenFor(t).split("-")[0]),null!=n&&("virtual"===i.getMemberType(n)||i.isMember(n)&&"ghost"===n.get("memberType"))):!1},hasInviteTokenFor:function(e){return null!=e&&null!=$.cookie("invite-token-"+e)},inviteTokenFor:function(e){return $.cookie("invite-token-"+e)},invitationTokens:function(){var e,t,i,n;for(t=/invite-token-[-a-f0-9]*/g,n=[];null!=(e=null!=(i=t.exec(document.cookie))?i[0]:void 0);)n.push($.cookie(e));return n},flashUnconfirmedWarning:function(){var e;return e=$(".header-banner-warning"),e.addClass("flash"),_.delay(function(){return function(){return e.removeClass("flash")}}(this),500)},getElem:function(e){return e instanceof jQuery?e[0]:e},isTrelloAttachment:function(e){return 0===(null!=e?e.indexOf(attachmentsDomain):void 0)},voidDebounced:function(e,t,i){var n;return null==t&&(t=1),null==i&&(i=setTimeout),n=null,function(){var r,o;r=arguments,o=function(t){return function(){n=null,e.apply(t,r)}}(this),clearTimeout(n),n=i(o,t)}},getElemTransformMatrix:function(e){var t;return t=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform"),"none"!==t?t:null},getMatrixDegrees:function(e){var t,i,n,r,o;return o=e.split("(")[1].split(")")[0].split(","),t=o[0],i=o[1],n=o[2],r=o[3],Math.round(Math.atan2(i,t)*(180/Math.PI))},getMatrixScale:function(e){var t,i,n,r,o;return o=e.split("(")[1].split(")")[0].split(","),t=o[0],i=o[1],n=o[2],r=o[3],Math.sqrt(t*t+i*i)},getDegrees:function(e,t){return Math.round(Math.atan2(e,t)*(180/Math.PI))},calcDistanceFromCenter:function(e,t,i){return Math.floor(Math.sqrt(Math.pow(t-(e.offset().left+e.width()/2),2)+Math.pow(i-(e.offset().top+e.height()/2),2)))},_runShredders:function(){var e,t,i,n,r,o;for(n=Util._shredders,i=new Date,Util._shredders=[],e=0,r=0,o=n.length;o>r;r++)t=n[r],i>t.time?(t.fn(),e++):Util._shredders.push(t);return log("shred","Shred "+e+" objects, "+Util._shredders.length+" left"),Util._shredTimeout=null,Util._startShredTimer()},_startShredTimer:function(){return!Util._shredTimeout&&Util._shredders.length>0?null!=Util._shredTimeout?Util._shredTimeout:Util._shredTimeout=_.delay(Util._runShredders,Util.getMs({seconds:3})):void 0},shred:function(e){return null==Util._shredders&&(Util._shredders=[]),Util._shredders.push({time:Util.dateAfter({seconds:20}),fn:function(){return function(){var t,i;i=[];for(t in e)__hasProp.call(e,t)&&i.push(delete e[t]);return i}}(this)}),Util._startShredTimer()},newestId:function(e){return e.length>0?_.reduce(e,function(e,t){return t.id>e.id?t:e}):null},extendEvents:function(e){return function(){return _.defaults(e,_.result(this.constructor.__super__,"events"))}},relativeUrl:function(e){return e.replace(RegExp("^"+siteDomain),"")},isTextElement:function(e){var t,i;if(e instanceof HTMLTextAreaElement)return!0;if(!(e instanceof HTMLInputElement))return!1;if("text"===(t=e.type)||"email"===t||"password"===t||"search"===t)return!0;if("submit"===(i=e.type)||"reset"===i||"button"===i||"checkbox"===i)return!1;try{return e.selectionStart,!0}catch(n){return!1}},withoutAlteringSelection:function(e){var t,i,n,r,o,s,a;i=document.activeElement,t=$(i),o=t.is(":focus"),null!=i&&Util.isTextElement(i)?(i.selectionStart?(s=i.selectionStart,r=i.selectionEnd,n=i.selectionDirection):a=this.getCaretPosition(i),e(),s?i.setSelectionRange(s,r,n):a&&this.setCaretPosition(i,a),o&&t.focus()):e()},extendParentClassName:function(e){return function(){return _.result(this.constructor.__super__,"className")+(" "+e)}},extendWithModelCacheHelpers:function(e){var t,i,n,r,o;for(r=["Action","Board","Card","Checklist","List","Member","Notification","Organization","Auth"],o=[],i=0,n=r.length;n>i;i++)t=r[i],o.push(function(t){return Object.defineProperty(e.prototype,t,{get:function(){return this.modelCache.bound[t]}})}(t));return o},waitForImageLoad:function(e,t,i){var n;return n=new Image,n.onload=function(){return t(n)},n.onerror=function(){return"function"==typeof i?i(n):void 0},n.src=e},bugzscout:function(e,t){var i,n,r,o;return i=e.area,n=e.description,r=e.extra,o=e.me,$.ajax({url:"//our.fogbugz.com/ScoutSubmit.asp",type:"POST",data:{ScoutUserName:"Trello Web Bugzscout",ScoutProject:"Trello Support",ScoutArea:i,Description:n,Extra:r,Email:'"'+o.fullName+'" <'+o.email+">",ForceNewBug:1,FriendlyResponse:0},success:function(){return"function"==typeof t?t():void 0},error:function(e,i){return"function"==typeof t?t(i):void 0}})},sortMembers:function(e){return e.sort(function(e,t){var i,n;return i=Auth.isMe(e),n=Auth.isMe(t),i&&!n?-1:!i&&n?1:e.fullName<t.fullName?-1:e.fullName>t.fullName?1:0}),e},firstLessThan:function(e,t){var i,n,r,o,s;for(o=0,s=t.length;s>o;o++){if(n=t[o],!_.isArray(n))return _.isFunction(n)?n.call(this,e):n;if(i=n[0],r=n[1],i>=e)return _.isFunction(r)?r.call(this,e):r}},hoursLeft:function(e){return(new Date(e)-new Date)/Util.getMs({hours:1})},getDueDateBadgeClasses:function(e){var t;return t=[[-36,"badge-state-due-past"],[0,"badge-state-due-now"],[24,"badge-state-due-soon"],"badge-state-due-future"],[this.firstLessThan(this.hoursLeft(e),t)]},getDueDateBadgeTitle:function(e){var t;return t=[[-36,"This card is past due."],[0,"This card is recently overdue!"],[1,"This card is due in less than an hour."],[1.3,"This card is due in about an hour."],[24,function(e){var t;return t=this.firstLessThan(e%1,[[.3,Math.floor(e).toString()],[.7,""+Math.floor(e).toString()+" and a half"],Math.ceil(e).toString()]),"This card is due in "+t+" hours."}],"This card is due later."],this.firstLessThan(this.hoursLeft(e),t)},getDueDateBadgeAdditionalTitle:function(e){var t;return t=[[-36,"past due"],[0,"recently past due!"],[24,"due soon"],null],this.firstLessThan(this.hoursLeft(e),t)},mimeTypeMap:[{"application/vnd.google-apps.spreadsheet":"Google Spreadsheet","application/vnd.google-apps.document":"Google Document","application/vnd.google-apps.presentation":"Google Presentation","application/vnd.google-apps.form":"Google Form","application/vnd.google-apps.drawing":"Google Drawing","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Microsoft Word File","application/application/vnd.ms-word.document.12":"Microsoft Word File","application/application/vnd.msword":"Microsoft Word File","application/vnd.openxmlformats-officedocument.word":"Microsoft Word File","application/msword":"Microsoft Word File","application/doc":"Microsoft Word File","application/vnd.ms-powerpoint.addin.macroEnabled.12":"Microsoft PowerPoint File","application/vnd.ms-powerpoint":"Microsoft PowerPoint File","audio/aiff":"AIFF Audio File","audio/x-midi":"MIDI Audio File","audio/mpeg":"MP3 Audio File","application/ogg":"OGG Audio File","video/mpeg":"MP3 Video File","video/quicktime":"Quicktime Video File","audio/wav":"WAV Audio File","text/html":"HTML File","application/xhtml+xml":"HTML File","text/css":"CSS File","application/css-stylesheet":"CSS File","text/javascript":"JavaScript File","text/calendar":"Calendar File","application/rtf":"Rich Text Format File","text/x-python":"Python File","application/json":"JSON File","image/svg+xml":"SVG File","image/bmp":"Bitmap Image","image/png":"PNG Image","image/gif":"GIF Image","image/jpeg":"JPG Image","image/x-ico":"Favicon","application/pdf":"PDF File","application/acrobat":"PDF File","application/nappdf":"PDF File","application/x-pdf":"PDF File","application/vnd.pdf":"PDF File","text/pdf":"PDF File","text/x-pdf":"PDF File","application/vnd.oasis.opendocument.text":"Open Document Text File","application/x-iwork-keynote-sffkey":"Apple Keynote","application/postscript":"Postscript","application/illustrator":"Adobe Illustrator File","application/photoshop":"Adobe Photoshop File","text/x-vcard":"vCard File","application/zip":"ZIP Archive File"}],isGDriveUrl:function(e){return/^https:\/\/docs\.google\.com\//.test(e)},isDropboxUrl:function(e){return/^https:\/\/www\.dropbox\.com\//.test(e)},isOneDriveUrl:function(e){return/^https:\/\/onedrive\.live\.com\//.test(e)},isBoxUrl:function(e){return/^https:\/\/app\.box\.com\//.test(e)},getAttachmentData:function(e,t){var i,n,r,o,s,a;return n=e.toJSON(),n.canUseViewer=!0,n.ext=Util.fileExt(n.name),n.removeText="Delete",n.openText="Download",n.openIconClass="movedown",n.doDownload=!0,s=n.ext,__indexOf.call(this.allViewerableExts(),s)>=0&&!Util.hasDownloadAttribute()&&(n.openText="Open in New Tab",n.openIconClass="open",n.doDownload=!1),Util.isGDriveUrl(n.url)?(n.isGDriveFile=!0,n.isExternal=!0,o=Util.mimeTypeMap[n.mimeType],n.ext=null,n.serviceName="Google Drive",n.meta="Google Drive File",n.openText="Open in Google Drive",n.openIconClass="open",n.removeText="Remove",n.isKnownService=!0,n.previewClass="attachment-thumbnail-preview-google-drive-logo",n.doDownload=!1,o&&(n.meta=""+o)):Util.isDropboxUrl(n.url)?(n.isExternal=!0,n.serviceName="Dropbox",n.meta="Dropbox File",n.openText="Open in Dropbox",n.openIconClass="open",n.removeText="Remove",n.isKnownService=!0,n.previewClass="attachment-thumbnail-preview-dropbox-logo",i=n.url,n.url=i,n.ext=Util.fileExt(i),n.doDownload=!1,n.canUseViewer=!1):Util.isOneDriveUrl(n.url)?(n.isExternal=!0,n.serviceName="OneDrive",n.meta="OneDrive File",n.openText="Open in OneDrive",n.openIconClass="open",n.removeText="Remove",n.isKnownService=!0,n.previewClass="attachment-thumbnail-preview-one-drive-logo",n.doDownload=!1):Util.isBoxUrl(n.url)?(n.isExternal=!0,n.serviceName="Box",n.meta="Box File",n.openText="Open in Box",n.openIconClass="open",n.removeText="Remove",n.isKnownService=!0,n.previewClass="attachment-thumbnail-preview-box-logo",n.doDownload=!1):n.isUpload?n.meta=Format.bytes(n.bytes):(r=KnownServices.interpret(n.url,t),n.openText="Open in New Tab",n.openIconClass="open",n.doDownload=!1,null!=r?(n.meta=r.name,n.isKnownService=!0,n.previewClass=r.previewClass,n.name=r.text,n.idName=r.id):(n.meta="Link",n.ext=null!=(a=Util.fileExt(n.url))?a:"LINK",n.removeText="Remove")),n},availableExts:function(){var e,t,i,n,r;if(null==this._availableExts){for(e=[],r=navigator.mimeTypes,i=0,n=r.length;n>i;i++)t=r[i],e=e.concat(t.suffixes.split(","));this._availableExts=_.compact(_.uniq(e))}return this._availableExts},imageExts:function(){var e;return e=["gif","jpeg","jpg","png","svg","webp"],null!=this._imageExts?this._imageExts:this._imageExts=e},audioExts:function(){var e;return e=["3gp","3gpp","aac","ac3","adts","aif","aifc","aiff","bwf","cdda","gsm","m4a","m4p","mp3","mpeg4","wav"],null!=this._audioExts?this._audioExts:this._audioExts=_.intersection(e,this.availableExts())},videoExts:function(){var e;return e=["avi","h264","m4v","mov","mp4","ogg","vfw","webm"],null!=this._videoExts?this._videoExts:this._videoExts=_.intersection(e,this.availableExts())},googleViewerableExts:function(){var e;return e=["doc","docx","ppt","pptx","rtf","xls","xlsx"],null!=this._googleViewerableExts?this._googleViewerableExts:this._googleViewerableExts=e},iFrameableExts:function(){var e,t;return e=["css","js","txt"],t=["pdf"],null!=this._iFrameableExts?this._iFrameableExts:this._iFrameableExts=_.intersection(t,this.availableExts()).concat(e)},allViewerableExts:function(){return null!=this._viewerableExts?this._viewerableExts:(this._viewerableExts=this.imageExts().concat(this.audioExts()).concat(this.videoExts()).concat(this.googleViewerableExts()).concat(this.iFrameableExts()),this._viewerableExts)},isViewerable:function(e){return __indexOf.call(this.allViewerableExts(),e)>=0},hasDownloadAttribute:function(){var e;return e=document.createElement("a"),"undefined"!=typeof e.download},escapedReturnUrl:function(){return encodeURIComponent(location.href.replace(/^https?:\/\/[^\/]+/,""))},parseURL:function(e){var t,i,n,r,o,s,a;return t=document.createElement("a"),t.href=e,s=t.protocol,o=t.port,r=t.pathname,a=t.search,i=t.hash,n=t.host,{protocol:s,port:o,path:r,query:a,hash:i,host:n}},isExternalURL:function(e){return Util.parseURL(e).host!==document.location.host}});var __slice=[].slice;TrelloMarkdown.lexerInlineRules.url.token=_.wrap(TrelloMarkdown.lexerInlineRules.url.token,function(){var e,t,i;return t=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],i=e[0][0],_.extend(t.apply(null,e),{known:KnownServices.interpret(i,Controller.getCurrentModelCache())})}),TrelloMarkdown.prototype.parseInlineOutput.link=_.wrap(TrelloMarkdown.prototype.parseInlineOutput.link,function(e,t){var i,n,r;return null!=(r=t.known)?(n=this.html("img",null,{attrs:{src:r.icon,"class":"known-service-icon"}})+this.html("span",this.text(r.text),{attrs:{id:r.id}}),i={href:t.url,title:t.title,"class":"known-service-link"},Util.isExternalURL(t.url)&&(i.target="_blank"),this.html("a",n,{attrs:i})):e.call(this,t)}),window.TFM=new(function(){function e(){var e;e={lookupEmoji:this.lookupEmoji,lookupCardInfo:this.lookupCardInfo,lookupMember:this.lookupMember},e.shouldOpenLinkInNewTab=Util.isExternalURL,this.description=new TrelloMarkdown(e),this.comments=new TrelloMarkdown(_.extend({restrict:{block:["blockquote","code","fencedCode","hr","list","newline","paragraph"],inline:["atMention","autolink","cardReference","break","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e)),this.checkItems=new TrelloMarkdown(_.extend({inlineOnly:!0,restrict:{inline:["atMention","autolink","cardReference","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e))}return e.prototype.lookupEmoji=function(e,t){var i,n,r;return e=e.toLowerCase(),null!=(i=null!=(n=t.textData)&&null!=(r=n.emoji)?r[e]:void 0)?i:TrelloEmoji[e]},e.prototype.lookupMember=function(e){var t;return t=Member.findOne(Controller.getCurrentModelCache(),function(t){return t.hasAtMe("@"+e)}),t?[t.get("fullName"),Auth.isMe(t)]:[null,!1]},e.prototype.lookupCardInfo=function(e,t){var i,n,r,o;return e=parseInt(e,10),r=null!=t&&null!=(o=t.board)?o.id:void 0,null==r&&Controller.onAnyBoardView()&&(r=Controller.idModel),i=Card.findOne(Controller.getCurrentModelCache(),function(t){return t.get("idBoard")===r&&t.get("idShort")===e}),null!=i?{title:i.get("name"),url:Controller.getCardUrl(i)}:(n="Card "+e,{title:n,url:Controller.getCardUrlWithoutModels(r,e,n)})},e}());var Socket,webSocketEvents,__slice=[].slice;webSocketEvents=["close","error","message","open"],Socket=function(){function e(e,t){var i,n,r,o;for(this.url=e,o=null!=t?t:{},this.fxReconnectDelay=o.fxReconnectDelay,this.maxReconnectDelay=o.maxReconnectDelay,this.maxReconnectAttempts=o.maxReconnectAttempts,_.extend(this,Backbone.Events),this.ws=null,this.resetRetries(),n=0,r=webSocketEvents.length;r>n;n++)i=webSocketEvents[n],this.listenTo(this,i,this["on"+Util.capitalize(i)]);return"WebSocket"in window?(this.connect(),this.buffer=[],this.connectedOnce=!1,void this.trigger("connecting")):void this.trigger("connect_failed")}return e.CONNECTING="connecting",e.CONNECTED="connected",e.WAITING_TO_RECONNECT="waiting to reconnect",e.RECONNECTING="reconnecting",e.CLOSED="closed",e.PING_TIMEOUT=3e4,e.prototype.resetRetries=function(){return this.attempts=0},e.prototype._clearPingTimeout=function(){return null!=this._pingTimeout&&clearTimeout(this._pingTimeout),this._pingTimeout=null},e.prototype._resetPingTimeout=function(){return this._clearPingTimeout(),this._pingTimeout=setTimeout(this._noPing.bind(this),e.PING_TIMEOUT)},e.prototype._noPing=function(){return!this.state!==e.CONNECTED?this.disconnect():void 0},e.prototype.connect=function(){var t,i,n,r,o,s;if(null!=this.ws)for(n=0,o=webSocketEvents.length;o>n;n++)t=webSocketEvents[n],this.ws["on"+t]=null;for(this.ws=new WebSocket(this.url),i=function(e){return function(t){return e.ws["on"+t]=function(){return e.trigger.apply(e,[t].concat(__slice.call(arguments)))}}}(this),r=0,s=webSocketEvents.length;s>r;r++)t=webSocketEvents[r],i(t);return this.state=e.CONNECTING},e.prototype.onOpen=function(){return this.trigger(this.connectedOnce?"reconnect":"connect"),this.connectedOnce=!0,this.state=e.CONNECTED,this.flushBuffer(),this.resetRetries()},e.prototype._triggerFailures=function(){return this.state===e.CONNECTING?this.trigger("connect_failed"):void 0},e.prototype.onClose=function(t){var i,n;return this.trigger("disconnect",null!=(n=null!=t?t.reason:void 0)?n:""),i="booted"===(null!=t?t.reason:void 0)||1006===(null!=t?t.code:void 0)&&this.state===e.CONNECTED,this._triggerFailures(),this._clearPingTimeout(),this.reconnect(t)},e.prototype.onError=function(){return this._triggerFailures(),this.disconnect(),this.reconnect()},e.prototype.onMessage=function(e){var t;if(this._resetPingTimeout(),""===e.data)return log("socket","responding to ping"),void this.ws.send("");try{t=JSON.parse(e.data)}catch(i){}return this.trigger("data",t)},e.prototype.reconnect=function(t){switch(this.state){case e.CONNECTED:this.ws.close();break;case e.RECONNECTING:case e.WAITING_TO_RECONNECT:return}return this.attempts>=this.maxReconnectAttempts?(this.trigger("reconnect_failed"),void(this.state=e.CLOSED)):(this.state=e.WAITING_TO_RECONNECT,0===this.attempts&&(this.currentReconnectDelay=this.fxReconnectDelay(t,this.state)),log("socket","attempting reconnect in "+this.currentReconnectDelay+"ms"),this._reconnectTimer=_.delay(function(t){return function(){return t._reconnectTimer=null,t.connect(),t.state=e.RECONNECTING,t.trigger("reconnecting")}}(this),this.currentReconnectDelay),this.attempts++,this.currentReconnectDelay=Math.min(2*this.currentReconnectDelay,this.maxReconnectDelay))},e.prototype.disconnect=function(){var t;switch(this._clearPingTimeout(),t=this.state,this.state=e.CLOSED,t){case e.CONNECTED:case e.CONNECTING:case e.RECONNECTING:return this.ws.close(),this.onClose();case e.WAITING_TO_RECONNECT:return clearTimeout(this._reconnectTimer)}},e.prototype.send=function(t){if(this.state!==e.CONNECTED)return this.buffer.push(t);try{return this.ws.send(t)}catch(i){return this.buffer.push(t),this.onError()}},e.prototype.flushBuffer=function(){var e,t,i,n,r;for(e=this.buffer,this.buffer=[],r=[],i=0,n=e.length;n>i;i++)t=e[i],r.push(this.send(t));return r},e}();var Monitor;Monitor=function(){var e,t,i,n,r,o,s;return t=0,n=window.sessionStorage,r=null!=(s=null!=n?n.status:void 0)?s:"active",e=null,o=null,"undefined"!=typeof document.hidden?(e="hidden",o="visibilitychange"):"undefined"!=typeof document.mozHidden?(e="mozHidden",o="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(e="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e="webkitHidden",o="webkitvisibilitychange"),i={init:function(){setInterval(i.check,1e4),$(window).focus(function(){return i.addActivity()}),$(document).bind("keydown mousedown",function(){i.addActivity()}),null!=e&&(i.getHidden=function(){return document[e]}),null!=o&&$(document).bind(o,function(){return function(){return $(i).triggerHandler("visibilitychange")}}(this))},addActivity:function(){var e;e=(new Date).getTime(),t=e,Storage.set("lastActivity",t),i.setStatus("active")},check:function(){var e;e=(new Date).getTime()-Math.max(t,Storage.enabled()?parseInt(Storage.get("lastActivity")):0),e>3e5&&i.setStatus("idle")},setStatus:function(e){e!==r&&(r=e,n&&(n.status=r),$(this).triggerHandler("setStatus",r))},getStatus:function(){return r}}}(),$(function(){return Monitor.init()});var AjaxQueue,ajaxQueueReset,__slice=[].slice;AjaxQueue=new(function(){function e(){this._msBackoff=100,this._msBackoffMin=100,this._nTriesLeft=12,this._nTriesMax=12,this._retrying=!1,this._stopped=!1,this._maxLength=10,this._queue=[],this._queueIdSeq=0}return e.prototype.uniqueReqId=function(){var e;return""+(null!=(e=Auth.me())?e.id:void 0)+"-"+Math.random()},e.prototype.hasQueue=function(){return this._queue.length>0},e.prototype.inQueue=function(e){return _.find(this._queue,function(t){return t.queueId===e.queueId})},e.prototype.removeFromQueue=function(e){return this._queue=_.filter(this._queue,function(t){return t.queueId!==e.queueId})},e.prototype.addToQueue=function(e){return log("AjaxQueue","addToQueue",e),this._queue.length+1>this._maxLength?void log("AjaxQueue","maxLength exceeded"):(this._queue.push(e),this.showRetrying())},e.prototype.success=function(e){return log("AjaxQueue","success",e),this.inQueue(e)?(this.removeFromQueue(e),this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()):void 0},e.prototype.resetRetries=function(){return log("AjaxQueue","reset"),this.hideFail(),this.showRetrying(),this._stopped=!1,this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()},e.prototype.retryableError=function(e){return log("AjaxQueue","retryableError",e),AjaxQueue.inQueue(e)?this._retrying=!1:AjaxQueue.addToQueue(e),this.retryNext()},e.prototype.serverAlreadySaw=function(e){return this.inQueue(e)?(this.removeFromQueue(e),this.retryNext()):void 0},e.prototype.retryNext=function(){var e;if(!this._stopped){if(!this.hasQueue())return void this.hideRetrying();if(this.showRetrying(),!this._retrying)return this._retrying=!0,e=this._queue[0],this._nTriesLeft>0?(log("AjaxQueue","retrying in "+this._msBackoff+"ms",e),setTimeout(function(){return $.ajax(e)},this._msBackoff),this._msBackoff*=2,--this._nTriesLeft):(this._stopped=!0,this.showOutOfRetries())}},e.prototype.showRealError=function(e,t,i){var n,r;return log("AjaxQueue","showRealError",i),this.hideRetrying(),n="dev"===ClientVersion.version.head?"Error: "+(null!=(r=e.responseText)?r:"Ajax failed"):"Change not saved: failed to sync with the Trello server.",Alerts.showHtml(templates.fill("connect_failed",{msg:n}),"error","AjaxQueueFail")},e.prototype.showOutOfRetries=function(){return log("AjaxQueue","showOutOfRetries"),this.hideRetrying(),Alerts.showHtml(templates.fill("connect_failed",{msg:"Timed out while trying to sync changes with the server.",allowReset:!0}),"error","AjaxQueueFail")},e.prototype.hideFail=function(){return Alerts.hide("AjaxQueueFail")},e.prototype.showRetrying=function(){var e;return e=this._queue.length,Alerts.show("Connection interrupted. Retrying "+Util.formatCount(e,"action",!0)+".","error","AjaxQueueRetry")},e.prototype.hideRetrying=function(){return Alerts.hide("AjaxQueueRetry")},e.prototype.showSending=function(){return Alerts.show("Sending...","warning","AjaxQueueSending")},e.prototype.hideSending=function(){return Alerts.hide("AjaxQueueSending")},e.prototype.showUploading=function(e){return Alerts.show(e,"info","AjaxQueueUpload")},e.prototype.hideUploading=function(){return Alerts.hide("AjaxQueueUpload")},e.prototype.ajax=function(e){var t,i,n,r,o,s;s=_.clone(e),this._stopped||(null==s.timeout&&(s.timeout=2e4),null==s.showSendingAfter&&(s.showSendingAfter=3e3),s.queueId=this._queueIdSeq++,s.headers={"X-Trello-ReqId":this.uniqueReqId()},s.oldSuccess=s.success,s.oldError=s.error,s.ourComplete=s.complete,delete s.complete,o=s.modelCache,delete s.modelCache,t=!1,n=!1,r=null!=o?o.lock("AjaxQueue.ajax"):void 0,s.success=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],AjaxQueue.hideSending(),AjaxQueue.hideUploading(),t=!0,AjaxQueue.success(this),"function"==typeof this.oldSuccess&&this.oldSuccess.apply(this,e),"function"==typeof this.ourComplete&&this.ourComplete(),null!=o?o.unlock(r):void 0},s.error=function(){var e,i,n,s,a,l;return e=1<=arguments.length?__slice.call(arguments,0):[],AjaxQueue.hideSending(),AjaxQueue.hideUploading(),t=!0,a=e[0],s=e[1],n=e[2],0===(l=a.status)||408===l||500===l?AjaxQueue.retryableError(this):(i=function(){return AjaxQueue._stopped=!0,AjaxQueue.showRealError.apply(AjaxQueue,e)},_.isFunction(this.oldError)?this.oldError.apply(this,__slice.call(e).concat([i])):i(),"function"==typeof this.ourComplete&&this.ourComplete(),null!=o?o.unlock(r):void 0)},/^post$/i.test(s.type)&&(i=function(e){return e.lengthComputable&&e.total>65536},s.xhr=function(e){return function(){var t,r;return r=new XMLHttpRequest,t=r.upload,null!=t&&(t.addEventListener("progress",function(t){return i(t)?(n=!0,e.showUploading("Uploading ... "+Math.round(100*t.loaded/t.total)+"%")):void 0}),t.addEventListener("load",function(){return n?e.showUploading("Processing Upload..."):void 0})),r}}(this)),this.hasQueue()?AjaxQueue.addToQueue(s):(s.showSendingAfter>=0&&setTimeout(function(){return function(){return t||n?void 0:AjaxQueue.showSending()}}(this),s.showSendingAfter),this.send(s)))},e.prototype.send=function(e){return $.ajax(e)},e}()),ajaxQueueReset=function(){return AjaxQueue.resetRetries()};var AJAXRPC,RPC,SocketRPC,__slice=[].slice;window.dropTheHammer=function(){return Storage.set("useWebsockets","yes"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Websockets engaged! Reload the page, please. Use pitStop() to turn sockets off."):void 0},window.pitStop=function(){return Storage.set("useWebsockets","no"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Shutting Websockets down! Reload the page, please. Use dropTheHammer() to turn sockets back on."):void 0},SocketRPC=function(){function e(){var e,t,i,n,r,o,s,a,l,c;if(this.reqid=0,this.dictCallback={},this.dictTime={},this.connectedOnce=!1,this.modelIxUpdate={},this.hasSockets="WebSocket"in window&&"no"!==Storage.get("useWebsockets"),"WebSocket"in window?"no"===Storage.get("useWebsockets")&&track("RPC","No Sockets","pitStop"):track("RPC","No Sockets","No WebSocket"),this.hasSockets){for(log("rpc","opening newSocket"),e="http:"===document.location.protocol?"ws:":"wss:",this.socket=new Socket(""+e+"//"+document.location.host+"/1/Session/socket?token="+Auth.myToken(),{maxReconnectDelay:32e3,maxReconnectAttempts:100,fxReconnectDelay:function(e){var t,i,n,r;if(r=Monitor.getStatus(),n="active"===r?Util.randomWait(Util.getMs({seconds:10}),Util.getMs({seconds:30})):Util.randomWait(Util.getMs({seconds:30}),Util.getMs({minutes:2})),t="active"===r?Util.randomWait(100,Util.getMs({seconds:1})):Util.randomWait(Util.getMs({seconds:2}),Util.getMs({seconds:10})),null==e||1006===(null!=e?e.code:void 0)&&this.state===Socket.CONNECTED)return n;if(4e3===e.code){try{i=parseInt(e.reason,0)}catch(o){}return"active"===r?Util.randomWait(Util.getMs({seconds:i}),4*Util.getMs({seconds:i})):Util.randomWait(4*Util.getMs({seconds:i}),4*Util.getMs({seconds:i})*4)}return t}}),l=["connect","reconnect","connecting","reconnecting","disconnect","connect_failed","reconnect_failed","error"],i=function(e){return function(t){return e.socket.on(t,function(e){return log("rpc","socket event",t,e)})}}(this),r=0,s=l.length;s>r;r++)t=l[r],i(t);for(c=["connecting","reconnecting"],n=function(e){return function(t){return e.socket.on(t,function(){return log("rpc","connecting"),$(e).triggerHandler("connecting")})}}(this),o=0,a=c.length;a>o;o++)t=c[o],n(t);this.socket.on("connect_failed",function(e){return function(){return log("rpc","connect_failed"),$(e).triggerHandler("connect_failed")}}(this)),this.socket.on("reconnect_failed",function(e){return function(){return log("rpc","reconnect_failed"),$(e).triggerHandler("reconnect_failed")}}(this)),this.socket.on("connect",function(e){return function(){return log("rpc","connect"),$(e).triggerHandler("connect"),e.connectedOnce=!0}}(this)),this.socket.on("reconnect",function(e){return function(){return log("rpc","reconnect"),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,$(e).triggerHandler("reconnect")}}(this)),this.socket.on("disconnect",function(e){return function(t){return log("rpc","disconnect",t),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse}}(this)),this.socket.on("error",function(e){return function(){var t,i;
return e.connectedOnce&&!(null!=(t=e.socket)&&null!=(i=t.socket)?i.connected:void 0)?$(e).triggerHandler("disconnect"):void 0}}(this)),this.socket.on("data",function(e){return function(t){return e._messageHandler(t)}}(this))}}return e.prototype._messageHandler=function(e){var t,i,n;return log("rpc","message",e),clearTimeout(this.timeoutInvokeResponse),delete this.timeoutInvokeResponse,(null!=e?e.version:void 0)?void ClientVersion.setServerVersion(e):(null!=e.reqid&&(i=this.dictCallback["fx"+e.reqid]),null!=e.result?"function"==typeof i&&i(null,e.result):(null!=(n=e.notify)?n.event:void 0)?(null!=e.idModelChannel&&rpc.setIxLastUpdate(e.idModelChannel,e.ixLastUpdateChannel),$(this).triggerHandler(e.notify.event,_.extend({idModelChannel:e.idModelChannel},e.notify))):e.error||log("rpc","unrecognized message",e),void(e.reqid&&(t=new Date-this.dictTime[e.reqid],log("timing","message",e.reqid,"time",t),delete this.dictCallback["fx"+e.reqid],delete this.dictCallback["fxErr"+e.reqid],delete this.dictTime[e.reqid])))},e.prototype.subscribe=function(e,t,i,n){return this.send({type:"subscribe",modelType:e,idModel:t,tags:i,invitationTokens:Util.invitationTokens()},function(){return function(e,i){return null!=e?log("rpc",e):rpc.setIxLastUpdate(t,i),"function"==typeof n?n(e,response):void 0}}(this))},e.prototype.unsubscribe=function(e,t,i){return this.send({type:"unsubscribe",modelType:e,idModel:t},function(){return function(e,t){return null!=e&&log("rpc",e),"function"==typeof i?i(e,t):void 0}}(this))},e.prototype.sendStatus=function(e,t){var i;return this.send({type:"setSessionStatus",status:e,idBoard:"undefined"!=typeof Controller&&null!==Controller&&null!=(i=Controller.getCurrentBoard())?i.id:void 0},function(){return function(e,i){return null!=e&&log("rpc",e),"function"==typeof t?t(e,i):void 0}}(this))},e.prototype.ping=function(e){return this.send({type:"ping"},function(){return function(t,i){return null!=t&&log("rpc",t),"function"==typeof e?e(t,i):void 0}}(this))},e.prototype._getSubscriptions=function(){return this.send({type:"getSubscriptions"},function(){return function(e,t){return null!=t?log("rpc",t):void 0}}(this))},e.prototype.send=function(e,t){var i;this.dictCallback["fx"+this.reqid]=t,this.dictTime[this.reqid]=new Date,e.reqid=this.reqid++,i=JSON.stringify(e),log("rpc","invoke: "+i),this.socket.send(i),null==this.timeoutInvokeResponse&&(this.timeoutInvokeResponse=setTimeout(function(e){return function(){var t;if(e.socket.state===Socket.CONNECTED)return log("rpc","No response from the socket.io server in 10 seconds. Disconnecting."),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,null!=(t=e.socket)?t.disconnect():void 0}}(this),1e4))},e.prototype.resync=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],_.isEmpty(e)&&(e=null),rpc.rpcAJAX.doPoll(e,function(){})},e.prototype.disconnect=function(){log("rpc","disconnecting"),this.socket.disconnect()},e.prototype.hasSocketTransport=function(){return this.hasSockets},e}(),AJAXRPC=function(){function e(){for(this.idBoardToPoll=null,this.modelIxUpdate={},this.msPoll=2e3,this.msPollIdle=1e4,this.ajaxSessionId=Math.random().toString().substring(2);this.ajaxSessionId.length<16;)this.ajaxSessionId+="0";this.failures=0,this.failuresAllowed=1e3}return e.prototype.subscribe=function(e,t,i,n){return SessionStatus.sendStatus(),"function"==typeof n?n():void 0},e.prototype.unsubscribe=function(e,t,i){return SessionStatus.sendStatus(),"function"==typeof i?i():void 0},e.prototype.sendStatus=function(e,t){var i;return ApiAjax({url:"/1/Session/"+this.ajaxSessionId,type:"PUT",data:{status:e,idBoard:"undefined"!=typeof Controller&&null!==Controller&&null!=(i=Controller.getCurrentBoard())?i.id:void 0},background:!0,success:function(){return"function"==typeof t?t():void 0},error:function(e){return"function"==typeof t?t(null!=e?e:"sending session status failed"):void 0}})},e.prototype.resync=function(){},e.prototype._getPollLength=function(){return Auth.isLoggedIn()&&"active"===Monitor.getStatus()?this.msPoll:this.msPollIdle},e.prototype.stopPolling=function(){return null!=this._pollingTimeout?(clearTimeout(this._pollingTimeout),delete this._pollingTimeout):void 0},e.prototype.poll=function(){return this._pollingTimeout=setTimeout(function(e){return function(){return e.failures>=e.failuresAllowed?void $(e).triggerHandler("connect_failed"):e.doPoll(function(t){if(null!=t){if("syncError"===t)return;$(e).triggerHandler("connecting"),++e.failures}else e.failures>0&&$(e).triggerHandler("reconnect"),e.failures=0;return e.poll()})}}(this),this._getPollLength())},e.prototype.doPoll=function(){var e,t,i,n,r,o,s,a,l,c;if(o=2<=arguments.length?__slice.call(arguments,0,s=arguments.length-1):(s=0,[]),i=arguments[s++],t=o[0],r=[],_.isArray(t))for(a=0,l=t.length;l>a;a++)e=t[a],r.push(rpc.currentSubscriptions[e]);else{if(null!=t)return void log("rpc","Bad argument to doPoll: "+t);c=rpc.currentSubscriptions;for(e in c)n=c[e],r.push(n)}return _.isEmpty(r)?(log("rpc","No models to poll for "+t),"function"==typeof i?i():void 0):this._doPoll(r,i)},e.prototype._doPoll=function(e,t){var i,n,r,o,s;return s=function(){var t,s,a,l;for(l=[],t=0,s=e.length;s>t;t++)a=e[t],r=a.modelType,i=a.idModel,n=a.ixLastUpdate,o=a.tags,l.push("/"+r+"/"+i+"/deltas?ixLastUpdate="+encodeURIComponent(n.toString())+"&tags="+encodeURIComponent(o.join(",")));return l}(),ApiAjax({data:{urls:s.join(",")},url:"/1/batch",background:!0,success:function(e){return function(n,r,o){var s,a,l,c,d,u,p,h;for(ClientVersion.setServerVersionFromResponse(o),l=0,d=n.length;d>l;l++)if(a=n[l],200 in a){if(null!=a[200].syncError)return Controller.syncError(),e.stopPolling(),"function"==typeof t?t("syncError"):void 0;if(a[200].modelIxUpdate)for(i=_.keys(a[200].modelIxUpdate)[0],rpc.setIxLastUpdate(i,a[200].modelIxUpdate[i]),h=null!=(p=a[200].messages)?p:[],c=0,u=h.length;u>c;c++){s=h[c];try{s=JSON.parse(s)}catch(m){continue}$(e).triggerHandler(s.notify.event,_.extend({idModelChannel:s.idModelChannel},s.notify))}}return"function"==typeof t?t():void 0}}(this),error:function(){return"function"==typeof t?t("Poll failed"):void 0}})},e}(),RPC=function(){function e(){this.rpcSocket=this.rpcAJAX=this.rpcCurrent=null,this.currentSubscriptions={},this.fReadyToSubscribe=!1,this.deferredQueue=[],this.handleLogin()}return e.prototype.rpcReady=function(){var e,t,i,n;for(this.fReadyToSubscribe=!0,this.isUsingSocket()||this.rpcCurrent.poll(),$(this).triggerHandler("ready"),n=this.deferredQueue,t=0,i=n.length;i>t;t++)(e=n[t])();return $(this).bind("reconnect",function(e){return function(){return e.resubscribe()}}(this))},e.prototype.resubscribe=function(){var e,t,i,n;this.rpcCurrent.resync(),i=this.currentSubscriptions,n=[];for(e in i)t=i[e],n.push(this.subscribe(t.modelType,e,t.tags));return n},e.prototype.bindSocketEvents=function(){var e,t,i,n,r;for(n=["connecting","connect","reconnect","connect_failed","reconnect_failed","updateModels","deleteModels"],r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push($(this.rpcCurrent).bind(e,function(e){return function(t,i,n){return $(e).triggerHandler(t,i,n)}}(this)));return r},e.prototype.lazyCreateRPC=function(){var e,t;if(!this.rpcCurrent){if(this.rpcSocket=new SocketRPC,this.rpcAJAX=new AJAXRPC,this.rpcCurrent=this.rpcAJAX,this.bindSocketEvents(),this.rpcSocket.hasSocketTransport()){if(this.rpcSocket.connectedOnce)return;return t=Profiler.getTime(),e=8e3,setTimeout(function(e){return function(){return e.fReadyToSubscribe?void 0:(log("rpc","Socket not responsive. Using AJAX."),e.rpcSocket.disconnect(),e.rpcReady())}}(this),e),this.rpcSocket.ping(function(e){return function(){e.fReadyToSubscribe?(e.rpcSocket.disconnect(),track("RPC","No Sockets","Slow ping",Profiler.getTime()-t)):(log("rpc","Socket responded to ping in a timely fashion. Using sockets."),e.rpcCurrent=e.rpcSocket,e.bindSocketEvents(),e.rpcReady())}}(this))}return log("rpc","No socket connect. Using AJAX."),this.rpcReady()}},e.prototype.handleLogin=function(){return Auth.isLoggedIn()?this.lazyCreateRPC():void 0},e.prototype.sendStatus=function(e){return this.lazyCreateRPC(),this.fReadyToSubscribe?this.rpcCurrent.sendStatus(e):void this.deferredQueue.push(function(t){return function(){return t.sendStatus(e)}}(this))},e.prototype.unsubscribe=function(e,t,i){var n;return this.lazyCreateRPC(),this.rpcCurrent.unsubscribe(e,t,i),null==i?delete this.currentSubscriptions[t]:(n=this.currentSubscriptions[t],n.tags=_.without(n.tags,i),_.isEmpty(n.tags)?delete this.currentSubscriptions[t]:void 0)},e.prototype.subscribe=function(e,t,i){var n;return this.lazyCreateRPC(),null!=(n=this.currentSubscriptions[t])?n[i]=_.union(n[i],i):this.currentSubscriptions[t]={tags:i,ixLastUpdate:-1,modelType:e,idModel:t},this.fReadyToSubscribe?this.rpcCurrent.subscribe(e,t,i):(log("rpc","deferring subscribe to "+e+" "+t),void this.deferredQueue.push(function(n){return function(){return n.rpcCurrent.subscribe(e,t,i)}}(this)))},e.prototype.getIxLastUpdate=function(e){return this.currentSubscriptions[e].ixLastUpdate},e.prototype.setIxLastUpdate=function(e,t){var i;return null!=(i=this.currentSubscriptions[e])?i.ixLastUpdate=t:void 0},e.prototype.resync=function(){var e,t;return e=1<=arguments.length?__slice.call(arguments,0):[],this.lazyCreateRPC(),"function"==typeof(t=this.rpcCurrent).resync?t.resync.apply(t,e):void 0},e.prototype.isUsingSocket=function(){return null!=this.rpcCurrent&&this.rpcCurrent===this.rpcSocket},e}(),window.rpc=new RPC;var Format;Format=new(function(){function e(){}return e.prototype.markdownAsHtml=function(e,t){return null==t&&(t={}),""===e?e:TFM.description.format(e,t).output},e.prototype.bytes=function(e){var t,i,n,r,o,s,a;if(null==e)return"Unknown Size";for(o=["B","KB","MB","GB"],t=e,i=s=0,a=o.length;a>s;i=++s){if(r=o[i],1024>t||i===o.length-1)return n=Math.round(100*t)/100,""+n+" "+r;t/=1024}return"unknown"},e}());var ViewWithId,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice;ViewWithId=function(e){function t(e){this._subviews={},this.modelCache=null!=e?e.modelCache:void 0,this.handleDOMRemove=function(e){return function(){return e._delegated=!1}}(this),t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.subview=function(e,t,i,n){return null==i&&(i={}),null==n&&(n=""+e.prototype.uniqueId()+"_"+t.cid),n in this._subviews||(this._subviews[n]=new e(_.extend({model:t,modelCache:this.modelCache},i))),this._subviews[n]},t.prototype.existingSubview=function(e,t,i){if(null==i&&(i=""+e.prototype.uniqueId()+"_"+t.cid),!(i in this._subviews))throw new Error("existingSubview called before subview was created");return this._subviews[i]},t.prototype.existingSubviewOrUndefined=function(e,t,i){return null==i&&(i=""+e.prototype.uniqueId()+"_"+t.cid),this._subviews[i]},t.prototype.collectionSubview=function(e,t,i,n){var r,o;return null==i&&(i={}),null==n&&(n=e.prototype.uniqueId()),r=null!=(o=this._subviews)[n]?o[n]:o[n]=new e(_.extend({collection:t,modelCache:this.modelCache},i)),null!=i.el&&r.el!==i.el&&r.setElement(i.el),r},t.prototype.subviewsOfType=function(e){var t,i,n,r;n=this._subviews,r=[];for(t in n)__hasProp.call(n,t)&&(i=n[t],i instanceof e&&r.push(i));return r},t.prototype.deleteSubview=function(e,t){if(null==t&&(t=""+e.constructor.prototype.uniqueId()+"_"+e.model.cid),e!==this._subviews[t])throw new Error("incorrect key for subview in deleteSubview");return e.remove(),delete this._subviews[t]},t.prototype.removeSubviews=function(){var e,t,i;i=this._subviews;for(e in i)t=i[e],t.remove();return this._subviews={}},t.prototype.remove=function(){var e,i,n,r,o,s,a,l;if(this.removeSubviews(),null!=this._intervals)for(a=this._intervals,n=0,o=a.length;o>n;n++)e=a[n],clearInterval(e);if(null!=this._timeouts)for(l=this._timeouts,r=0,s=l.length;s>r;r++)i=l[r],clearTimeout(i);return"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.removeHandler(this),t.__super__.remove.apply(this,arguments)},t.prototype.removeQueued=function(e){var t,i,n;e||(e=async.cargo(function(e,t){var i,n,r;for(n=0,r=e.length;r>n;n++)i=e[n],i.remove();return _.defer(t)},10),e.push(this)),n=this._subviews;for(t in n)i=n[t],e.push(i),i.removeQueued(e);return this._subviews={}},t.prototype.debounce=function(e,i){return Util.voidDebounced(e,i,t.prototype.setTimeout.bind(this))},t.prototype.makeDebouncedMethods=function(){var e,t,i,n;for(t=1<=arguments.length?__slice.call(arguments,0):[],i=0,n=t.length;n>i;i++)e=t[i],this[e+"Debounced"]=this.debounce(this[e])},t.prototype.delegateEvents=function(){var e,i,n;if(!this._delegated){this.$el.on("remove",this.handleDOMRemove),t.__super__.delegateEvents.apply(this,arguments),n=this._subviews;for(e in n)i=n[e],i.delegateEvents();this._delegated=!0}},t.prototype.undelegateEvents=function(){var e,i,n;if(this._delegated){this.$el.off("remove",this.handleDOMRemove),t.__super__.undelegateEvents.apply(this,arguments),n=this._subviews;for(e in n)i=n[e],i.undelegateEvents();this._delegated=!1}},t.prototype.appendSubview=function(e,t){return null==t&&(t=this.$el),this.appendSubviews([e],t)},t.prototype.appendSubviews=function(e,t){var i,n,r;for(null==t&&(t=this.$el),n=0,r=e.length;r>n;n++)i=e[n],i.delegateEvents();return t.append(function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(i.render().el);return r}())},t.prototype.recursivelyStopListening=function(){var e,t,i;this.stopListening(),i=this._subviews;for(e in i)t=i[e],t.recursivelyStopListening()},t.prototype.uniqueId=function(){return this.hasOwnProperty("_uniqueId")||(this._uniqueId=_.uniqueId("view")),this._uniqueId},t.prototype.destructor=function(){var e,t,i,n,r,o;if(this.remove(),null!=this._using)for(o=this._using,n=0,r=o.length;r>n;n++)i=o[n],"function"==typeof i.destructor&&i.destructor();return this.undelegateEvents(),t=0,e=1e3,async.whilst(function(e){return function(){return e.$el.is(":visible")}}(this),function(){return function(i){return t+=e,setTimeout(i,e),t>1e4?log("view","Unable to remove a view"):void 0}}(this),function(e){return function(){return e.$el.remove(),Util.shred(e)}}(this))},t.prototype.setInterval=function(e,t){return null==this._intervals&&(this._intervals=[]),this._intervals.push(setInterval(e,t))},t.prototype.setTimeout=function(e,t){var i;return null==this._timeouts&&(this._timeouts=[]),this._timeouts.push(i=setTimeout(e,t)),i},t.prototype.forceIntoDom=function(){var e;if(0===this.$el.closest("html").length)return e=$("#staging"),0===e.length&&(e=$("<div>").attr("id","staging").css({visibility:"hidden",position:"absolute",left:0,top:-1e5,width:"100%"}).appendTo("body")),e.append(this.el)},t}(Backbone.View),"undefined"!=typeof Util&&null!==Util&&Util.extendWithModelCacheHelpers(ViewWithId);var CollectionView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice;CollectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenPropagators={},this.listenTo(this.collection,{sort:this.sort,"change:closed":this.closed,add:this.addModel,remove:this.removeModel,reset:this.reset}),t.__super__.initialize.apply(this,arguments)},t.prototype.getModels=function(){return this.collection.models},t.prototype.subview=function(){var e,i,n;return e=t.__super__.subview.apply(this,arguments),null==(i=this.listenPropagators)[n=e.cid]&&(i[n]=this.listenTo(e,"all",function(t){return function(){var i,n;return n=arguments[0],i=2<=arguments.length?__slice.call(arguments,1):[],t.trigger.apply(t,[n,e].concat(__slice.call(i)))}}(this))),e},t.prototype.addModel=function(e){var t;log("render","adding "+this.collection.model.name+" to "+this.viewType.name),t=this.subview(this.viewType,e),this.el&&this.insertSubview(t,_.indexOf(this.getModels(),e))},t.prototype.removeModel=function(e){var t;log("render","removing "+this.collection.model.name+" from "+this.viewType.name),t=this.subview(this.viewType,e),t.$el.hide(),t.destructor(),this.deleteSubview(t)},t.prototype.closed=function(e,t,i){t?this.removeModel(e,i):this.addModel(e,i)},t.prototype.reset=function(e,t){var i,n,r,o,s,a,l,c;for(r=t.previousModels,i={},c=e.models,o=0,a=c.length;a>o;o++)n=c[o],i[n.cid]=!0;for(s=0,l=r.length;l>s;s++)n=r[s],i[n.cid]||this.removeModel(n);return this.sort()},t.prototype.sort=function(){var e,t,i,n,r;for(r=this.getModels(),e=i=0,n=r.length;n>i;e=++i)t=r[e],this.moveSubviewToPosition(this.subview(this.viewType,t),e)},t.prototype.render=function(e){var t;return log("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.appendSubviews(function(){var e,i,n,r;for(n=this.getModels(),r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(this.subview(this.viewType,t));return r}.call(this)),"function"==typeof e&&e(),this},t.prototype.insertSubview=function(e,t,i){null==i&&(i=this.$el),log("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?i.children().eq(0):t<i.children().length?i.children().eq(t):void 0:t instanceof ViewWithId&&(t=t.$el),e.$el.is(":empty")&&(e.delegateEvents(),e.render()),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):i.append(e.$el)},t.prototype.moveSubviewToPosition=function(e,t,i){var n,r,o,s,a;if(null==i&&(i=this.$el),e.$el.is(":empty"))return void this.insertSubview(e,t,i);for(a=i.children(".placeholder,.card-composer"),o=0,s=a.length;s>o;o++)r=a[o],$(r).index()<=t&&t++;n=e.$el.index(),n!==t&&(log("render","moving "+e.$el.find("h2").text()+" into position "+t),0===t?i.prepend(e.$el):t>=i.children().length?i.append(e.$el):e.$el.insertAfter(i.children().eq(t-1)))},t}(ViewWithId);var ViewWithActions;ViewWithActions=function(){function e(){}return e.prototype.limit=50,e.prototype.nextPage=1,e.prototype.shortLoad=!1,e.prototype.loading=!1,e.prototype.idModels=null,e.prototype.loadMoreActions=function(){return this.loading?void 0:(this.loading=!0,this.model.onId(function(e){return function(){var t;return ModelLoader["for"](e.modelCache).loadMoreActionData(e.model.typeName.toLowerCase(),e.model.id,e.nextPage,e.limit,e.idModels,null!=(t="function"==typeof e.getActionsFilter?e.getActionsFilter():void 0)?t:"all",function(t,i){return e.loading=!1,t?void 0:(e.shortLoad=i.length<e.limit,e.renderActions(),++e.nextPage)})}}(this)))},e.prototype.hasMoreActions=function(){return!this.loading&&!this.shortLoad&&this.getActions().length>=this.limit},e.prototype.getActions=function(){return this.Action.getListForModel(this.model)},e}();var EditableView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};EditableView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.allowNewlines=!0,t.prototype._draftKey=function(e){return"draft_"+this.model.id+"_"+e},t.prototype._saveDraft=function(e,t){return Storage.set(this._draftKey(e),t)},t.prototype._recallDraft=function(e){return Storage.get(this._draftKey(e))},t.prototype._discardDraft=function(e){return Storage.unset(this._draftKey(e))},t.prototype.editField=function(e){var t,i,n,r,o;return t=$(e.target).closest("a"),t.length>0&&"#"!==t.attr("href")||DragSort.dragging||DragSort.sorting||("function"==typeof window.getSelection&&null!=(r=window.getSelection())?r.toString():void 0)||(null!=(o=document.selection)?o.createRange().text:void 0)?void 0:(Util.stop(e),PopOver.hide(),n=$(e.target).closest(".editable"),i=n.attr("attr"),this.edit(i))},t.prototype.edit=function(e){var t,i,n,r,o,s,a,l,c;e.indexOf(".")>-1&&(c=e.split("."),e=c[1]),t=this.$("[attr="+e+"]"),l=this.$(".js-no-higher-edits [attr="+e+"]"),i=t.not(l),0!==i.length&&(Layout.cancelEdits(),r=i.find(".edit:first"),0!==r.length&&(o=i.find(".field:first"),a=o.is("textarea"),s=o.parent().is(".card-detail-edit"),n=i.find(".current"),r.append(templates.fill("edit_controls")),r.hasClass("delete")||r.find(".delete").remove(),r.hasClass("convert")||r.find(".convert").remove(),r.hasClass("options-menu")||r.find(".options-menu").remove(),i.addClass("editing"),""===o.val()&&o.val(Util.traverse(this.model.attributes,null!=c?c:e)),o.data("draftKey",this._draftKey(e)),log("editable",this.model),o.focus().select().autosize()))},t.prototype.recallDrafts=function(){var e,t,i;return i=this,e=this.$("[attr]"),t=this.$(".js-no-higher-edits [attr]"),e.not(t).each(function(){var e,t,n;return t=$(this).attr("attr"),n=i._recallDraft(t),null!=n?(e=$(this).find(".field:first"),e.val(n),_.defer(function(e){return function(){return $(e).find(".edits-warning").show()}}(this))):void 0})},t.prototype.stopEditing=function(e){return Util.stop(e),Layout.cancelEdits(),!1},t.prototype.clearEdits=function(e){var t,i;return Util.stop(e),t=$(e.target).closest(".editable[attr]"),i=t.attr("attr"),null!=i&&this._discardDraft(i),t.find(".field").val(""),t.find(".edits-warning").hide(),t.find(".edits-error").hide(),Layout.cancelEdits(),!1},t.prototype.validate=function(){var e,t,i,n,r,o,s,a,l;for(s=this.$(".editing.non-empty .field"),i=0,r=s.length;r>i;i++)if(e=s[i],/^\s*$/.test($(e).val()))return!1;for(a=this.$(".editing .field"),n=0,o=a.length;o>n;n++)if(e=a[n],t=null!=(l=$(e).val())?l.length:void 0,t>16384)return $(".editing").find(".edits-error").text("Your text is "+(t-16384)+" characters too long to save").show(),!1;return!0},t.prototype.keydownEvent=function(e){Layout.isEditing()&&(PopOver.view instanceof EmojiCompleterView||PopOver.view instanceof AutoMentionerView?"function"==typeof this.checkInsert&&this.checkInsert(e):Util.isForceSubmitKey(e)||e.keyCode===Key_Enter&&(!$(e.target).is("textarea")||$(e.currentTarget).hasClass("single-line"))&&!e.shiftKey?(Util.stop(e),this.commitEdits(e)):e.keyCode!==Key_Enter||this.allowNewlines||Util.stop(e))},t.prototype.commitEdits=function(e){var t,i,n,r;return Util.stop(e),t=$(e.target).closest(".editable.editing[attr]"),t.find(".edits-error").hide(),this.validate()?(r=this,n=this.model,i=this.customSet,t.remove("input[type=submit]"),t.removeClass("editing").each(function(){var e,i;return e=$(this).attr("attr"),i=$(this).find(".field").val(),r.allowNewlines||(i=i.replace(/[\r\n]+/g," ")),0===jQuery.trim(i).length&&(i=""),n.get(e)===i?r._discardDraft(e):n.update(e,i,function(i){return null!=i?t.find(".edits-error").text(i).show():r._discardDraft(e)})}).find(".field").val(""),t.find(".edits-warning").hide(),!0):void 0},t.prototype.clickSetting=function(e){var t,i,n,r;t=$(e.target),t.hasClass("disabled")||t.closest(".js-disabled").length||(i=t.attr("href"),i&&"#"!==i||(n=t.closest(".pref").attr("name"),n&&(r=t.attr("value"),r=function(){switch(r){case"true":return!0;case"false":return!1;default:return r}}(),this.model.setPref(n,r),this.model.save(),Util.stop(e))))},t.prototype.delegateEvents=function(e){var i;return i={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":Util.stopPropagation,"click textarea":Util.stopPropagation},null!=this.model.setPref&&(i["click a"]="clickSetting"),t.__super__.delegateEvents.call(this,_.extend(i,e||this.events))},t}(ViewWithId);var Confirm,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Confirm=function(e){function t(e){var i,n,r,o,s,a,l;this.model=e.model,l=e.text,this.elem=e.elem,this.top=e.top,r=e.confirmText,n=e.confirmBtnClass,i=e.cancelText,this.title=e.title,this.template=e.template,o=e.data,a=e.fxConfirm,s=e.fxCancel,this.popOnClick=e.popOnClick,null==this.template&&(this.template="confirm"),this.confirm=this._handleClick(a),this.cancel=s?this._handleClick(s):function(){},this.data=_.extend({text:l,confirmText:r,confirmBtnClass:n,cancelText:i},null!=o?o:{}),t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.toggle=function(e){return PopOver.toggle({elem:e.elem,top:e.top,view:this,options:e})},t.pushView=function(e){return PopOver.pushView({view:this,options:e})},t.prototype.getViewTitle=function(){return this.title},t.prototype.events={"click .js-confirm":"confirm","click .js-cancel":"cancel"},t.prototype.render=function(){return this.$el.html(templates.fill(this.template,this.data,{},{member:templates.member})),this},t.prototype._handleClick=function(e){return function(t){return function(i){return Util.stop(i),t.popOnClick?PopOver.popView():PopOver.hide(),"function"==typeof e&&e(i),t.remove(),!1}}(this)},t}(ViewWithId);var AnnouncementHeaderView,ConfirmAddEmail,ConfirmEmailBannerView,HeaderAddMenuView,HeaderBoardsButtonView,HeaderChannelPicker,HeaderMemberMenuView,HeaderMemberView,HeaderVersionPicker,HeaderWoofView,InvitedBannerView,LoginOrSignupDialogView,LoginPopoverView,PublicBoardBannerView,SetPasswordBannerView,WarningBannerView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};HeaderMemberView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="header-user",t.prototype.initialize=function(){var e;return this.listenTo(this.modelCache,"add:Notification change:Notification remove:Notification",this.renderUnreadNotifications),this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username",this.renderAvatar),this.serverVersionChangeListener=this.renderUpgradeAvailable.bind(this),$(ClientVersion).bind("change:serverVersion",this.serverVersionChangeListener),this.idLastNotification=null!=(e=_.chain(this.Notification.all()).pluck("id").compact().sort().last().value())?e:"",this.listenTo(this.modelCache,"add:Notification",function(e){return function(t){return t.id>e.idLastNotification?(e.idLastNotification=t.id,new DesktopNotification(t)):void 0}}(this)),t.__super__.initialize.apply(this,arguments)},t.prototype.destructor=function(){return $(ClientVersion).unbind("change:serverVersion",this.serverVersionChangeListener),t.__super__.destructor.apply(this,arguments)},t.prototype.events={"click .js-open-header-notifications-menu":"viewNotificationsMenu","click .js-open-header-member-menu":"viewMemberMenu","click .js-open-add-menu":"openAddMenu","click .js-toggle-login-popover":"viewLoginMenu","click .js-open-feedback":"openFeedback",shortcut:"shortcut","click .js-open-channel-picker":"viewChannelPicker"},t.prototype.shortcut=function(e){switch(e){case Key_B:return this.viewBoardsMenu(),"Header Boards Menu"}},t.prototype.render=function(e){var t,i,n;return null==e&&(e=!1),log("render","rendering header"),t={hasCrown:this.model.isFeatureEnabled("crown"),is_promo:e,showChannelPicker:(null!=(n=window.channels)?n.allowed.length:void 0)>1,escapedReturnUrl:Util.escapedReturnUrl()},this.$el.html(templates.fill("header_user",t,{},{header_signup_login:templates.header_signup_login})),i=!1,i&&this.showFeedbackButton(),this.renderUpgradeAvailable(),this.renderUnreadNotifications(),this.renderAvatar(),this.renderMemberName(),this},t.prototype.renderUpgradeAvailable=function(){return log("render","rendering upgrade available"),Controller.advertiseUpgrade()?this.$(".upgrade").show():void 0},t.prototype.renderMemberName=function(){var e;return this.$(".js-member-name").text(null!=(e=this.model.get("fullName"))?e:this.model.get("username"))},t.prototype.renderAvatar=function(){return log("render","rendering avatar"),this.$(".member").html(templates.fill("member",this.model.toJSON())),this},t.prototype.renderUnreadNotifications=function(){var e,t;return e=this.Notification.unreadCount(),t=""+Util.formatCount(e,"Notification",!0)+". Click to view notifications.",this.$(".js-open-header-notifications-menu").attr("title",t).toggleClass("new-notifications",e>0),Controller.title(),this},t.prototype.viewLoginMenu=function(e){return Util.stop(e),track("Header","Login Menu","Open Login Menu"),PopOver.toggle({elem:this.$(".js-toggle-login-popover"),top:40,view:new LoginPopoverView({model:Auth.me(),modelCache:this.modelCache})})},t.prototype.viewNotificationsMenu=function(e){Util.stop(e),track("Header","Notifications Menu","Open Notifications Menu"),PopOver.toggle({elem:this.$(".js-open-header-notifications-menu"),top:40,view:HeaderNotificationListView,hidden:_.bind(this.model.clearAllNotifications,this.model),options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openAddMenu=function(e){Util.stop(e),track("Header","Add Menu","Open"),PopOver.toggle({elem:this.$(".js-open-add-menu"),top:40,view:new HeaderAddMenuView({model:Auth.me(),modelCache:this.modelCache})})},t.prototype.viewMemberMenu=function(e){var t;Util.stop(e),track("Header","User Menu","Open User Menu"),t=new HeaderMemberMenuView({model:Auth.me(),modelCache:this.modelCache}),PopOver.toggle({elem:this.$(".js-open-header-member-menu"),top:40,view:t})},t.prototype.showFeedbackButton=function(){return this.$(".js-open-feedback").removeClass("hide"),this},t.prototype.openFeedback=function(e){Util.stop(e),Dialog.show({view:new EarlyVersionFeedbackView({model:this.Auth.me(),modelCache:this.modelCache}),maxWidth:750})},t.prototype.viewChannelPicker=function(e){Util.stop(e),PopOver.toggle({elem:this.$(".js-open-channel-picker"),top:41,view:HeaderChannelPicker})},t}(ViewWithId),HeaderChannelPicker=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.CHANNELS=["stable","beta","alpha"],t.prototype.getViewTitle=function(){return"Switch Channels"},t.prototype.events={"click .js-select":"selectChannel","click .js-select-dev":"showDev","click .js-remove-cookie":"removeCookie"},t.prototype.initialize=function(){var e;return this.channels=function(){var t,i,n,r;for(n=this.CHANNELS,r=[],t=0,i=n.length;i>t;t++)e=n[t],__indexOf.call(window.channels.allowed,e)>=0&&r.push({name:e,displayName:Util.capitalize(e),active:e===window.channels.active});return r}.call(this),this.isDev=window.channels.dev},t.prototype.selectChannel=function(e){var t;return t=e.target.name,ApiAjax({url:"/1/members/me/channels/active",type:"PUT",data:{value:t},success:function(){return function(){return window.channels.active=t,PopOver.hide(),document.location.reload()}}(this)})},t.prototype.removeCookie=function(e){return Util.stop(e),$.cookie("head",null,{path:"/"}),this.render()},t.prototype.render=function(){var e;return e=!!$.cookie("head"),e&&this.isDev&&_.defer(function(e){return function(){return e.showDev()}}(this)),this.$el.html(templates.fill("header_channel_picker",{channels:this.channels,cookie:e,dev:this.isDev})),this},t.prototype.showDev=function(){return PopOver.pushView({view:HeaderVersionPicker}),this},t}(ViewWithId),HeaderVersionPicker=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Select client version"},t.prototype.LATEST_VERSION={"0.0":!0},t.prototype.events={"change .js-select-head":"updateHead","change .js-select-version":"updateVersion"},t.prototype.initialize=function(){var e,t;return this.active=function(){try{return JSON.parse($.cookie("head"))}catch(e){}}()||{},this.active.version?this.active.version=[null!=(e=this.active.version)?e:0,null!=(t=this.active.patch)?t:0].join("."):void 0},t.prototype.render=function(){return this.$el.html(templates.fill("header_version_picker",{active:this.formatActive(),heads:[null].concat(this.listHeads()),versions:[null].concat(this.listVersions())})),this
},t.prototype.formatVersion=function(e){return"0.0"===e?"latest":e},t.prototype.formatActive=function(){return{name:this.active.name,version:this.formatVersion(this.active.version)}},t.prototype.listHeads=function(){var e,t,i,n;i=window.clientDeployments,n=[];for(e in i)t=i[e],n.push({displayName:Util.capitalize(e),value:e,selected:this.active.name===e});return n},t.prototype.listVersions=function(){var e,t,i,n,r;t=window.clientDeployments[this.active.name],n=_.extend({},this.LATEST_VERSION,t),r=[];for(i in n)e=n[i],r.push({displayName:this.formatVersion(i),value:i,selected:this.active.version===i,active:e});return r},t.prototype.updateHead=function(e){return this.active.name=$(e.target).val(),this.active.version=null,this.render()},t.prototype.updateVersion=function(e){var t,i,n,r;return this.active.version=$(e.target).val(),this.render(),r=this.active.version.split("."),n=r[0],i=r[1],t={name:this.active.name,version:n,patch:i},parseInt(n)>=0?($.cookie("head",JSON.stringify(t),{path:"/"}),document.location.reload()):void 0},t}(ViewWithId),LoginPopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Log In"},t.prototype.className="login-popover",t.prototype.initialize=function(){return this.errors={}},t.prototype.events={"click .js-google-login":"loginGoogle"},t.prototype.render=function(){return this.$el.html(templates.fill("login_popover",{badLogin:this.errors.badLogin,returnUrl:"/"})),this},t.prototype.loginGoogle=function(e){var t;return Util.stop(e),track("Header","Log In","Google"),t=$(e.target).closest("form"),t.find('input[name="mode"]').val("popup"),t.find('input[name="immediate"]').val(!1),t.find('input[name="returnUrl"]').val(document.location.pathname),t.submit()},t}(ViewWithId),HeaderBoardsButtonView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="header-boards-button",t.prototype.events={"click .js-boards-menu":"toggleBoardsSidebar"},t.prototype.render=function(){return this.$el.html(templates.fill("header_boards_menu_button")),this},t.prototype.toggleBoardsSidebar=function(e){Util.stop(e),track("Header","Boards Menu","Toggle Boards Menu"),SidebarState.getShowSidebar()?SidebarState.hideSidebar():SidebarState.showSidebar()},t}(ViewWithId),HeaderMemberMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.debounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.events={"click .js-profile":"profile","click .js-cards":"cards","click .js-billing":"billing","click .js-account":"account","click .js-help":"help","click .js-platforms":"platforms","click .js-shortcuts":"shortcuts","click .js-reco":"reco","click .js-about":"about","click .js-blog":"blog","click .js-logout":"logout"},t.prototype.render=function(){var e,t;return log("render","rendering HeaderMemberMenuView"),e=this.model.toJSON(),e.cardsUrl=Controller.getMemberCardsUrl(),e.profileUrl=Controller.getMemberProfileUrl(),e.billingUrl=Controller.getMemberBillingUrl(),e.accountUrl=Controller.getMemberAccountUrl(),e.canLogOut=Auth.canLogIn(),e.hasTrelloGold=this.model.isGold(),e.hasAccount=MemberFeatures.hasAccount(null!=(t=e.paidAccount)?t.standing:void 0),this.$el.html(templates.fill("header_member_menu",e)),this},t.prototype.profile=function(){return track("Header","User Menu","Profile")},t.prototype.cards=function(){return track("Header","User Menu","Cards")},t.prototype.billing=function(){return track("Header","User Menu","Billing")},t.prototype.account=function(){return track("Header","User Menu","Settings")},t.prototype.help=function(){return track("Header","User Menu","Help")},t.prototype.platforms=function(){return track("Header","User Menu","Platforms")},t.prototype.shortcuts=function(){return track("Header","User Menu","Shortcuts")},t.prototype.reco=function(){return track("Header","User Menu","Recommend")},t.prototype.about=function(){return track("Header","User Menu","About Trello")},t.prototype.blog=function(){return track("Header","User Menu","Trello Blog")},t.prototype.logout=function(e){return Auth.canLogIn()?(Auth.logoutPost(),track("Header","User Menu","Log Out")):(PopOver.pushView({view:new ChangeSetPasswordPopoverView({model:this.model,modelCache:this.modelCache})}),Util.stop(e))},t}(ViewWithId),HeaderWoofView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(Announcements,"add remove reset",this.debounce(this.renderUnreadAnnouncementCount)),this.listenTo(AllAnnouncements,"add remove reset change:unread",this.debounce(this.renderUnreadAnnouncementCount)),this.updateAllAnnouncements=_.debounce(this.updateAllAnnouncements,6e4,!0),this.setInterval(function(e){return function(){return e.renderUnreadAnnouncementCount()}}(this),3e4)},t.prototype.events={click:"openAnnouncement",mouseover:"updateAllAnnouncements"},t.prototype.render=function(){return this.$el.html(templates.fill("woof_header")),this.renderUnreadAnnouncementCount(),this},t.prototype.renderUnreadAnnouncementCount=function(){var e,t;t=Announcements.unreadCount(),e=this.$(".header-btn"),__indexOf.call(_.pluck(Announcements.toJSON(),"type"),"downtime")>=0?(e.find(".js-phrase").text("Down for maintenance soon…"),e.addClass("woof-alert")):e.find(".js-phrase").text("New stuff!"),Auth.isLoggedIn()&&t>0?e.removeClass("woof-crouch woof-hide").addClass("woof-up"):Auth.isLoggedIn()&&Storage.get("tacoShow")>(new Date).getTime()?e.removeClass("woof-up woof-hide").addClass("woof-crouch"):e.removeClass("woof-up woof-crouch woof-alert").addClass("woof-hide")},t.prototype.updateAllAnnouncements=function(){return AllAnnouncements.fetch()},t.prototype.openAnnouncement=function(e){Util.stop(e),this.updateAllAnnouncements(),PopOver.toggle({elem:this.$(".header-btn"),top:40,view:new AnnouncementHeaderView({model:Auth.me(),modelCache:this.modelCache})}),track("Header","Announcement","Unread",Announcements.unreadCount())},t}(ViewWithId),AnnouncementHeaderView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(AllAnnouncements,"add remove reset",this.debounce(this.render))},t.prototype.getViewTitle=function(){return"Announcements"},t.prototype.events={"click .js-blog":"clickBlog","click .js-t":"clickTwitter","click .js-fb":"clickFacebook","click .js-g":"clickGoogle","click a":"openAnnouncementLink"},t.prototype.render=function(){var e,t,i,n,r,o;for(e={announcements:AllAnnouncements.toJSON()},i={announcement:templates.announcement},o=AllAnnouncements.getUnread(),n=0,r=o.length;r>n;n++)t=o[n],t.markRead();return Storage.set("tacoShow",(new Date).addMinutes(60).getTime()),this.$el.html(templates.fill("header_announcements",e,{},i)),this},t.prototype.clickBlog=function(){return track("Header","Announcements Menu","Trello Blog")},t.prototype.clickTwitter=function(){return track("Header","Announcements Menu","Twitter Link")},t.prototype.clickFacebook=function(){return track("Header","Announcements Menu","Facebook Link")},t.prototype.clickGoogle=function(){return track("Header","Announcements Menu","Google+ Link")},t.prototype.openAnnouncementLink=function(e){return $(e.target).closest("a").is(".js-blog, .js-t, .js-fb, .js-g, .js-close-popover")?void 0:track("Info","Announcements","Open Announcement Link")},t}(ViewWithId),WarningBannerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="header-banner header-banner-warning",t}(ViewWithId),ConfirmEmailBannerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){var e,t,i,n;i={gmail:/@(gmail|googlemail).com$/,yahoo:/@(yahoo|ymail).com$/,live:/@(hotmail|live).com$/,mac:/@(me|mac).com$/},e={gmail:"http://gmail.com",yahoo:"http://mail.yahoo.com",live:"http://live.com",mac:"https://www.icloud.com/"};for(t in i)if(n=i[t],n.test(this.model.get("email"))){this.emailInboxUrl=e[t];break}return null==this.emailInboxUrl?ApiAjax({url:"/checkYourEmail",data:{email:this.model.get("email")},dataType:"json",success:function(e){return function(t){return null==t.error?(e.emailInboxUrl=t.url,e.render()):void 0}}(this)}):void 0},t.prototype.render=function(){var e;return e=this.model.toJSON(),null!=this.emailInboxUrl&&(e.emailInboxUrl=this.emailInboxUrl,e.knownEmailProvider=!0),this.$el.html(templates.fill("header_warning_banner",e)),this},t}(WarningBannerView),SetPasswordBannerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",function(e){return function(){return e.$el.toggle(!Auth.canLogIn()),$(window).triggerHandler("resize")}}(this))},t.prototype.events={"click .js-change-password":"changePassword"},t.prototype.render=function(){return this.$el.html(templates.fill("header_warning_password",this.model.toJSON())),this},t.prototype.changePassword=function(e){return Util.stop(e),track("Member View","Account Page","Open Change Password Menu"),PopOver.toggle({elem:this.$(".js-change-password"),top:24,view:new ChangeSetPasswordPopoverView({model:this.model,modelCache:this.modelCache})})},t}(WarningBannerView),PublicBoardBannerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.debounce(this.render))},t.prototype.render=function(){var e,t,i,n,r;return i=this.model.toJSON(),n=this.model.get("prefs"),t="public"===n.voting,e="public"===n.comments,i.interactions=t&&e?"subscribe, vote or comment on":t?"subscribe or vote on":e?"subscribe or comment on":"subscribe to",r=encodeURIComponent(Controller.getBoardUrl(this.modelCache,this.model)),i.signupUrl="/signup?returnUrl="+r+"&source=public-board-banner",i.tourUrl="/tour?board="+r+"&source=public-board-banner",this.$el.html(templates.fill("header_public_board",i)),this},t}(WarningBannerView),InvitedBannerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-join-model":"joinModel","click .js-ignore-invite":"ignoreInvite","click .js-switch-accounts":"switchAccounts","click .js-create-new-account":"createNewAccount"},t.prototype.className="header-banner header-banner-warning header-banner-invited",t.prototype.initialize=function(){return this.boardOrOrg=this.options.idBoard?this.Board.get(this.options.idBoard):this.Organization.get(this.options.idOrganization),ModelLoader["for"](this.modelCache).loadMemberEmail(this.getGhost().id,function(e){return function(t,i){return null!=(null!=i?i.email:void 0)&&ApiAjax({url:"/1/search/members/",type:"get",data:{query:i.email},dataType:"json",success:function(t){return _.isEmpty(t)||"normal"!==t[0].memberType?void 0:e.hasAccount=!0}}),e.render()}}(this))},t.prototype.getInviteToken=function(){return Util.inviteTokenFor(this.boardOrOrg.id)},t.prototype.getMemberAdder=function(){var e;return e=this.getInviteToken().split("-")[1],this.Member.get(e)},t.prototype.getGhost=function(){var e;return e=this.getInviteToken().split("-")[0],this.Member.get(e)},t.prototype.render=function(){var e,t,i;return e=this.model.toJSON(),e.isLoggedIn=Auth.isLoggedIn(),e[this.boardOrOrg.typeName.toLowerCase()]=this.boardOrOrg.toJSON(),e.modelType=this.boardOrOrg.typeName,t=this.getMemberAdder(),null!=t&&(e.memberAdder=t.toJSON(),e.isInviter=Auth.isMe(t)),e.ghost=null!=(i=this.getGhost())?i.toJSON():void 0,$(this.el).html(templates.fill("header_invite",e)),this},t.prototype.joinModel=function(e){var t;return Util.stop(e),Auth.isLoggedIn()?(t=_.extend(this.model.toJSON(),{ghostEmail:this.getGhost().get("email")}),ConfirmAddEmail.toggle({elem:$(e.target),top:35,model:this.model,title:"Add Email Address?",data:t,confirmText:"Add",fxConfirm:function(e){return function(){var t,i,n;return i=e.options.idBoard?"board":"organization",t=null!=(n=e.options.idBoard)?n:e.options.idOrganization,ApiAjax({url:"/associate-json/"+i+"/"+t+"/"+Util.inviteTokenFor(t),dataType:"json",type:"post",success:function(t){return null==t.error?(e.deleteTokenCookie(),e.hideHeader(),Alerts.show("You have joined this "+i,"info",null,5e3)):void 0}})}}(this)})):this.showLoginOrSignupDialog()},t.prototype.deleteTokenCookie=function(){var e;return $.cookie("invite-token-"+(null!=(e=this.options.idBoard)?e:this.options.idOrganization),null,{path:"/"})},t.prototype.hideHeader=function(){return $(this.el).hide(),Util.calcBoardLayout()},t.prototype.ignoreInvite=function(e){var t,i,n,r;return Util.stop(e),null!=(t=this.getGhost())?(n=this.options.idBoard?"board":"organization",i=null!=(r=this.options.idBoard)?r:this.options.idOrganization,this.boardOrOrg.memberList.remove(this.getGhost(),{invite:!0,success:function(e){return function(){return e.hideHeader(),e.deleteTokenCookie(),Alerts.show("You did not join this board","error",null,5e3)}}(this)})):void 0},t.prototype.createNewAccount=function(e){return Util.stop(e),track("Header","Login/Signup Menu","Open Login/Signup Menu: Create New"),this.showLoginOrSignupDialog(!0)},t.prototype.switchAccounts=function(e){return Util.stop(e),track("Header","Login/Signup Menu","Open Login/Signup Menu"),this.showLoginOrSignupDialog()},t.prototype.showLoginOrSignupDialog=function(e){var t;return t=e?!1:this.hasAccount,Dialog.show({view:new LoginOrSignupDialogView({model:this.Member.get(Auth.myId()),modelCache:this.modelCache,idGhost:this.getGhost().id,idModel:this.boardOrOrg.id,hasAccount:t,modelType:this.options.idBoard?"board":"organization"})})},t}(WarningBannerView),ConfirmAddEmail=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.template="confirm_merge"}return __extends(t,e),t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.appendSubview(this.subview(SelectMemberView,this.model),this.$(".js-member")),this},t}(Confirm),HeaderAddMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add"},t.prototype.events={"click .js-new-card":"newCard","click .js-new-board":"newBoard","click .js-new-org":"newOrg"},t.prototype.render=function(){return this.$el.html(templates.fill("header_add_menu")),this},t.prototype.newCard=function(){return track("Header","Add Menu","New Card"),PopOver.pushView({view:new CreateCardView({model:this.model,modelCache:this.modelCache})})},t.prototype.newBoard=function(){return track("Header","Add Menu","New Board"),PopOver.pushView({view:new CreateBoardView({model:this.model,modelCache:this.modelCache})})},t.prototype.newOrg=function(){return track("Header","Add Menu","New Org"),PopOver.pushView({view:new CreateOrgView({model:this.model,modelCache:this.modelCache})})},t}(ViewWithId),LoginOrSignupDialogView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Log In or Sign Up"},t.prototype.className="login-signup-popover",t.prototype.remove=function(){return this.$el.remove(),this},t.prototype.events={"mouseenter .js-default-active":"addMouseenterFormPartEvent","click .js-form-part":"clickFormPart","click .js-tabs a":"clickTab","click .js-create-account":"createAccount"},t.prototype.render=function(){var e,t;return t=this.Member.get(this.options.idGhost),e=t.toJSON(),e.hasAccount=this.options.hasAccount,e.escapedReturnUrl=Util.escapedReturnUrl(),$(this.el).html(templates.fill("hybrid_signup_login",e)),_.defer(function(e){return function(){return e.setDefaultActive()}}(this)),this.$(".js-insert-tooltip").html(this.subview(SignupTooltipView,Auth.me()).render().el),this},t.prototype.setDefaultActive=function(){return this.setFocusTo(this.$(".js-default-active")),this.$(".js-active-box").removeClass("start")},t.prototype.addMouseenterFormPartEvent=function(){return this.$(".js-default-active").unbind("mouseenter"),this.$(".js-form-part").bind("mouseenter",this.mouseenterFormPart.bind(this))},t.prototype.disableCreateAccount=function(){return this.createDisabled=!0,this.$(".js-create-account").attr("disabled","disabled")},t.prototype.enableCreateAccount=function(){return this.createDisabled=!1,this.$(".js-create-account").removeAttr("disabled")},t.prototype.createAccount=function(e){var t;return Util.stop(e),this.createDisabled?void 0:(track("Invite Header","Create Account"),this.$(".js-bad-password").hide(),this.$(".js-bad-full-name").hide(),this.$(".js-bad-email").hide(),this.$(".js-used-email").hide(),t=$(e.target).closest("form"),this.disableCreateAccount(),ApiAjax({type:"POST",dataType:"json",url:"/signup-invitation",data:{email:t.find('input[name="email"]').val(),idModel:this.options.idModel,type:this.options.modelType,fullName:t.find('input[name="fullName"]').val(),password:t.find('input[name="password"]').val(),inviteToken:Util.inviteTokenFor(this.options.idModel)},success:function(e){return function(t){return t.success?("function"==typeof window.ga&&window.ga("send","pageview","/createAccount"),_.delay(function(){return location.reload()},30)):/invalid invitation/.test(t.error)?location.reload():/password/.test(t.error)?(e.$(".js-bad-password").show(),e.enableCreateAccount()):/fullName/.test(t.error)?(e.$(".js-bad-full-name").show(),e.enableCreateAccount()):/email/.test(t.error)?(e.enableCreateAccount(),/in use/.test(t.error)?e.$(".js-used-email").show():e.$(".js-bad-email").show()):void 0}}(this)}))},t.prototype.mouseenterFormPart=function(e){return Browser.isTouch()||0!==this.$("*:input:focus").length||0!==this.$(".js-tooltip-content.active").length?void 0:this.setFocusTo($(e.target).closest(".js-form-part"))},t.prototype.clickFormPart=function(e){return Browser.isTouch()?void 0:this.setFocusTo($(e.target).closest(".js-form-part"))},t.prototype.setFocusTo=function(e){var t,i,n,r,o;for(e.siblings(".js-form-part").removeClass("active"),e.addClass("active"),this.$(".js-tab").removeClass("active"),this.$(".js-tab[data-content="+this.$(".js-form-part.active").attr("data-id")+"]").addClass("active"),r=["js-signup-form-pos","js-login-form-pos"],o=[],i=0,n=r.length;n>i;i++)t=r[i],o.push(this.$(".js-active-box").toggleClass(t,e.hasClass(t)));return o},t.prototype.clickTab=function(e){var t;return t=this.$("."+$(e.target).attr("data-content")),this.setFocusTo(t)},t}(ViewWithId);var CardAndListArchiveView,ClosedBoardsView,InArchiveCardView,InArchiveView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};CardAndListArchiveView=function(e){function t(){this.debouncedLoadData=this.debounce(this.loadData.bind(this),400),this.results={},t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Archive"},t.viewName="CardAndListArchiveView",t.prototype.displayTypeClass="sidebar-display-wide",t.prototype.className="board-widgets-content fancy-scrollbar",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.CARDS_PER_PAGE=10,this.section="cards",this.loading=!0,this.isSearching=!1,this.listenTo(this.modelCache,"add:Card remove:Card reset:Card change:Card:closed",this.debounce(this.renderArchivedCards,50)),this.listenTo(this.modelCache,"add:List remove:List reset:List change:List:closed",this.debounce(this.renderArchivedLists))},t.prototype.events={"click .js-switch-section":"switchSections","click .js-more-archive-cards":"getMoreCards","keyup .js-search":"keyupArchiveEvent"},t.prototype._getArchivedCards=function(){return this.Card.find(function(e){return function(t){return t.get("idBoard")===e.model.id&&t.get("closed")}}(this))},t.prototype._getArchivedLists=function(){return this.List.find(function(e){return function(t){return t.get("idBoard")===e.model.id&&t.get("closed")}}(this))},t.prototype.getMoreCards=function(){var e,t,i,n,r;return e=this.model,"cards"===this.section?(this.loading=!0,t=this._getArchivedCards(),i={limit:this.CARDS_PER_PAGE,before:null!=(r="function"==typeof(n=_.min(_.map(t,function(e){return Dates.parse(e.get("dateLastActivity"))}))).getTime?n.getTime():void 0)?r:null},ModelLoader["for"](this.modelCache).loadClosedCards(e.id,i,function(e){return function(t,n){e.hasMoreCards=n.length===i.limit,e.loading=!1,e.renderArchivedCards()}}(this))):void 0},t.prototype.getData=function(){var e,t;e=this.model,"cards"===this.section&&(this.loading=!0,t={limit:this.CARDS_PER_PAGE},ModelLoader["for"](this.modelCache).loadClosedCards(e.id,t,function(e){return function(i,n){e.hasMoreCards=n.length===t.limit,e.loading=!1,e.renderArchivedCards()}}(this)))},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l,c,d;return n="lists"===this.section,i=!n,n?(l=this._getArchivedLists(),d=function(e){return e.get("name")}):(l=this._getArchivedCards(),d=function(e){var t,i;return t=null!=(i=0-new Date(e.get("dateLastActivity")))?i:0}),l=_.sortBy(l,d),t=this.model.toJSON(),e={loading:this.loading,empty:!this.loading&&0===l.length,emptyMessage:"No archived "+(n?"lists":"cards")+".",hasMoreCards:!this.loading&&this.hasMoreCards&&i},c={editable:this.model.editable(),owned:this.model.owned()},t["section_"+this.section]=e["section_"+this.section]=!0,t.content=templates.fill("archive_items",e,c),this.$el.html(templates.fill("board_archive",t)),this.setSectionLabel(this.section),this.$archiveItems=this.$(".js-archive-items"),i?(this.$(".archive-controls").addClass("viewing-cards").removeClass("viewing-lists"),s=InArchiveCardView,o={reOpenText:"Send to Board",canDelete:!0}):(this.$(".archive-controls").addClass("viewing-lists").removeClass("viewing-cards"),s=InArchiveView,o={reOpenText:"Send to Board",canDelete:!1}),r=function(){var e,t,i;for(i=[],e=0,t=l.length;t>e;e++)a=l[e],i.push(this.subview(s,a,o));return i}.call(this),this.appendSubviews(r,this.$archiveItems),_.defer(function(){return DragSort.refreshCardSortable()}),this},t.prototype.keyupArchiveEvent=function(e){var t,i,n;i=e.keyCode,__indexOf.call(Keys_Arrow,i)>=0||(n=e.keyCode,__indexOf.call(Keys_Control,n)>=0)||(t=this.$(".js-search").val(),this.$(".js-search-loading").removeClass("hide"),""===t?this.renderArchivedCards("latest"):this.debouncedLoadData())},t.prototype.loadData=function(){var e,t,i;i=this.$(".js-search").val(),t="is:archived "+i,e=this.model.id,ModelLoader["for"](this.modelCache).loadSearchData({query:t,modelTypes:"cards",idBoards:e,partial:!0},function(e){return function(t,i){e.results=i,t||e.renderArchivedCards("searching")}}(this))},t.prototype.renderArchivedLists=function(){"lists"===this.section&&this.render()},t.prototype.renderArchivedCards=function(e){var t,i,n,r,o,s,a,l,c,d,u;if(null!=e&&(this.isSearching="searching"===e),this.$(".js-search-loading").addClass("hide"),this.$(".spinner.loading").toggleClass("hide",!this.loading),this.$(".js-more-archive-cards").toggleClass("hide",this.isSearching),"cards"===this.section&&this.model.viewState.getCurrentSidebarView()===this){for(null!=(c=this.$archiveItems)&&c.empty(),i=this.isSearching?this.results.cards:this._getArchivedCards(),o={reOpenText:"Send to Board",canDelete:!0},r=[],a=0,l=i.length;l>a;a++)s=i[a],t=this.Card.get(s.id),r.push(this.subview(InArchiveCardView,t,o));this.appendSubviews(r,this.$archiveItems),this.hasMoreCards&&!this.isSearching?null!=(d=this.$archiveItems)&&d.append("<a class='show-more clear js-more-archive-cards' href='#'>Load more cards.</a>"):0===i.length&&(n={message:"No archived cards."},this.isSearching&&(n.message="No archived card results."),null!=(u=this.$archiveItems)&&u.append(templates.fill("empty_list",n)))}DragSort.debounceArchivedCardsRefresh()},t.prototype.setSectionLabel=function(){var e;this.$(".js-current-section").html(""+Util.toTitleCase(this.section)),e="lists","lists"===this.section&&(e="cards"),this.$(".js-new-section").html(e)},t.prototype.switchSections=function(e){return Util.stop(e),"cards"===this.section?this.section="lists":(this.isSearching=!1,this.section="cards"),this.getData(),this.render()},t}(ViewWithId),ClosedBoardsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.boardList,{"change:closed add remove reset":this.render})},t.prototype.render=function(){var e,t,i;return t=this.model.boardList,i={empty:0===t.filter(function(e){return e.get("closed")}).length},this.$el.html(templates.fill("closed_boards",i)),e=this.$(".js-archive-items"),t.forEach(function(t){return function(i){var n;if(i.get("closed"))return n=new InArchiveView({model:i,onReopen:t.onReopen.bind(t)}),e.append(n.render().el)}}(this)),this},t.prototype.onReopen=function(e){return Controller.displayBoard({idBoard:e.id})},t}(ViewWithId),InArchiveView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.tagName="li",t.prototype.className="clearfix",t.prototype.events={"click .js-reopen":"reopen"},t.prototype.render=function(){var e,t,i,n;return e=null!=this.model.owned?this.model.owned():this.model.editable(),t=this.model.toJSON(),t.reOpenText=null!=(n=this.options.reOpenText)?n:"Re-open",t.url="function"==typeof(i=this.model).getUrl?i.getUrl():void 0,this.$el.html(templates.fill("archive_item",t,{editable:e})),this},t.prototype.reopen=function(e){return Util.preventDefault(e),PopOver.hide(),this.model.update({closed:!1},function(e){return function(){var t;return track(e.model.typeName,"Reopen","Via Archive"),"function"==typeof(t=e.options).onReopen?t.onReopen(e.model):void 0}}(this)),!1},t}(ViewWithId),InArchiveCardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.tagName="div",t.prototype.className="archived-list-card",t.prototype.events={"click .list-card":"openCard","click .js-reopen":"reopen","click .js-delete":"deleteModel"},t.prototype.render=function(){var e,t,i,n,r;return e=null!=this.model.owned?this.model.owned():this.model.editable(),i={reOpenText:null!=(n=this.options.reOpenText)?n:"Re-open",canDelete:null!=(r=this.options.canDelete)?r:!1},t=this.subview(CardView,this.model,{dontFilter:!0}),this.$el.html(t.render().el).append(templates.fill("archived_card_options",i,{editable:e})),this},t.prototype.openCard=function(e){Util.stop(e),Controller.showCardDetail(this.model),Dialog.calcPos()},t.prototype.deleteModel=function(e){var t;Util.stop(e),Confirm.toggle({elem:null!=(t=$(e.target).closest(".js-delete"))?t[0]:void 0,top:22,model:this.model,title:"Delete Card?",text:"All actions will be removed from the activity feed and you won't be able to re-open the card. There is no undo.",confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.model.destroy(),track("Card","Delete","Via Archive")}}(this)})},t}(InArchiveView);var makeTemplateObject,templates;makeTemplateObject=function(){return function(e){var t,i;for(t in e)i=e[t],e[t]=_.isFunction(i)?new Hogan.Template(i):makeTemplateObject(i);return e}}(this),templates=makeTemplateObject(templates),templates.fill=function(e,t,i,n){var r,o,s;return null==t&&(t={}),null==i&&(i={}),null==n&&(n={}),o=templates[e],r=_.extend({__ed:null!=i?i.editable:void 0,__own:null!=i?i.owned:void 0,__loggedIn:"undefined"!=typeof Auth&&null!==Auth?Auth.isLoggedIn():void 0,__siteDomain:siteDomain,__avatarDomain:avatarDomain,__logoDomain:logoDomain,__gold:"undefined"!=typeof Auth&&null!==Auth&&null!=(s=Auth.me())?s.isGold():void 0},t,"undefined"!=typeof ABTest&&null!==ABTest?ABTest.tests(i.idABTest):void 0),o.render(r,n)},templates.fillFromModel=function(e,t,i,n){var r;return null==i&&(i={}),null==n&&(n={}),r={editable:"function"==typeof t.editable?t.editable():void 0,owned:"function"==typeof t.owned?t.owned():void 0},i=_.extend(t.toJSON(),i),templates.fill(e,i,r,n)},templates.fillMenu=function(e,t,i){return templates.fill("menu-base",{content:templates.fill(e,t,i)})};var SessionStatus;SessionStatus=new(function(){function e(){$(rpc).on("ready",function(e){return function(){return $(window).on("beforeunload",function(){rpc.isUsingSocket()||e.sendStatus("disconnected"),e.markCurrentBoardAsViewed()}),setInterval(e.sendStatus,Util.getMs(rpc.isUsingSocket()?{minutes:5}:{minutes:1})),e.sendStatus(),$(Monitor).bind("setStatus",function(){return e.sendStatus()})}}(this)),$(rpc).on("updateModels deleteModels",function(e){return function(t,i){var n;null!=i.idModelChannel&&i.idModelChannel===(null!=(n=Controller.getCurrentBoard())?n.id:void 0)&&e.scheduleMarkCurrentBoardAsViewed()}}(this))}return e.prototype.sendStatus=function(e){return null==e&&(e=Monitor.getStatus()),Auth.isLoggedIn()?rpc.sendStatus(e):void 0},e.prototype.markCurrentBoardAsViewed=function(){var e;return clearTimeout(this._markAsViewedTimeout),null!=(e=Controller.getCurrentBoard())?e.markAsViewed():void 0},e.prototype.scheduleMarkCurrentBoardAsViewed=function(){return clearTimeout(this._markAsViewedTimeout),this._markAsViewedTimeout=setTimeout(function(e){return function(){return e.markCurrentBoardAsViewed()}}(this),Util.getMs({minutes:5}))},e}());var SignupTooltipView,Tooltip,TooltipView,UnconfirmedMemberTooltipView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Tooltip=new(function(){function e(){this.tooltip=null,$(window).bind("click",function(e){return function(t){return e.windowClick(t)}}(this))}return e.prototype.show=function(e,t){var i,n,r,o,s,a;return i=$(templates.fill("tooltip-content",{tooltipText:e})),n=$(".tooltip-container"),n.html(i),this.tooltip={tooltipText:e,$anchor:t,$elem:i},a=t.offset(),o=a.left,s=a.top,r=t.outerHeight(),n.css({left:o-5,top:s+r}),i.addClass("active")},e.prototype.toggle=function(e,t){var i;return t.is(null!=(i=this.tooltip)?i.$anchor:void 0)?this.hide():this.show(e,t)},e.prototype.windowClick=function(e){return 0===$(e.target).closest(".js-tooltip-content").length||0!==$(e.target).closest(".js-tooltip-close-button").length?this.hide():void 0},e.prototype.hide=function(){var e;return this.tooltip=null,e=$(".tooltip-container"),e.find(".tooltip-content").removeClass("active"),_.delay(function(){return function(){return e.empty()}}(this),300)},e}()),TooltipView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="tooltip",t.prototype.events={"click .js-tooltip-trigger":"toggleTooltip"},t.prototype.render=function(){var e;return e={linkText:this.linkText,tooltipText:this.tooltipText},this.$el.html(templates.fill("tooltip",e)),this},t.prototype.isActive=function(){return!0},t.prototype.toggleTooltip=function(e){return Util.stop(e),this.isActive()?Tooltip.toggle(this.tooltipText,this.$(".js-tooltip-anchor")):void 0},t}(ViewWithId),SignupTooltipView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.linkText="How come my info's already there?",t.prototype.tooltipText="The person who invited you kindly pre-filled some info to save you time. Wasn't that nice of them?",t.prototype.isActive=function(){return 0!==this.$el.closest(".active").length},t}(TooltipView),UnconfirmedMemberTooltipView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.linkText="",t.prototype.tooltipText="This user has not yet confirmed that the email address we have on file belongs to them.",t
}(TooltipView);var CalendarSettingsView,CardAgingSettingsView,POWER_UPS,PowerUpDetailView,PowerUpIconView,PowerUpScreenshotsView,PowerUpsListView,PowerUpsView,VotingSettingsView,powerUp,_i,_len,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};for(POWER_UPS=[{name:"voting",description:"Allow people to vote on cards.",imageClass:"power-up-icon-image-voting",aboutTemplate:"power_ups_about_voting",settingsView:function(e){return new VotingSettingsView({model:e})},backgroundColor:"hsl(82, 25%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/voting/screenshots/5a3055ee42904ad84ba81830694e4a03/screenshot1.png"]},{name:"cardAging",description:"Cards visibly age with inactivity.",imageClass:"power-up-icon-image-card-aging",aboutTemplate:"power_ups_about_card_aging",settingsView:function(e){return new CardAgingSettingsView({model:e})},backgroundColor:"hsl(227, 14%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/d073fc23fd31de74ff54d5d023e64478/screenshot1.png","https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/c80b3b4586309dc983d6de5c3d1a5607/screenshot2.png"]},{name:"calendar",description:"See your cards with due dates on a calendar.",imageClass:"power-up-icon-image-calendar",aboutTemplate:"power_ups_about_calendar",settingsView:function(e){return new CalendarSettingsView({model:e})},backgroundColor:"hsl(204, 30%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/f6a00a55c883ce90c323f6f4b9d8bc57/screenshot1.png","https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/a26f919154bc1834a54f02e485dca9dd/screenshot2.png","https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/b1c5841496fcf25c103ec3951a318a8c/screenshot_mobile1.png"]}],_i=0,_len=POWER_UPS.length;_len>_i;_i++)powerUp=POWER_UPS[_i],powerUp.displayName=POWERUP_STRINGS.powerUpNames[powerUp.name];PowerUpsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){var e,t,i;for(this.listView=new PowerUpsListView({model:this.model}),this.currentMode="list",this.detailViews={},i=[],e=0,t=POWER_UPS.length;t>e;e++)powerUp=POWER_UPS[e],i.push(this.detailViews[powerUp.name]=new PowerUpDetailView({model:this.model,powerUp:powerUp}));return i},t.prototype.events={"click .js-back-view":"showListView","click .js-power-up-detail":"showDetailView"},t.prototype.render=function(){return this.$el.empty().append(this.listView.render().el),this},t.prototype.showListView=function(e){return Util.stop(e),this.$el.empty().append(this.listView.render().el),this.listView.delegateEvents(),this.currentMode="list",this.$el.css({background:"",backgroundColor:""})},t.prototype.showDetailView=function(e){var t,i,n;return Util.stop(e),"detail"!==this.currentMode?(i=$(e.target).closest(".js-power-up-detail").find(".js-power-up-name").attr("data-power-up-name"),this.$el.empty().append(this.detailViews[i].render().el),t=null!=(n=_.find(POWER_UPS,function(e){return e.name===i}).backgroundColor)?n:"",this.$el.css({backgroundColor:t}),this.detailViews[i].delegateEvents(),this.currentMode="detail"):void 0},t}(ViewWithId),PowerUpsListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){var e,t,i,n;for(this.listenTo(this.model,{"change:powerUps":this.renderPowerUpsLength}),this.iconViews=[],n=[],t=0,i=POWER_UPS.length;i>t;t++)powerUp=POWER_UPS[t],e={model:this.model,powerUp:powerUp,viewType:"list"},n.push(this.iconViews.push(new PowerUpIconView(e)));return n},t.prototype.render=function(){return this.$el.html(templates.fillFromModel("power_ups_list",this.model)),this.renderPowerUps(),this.renderPowerUpsLength(),this},t.prototype.delegateEvents=function(){var e,i,n,r,o;for(t.__super__.delegateEvents.apply(this,arguments),r=this.iconViews,o=[],i=0,n=r.length;n>i;i++)e=r[i],o.push(e.delegateEvents());return o},t.prototype.renderPowerUpsLength=function(){var e,t;return t=this.model.get("powerUps").length,e=this.$(".js-power-up-count").empty().addClass("hide"),t>0?e.text(""+t+" enabled").removeClass("hide"):void 0},t.prototype.renderPowerUps=function(){var e,t,i,n,r,o;for(e=this.$(".js-power-up-list").empty(),r=this.iconViews,o=[],i=0,n=r.length;n>i;i++)t=r[i],o.push(e.append(t.render().el));return o},t}(ViewWithId),PowerUpDetailView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="power-up-detail",t.prototype.initialize=function(e){return this.powerUp=e.powerUp,this.listenTo(this.model,{"change:powerUps":this.renderContent}),this.toolbarSelection="settings",this.iconView=new PowerUpIconView({model:this.model,powerUp:this.powerUp,viewType:"detail"}),this.screenshotsView=new PowerUpScreenshotsView({model:this.model,powerUp:this.powerUp})},t.prototype.events={"click .js-toolbar-select":"selectContentSection"},t.prototype.render=function(){return this.$el.html(templates.fillFromModel("power_up_detail",this.model)),this.renderIcon(),this.renderContent(),this},t.prototype.delegateEvents=function(){return t.__super__.delegateEvents.apply(this,arguments),this.iconView.delegateEvents()},t.prototype.renderIcon=function(){return this.$(".js-power-up-icon").empty().append(this.iconView.render().el)},t.prototype.powerUpEnabled=function(){var e;return e=this.powerUp.name,__indexOf.call(this.model.get("powerUps"),e)>=0},t.prototype.renderContent=function(){if(this.renderNavBar(),!this.powerUpEnabled())return this.renderScreenshots();switch(this.toolbarSelection){case"screenshots":return this.renderScreenshots();default:return this.renderSettings()}},t.prototype.renderNavBar=function(){var e,t;return e=this.$(".js-power-up-detail-navbar").empty(),this.powerUpEnabled()?(t={screenshots:"screenshots"===this.toolbarSelection,settings:"settings"===this.toolbarSelection},e.html(templates.fillFromModel("power_ups_detail_navbar",this.model,t))):void 0},t.prototype.renderSectionContent=function(e){return this.$(".js-power-up-detail-content").empty().append(e)},t.prototype.renderScreenshots=function(){return this.renderSectionContent(this.screenshotsView.render().el),this.screenshotsView.delegateEvents()},t.prototype.renderSettings=function(){var e;return e=this.powerUp.settingsView(this.model),this.renderSectionContent(e.render().el),e.delegateEvents()},t.prototype.selectContentSection=function(e){return Util.stop(e),this.toolbarSelection=$(e.target).attr("name"),this.renderContent()},t}(ViewWithId),PowerUpScreenshotsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="power-up-screenshots-wrapper",t.prototype.initialize=function(e){this.powerUp=e.powerUp},t.prototype.render=function(){var e;return e={screenshots:this.powerUp.screenshots},this.$el.html(templates.fill("power_up_detail_screenshots",e)),this},t}(ViewWithId),PowerUpIconView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="power-up-icon js-power-up-detail",t.prototype.initialize=function(e){return this.powerUp=e.powerUp,this.viewType=e.viewType,this.listenTo(this.model,{"change:powerUps":this.renderEnabled})},t.prototype.events={"click .js-toggle-power-up:not(.enabled)":"enablePowerUp","click .js-toggle-power-up.enabled":"disablePowerUp"},t.prototype.render=function(){var e;return e=_.clone(this.powerUp),"detail"===this.viewType?e.powerUpDesc=templates.fill(this.powerUp.aboutTemplate):(e.powerUpDesc=this.powerUp.description,e.isListView=!0),this.$el.html(templates.fillFromModel("power_up_icon",this.model,e)),this.renderEnabled(),this},t.prototype.enablePowerUp=function(){return this.model.addToSet("powerUps",this.powerUp.name)},t.prototype.disablePowerUp=function(){return this.model.pull("powerUps",this.powerUp.name),"calendar"===this.powerUp.name?Controller.getCurrentBoardView().closeCalendarIfOpen():void 0},t.prototype.renderEnabled=function(){var e,t,i,n,r;return r=this.powerUp.name,i=__indexOf.call(this.model.get("powerUps"),r)>=0,t=this.$(".js-toggle-btn"),n=i?"Disable":"Enable",t.text(n).toggleClass("enabled",i).toggleClass("primary",!i),e=this.$(".js-enabled-badge"),e.toggleClass("hide",!i)},t.prototype.renderButtonState=function(){var e,t,i;i=this.powerUp.name,t=__indexOf.call(this.model.get("powerUps"),i)>=0,e=this.$(".js-toggle-btn"),e.text(txt)},t}(ViewWithId),VotingSettingsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="fixed-width voting-prefs",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm","mouseenter .js-voting-select":"showSoftCheckMarks","mouseleave .js-voting-select":"clearSoftCheckMarks"},t.prototype.render=function(){var e,t,i,n,r,o;return i=this.model.toJSON({prefs:!0,url:!0}),r=this.model.getOrganization(),i.hasOrg=null!=(null!=r?r.id:void 0),i.orgCanSee=i.hasOrg&&("public"===(o=this.model.getPref("permissionLevel"))||"org"===o),i.premium=null!=r?r.isFeatureEnabled("observers"):void 0,i.voting_showObservers=(i.premium||i.voting_observers)&&i.hasOrg,(null!=r?r.owned():void 0)?(i.orgOwner=!0,i.orgName=r.get("displayName"),this.model.owned()||(i.setOrgNull=!0)):this.model.owned()||(i.noEditOrg=!0),this.$el.html(templates.fillFromModel("power_ups_voting_prefs",this.model,i)),e=this.$(".icon-check"),t=this.$(".checked-option")[0],n=e.index(t),this.displayChecksAbove(n,"checked-option"),this},t.prototype.selectPerm=function(e){var t,i;return Util.stop(e),t=$(e.target).closest(".js-voting-select"),i=t.attr("name"),this.model.setPref("voting",i)},t.prototype.showSoftCheckMarks=function(e){var t,i,n;return i=$(e.target).closest(".js-voting-select")[0],t=this.$(".js-voting-select"),n=t.index(i),this.displayChecksAbove(n,"soft-check")},t.prototype.clearSoftCheckMarks=function(){return this.displayChecksAbove(-1,"soft-check")},t.prototype.displayChecksAbove=function(e,t){var i;return i=this.$(".js-voting-select"),i.each(function(i,n){var r;return $(n).hasClass("disabled")||$(n).children(".icon-check").hasClass("checked-option")?void 0:(r=$(n).children("div.icon-check"),e>=i?r.addClass(t):r.removeClass(t))})},t}(ViewWithId),CardAgingSettingsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="fixed-width card-aging-prefs",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-select:not(.disabled)":"selectMode"},t.prototype.render=function(){var e,t;return t=this.model.toJSON({prefs:!0,url:!0}).prefs,e={aging_regular:"regular"===t.cardAging,aging_pirate:"pirate"===t.cardAging},this.$el.html(templates.fillFromModel("power_ups_card_aging_prefs",this.model,e)),this},t.prototype.selectMode=function(e){var t,i;return Util.stop(e),t=$(e.target).closest(".js-select"),i=t.attr("name"),this.model.setPref("cardAging",i)},t}(ViewWithId),CalendarSettingsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="fixed-width calendar-prefs",t.prototype.initialize=function(){return this.generating=!1,this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})},t.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"},t.prototype.generationComplete=function(){return this.generating=!1,this.render()},t.prototype.generateNewFeedURL=function(e){return Util.stop(e),this.generating=!0,this.model.generateCalendarKey(),this.render()},t.prototype.render=function(){var e,t,i,n;return n=this.model.toJSON({prefs:!0}).prefs,i=this.model.getPref("calendarKey"),t="webcal://"+location.host+"/calendar/"+Auth.me().id+"/"+this.model.id+"/"+i+".ics",i||(this.generating=!0,this.model.generateCalendarKey()),e={calendar_feed_enabled:n.calendarFeedEnabled,calendar_feed_generated:null!=i&&!this.generating,calendar_feed_url:t},this.$el.html(templates.fillFromModel("power_ups_calendar_prefs",this.model,e)),this},t.prototype.focusInput=function(){return this.$(".js-calendar-feed-url").focus().select()},t.prototype.selectFeedEnabled=function(e){var t,i;return Util.stop(e),t=$(e.target).closest("a"),i="enabled"===t.attr("name"),this.model.setPref("calendarFeedEnabled",i)},t}(ViewWithId);var FileDropTarget,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};FileDropTarget=function(){function e(){}return e.prototype._files=function(e){var t,i,n;return null!=(t=null!=(i=e.originalEvent)&&null!=(n=i.dataTransfer)?n.files:void 0)?t:[]},e.prototype._urls=function(e,t){var i,n,r,o,s;return i=null!=(r=e.originalEvent)?r.dataTransfer:void 0,null!=(null!=i?i.items:void 0)?(n=_.filter(null!=(o=i.items)?o:[],function(e){return"text/uri-list"===e.type}),async.map(n,function(e,t){return e.getAsString(function(e){return t(null,e)})},function(e,i){return t(i)})):t((null!=(s=__indexOf.call(null!=i?i.types:void 0,"text/x-moz-url")>=0)?s:[])?[i.getData("text/plain")]:[])},e.prototype._isDraggingFiles=function(e){var t,i,n,r;return t=null!=(i=e.originalEvent)?i.dataTransfer:void 0,null!=t&&(null!=t.items&&_.any(t.items,function(e){return"file"===e.kind||"text/uri-list"===e.type})||null!=t.types&&_.any(t.types,function(e){return"application/x-moz-file"===e||"text/x-moz-url"===e})||(null!=(n=t.files)?n.length:void 0)>0&&("copy"===(r=t.effectAllowed)||"all"===r)||/mac/i.test(navigator.platform)&&/safari/i.test(navigator.userAgent))},e.prototype.dragenter=function(e){return this._isDraggingFiles(e)?(PopOver.hide(),Util.stop(e),this.didEnter=!0,_.defer(function(e){return function(){return e.didEnter=!1}}(this)),this.model.editable()&&this.$el.addClass("drophover"),!1):void 0},e.prototype.dragover=function(e){var t;if(this._isDraggingFiles(e))return null!=(null!=(t=e.originalEvent)?t.dataTransfer:void 0)&&(e.originalEvent.dataTransfer.dropEffect="copy"),Util.stop(e),!1},e.prototype.dragleave=function(e){return this._isDraggingFiles(e)?(Util.stop(e),this.didEnter||this.removeDropHover(),!1):void 0},e.prototype.dragexit=function(e){return this._isDraggingFiles(e)?(Util.stop(e),!1):void 0},e.prototype.dragend=function(e){return this._isDraggingFiles(e)?(Util.stop(e),this.removeDropHover(),!1):void 0},e.prototype.drop=function(e){var t,i,n,r,o;if(this._isDraggingFiles(e)&&this.model.editable())return Util.stop(e),this.$el.removeClass("drophover"),null!=(null!=(r=this.model)?r.upload:void 0)&&(i=this._files(e),t="upload",n=function(e){return function(){var t,i,n;return(null!=(t=Auth.me())?t.isFeatureEnabled("largeAttachments"):void 0)||(null!=(i=e.model.getBoard())&&null!=(n=i.getOrganization())?n.isFeatureEnabled("largeAttachments"):void 0)?Alerts.show("File size exceeds 250MB limit","error","upload",5e3):Alerts.show("File size exceeds 10MB limit","error","upload",5e3)}}(this),i.length>0)?_.any(i,function(e){return!Util.validCardUpload(e)})?void n():void async.forEachSeries(i,function(e){return function(t,i){return e.model.upload(t,i)}}(this),function(e){return function(r){return Alerts.hide(t),i.length>1&&Alerts.show("Finished!","info","AjaxQueueUpload",2e3),r&&n(),e.removeDropHover()}}(this)):null!=(null!=(o=this.model)?o.uploadUrl:void 0)?this._urls(e,function(e){return function(t){return async.forEachLimit(t,2,function(t,i){return _.any([siteDomain,attachmentsDomain,avatarDomain,logoDomain],function(e){return 0===t.indexOf(e)})?i():e.model.uploadUrl(t,"",i)},function(){})}}(this)):void 0},e.prototype.removeDropHover=function(){return $(".drophover").removeClass("drophover")},e}();var AutoInsertionView,AutoMentionerView,CardCompleterView,CompleterUtil,EmojiCompleterView,EmojiUploaderView,InsertionOptionsView,_ViewWithId,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};AutoMentionerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Mention…"},t.prototype.events={"mouseenter .js-select-member":"hoverItem","click .js-select-member":"insertMember","click .js-select-all-card-members":"selectAllCardMembers","mouseenter .js-select-all-card-members":"deselectMember","click .js-select-all-board-members":"selectAllBoardMembers","mouseenter .js-select-all-board-members":"deselectMember","click .js-select-all-commenters":"selectAllCommenters","mouseenter .js-select-all-commenters":"deselectMember",keydown:"keydownEvent","keyup .js-filter-mentionables":"keyupEvent"},t.prototype.render=function(){var e,t,i,n,r;return t=this,this.getMembers(),e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),e.showAllCardMembers=0<(i=this.idCardMems.length)&&12>i,e.showAllBoardMembers=0<(n=this.idBoardMems.length)&&12>n,e.showAllCommenters=0<(r=this.idCommenters.length)&&12>r,this.$el.html(templates.fill("popover_auto_mentioner",e)),this.$memList=this.$(".js-available-members"),e.button&&(this.$(".js-select-all-card-members .mem-count").text("("+this.idCardMems.length+")"),this.$(".js-select-all-board-members .mem-count").text("("+this.idBoardMems.length+")"),this.$(".js-select-all-commenters .mem-count").text("("+this.idCommenters.length+")"),(e.showAllCardMembers||e.showAllBoardMembers||e.showAllCommenters)&&this.$(".js-select-multiple-options").removeClass("hide")),this.options.button?this.fillMembers(this.idAllMembers):this.options.input&&this.filterMentionables(),this},t.prototype.getCard=function(){return this.options.card},t.prototype.getTextInput=function(){return $(this.options.target)},t.prototype.getMembers=function(){var e,t,i;i=Auth.myId(),t=this.getCard(),e=t.getBoard(),this.idCardMems=_.without(t.getIdCardMems(),i),this.idBoardMems=_.without(e.getIdBoardMems(),i),this.idCommenters=_.without(t.getIdCommenters(),i),this.idAllMembers=_.uniq(this.idCardMems.concat(this.idBoardMems).concat(this.idCommenters))},t.prototype.clearMemberList=function(){return this.$memList.empty()},t.prototype.keydownEvent=function(e){var t;((t=e.keyCode)===Key_Enter||t===Key_Tab)&&(Util.stop(e),this.$memList.find(".item.selected:first .js-select-member").click())},t.prototype.keyupEvent=function(e){var t,i;if((t=e.keyCode)===Key_Enter||t===Key_Tab||t===Key_Arrow_Left||t===Key_Arrow_Right);else{if((i=e.keyCode)!==Key_Arrow_Up&&i!==Key_Arrow_Down)return this.filterMentionables();Util.stop(e),Util.navMenuList(this.$memList,".item",e.keyCode)}},t.prototype.filterMentionables=function(){var e,t,i,n,r,o,s,a,l;for(this.clearMemberList(),this.options.button?r=$(".js-filter-mentionables").val().trim().toLowerCase():this.options.input&&(e=this.getTextInput(),s=Util.getWordFromCaret(e),r=s.str.substring(1).toLowerCase()),o=RegExp("^"+Util.escapeForRegex(r)),t=this.idAllMembers,this.idMatchMems=[],a=0,l=t.length;l>a;a++)i=t[a],n=Util.getMemNameArray(this.modelCache,i),_.find(n,function(e){return o.test(e)})&&this.idMatchMems.push(i);return this.options.input&&(1===this.idMatchMems.length&&r===this.Member.get(this.idMatchMems[0]).get("username")||0===this.idMatchMems.length)?void _.delay(function(){return PopOver.hide()},5):(this.fillMembers(this.idMatchMems),Util.selectMenuItem(this.$memList,".item",this.$memList.find(".item").first()))},t.prototype.hoverItem=function(e){var t;return t=$(e.target).closest(".item"),Util.selectMenuItem(this.$memList,".item",t)},t.prototype.deselectMember=function(){return this.$memList.find(".item").removeClass("selected")},t.prototype._membersFromIds=function(e){return _.compact(_.map(e,function(e){return function(t){return e.Member.get(t)}}(this)))},t.prototype.fillMembers=function(e){var t,i,n,r;for(i=this._membersFromIds(e).slice(0,6),this.$memList.empty(),n=0,r=i.length;r>n;n++)t=i[n],this.appendSubview(this.subview(SelectMemberView,t),this.$memList);this.$(".js-empty-list").toggleClass("hide",i.length>0),PopOver.calcPos()},t.prototype.insertMember=function(e){var t,i,n;Util.stop(e),track("Card Detail","Mention Member Autocomplete","Insert"),i=$(e.target).closest(".js-select-member").find(".username").text(),t=this.getTextInput(),this.options.button?Util.insertSelection(t,"@"+i+" "):this.options.input&&(n=Util.getWordFromCaret(t),Util.insertSelection(t,"@"+i+" ",n.start,n.end)),PopOver.hide()},t.prototype.selectAllCardMembers=function(e){var t,i,n,r,o,s,a;for(Util.stop(e),track("Card Detail","Mention Member Autocomplete","Insert - All Card Members"),t=this.getTextInput().focus(),i="",a=this.idCardMems,o=0,s=a.length;s>o;o++)n=a[o],r=this.Member.get(n).get("username"),i+="@"+r+" ";Util.insertSelection(t,i),PopOver.hide()},t.prototype.selectAllBoardMembers=function(e){var t,i,n,r,o,s,a;for(Util.stop(e),track("Card Detail","Mention Member Autocomplete","Insert - All Board Members"),t=this.getTextInput().focus(),i="",a=this.idBoardMems,o=0,s=a.length;s>o;o++)n=a[o],r=this.Member.get(n).get("username"),i+="@"+r+" ";Util.insertSelection(t,i),PopOver.hide()},t.prototype.selectAllCommenters=function(e){var t,i,n,r,o,s,a;for(Util.stop(e),track("Card Detail","Mention Member Autocomplete","Insert - All Commenters"),t=this.getTextInput().focus(),i="",a=this._membersFromIds(this.idCommenters),o=0,s=a.length;s>o;o++)n=a[o],r=n.get("username"),i+="@"+r+" ";Util.insertSelection(t,i),PopOver.hide()},t}(ViewWithId),EmojiCompleterView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Emoji"},t.prototype.events={"mouseenter .js-select-emoji":"hoverItem","click .js-select-emoji":"selectEmoji",keydown:"keydownEvent","keyup .js-filter-emoji":"keyupEvent","click .js-upload-emoji":"openEmojiUploader"},t.prototype.initialize=function(){return this._customEmoji={},Auth.me().isFeatureEnabled("customEmoji")?(null==Auth.me().get("customEmoji")&&ModelLoader["for"](this.modelCache).loadMemberCustomEmoji(Auth.myId(),this.updateCustomEmoji),this.listenTo(Auth.me().customEmojiList,"change add remove reset",this.updateCustomEmoji),this.updateCustomEmoji()):void 0},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),this.$el.html(templates.fill("popover_emoji_completer",e)),this.$emojiList=this.$(".js-available-emoji"),this.options.input&&this.filterEmoji(this.getInput()),this.options.button&&this.fillDefaultEmojiList(),this},t.prototype.keyupEvent=function(e){var t,i,n;if((i=e.keyCode)===Key_Arrow_Up||i===Key_Arrow_Down)return Util.stop(e),void Util.navMenuList(this.$emojiList,".item",e.keyCode);if((n=e.keyCode)!==Key_Enter&&n!==Key_Tab)return t=this.getInput(),this.filterEmoji(t)},t.prototype.keydownEvent=function(e){var t,i;return((i=e.keyCode)===Key_Enter||i===Key_Tab)&&(Util.stop(e),t=this.$emojiList.find(".item.selected:first .js-select-emoji"),t.length>0)?t.click():void 0},t.prototype.updateCustomEmoji=function(){return this._customEmoji=_.object(Auth.me().customEmojiList.map(function(e){return[e.get("name"),e.get("value")]})),this.render()},t.prototype.getTextInput=function(){return $(this.options.target)},t.prototype.getInput=function(){var e,t;return this.options.button?this.$(".js-filter-emoji").val():(e=this.getTextInput(),t=Util.getWordFromCaret(e),t.str.substring(1))},t.prototype.filterEmoji=function(e){return this.clearEmojiList(),this.fillEmojiList(e)?Util.selectMenuItem(this.$emojiList,".item",this.$emojiList.find(".item").first()):void 0},t.prototype.renderEmojiList=function(e){var t,i,n,r,o;for(n=0,r=e.length;r>n;n++)i=e[n],t={name:i,image:null!=(o=this._customEmoji[i])?o:TrelloEmoji[i]},this.$emojiList.append(templates.fill("select_emoji",t));return this},t.prototype.fillDefaultEmojiList=function(){var e;e=["smile","thumbsup","facepalm","ballot_box_with_check","warning","sunglasses"],this.renderEmojiList(e),PopOver.calcPos()},t.prototype.fillEmojiList=function(e){var t,i;return i=e.replace(/\W+/g,""),""===e?(this.fillDefaultEmojiList(),!1):/[A-Z]/.test(i)&&this.options.input?(PopOver.hide(),!1):(i=i.toLowerCase(),this.$(".js-emoji-name").text(i),this.$(".js-upload-emoji").attr("data-emojiname",i),t=this.getEmojiSuggestions(i).slice(0,6),t.length>0?(this.$(".js-results").removeClass("hide"),this.$(".js-no-results").addClass("hide"),this.renderEmojiList(t),PopOver.calcPos()):(this.$(".js-results").addClass("hide"),this.$(".js-no-results").removeClass("hide")),0!==t.length)},t.prototype.clearEmojiList=function(){return this.$emojiList.empty()},t.prototype.getEmojiSuggestions=function(e){var t,i,n,r,o,s,a,l,c;if(o=RegExp("^"+Util.escapeForRegex(e)),t=function(){var e;e=[];for(r in this._customEmoji)o.test(r)&&e.push(r);return e}.call(this),a=function(){var e;e=[];for(r in TrelloEmoji)o.test(r)&&e.push(r);return e}(),null==this._sortOverride)for(s=["thumbsup","smile","warning","sunglasses","facepalm","question","thumbsdown","wink","smiley","smile_cat","bowtie","heart","laughing"],this._sortOverride={},n=l=0,c=s.length;c>l;n=++l)i=s[n],this._sortOverride[i]=n+1;return _.uniq(__slice.call(t).concat(__slice.call(a))).sort(function(e){return function(t,i){var n,r;return n=e._sortOverride[t],r=e._sortOverride[i],n&&!r?-1:r&&!n?1:(n&&r&&(t=n,i=r),i>t?-1:t>i?1:0)}}(this))},t.prototype.hoverItem=function(e){var t;return t=$(e.target).closest(".item"),Util.selectMenuItem(this.$emojiList,".item",t)},t.prototype.selectEmoji=function(e){var t;Util.stop(e),t=$(e.target).closest(".js-select-emoji").find(".emoji-name").text(),this.insertEmoji(t),PopOver.hide()},t.prototype.insertEmoji=function(e){var t,i,n;return t=this.getTextInput(),this.options.input?n=Util.getWordFromCaret(t):(i=Util.getCaretPosition(t),i&&(n={start:i,end:i})),Util.insertSelection(t,":"+(""+e).trim()+": ",null!=n?n.start:void 0,null!=n?n.end:void 0),track("Emoji Select",e)},t.prototype.openEmojiUploader=function(e){var t;Util.stop(e),t=this.$(e.target).attr("data-emojiname"),PopOver.pushView({keepEdits:!0,view:EmojiUploaderView,options:{model:Auth.me(),emojiName:t,completerView:this}}),track("Card Detail View","Open Custom Emoji Uploader")},t}(ViewWithId),CardCompleterView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add Card…"},t.prototype.events={"mouseenter .js-select-card":"hoverItem","click .js-select-card":"selectCard",keydown:"keydownEvent","keyup .js-search":"keyupEvent"},t.prototype.initialize=function(){return this.cards=[],this.debouncedSearch=this.debounce(this.search,200).bind(this)},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0,e.hideLoading=!0),this.$el.html(templates.fill("popover_card_completer",e)),this.renderCards()},t.prototype.renderCards=function(){var e,t,i,n,r;return e=this.$(".js-card-list").empty(),n=function(){var e,n,o,s;for(o=this.cards,s=[],e=0,n=o.length;n>e;e++)i=o[e],r=i.toJSON(),t=i.getBoard(),null!=t&&(r.boardName=t.get("name")),s.push(templates.fill("select_card",r));return s}.call(this),e.append(n),this.$(".js-loading").addClass("hide"),Util.selectMenuItem(e,".item",e.find(".item").first()),PopOver.calcPos(),this},t.prototype.keyupEvent=function(e){var t,i,n;if((i=e.keyCode)===Key_Arrow_Up||i===Key_Arrow_Down)return Util.stop(e),void Util.navMenuList(this.$(".js-card-list"),".item",e.keyCode);if(n=e.keyCode,!(__indexOf.call([Key_Enter,Key_Tab,Key_Arrow_Left,Key_Arrow_Right].concat(__slice.call(Keys_Control)),n)>=0))return t=this.$(".js-search").val(),this.debouncedSearch(t)},t.prototype.keydownEvent=function(e){var t,i,n;return t=this.$(".js-card-list"),((n=e.keyCode)===Key_Enter||n===Key_Tab)&&(Util.stop(e),i=t.find(".item.selected:first .js-select-card"),i.length>0)?i.click():void 0},t.prototype.getTextInput=function(){return $(this.options.target)},t.prototype.search=function(e,t){var i,n,r;if(e!==this._lastQuery)return this._lastQuery=e,""===e?(this.cards=[],this.renderCards(),void("function"==typeof t&&t(null,[]))):Util.isShortId(e)&&(n=this.options.card,i=null!=n?n.getBoard():void 0,null!=i)?void async.assembly([function(t){return function(n){var r;null!=(r=i.getCard(e))?n(null,r):ModelLoader["for"](t.modelCache).loadCardData(i.id,e,function(){return n(null,i.getCard(e))})}}(this)],function(e){return function(i,n){return e.cards=null==i&&null!=n?[n]:[],"function"==typeof t?t(null,e.cards):void 0}}(this)):(r={query:e,modelTypes:"cards",partial:!0},ModelLoader["for"](this.modelCache).loadSearchData(r,function(i){return function(r,o){return e===i._lastQuery?null==r?(i.cards=function(){var e,t,i,r;for(i=o.cards,r=[],e=0,t=i.length;t>e;e++)n=i[e],r.push(this.Card.get(n.id));return r}.call(i),i.options.input&&_.isEmpty(i.cards)&&PopOver.hide(),i.renderCards(),"function"==typeof t?t(null,o.cards):void 0):(i.options.input&&PopOver.hide(),"function"==typeof t?t(r):void 0):void 0}}(this)))},t.prototype.hoverItem=function(e){var t,i;return t=this.$(".js-card-list"),i=$(e.target).closest(".item"),Util.selectMenuItem(t,".item",i)},t.prototype.selectCard=function(e){var t,i;Util.stop(e),i=$(e.target).closest(".js-select-card").attr("id"),t=this.Card.get(i),null!=t&&this.insertCard(t),PopOver.hide()},t.prototype.insertCard=function(e){var t,i,n,r,o;return r=e.get("url"),t=this.getTextInput(),this.options.input?(o=Util.getLineFromCaret(t),n=o.str.lastIndexOf("#"),-1!==n&&(o.start+=n)):(i=Util.getCaretPosition(t),i&&(o={start:i,end:i})),Util.insertSelection(t,""+r+" ",null!=o?o.start:void 0,null!=o?o.end:void 0),track("Card Select",this.options.input?"inline":"via menu")},t}(ViewWithId),CompleterUtil=function(){function e(){}return e.prototype.openEmojiCompleter=function(e){return Util.stop(e),PopOver.pushView({view:this.getEmojiCompleterView("button")})},e.prototype.openAutoMentioner=function(e){return Util.stop(e),PopOver.pushView({view:this.getAutoMentionerView("button")}),track("Card Detail","Mention Autocomplete","Open Menu - With Click")},e.prototype.getAutoMentionerView=function(e){var t;return t=this.getCard(),new AutoMentionerView({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getEmojiCompleterView=function(e){var t;return t=this.getCard(),new EmojiCompleterView({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getCardCompleterView=function(e){var t;return t=this.getCard(),new CardCompleterView({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getInputCardCompleterView=function(){var e,t;return e=this.getCard(),t={input:!0,target:this.getTextInput(),card:e,modelCache:this.modelCache},this.subview(CardCompleterView,e,t)},e.prototype.commentAddAttachment=function(e){var t;Util.stop(e),t=this.getCard(),PopOver.toggle({elem:$(e.target),keepEdits:!0,top:35,view:AttachmentTypePickerView,options:{model:t,modelCache:this.modelCache}}),track("Card Detail","Comment Box - Open Attachment Type Picker")},e.prototype.commentMentionMember=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target),keepEdits:!0,top:35,view:this.getAutoMentionerView("button")}),track("Card Detail","Comment Box - Mention Members")},e.prototype.commentAddEmoji=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target),keepEdits:!0,top:35,view:this.getEmojiCompleterView("button")}),track("Card Detail","Comment Box - Add Emoji")},e.prototype.commentAddCard=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target),keepEdits:!0,top:35,view:this.getCardCompleterView("button")}),track("Card Detail","Comment Box - Add Card")
},e}(),AutoInsertionView=function(){function e(){}return e.prototype.checkInsert=function(e){var t,i,n,r,o,s,a,l,c,d,u;if(PopOver.isVisible&&!Browser.isTouch())if(e.shiftKey&&((a=e.keyCode)===Key_Arrow_Up||a===Key_Arrow_Down)||e.altKey&&((l=e.keyCode)===Key_Arrow_Up||l===Key_Arrow_Down));else if(e.keyCode===Key_Escape)Util.stop(e),PopOver.hide();else for(i=[{listClass:".js-available-members",itemClass:".js-select-member"},{listClass:".js-available-emoji",itemClass:".js-select-emoji"},{listClass:".js-card-list",itemClass:".js-select-card"}],o=0,s=i.length;s>o;o++)if(c=i[o],r=c.listClass,n=c.itemClass,t=$(".pop-over").find(r),t.length>0){if((d=e.keyCode)===Key_Enter||d===Key_Tab)return Util.stop(e),t.find(".item:first").hasClass("selected")&&(this.keyAutoMention(e),t=$(".pop-over").find(r)),t.find(".item.selected:first "+n).first().click(),PopOver.hide(),!1;if((u=e.keyCode)===Key_Arrow_Up||u===Key_Arrow_Down)return Util.stop(e),Util.navMenuList(t,".item",e.keyCode),!1}},e.prototype.keyAutoMention=function(e){var t,i,n,r,o,s,a,l;if(!Browser.isTouch()){if(a=e.keyCode,__indexOf.call([Key_Tab,Key_Escape].concat(__slice.call(Keys_Control),__slice.call(Keys_Arrow)),a)>=0)return;if(s=Util.getWordFromCaret(this.getTextInput()),/^@\S/.test(s.str.substring(0,2))){if(t=this.getAutoMentionerView("input"),PopOver.load(t),0===t.idMatchMems.length)return;return PopOver.show({elem:this.getMentionTarget(),top:35,view:t,preloaded:!0,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus())}return/^:[a-z0-9_]+$/.test(s.str)?(i=this.getEmojiCompleterView("input"),PopOver.load(i),PopOver.show({elem:this.getEmojiTarget(),top:35,view:i,preloaded:!0,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus())):(n=Util.getLineFromCaret(this.getTextInput()),o=/^(?:.*\s)?\#((?!\s)[^\#\.,;:@]{0,32})$/,null!=(r=null!=(l=o.exec(n.str))?l[1]:void 0)?(null==this.debouncedCardSearch&&(this.debouncedCardSearch=_.debounce(function(e){return function(t){var i,n;return i=e.getInputCardCompleterView(),n=function(){return PopOver.show({elem:e.getCardTarget(),top:35,view:i,preloaded:!0,keepEdits:!0})},e._lastQuery=t,i.search(t,function(r,o){return t===e._lastQuery?r||_.isEmpty(o)?PopOver.hide():(PopOver.load(i),n()):void 0})}}(this),200)),void this.debouncedCardSearch(r)):_.delay(function(){return PopOver.hide()},5))}},e}(),InsertionOptionsView=mixin(CompleterUtil,_ViewWithId=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Options"},t.prototype.events=function(){return{"click .js-open-mention-selector":"openAutoMentioner","click .js-open-emoji-selector":"openEmojiCompleter",keydown:"keydownEvent"}},t.prototype.render=function(){return this.$el.html(templates.fill("popover_insertion_menu")),this},t.prototype.keydownEvent=function(e){var t,i;return(t=e.keyCode)===Key_Enter?(Util.stop(e),this.$emojiList.find(".item.selected:first .js-select-emoji").click()):(i=e.keyCode)===Key_Enter?(Util.stop(e),this.$memList.find(".item.selected:first .js-select-member").click()):void 0},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.getTextInput=function(){return this.options.parent.getTextInput()},t}(ViewWithId)),EmojiUploaderView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Upload Emoji"},t.prototype.events=function(){return{"click .js-upload-emoji":"uploadEmoji","change .js-upload-emoji-file":"fileChange","input .js-emoji-name":"nameChange"}},t.prototype.initialize=function(e){var t,i,n,r,o;for(this.completerView=e.completerView,this.hasGold=this.model.isFeatureEnabled("customEmoji"),this.hasJPS=!1,r=this.model.organizationList.models,o=[],i=0,n=r.length;n>i&&(t=r[i],this.hasJPS=t.isJPS(),!this.hasJPS);i++)o.push(void 0);return o},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON(),e.emojiName=this.options.emojiName,e.hasGold=this.hasGold,e.hasJPS=this.hasJPS,e.canUpload=this.hasGold||this.hasJPS,this.$el.html(templates.fill("popover_emoji_uploader",e)),this._validate(),this.renderEmoji(),this},t.prototype.renderEmoji=function(){var e,t,i,n,r,o,s;return i=this.$(".js-emoji-name"),r=i.val()||"???",r=":"+r.toLowerCase().trim().replace(/\s+/g,"_")+":",this.$(".js-emoji-preview-name").text(r),e=this.$(".js-emoji-preview"),t=this.$(".js-upload-emoji-file"),n=null!=(s=t.prop("files"))?s[0]:void 0,/^image\/.*/.test(null!=n?n.type:void 0)?(o=new FileReader,o.onload=function(e){return function(t){return e.$(".js-emoji-conversion").removeClass("hide"),e.$(".js-emoji-preview").attr("src",t.target.result)}}(this),o.readAsDataURL(n)):this.$(".js-emoji-conversion").addClass("hide"),this},t.prototype.fileChange=function(e){var t,i,n,r,o,s,a;return i=this.$(".js-emoji-name"),t=this.$(".js-upload-emoji-file"),""===i.val()&&(r=$(e.target),n=null!=(s=t.prop("files"))?s[0]:void 0,null!=n?o=n.name:t.val()&&(o=null!=(a=/[^\/]+$/.exec(t.val()))?a[0]:void 0),null==o&&(o=""),o=o.split(".")[0],o=o.toLowerCase().replace(/[^a-z0-9_]/g,""),i.val(o),this.$(".js-emoji-name").focus().select()),this.renderEmoji(),this._validate()},t.prototype.nameChange=function(){return this.renderEmoji(),this._validate()},t.prototype._validate=function(){var e,t,i,n,r,o,s;return t=this.$(".js-emoji-name"),n=t.val(),e=this.$(".js-upload-emoji-file"),r=/^[a-z0-9_\s]+$/.test(n),i=(null!=(s=e.prop("files"))?s.length:void 0)>0||e.val(),o=r&&i&&(this.hasGold||this.hasJPS),this.$(".js-invalid-name").toggleClass("hide",r||""===n),this.$(".js-upload-emoji").toggleClass("disabled",!o)},t.prototype.uploadEmoji=function(e){var t,i,n,r,o,s,a;if(Util.stop(e),!$(".js-upload-emoji").hasClass("disabled")){if(this.$(".error").addClass("hide"),t=this.$(".js-upload-emoji-file"),n=null!=(a=t.prop("files"))?a[0]:void 0,r=this.$(".js-emoji-name").val().trim().toLowerCase().replace(/\s+/g,"_"),o=function(e){return function(){return e.completerView.insertEmoji(r),PopOver.hide()}}(this),!n&&t.val())return void Util.uploadFile(t,o);if(null!=n&&!Util.validFileSize(n))return void Alerts.flash("File Too Large","error");if(null!=n&&r)return s=new FileReader,i=new FormData,i.append("token",Auth.myToken()),i.append("file",n),i.append("name",r),s.onload=function(e){return function(t){return e.model.customEmojiList.create({url:t.target.result,name:r},{data:i,processData:!1,contentType:!1,success:o,error:function(){return this.$(".error").removeClass("hide")}})}}(this),s.readAsDataURL(n)}},t}(ViewWithId);var Camera,CropPhotoView,TakePhotoView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Camera=new(function(){function e(){this.stream=null}return e.prototype.supportsGetUserMedia=function(){return null!=navigator.getUserMedia||null!=navigator.webkitGetUserMedia},e.prototype.connected=function(){return null!=this.stream},e.prototype.getStream=function(){return this.stream},e.prototype.getError=function(){var e;return null!=(null!=(e=this.error)?e.PERMISSION_DENIED:void 0)?"Access Denied":this.error},e.prototype.connect=function(e){var t,i;return null!=this.stream?e(null,this.stream):(this.error=null,t=function(t){return function(i){return t.error=i,t.stream=null,e("Could not connect")}}(this),i={video:!0},null!=navigator.getUserMedia?navigator.getUserMedia(i,function(t){return function(i){return t._setRawStream(i),t.stream=i,e(null,t.stream)}}(this),t):null!=navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(i,function(t){return function(i){return t._setRawStream(i),t.stream=webkitURL.createObjectURL(i),e(null,t.stream)}}(this),t):void 0)},e.prototype._setRawStream=function(e){return this.stop(),this.rawStream=e},e.prototype.stop=function(){var e;return null!=(e=this.rawStream)&&"function"==typeof e.stop&&e.stop(),this.stream=null,this.rawStream=null},e}()),TakePhotoView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-connect-camera":"connectCamera","click .js-snap":"snap"},t.prototype.willBePopped=function(){return Camera.stop()},t.prototype.getViewTitle=function(){return"Take a Photo"},t.prototype.render=function(){var e,t;return e={error:Camera.getError(),connected:Camera.connected()},this.$el.html(templates.fill("take_photo",e)),Camera.connected()&&(t=this.$(".video")[0],t.src=Camera.getStream(),t.play()),this},t.prototype.connectCamera=function(){return Camera.connect(function(e){return function(){return e.render()}}(this))},t.prototype.snap=function(){var e,t,i,n;return n=this.$(".video")[0],e=$("<canvas>").attr({width:640,height:480}),t=e[0].getContext("2d"),t.drawImage(n,0,0,640,480),i=new CropPhotoView({model:this.model,modelCache:this.modelCache}),i.setImage(e[0].toDataURL("image/png")),Camera.stop(),PopOver.pushView({view:i}),i.on("done",function(e){return function(t){return PopOver.popView(),e.trigger("done",t)}}(this)),i.on("back",function(e){return function(){return e.render(),e.connectCamera()}}(this))},t}(ViewWithId),CropPhotoView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Crop Photo"},t.prototype.events=function(){return{"click .js-done":"done","click .js-back":"back"}},t.prototype.setImage=function(e){return this.url=e},t.prototype.render=function(){return this.forceIntoDom(),this.$el.html(templates.fill("crop_photo")),this.$(".crop-image").attr("src",this.url).css({"max-width":4096,"max-height":4096}).crop({width:270,height:270}).on("mousewheel",function(e){var t;return t=$(this).data("crop"),e.originalEvent.wheelDelta<0?t.zoomIn():t.zoomOut()}).on("crop",function(e){return function(t){return e.cropX=t.cropX,e.cropY=t.cropY,e.cropW=t.cropW,e.cropH=t.cropH}}(this)),this},t.prototype.done=function(){var e,t,i;return i=this.$(".crop-image")[0],e=$("<canvas>").attr({width:270,height:270}),t=e[0].getContext("2d"),t.drawImage(i,this.cropX,this.cropY,this.cropW,this.cropH,0,0,270,270),PopOver.popView(),this.trigger("done",e[0].toDataURL("image/png"))},t.prototype.back=function(){return PopOver.popView(),this.trigger("back")},t}(ViewWithId);var ApiAjax;ApiAjax=Util.queued(function(e,t){var i,n,r;if(null==e.data&&(e.data={}),e.data.token=Auth.myToken(),null==(r=e.data).invitationTokens&&(r.invitationTokens=Util.invitationTokens().join(",")),e.background){try{AjaxQueue.send(e)}catch(o){throw i=o,t(),i}return t()}n=e.complete,null==e.modelCache&&(e.modelCache=Controller.getCurrentModelCache()),e.complete=function(){return null!=n&&n.apply(this,arguments),t()};try{return AjaxQueue.ajax(e)}catch(o){throw i=o,t(),i}},3);var BillingView,ChangeBillingInfo,PaidAccountFormView,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};BillingView=function(){function e(){}return e.prototype.events={"click .js-change-cc":"changeCreditCard","click .js-change-billing-contact":"changeBillingContact","click .js-switch-to-yearly-billing":"switchToYearlyBilling","click .js-start-cancel":"startCancel","click .js-cancel-cancel":"cancelCancel","click .js-cancel":"cancel",'change input[type="radio"]':"showFeedbackTextarea","click .js-reactivate-monthly":"reactivateMonthly","click .js-reactivate-yearly":"reactivateYearly","click .js-renew":"renew","click .js-resolve-billing-issue":"changeCCProblem","click .js-enter-new-credit-card":"changeCCDenied"},e.prototype.setup=function(){var e;return this.pollingStart=new Date,this.getBillingStatement(),this.monthlyProductNumber=this.features.productShortNames[this.productPrefix+"Monthly"],this.yearlyProductNumber=this.features.productShortNames[this.productPrefix+"Yearly"],Accounts.processing(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)?this.getPaidAccount():void 0},e.prototype.processBillingStatement=function(e){var t,i,n,r,o;for(t=0,o=[],n=0,r=e.length;r>n;n++)i=e[n],o.push(this.formatBillingStatement(i,t+=i.amount));return o},e.prototype.formatBillingStatement=function(e,t){return e.date=Dates.toShortString(new Date(e.date)),e.balance=t.toFixed(2),0===e.item.indexOf("Credit.")?e["return"]=Math.abs(e.amount).toFixed(2):0===e.item.indexOf("Refund to your")?e.refund=Math.abs(e.amount).toFixed(2):(e.credit=e.amount>0?e.amount.toFixed(2):"",e.debit=e.amount<0?(-e.amount).toFixed(2):"")},e.prototype.getBillingStatement=function(){return ApiAjax({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/statement",background:!0,success:function(e){return function(t){var i,n,r;if(null!=e.model.attributes)return e.billingStatementData={statement:null!=(n=null!=t?t.statement:void 0)?n:[],balance:null!=(r=null!=t?t.balance:void 0)?r:0,statementUrl:null!=t?t.statementUrl:void 0},e.processBillingStatement(e.billingStatementData.statement),e.billingStatementData.statement=function(){var e,t,n,r;for(n=this.billingStatementData.statement,r=[],e=0,t=n.length;t>e;e++)i=n[e],0!==i.amount&&r.push(i);return r}.call(e),e.billingStatementData.statement.reverse(),e.renderBillingStatement(),new Date<Util.dateAfter({date:e.pollingStart,minutes:10})?e.setTimeout(_.bind(e.getBillingStatement,e),Util.getMs({seconds:5})):void 0}}(this),error:function(e){return function(t){return e.$("#billing-statement").text(t.responseText)}}(this)})},e.prototype.getPaidAccount=function(){return this.paidAccountLoader(function(e){return function(t,i){var n;if(!t&&null!=i)return Accounts.processing(null!=(n=e.model.get("paidAccount"))?n.standing:void 0)&&new Date<Util.dateAfter({date:e.pollingStart,minutes:1})?e.setTimeout(_.bind(e.getPaidAccount,e),1e3):e.renderMainContent}}(this))},e.prototype._urlBase=function(){var e;return"/"+(null!=(e=this.model.get("name"))?e:this.model.get("username"))},e.prototype.renderMainContent=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v;null==e&&(e=!1),i=this.model.toJSON(),i.urlBase=this._urlBase(),i.changeCardUrl=this.changeCardUrl(),i.productName=this.productName,i.productIconClass=this.productIconClass,i.canSwitchToYearly=!1,_.extend(i,this.pricing),l=i.paidAccount;for(n in l)r=l[n],i["paidAccount_"+n]=r;return null!=(null!=(c=i.paidAccount)&&null!=(u=c.products)?u[0]:void 0)&&(i.nextBillingDate=Dates.toLongDateString(null!=(p=i.paidAccount.billingDates)?p[i.paidAccount.products[0]]:void 0)),i.billableMemberCount=this.model.get("billableMemberCount"),t=null!=(h=i.paidAccount)&&null!=(m=h.products)?m[0]:void 0,i.monthlyPrice=this.features.getPrice(this.pricing.monthlyProduct),i.yearlyPrice=this.features.getPrice(this.pricing.yearlyProduct),i.yearlyDiscount=this.features.getYearlyDiscount(this.pricing.yearlyProduct,t),i.yearlyIsDiscount=!/^-/.test(i.yearlyDiscount),i.billedMonthly=this.features.isMonthly(t),i.billedYearly=!i.billedMonthly,i.price=this.features.getPrice(t),i.nextChargeAmount=this.features.getPrice(t),this.features.isPerUser(t)&&(i.isPerUser=!0,i.nextChargeAmount="function"==typeof(o=this.model).totalPerUserPrice?o.totalPerUserPrice(t):void 0,i.totalYearlyPrice="function"==typeof(s=this.model).totalPerUserPrice?s.totalPerUserPrice(this.pricing.yearlyProduct):void 0,i.totalMonthlyPrice="function"==typeof(a=this.model).totalPerUserPrice?a.totalPerUserPrice(this.pricing.yearlyProduct):void 0),this.features.isMonthly(t)&&35!==t&&39!==t&&(i.canSwitchToYearly=!0),i.activeAccount=Accounts.active(i.paidAccount),i.processingAccount=Accounts.processing(null!=(f=i.paidAccount)?f.standing:void 0),i.problemAccount=Accounts.problem(null!=(g=i.paidAccount)?g.standing:void 0),null!=i.paidAccount&&(i.willExpire=Accounts.willExpire(i.paidAccount)),i.willExpire&&(i.expirationDate=Dates.toLongDateString(i.paidAccount.expirationDates[null!=i&&null!=(b=i.paidAccount)&&null!=(v=b.products)?v[0]:void 0])),null!=i.accountStanding&&(i.accountStandingDisplay=Util.toTitleCase(i.accountStanding)),i.cancelledAccount=Accounts.cancelled(i.paidAccount),i.needCC=Accounts.needCC(null!=(d=i.paidAccount)?d.standing:void 0),e&&(i.processingReactivation=!0),this.$(".js-content").html(templates.fill("billing",i)),this.setActiveView(".js-billing"),this.renderBillingStatement(),"function"==typeof this.renderBanner&&this.renderBanner(),this},e.prototype.renderBillingStatement=function(){return null!=this.billingStatementData?this.$("#billing-statement").html(templates.fill("billing_statement",this.billingStatementData)):void 0},e.prototype.changeCreditCard=function(){return track(""+this.model.typeName+" View","Billing Page","Change CC - Good Standing")},e.prototype.changeBillingContact=function(e){return Util.stop(e),track(""+this.model.typeName+" View","Billing Page","Open Change Billing Contact Info"),PopOver.toggle({elem:this.$(".js-change-billing-contact"),top:20,view:new ChangeBillingInfo({model:this.model,modelCache:this.modelCache})})},e.prototype.switchToYearlyBilling=function(e){var t,i;return Util.stop(e),i=this.model.get("paidAccount").products[0],t=__indexOf.call(this.features.prebilledProducts,i)>=0?"You will be charged immediately for the yearly amount and your contract will be extended by a year.  The billing contact will be notified of the change.":"You will be charged a prorated amount for the remainder of the month and charged immediately for the yearly amount. The billing contact will be notified of the change.",Confirm.toggle({elem:this.$(".js-switch-to-yearly-billing"),top:35,model:this.model,title:"Switch to Yearly Billing?",text:t,confirmText:"Sounds good. Switch!",confirmBtnClass:"primary",fxConfirm:function(e){return function(){return ApiAjax({url:""+e.model.urlRoot+"/"+e.model.id+"/paidAccount/products",type:"POST",data:{products:[e.yearlyProductNumber]},success:function(t){return track(e.model.typeName,"Successfully Switched "+e.productName+" to Yearly Billing"),e.model.set(t)}})}}(this)})},e.prototype.startCancel=function(e){var t;return Util.stop(e),this.$(".js-start-cancel").hide(),t=this.$(".js-random-reasons"),t.html(_.shuffle(t.find("label"))),this.$(".js-cancel-feedback").show()},e.prototype.showFeedbackTextarea=function(){return this.$(".js-long-feedback").show()},e.prototype.cancelCancel=function(e){return Util.stop(e),this.$(".js-start-cancel").show(),this.$(".js-cancel-feedback").hide()},e.prototype.cancel=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m,f;track("Member View","Billing Page","Open Cancel Trello Gold Dialog"),a=null!=(c=this.$("input[type='radio']:checked").val())?c:"not specified",i=null!=(d=this.$(".js-long-feedback").val())?d:"none given",o=this.model.toJSON(),r=this.Auth.me().toJSON(),s=null!=(u=o.paidAccount)&&null!=(p=u.products)?p[0]:void 0,t={},t.ID=o.id,(null!=(h=o.paidAccount)?h.ixSubscriber:void 0)&&(t.ixSubscriber=null!=(m=o.paidAccount)?m.ixSubscriber:void 0),o.displayName&&(t["Organization Display Name"]=o.displayName),o.name&&(t["Organization Name"]=o.name),t["Full Name"]=o.fullName?o.fullName:r.fullName,t.Username=o.username?o.username:r.username,o.idBoards&&(t["# Boards"]=o.idBoards.length),o.memberships&&(t["# Members"]=o.memberships.length),null!=s&&(t["Next Billing Date"]=Dates.toLongDateString(null!=(f=o.paidAccount.billingDates)?f[s]:void 0),t.Interval=s===this.yearlyProductNumber?"Yearly":"Monthly",t.Price=this.features.formatPrice(s)),t["Trello Version"]=TrelloVersion.replace(/\s+/g," "),e=function(){var e;e=[];for(n in t)l=t[n],e.push(""+n+": "+l);return e}().join("\n"),Util.bugzscout({me:r,area:"Cancellations",description:"Cancelled "+this.productName+" - "+t.Interval+"\n",extra:""+e+"\n\nReason: "+a+"\n\nDetails:\n\n"+i}),ApiAjax({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/cancel",type:"POST",success:function(e){return function(t){return track(e.model.typeName,"Successfully Canceled Paid Account"),e.model.set(t),e.$(".js-start-cancel").hide(),e.$(".js-cancel-feedback").hide(),e.$(".js-cancelled").show()}}(this)})},e.prototype.reactivateMonthly=function(e){track(""+this.model.typeName+" View","Billing Page","Reactivate "+this.productName+" - Monthly"),this.reactivate(e,this.monthlyProductNumber,"Monthly")},e.prototype.reactivateYearly=function(e){track(""+this.model.typeName+" View","Billing Page","Reactivate "+this.productName+" - Yearly"),this.reactivate(e,this.yearlyProductNumber,"Yearly")},e.prototype.reactivate=function(e,t,i){var n,r;Util.stop(e),null==(null!=(r=this.model.get("paidAccount"))?r.cardType:void 0)?(n=""+this._urlBase()+"/billing/card/"+this.productPrefix+i,Controller.navigate(n,{trigger:!0})):ApiAjax({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/reactivate",type:"POST",data:{products:[t]},success:function(e){return function(){var t;return track(e.model.typeName,"Sucessfully Reactivate "+e.productName+" - "+i),e.renderMainContent(t=!0)}}(this)})},e.prototype.renew=function(){track(""+this.model.typeName+" View","Billing Page","Renew Expiring "+this.productName+" Subscription"),ApiAjax({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/products",type:"POST",data:{products:[this.model.get("paidAccount").products[0]]},success:function(e){return function(t){return track(e.model.typeName,"Successfully Renewed Expiring Yearly "+e.productName+" Subscription"),e.model.set(t)}}(this)})},e.prototype.changeCCProblem=function(){return track(""+this.model.typeName+" View","Billing Page","Change CC - Resolve Overdue Billing Issue")},e.prototype.changeCCDenied=function(){return track(""+this.model.typeName+" View","Billing Page","Change CC - Denied")},e}(),PaidAccountFormView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.pollForCCAuth=function(){var e,t;return null==this._startedPolling&&(this._startedPolling=Date.now()),this._startedPolling+Util.getMs({seconds:60})<Date.now()?(this.hideAuthorizing(),Controller.organizationBillingView(this.model.get("name"))):(e=function(e){return function(t){return Accounts.active(t)?e.profileView.bind(e):Accounts.needCC(null!=t?t.standing:void 0)?e.billingView.bind(e):!1}}(this),(t=e(this.model.get("paidAccount")))?(this.hideAuthorizing(),void t()):ApiAjax({background:!0,url:""+this.model.urlRoot+"/"+this.model.id+"?paid_account=true",success:function(i){return function(n){return(t=e(n.paidAccount))?(i.model.set(n),i.hideAuthorizing(),t()):_.delay(_.bind(i.pollForCCAuth,i),1e3)}}(this),error:function(e){return function(){return e.hideAuthorizing(),e.billingView()}}(this)}))},t.prototype.events={"click .js-submit-create-paid-account":"createPaidAccount","click .js-submit-change-credit-card":"changeCreditCard","change input[name='product']":"changeProduct"},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m,f;i=this.model.toJSON({prefs:!0}),i.productNumber=this.options.productNumber,i.productName=this.options.productName,r=this.features.productShortNames[this.pricing.monthlyProduct],a=this.features.productShortNames[this.pricing.yearlyProduct],n=OrgFeatures.isPerUser(this.options.productNumber),n&&(t=this.model.get("billableMemberCount")),i.productOptions=[{id:r,checked:this.options.productNumber===r,isMonthly:!0,isPerUser:n,billableMemberCount:t,totalPerUserPrice:"function"==typeof(l=this.model).totalPerUserPrice?l.totalPerUserPrice(r):void 0,price:this.features.getPrice(r)},{id:a,checked:this.options.productNumber===a,isYearly:!0,isPerUser:n,billableMemberCount:t,totalPerUserPrice:"function"==typeof(c=this.model).totalPerUserPrice?c.totalPerUserPrice(a):void 0,price:this.features.getPrice(a),save:""+this.features.getYearlyDiscount(this.pricing.yearlyProduct,this.pricing.monthlyProduct)}],i.productNames=null!=(d=function(){var e,t,i,n,r;for(n=null!=(i=this.options.products)?i:[],r=[],e=0,t=n.length;t>e;e++)o=n[e],r.push(this.features.products[o]);return r}.call(this))?d.join(","):void 0,i.billingFullName=null!=(u=null!=(p=i.paidAccount)?p.contactFullName:void 0)?u:Auth.me().get("fullName"),i.billingEmail=null!=(h=null!=(m=i.paidAccount)?m.contactEmail:void 0)?h:Auth.me().get("email"),f=this.options.formAreas;for(e in f)s=f[e],i["formAreas_"+e]=s;return i.action=this.options.action,i.showRecommend=this.pricing.showRecommend,this.$el.html(templates.fill("credit_card",i)),this},t.prototype.delayShowAuthorizing=function(){return this.finishedAuth=!1,_.delay(function(e){return function(){return e.finishedAuth?void 0:(Util.scrollToTop(),Alerts.show("Authorizing...","info","authorizing"))}}(this),1e3)},t.prototype.hideAuthorizing=function(){return this.finishedAuth=!0,Alerts.hide("authorizing")},t.prototype.changeProduct=function(e){var t;t=$(e.target).val(),this.$("input[name='products']").val(t)},t.prototype.createPaidAccount=function(e){return this.submitPaidForm(e,"js-submit-create-paid-account","paidAccount",["products","billingContactEmail","billingContactFullName","name","cardNumber","expMonth","expYear","cvv","companyName","streetAddress1","streetAddress2","city","state","zipCode","country"])},t.prototype.changeCreditCard=function(e){return null==this.model.get("paidAccount")||null==this.model.get("paidAccount").cardType&&_.isEmpty(this.model.get("paidAccount").products)?this.createPaidAccount(e):this.submitPaidForm(e,"js-submit-change-credit-card","paidAccount/creditCard",["products","name","cardNumber","expMonth","expYear","cvv","companyName","streetAddress1","streetAddress2","city","state","zipCode","country"])},t.prototype.submitPaidForm=function(e,t,i,n){var r,o,s,a,l,c;if(a=this.options.productName,s=this.options.productNumber,this.$("input").removeClass("input-error"),this.$(".js-tos-error").addClass("hide"),Util.preventDefault(e),!this.$("[name=acceptTOS]").is(":checked"))return void this.$(".js-tos-error").removeClass("hide");for(r={},l=0,c=n.length;c>l;l++)o=n[l],r[o]=this.$("[name="+o+"]").val(),this.$("label[for="+o+"].form-error").addClass("hide");return this.delayShowAuthorizing(),this.$("."+t).attr("disabled","disabled"),this.$(".error").hide(),ApiAjax({showSendingAfter:-1,url:""+this.model.urlRoot+"/"+this.model.id+"/"+i,data:r,type:"POST",success:function(e){return function(){return e.pollForCCAuth(),"Business Class"===a?(ABTest.event("Bought BC",e.model.id),track("Business Class","Purchase",ABTest.inTest("lockInPrice")?"lock in price":"yearly price")):"Trello Gold"===a?track("Trello Gold","Purchase"):void 0}}(this),error:function(e){return function(i){var n,r,o,s,a;if(/^invalid value for /.test(null!=i?i.responseText:void 0)){if(r=i.responseText.replace("invalid value for ","").split(","),(null!=r?r.length:void 0)>0){for(o=0,s=r.length;s>o;o++)n=r[o],e.$("#"+n).addClass("input-error"),e.$("label[for="+n+"].form-error").removeClass("hide");e.$("#"+r[0]).focus()}}else e.$(".error").text(null!=(a=i.responseText)?a:"error").show(),Util.scrollToTop();return e.hideAuthorizing(),e.$("."+t).removeAttr("disabled","disabled")}}(this)})},t.prototype.pollForCCAuth=function(){return t.pollForCCAuth.call(this)},t}(ViewWithId),ChangeBillingInfo=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Billing Contact"},t.prototype.events={"click .js-submit":"changeBillingContact","submit form":"changeBillingContact"},t.prototype.render=function(){var e,t,i,n,r;return e=this.model.toJSON({prefs:!0}),e.billingFullName=null!=(t=null!=(i=e.paidAccount)?i.contactFullName:void 0)?t:Auth.me().get("fullName"),e.billingEmail=null!=(n=null!=(r=e.paidAccount)?r.contactEmail:void 0)?n:Auth.me().get("email"),this.$el.html(templates.fill("billing_contact",e)),this},t.prototype.changeBillingContact=function(e){var t,i,n,r,o;for(Util.stop(e),t={},t.billingContactFullName=this.$("input#billingContactFullName").val(),t.billingContactEmail=this.$("input#billingContactEmail").val(),this.$(".js-submit").attr("disabled","disabled"),o=["billingContactFullName","billingContactEmail"],n=0,r=o.length;r>n;n++)i=o[n],this.$("#"+i).removeClass("input-error");return ApiAjax({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/billingContact",data:t,type:"POST",success:function(e){return function(t){return e.model.set(t),PopOver.hide()}}(this),error:function(e){return function(t){var i,n;return i=null!=(n=t.responseText)?n:"error",e.$(".js-submit").removeAttr("disabled","disabled"),/billingContactFullName/.test(i)?void e.$("#billingContactFullName").addClass("input-error"):/email/.test(i)?void e.$("#billingContactEmail").addClass("input-error"):e.$(".error").text(i).show()}}(this)})},t}(ViewWithId);var FavIcon;FavIcon=new(function(){function e(){this.settings={},this._update=_.debounce(this._update,100).bind(this)}var t;return t=function(e,t,i,n,r,o,s,a){return null==a&&(a=!0),null==o&&(o=5),e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+o),e.lineTo(t+n,i+r-o),e.quadraticCurveTo(t+n,i+r,t+n-o,i+r),e.lineTo(t+o,i+r),e.quadraticCurveTo(t,i+r,t,i+r-o),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.closePath(),a&&e.stroke(),s?e.fill():void 0},e.prototype._update=function(){return Browser.allowsDynamicFavicon()?async.assembly([function(e){return function(t){var i,n;return null!=e.settings.url?(n=ABTest._hasher(""+e.settings.hasNotifications+"-"+e.settings.tiled+"-"+e.settings.url),i=""+window.backgroundDomain+"/favicon/"+n+".png",Util.waitForImageLoad(i,function(){return t(null,i)},function(){return t()})):t()}}(this),function(e){return function(i,n){var r,o,s,a;return null!=n?i(null,n):(s=null!=e.settings.url?"/dynamic-favicon?background="+e.settings.url+"&tiled="+(e.settings.tiled?"1":"0")+"&unread="+(e.settings.hasNotifications?"1":"0"):(r=document.createElement("canvas"),r.width=r.height=64,null!=(o="function"==typeof r.getContext?r.getContext("2d"):void 0)?(o.save(),o.fillStyle=null!=(a=e.settings.color)?a:Backgrounds.blue.color,t(o,0,0,64,64,12,!0),o.fillStyle="#f8f8f8",t(o,8,8,20,44,4,!0),t(o,36,8,20,28,4,!0),o.restore(),e.settings.hasNotifications?(o.fillStyle="#fff",t(o,40,0,24,24,12,!0),o.fillStyle="#f44",t(o,42,2,20,20,10,!0)):void 0,r.toDataURL("image/png")):null),i(null,s))}}(this)],function(e,t){return null==e&&null!=t?($("#favicon").remove(),$("<link>").attr({id:"favicon",rel:"icon",type:"image/png",sizes:"64x64",href:t}).appendTo("head")):void 0}):void 0},e.prototype.setNotifications=function(e){return this.settings.hasNotifications=e,this._update()},e.prototype.setBackground=function(e){var t,i,n;return n=e.url,i=e.tiled,t=e.color,this.settings.url=n,this.settings.tiled=i,this.settings.color=t,this._update()},e}());var TabbedPaneView;TabbedPaneView=function(){function e(){}return e.prototype.switchSection=function(e){return this.$(".js-content").addClass("hide").detach(),this.$(".js-loading-page").removeClass("hide"),this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e.target).addClass("active"),track(this.model.typeName+" View","Detail Sidebar","Open "+this.$(e.target).text()+" Page")},e}();var CollectionWithHelpers,CollectionWithHooks,LocalStorageModel,ModelLoader,TrelloModel,_ModelLoader,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};_ModelLoader=function(){function e(e){this.cache=e}return e.prototype._loadApiData=function(){var e,t,i,n,r,o,s,a;return i=arguments[0],e=arguments[1],o=arguments[2],s=5<=arguments.length?__slice.call(arguments,3,a=arguments.length-1):(a=3,[]),n=arguments[a++],r=s[0],t=s[1],async.auto({result:function(t){var n;return _.isString(i)||(i=i.prototype.typeName),n=Util.invitationTokens(),_.isEmpty(n)||(o.invitationTokens=n.join(",")),null==r&&(r=""+Util.pluralize(i)+"/"+e),QuickLoad("/1/"+r+"?"+$.param(o),function(e,i,n){var r;
return t(null,e),null!=(r=null!=n?n.getResponseHeader("X-Server-Time"):void 0)?Time.updateServerTime(parseInt(r)):void 0},function(n){return 0===(null!=n?n.indexOf("invalid token"):void 0)?Auth.logoutPost():t("Api load error on "+i+", "+e+", "+o+": "+n)})},header:function(e){return t?e():ModelLoader.waitFor("headerData",e)}},function(e){return function(t,r){var o;return o=r.result,t?void("function"==typeof n&&n(t)):null!=e.cache?e.cache.enqueueDelta(i,o,function(e,t){return"function"==typeof n?n(e,t):void 0}):n(t,o)}}(this))},e.prototype.loadHeaderData=function(e){return Auth.isLoggedIn()?this._loadApiData(Member,"me",payloads_notifications,void 0,!0,e):"function"==typeof e?e(null,{}):void 0},e.prototype.loadBoardsMenuData=function(e){return Auth.isLoggedIn()?this._loadApiData(Member,"me",payloads_boardsMenuMinimal,e):"function"==typeof e?e(null,{}):void 0},e.prototype.loadBoardData=function(e,t,i){return this._loadApiData(Board,e,t,i)},e.prototype.loadBoardListData=function(e,t,i){return this._loadApiData(Board,e,t,i)},e.prototype.loadCardData=function(){var e,t,i,n,r;return n=3<=arguments.length?__slice.call(arguments,0,r=arguments.length-2):(r=0,[]),t=arguments[r++],i=arguments[r++],e=n[0],null!=e?this._loadApiData(Card,t,payloads_card,"boards/"+e+"/cards/"+t,i):this._loadApiData(Card,t,payloads_card,i)},e.prototype.loadCardDetails=function(e,t,i,n){return this._loadApiData(Card,t,_.extend({actions_limit:i},payloads_cardDetails),"boards/"+e+"/cards/"+t,n)},e.prototype.loadCardVoters=function(e,t){return this._loadApiData(Card,e,payloads_cardVoters,"cards/"+e,t)},e.prototype.loadCardCopyData=function(e,t,i){return this._loadApiData(Card,t,payloads_cardCopy,"boards/"+e+"/cards/"+t,i)},e.prototype.loadNotificationData=function(e,t){return this._loadApiData(Member,e,{notifications:"all",notifications_limit:10},t)},e.prototype.loadMoreNotificationData=function(e,t,i){return $.get("/1/members/"+e+"/notifications",{filter:"all",limit:10,page:t}).done(function(e){return function(t){return e.cache.enqueueDelta(Notification.prototype.typeName,t,i)}}(this)).fail(function(){return"function"==typeof i?i("error"):void 0})},e.prototype.loadMemberBoardsData=function(e,t){return this._loadApiData(Member,e,payloads_memberBoards,t)},e.prototype.loadMemberCardsData=function(e,t){return this._loadApiData(Member,e,payloads_memberCards,t)},e.prototype.loadMemberEmail=function(e,t){return this._loadApiData(Member,e,{fields:"email",invitationTokens:Util.invitationTokens().join(",")},t)},e.prototype.loadOrganizationMemberGhost=function(e,t,i){var n,r;return n=null!=(r=Util.inviteTokenFor(e))?r.split("-")[0]:void 0,null==n?i(null,{}):this._loadApiData(Member,n,{fields:payloads_memberFields,invitationTokens:Util.invitationTokens().join(",")},function(e,t){return null!=e?i(null,{}):i(null,t)})},e.prototype.loadMyBoardsUnreadData=function(e){return this._loadApiData(Member,"me",payloads_memberUnreadBoards,e)},e.prototype.loadMoreActionData=function(){var e,t,i,n,r,o,s,a,l,c;return r=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3],l=6<=arguments.length?__slice.call(arguments,4,c=arguments.length-1):(c=4,[]),o=arguments[c++],t=l[0],e=l[1],a={filter:"all",limit:n,page:s},null!=t&&(a.idModels=t.join(",")),null!=e&&(a.filter=e),this._loadApiData(Action,i,a,""+r+"s/"+i+"/actions",o)},e.prototype.loadClosedCards=function(e,t,i){var n,r,o;return r=t.limit,n=t.before,o={stickers:!0},null!=r&&(o.limit=r),null!=n&&(o.before=n),this._loadApiData(Card,e,o,"boards/"+e+"/cards/closed",i)},e.prototype.loadClosedBoards=function(e){return this._loadApiData(Board,null,{filter:"closed"},"members/me/boards",e)},e.prototype.loadMemberData=function(e,t){return this._loadApiData(Member,e,{},t)},e.prototype.loadMemberPaidAccount=function(e,t){return this._loadApiData(Member,e,payloads_memberPaidAccount,t)},e.prototype.loadMemberAccountData=function(e,t){return this._loadApiData(Member,e,payloads_memberAccount,t)},e.prototype.loadMemberProfileData=function(e,t){var i,n;return n=payloads_memberProfile,i=payloads_memberProfile_daysBack,n.action_since=(new Date).addDays(-i).toString(),this._loadApiData(Member,e,payloads_memberProfile,t)},e.prototype.loadMemberPasswordData=function(e,t){return this._loadApiData(Member,e,{fields:"loginTypes"},t)},e.prototype.loadMemberCustomBackgrounds=function(e,t){return this._loadApiData(Member,e,{fields:"",boardBackgrounds:"custom"},t)},e.prototype.loadMemberCustomStickers=function(e,t){return this._loadApiData(Member,e,{fields:"",customStickers:"all"},t)},e.prototype.loadMemberCustomEmoji=function(e,t){return this._loadApiData(Member,e,{fields:"",customEmoji:"all"},t)},e.prototype.loadMemberRecommendData=function(e,t){return this._loadApiData(Member,e,{fields:"fullName,username",credits:"invitation,promoCode"},t)},e.prototype._loadOrganizationPayload=function(e,t,i){return this._loadApiData.call(this,Organization,t,e,i)},e.prototype.loadOrganizationData=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._loadOrganizationPayload.apply(this,[payloads_organization].concat(__slice.call(e)))},e.prototype.loadOrganizationBoardsData=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._loadOrganizationPayload.apply(this,[payloads_organizationBoardsPage].concat(__slice.call(e)))},e.prototype.loadOrganizationPaidAccount=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._loadOrganizationPayload.apply(this,[payloads_organizationPaidAccount].concat(__slice.call(e)))},e.prototype.loadOrganizationMinimal=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._loadOrganizationPayload.apply(this,[payloads_organizationMinimal].concat(__slice.call(e)))},e.prototype.loadOrganizationMembersData=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._loadOrganizationPayload.apply(this,[payloads_organizationMembers].concat(__slice.call(e)))},e.prototype.loadOrganizationMembersMinimal=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._loadOrganizationPayload.apply(this,[payloads_organizationMembersMinimal].concat(__slice.call(e)))},e.prototype.loadOrganizationMemberMinimal=function(e,t,i){return this._loadApiData(Member,t,payloads_memberMinimal,i)},e.prototype.loadOrgMemberCardData=function(e,t,i){return this._loadApiData(Card,e,payloads_orgMemberCards,"organization/"+e+"/members/"+t+"/cards",i)},e.prototype.loadOrgMemberMinimalData=function(e,t,i){return this._loadApiData(Card,e,payloads_orgMemberCards,"organization/"+e+"/members/"+t+"/cards",i)},e.prototype.loadOrganizationExportData=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],this._loadOrganizationPayload.apply(this,[payloads_organizationExports].concat(__slice.call(e)))},e.prototype.loadOrgNameById=function(e,t){return this._loadApiData(Organization,e,{fields:"name"},function(e,i){return t(e,null!=i?i.name:void 0)})},e.prototype.loadCurrentBoardData=function(e,t){return this.loadBoardData(e,payloads_currentBoardMinimal,t)},e.prototype.loadBoardActions=function(e,t){return this._loadApiData(Board,e,payloads_boardRecentActions,t)},e.prototype.loadBoardChecklists=function(e,t){return this._loadApiData(Board,e,payloads_boardChecklists,t)},e.prototype.loadBoardNames=function(e,t){return async.forEach(e,function(e){return function(t,i){return e._loadApiData(Board,t,{fields:["name","closed"].join(",")},i)}}(this),t)},e.prototype.loadMyOrganizations=function(e){return this.loadMemberOrganizations("me",e)},e.prototype.loadMemberOrganizations=function(e,t){return this._loadApiData(Member,e,payloads_organizations,t)},e.prototype.loadSearchData=function(e,t){return ABTest.inTest("elastic_search")&&(e.elasticsearch=!0),this._loadApiData("search",null,e,"search",t)},e}(),ModelLoader=new(function(e){function t(){this._loaders={},this._waitComplete={},this._waitCallbacks={}}return __extends(t,e),t.prototype.triggerWaits=function(e){var t,i,n,r,o;for(this._waitComplete[e]=!0,o=null!=(r=this._waitCallbacks[e])?r:[],i=0,n=o.length;n>i;i++)(t=o[i])();return delete this._waitCallbacks[e]},t.prototype.waitFor=function(e,t){var i;return this._waitComplete[e]?t():(null!=(i=this._waitCallbacks)[e]?i[e]:i[e]=[]).push(t)},t.prototype["for"]=function(e){var t;return _.isString(e)||(e=e.name),null!=(t=this._loaders)[e]?t[e]:t[e]=new _ModelLoader(ModelCacheCache["for"](e))},t.prototype.dropLoaderFor=function(e){return delete this._loaders[e.name]},t.prototype.cacheCallback=function(e,t){return function(i,n){var r,o;if(!i)return r=null!=(o="function"==typeof e?e(n):void 0)?o:e,_.isString(r)&&(r=ModelCacheCache["for"](r)),r.enqueueDelta(t,n)}},t}(_ModelLoader)),TrelloModel=function(e){function t(e,i){var n,r;this._marked={},this._lockQueue={},this.modelCache=null!=i?i.modelCache:void 0,this._apiQueue=async.queue(function(e,t){return e(t)},1),n=null,this._apiQueue.drain=function(e){return function(){var t;return t=n,n=null,e.modelCache.unlock(t)}}(this),this._apiQueue.saturated=function(e){return function(){return null!=n?n:n=e.modelCache.lock("TrelloModel "+e.id+" saturated")}}(this),t.__super__.constructor.apply(this,arguments),null!=(r=this.modelCache)&&r.add(this)}return __extends(t,e),t.prototype._initSubEventsOn=function(e){return this.listenTo(this,"change:"+e,function(t){return function(i,n){var r,o,s,a,l;o=null!=(a=i.previousAttributes())?a[e]:void 0,l=[];for(r in n)s=n[r],(null==o||s!==o[r])&&l.push(t.trigger("change:"+e+"."+r));return l}}(this))},t.prototype.waitForLock=function(e,t){var i;return i=function(t){return function(){var n;return _.isEmpty(t._lockQueue[e])?delete t._lockQueue[e]:(n=t._lockQueue[e].shift())(i)}}(this),null!=this._lockQueue[e]?this._lockQueue[e].push(t):(this._lockQueue[e]=[],t(i))},t.prototype.set=function(e){var i,n,r,o,s,a,l,c,d,u,p,h,m,f;_.isArray(e)&&(e=_.find(e,function(e){return e.id===this.id||e._id===this.id})),null!=(null!=e?e._id:void 0)&&(null==e.id&&(e.id=e._id),delete e._id),e=_.clone(e);for(s in e)if(c=e[s],s.indexOf("/")>=0){for(h=s.split("/"),l=h[0],n=3<=h.length?__slice.call(h,1,d=h.length-1):(d=1,[]),a=h[d++],null==e[l]&&(e[l]=null!=(m=_.clone(this.get(l)))?m:{}),r=e[l],o=u=0,p=n.length;p>u;o=++u)i=n[o],r=r[i]=null!=(f=_.clone(r[i]))?f:{};r[a]=c,delete e[s]}return t.__super__.set.apply(this,arguments)},t.prototype.destructor=function(){var e,t,i,n;if(this.off(),null!=this._using)for(n=this._using,t=0,i=n.length;i>t;t++)e=n[t],"function"==typeof e.destructor&&e.destructor();return Util.shred(this)},t.prototype.destroy=function(){return t.__super__.destroy.apply(this,arguments),this.destructor()},t.prototype.destruct=function(e){var t,i,n,r;if(_.isArray(e)){for(null==this._using&&(this._using=[]),r=[],i=0,n=e.length;n>i;i++)t=e[i],r.push(this._using.push(t));return r}return this.destruct([e])},t.prototype.waitForAttr=function(e,t){var i;return null!=(i=this.get(e))?t(null,i):this.once("change:"+e,function(i){return function(){return i.waitForAttr(e,t)}}(this))},t.prototype.waitForAttrs=function(e,i){return Util.mapping(e,t.prototype.waitForAttr.bind(this),function(t,n){return i(t,_.object(e,n))})},t.get=function(e,t,i){var n,r;return _.isArray(t)?(r=function(){var i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push(this.get(e,n));return o}.call(this),(null!=i?i.compact:void 0)?_.compact(r):r):ModelCacheCache["for"](e).get(this.prototype.typeName,t)},t.waitFor=function(){var e,t,i,n,r,o;return e=arguments[0],t=arguments[1],r=4<=arguments.length?__slice.call(arguments,2,o=arguments.length-1):(o=2,[]),i=arguments[o++],n=r[0],_.isArray(t)?async.map(t,function(t){return function(r){return t.waitFor(e,r,n,i)}}(this),i):ModelCacheCache["for"](e).waitFor(this.prototype.typeName,t,i)},t.all=function(e){return ModelCacheCache["for"](e).all(this.prototype.typeName)},t.find=function(){var e,t,i,n,r;return i=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],1===e.length?(n=e[0],_.filter(this.all(i),n)):(t=e[0],r=e[1],this.find(i,function(e){return e.get(t)===r}))},t.findOne=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],_.first(this.find.apply(this,e))},t.prototype.ready=function(e){e&&(this.isReady?e():(this.waitingForReady||(this.waitingForReady=[]),this.waitingForReady.push(e)))},t.prototype.setReady=function(){var e,t,i,n;if(this.isReady=!0,this.waitingForReady)for(t=this.waitingForReady,this.waitingForReady=null,i=0,n=t.length;n>i;i++)e=t[i],"function"==typeof e&&e()},t.prototype._handleError=function(e){return function(t,i,n,r){var o,s;return s=t.status,o=t.responseText,s>=400&&500>s?("undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error(o),"function"==typeof e?e(o,null):void 0):r()}},t.prototype.update=function(){var e,t,i,n,r,o,s,a,l,c;return _.isString(arguments[0])?(e=arguments[0],r=arguments[1],l=4<=arguments.length?__slice.call(arguments,2,s=arguments.length-1):(s=2,[]),i=l[0],t=arguments[s++],n={},n[e]=r):(n=arguments[0],c=3<=arguments.length?__slice.call(arguments,1,a=arguments.length-1):(a=1,[]),i=c[0],t=arguments[a++]),null!=i||_.isFunction(t)||(i=t,t=null),o=(null!=i?i:{}).waitForServer,o||this.set(n),this._persistUpdate(n,t)},t.prototype._persistUpdate=function(e,t){return this.api({type:"put",data:e},t)},t.prototype.addToSet=function(){var e,t,i,n,r,o,s,a,l,c,d;return e=arguments[0],o=arguments[1],a=4<=arguments.length?__slice.call(arguments,2,l=arguments.length-1):(l=2,[]),n=arguments[l++],r=a[0],null!=r||_.isFunction(n)||(r=n,n=function(){}),c=null!=r?r:{},s=c.waitForServer,t=c.collectionName,i=this,null==t&&(t=e),s||this.set(e,_.uniq((null!=(d=i.get(e))?d:[]).concat(o))),this.api({method:t,data:{value:o},success:function(t){return function(n,r){var s;return s={},s[e]=_.uniq(i.get(e).concat(o)),t.modelCache.enqueueDelta(i,s),"function"==typeof r?r(null,n):void 0}}(this)},n)},t.prototype.pull=function(){var e,t,i,n,r,o,s,a,l,c,d;return e=arguments[0],o=arguments[1],a=4<=arguments.length?__slice.call(arguments,2,l=arguments.length-1):(l=2,[]),n=arguments[l++],r=a[0],null!=r||_.isFunction(n)||(r=n,n=function(){}),c=null!=r?r:{},s=c.waitForServer,t=c.collectionName,i=this,null==t&&(t=e),s||this.set(e,_.without(null!=(d=i.get(e))?d:[],o)),this.api({method:""+t+"/"+o,type:"delete",success:function(t){return function(n,r){var s;return s={},s[e]=_.without(i.get(e),o),t.modelCache.enqueueDelta(i,s),"function"==typeof r?r(null,n):void 0}}(this)},n)},t.prototype.run=function(e,t,i){return this.api({method:e,data:t},i)},t.prototype.api=function(e,t){var i,n,r,o,s,a;return r=e.method,a=e.type,i=e.data,s=e.success,n=e.datatype,o=this,null==n&&(n=""),null==r&&(r=""),null==a&&(a="post"),null==i&&(i={}),null==s&&(s=function(e){return function(t,i){var n;return t.id===o.id?e.modelCache.enqueueDelta(o,t):_.isArray(t)&&(n=_.find(t,function(e){return e.id===o.id}),null!=n&&e.modelCache.enqueueDelta(o,n)),i(null,t)}}(this)),null==t&&(t=function(){}),this.onId(function(e){return function(){var o;return o=e.url(),null!=r&&""!==r&&(o+="/"+r),e._apiQueue.push(function(t){return ApiAjax({url:o,type:a,data:i,datatype:n,success:function(e){return s(e,t)},error:e._handleError(t)})},t)}}(this)),this},t.prototype.toggle=function(){var e,t,i,n,r,o,s;return t=arguments[0],r=arguments[1],e=arguments[2],o=5<=arguments.length?__slice.call(arguments,3,s=arguments.length-1):(s=3,[]),i=arguments[s++],n=o[0],this[e?"addToSet":"pull"](t,r,n,i)},t.prototype.onId=function(e){var t;t=this,t.id?e(t.id):t.once("change:id",function(){return function(){return e(t.id)}}(this))},t.prototype.redelegateOnRemove=function(e){return e.$el.on("remove",function(t){return function(){return _.defer(function(){return e.delegateEvents(),t.redelegateOnRemove(e)})}}(this))},t}(Backbone.Model),Util.extendWithModelCacheHelpers(TrelloModel),CollectionWithHelpers=function(e){function t(e,i){this.modelCache=null!=i?i.modelCache:void 0,t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.destructor=function(){var e,t;return this.off(),null!=(e=this.modelCache)&&e.off(null,null,this),null!=(t=this.sourceModel)&&t.off(null,null,this),Util.shred(this)},t.prototype.create=function(e,i){var n,r,o;return r=this.model,null==i&&(i={}),n=this.modelCache.lock("Collection Create"),o=i.success,i.success=function(e){return function(){var t;return t=1<=arguments.length?__slice.call(arguments,0):[],e.modelCache.unlock(n),"function"==typeof o?o.apply(null,t):void 0}}(this),null==i.modelCache&&(i.modelCache=this.modelCache),t.__super__.create.call(this,e,i)},t.prototype._update=function(e){var t,i;return t=_.sortBy(e,function(e){return e.cid}),i=_.sortBy(this.models,function(e){return e.cid}),_.isEqual(t,i)?void 0:this.reset(e)},t.prototype.owner=function(e){return this.owner=e,this},t.prototype.syncModel=function(e,t,i){var n,r,o,s;return this.sourceModel=e,r=(null!=i?i:{}).fxGetIds,this.modelCache=this.sourceModel.modelCache,o=function(e){return function(){var i,n,o;return i=e.sourceModel.get(t),null!=(n=null!=(o="function"==typeof r?r(i):void 0)?o:i)?n:[]}}(this),n=async.cargo(function(){return function(e,t){var i;return i=_.countBy(o()),_.any(e,function(e){return e.id in i})&&s(_.keys(i)),t()}}(this)),s=function(e){return function(t){return e._update(e.model.get(e.modelCache.name,t,{compact:!0}))}}(this),this.sync=function(){return function(){return s(o())}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.listenTo(this.modelCache,"add:"+this.model.prototype.typeName,function(){return function(e){return n.push(e)}}(this)),this.sync(),this},t.prototype.syncCache=function(e,t,i){var n,r,o,s;for(this.modelCache=e,this.sync=function(e){return function(){return e._update(_.filter(e.model.all(e.modelCache),i))}}(this),r=this.model.prototype.typeName,this.listenTo(this.modelCache,"add:"+r,function(e){return function(t){return i(t)?e.add(t):void 0}}(this)),this.listenTo(this.modelCache,"remove:"+r,function(e){return function(t){return i(t)?e.remove(t):void 0}}(this)),this.listenTo(this.modelCache,"reset:"+r,this.sync),o=0,s=t.length;s>o;o++)n=t[o],this.listenTo(this.modelCache,"change:"+r+":"+n,this.sync);return this.sync(),this},t.prototype.syncSubModels=function(e,t){return this.sourceModel=e,null==this.modelCache&&(this.modelCache=this.sourceModel.modelCache),this.sync=function(e){return function(){var i,n,r,o,s,a,l,c,d,u;for(i=e.models,a=null!=(d=e.sourceModel.get(t))?d:[],o=function(){var e,t,i;for(i=[],e=0,t=a.length;t>e;e++)n=a[e],s=_.find(this.models,function(e){return e.id===n.id}),null!=s?this.modelCache.enqueueDelta(s,n):s=new this.model(n,{modelCache:this.modelCache,collection:this}),i.push(s);return i}.call(e),u=e.models,l=0,c=u.length;c>l;l++)r=u[l],null==r.id&&o.push(r);return e._update(o)}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.sync(),this},t}(Backbone.Collection),Util.extendWithModelCacheHelpers(CollectionWithHelpers),CollectionWithHooks=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.addPlaceholder=function(e){var t;return t=_.uniqueId("placeholder"),_.extend(e,{id:t}),this.add(e),function(e){return function(){return e.remove(t)}}(this)},t}(CollectionWithHelpers),LocalStorageModel=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype["default"]=function(){return{}},t.prototype.sync=function(e,t,i){var n,r,o,s,a,l;switch(s=i.success,e){case"create":throw Error("not implemented");case"read":return r=null!=(l=Storage.get(t.id))?l:{},_.defaults(r,this["default"]()),"function"==typeof s?s(t,r,i):void 0;case"update":r=t.toJSON(),n=this["default"](),delete r.id;for(o in r)a=r[o],_.isEqual(a,n[o])&&delete r[o];return _.isEmpty(r)?Storage.unset(t.id):Storage.set(t.id,r),"function"==typeof s?s(t,t.toJSON(),i):void 0;case"delete":return Storage.unset(t.id),"function"==typeof s?s(t,null,i):void 0}},t.prototype._persistUpdate=function(e,t){var i;return Storage.set(this.id,_.extend(null!=(i=Storage.get(this.id))?i:this["default"](),e)),"function"==typeof t?t(null,this.toJSON()):void 0},t.prototype.toggle=function(e,t){return this.inSet(e,t)?(this.pull(e,t),!1):(this.addToSet(e,t),!0)},t.prototype.inSet=function(e,t){var i;return __indexOf.call(null!=(i=this.get(e))?i:[],t)>=0},t.prototype.addToSet=function(e,t){var i;return this.save(e,(null!=(i=this.get(e))?i:[]).concat(t))},t.prototype.pull=function(e,t){var i;return this.save(e,_.without(null!=(i=this.get(e))?i:[],t))},t}(TrelloModel),Backbone.prepareData=function(e,t,i){var n,r;return r={token:Auth.myToken()},n=function(){var n;switch(e){case"create":case"update":return _.extend(null!=(n=null!=i?i.requestData:void 0)?n:t.toJSON(),r);case"delete":return r;default:return{}}}(),"read"===e&&_.isArray(i.fields)&&(n.fields=i.fields.join(",")),"read"===e?$.param(n):JSON.stringify(n)},Backbone.syncOriginal=Backbone.sync,Backbone.sync=function(e,t,i){var n,r,o;switch(e){case"update":return null!=i&&"function"==typeof i.success?i.success(t,{},i):void 0;case"create":i.wait||(n=t.modelCache.lock("Backbone.sync create"),r=_.once(function(){return t.modelCache.unlock(n)}),o=function(e){return function(){return"function"==typeof e&&e.apply(null,arguments),r()}},setTimeout(o(),1e4),i.success=o(i.success),i.error=o(i.error));break;case"delete":if(/^placeholder/.test(t.id))return}return Backbone.syncOriginal.apply(Backbone,arguments)};var ModelWithPersonalPreferences,ModelWithPreferences,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};ModelWithPreferences=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("prefs")}return __extends(t,e),t.prototype.prefNames=[],t.prototype.toJSON=function(e){var i,n;return null==e&&(e={}),i=t.__super__.toJSON.apply(this,arguments),n=function(e){return function(t,r,o){var s,a,l,c,d,u,p;for(p=[],c=0,d=t.length;d>c;c++)a=t[c],s=o?""+o+"_"+a:a,l=null!=(u=null!=r?r[a]:void 0)?u:e.getPref(a),_.isObject(l)&&!_.isArray(l)?p.push(n(_.keys(l),l,s)):(i[s]=l,p.push(i[""+s+"_"+l]=!0));return p}}(this),e.prefs&&n(this.prefNames),i},t.prototype.getPref=function(e){var t;return null!=(t=this.get("prefs"))?t[e]:void 0},t.prototype.setPref=function(e,t){return this.update("prefs/"+e,t)},t.prototype.set=function(e){var i,n,r;if(e=_.clone(e),null!=e.prefs){n=e.prefs;for(i in n)r=n[i],"none"===r&&(r="disabled"),"owners"===r&&(r="admins"),n[i]=r}return t.__super__.set.apply(this,arguments)},t}(TrelloModel),ModelWithPersonalPreferences=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("myPrefs")}return __extends(t,e),t.prototype.myPrefNames=[],t.prototype.myPrefDefaults={},t.prototype.toJSON=function(e){var i,n,r,o,s,a;if(null==e&&(e={}),i=t.__super__.toJSON.apply(this,arguments),e.prefs)for(a=this.myPrefNames,o=0,s=a.length;s>o;o++)n=a[o],r=this.getPref(n),i[n]=r,i[""+n+"_"+r]=!0;return i},t.prototype.getPref=function(e){var i,n;return __indexOf.call(this.myPrefNames,e)>=0?null!=(i=null!=(n=this.get("myPrefs"))?n[e]:void 0)?i:this.myPrefDefaults[e]:t.__super__.getPref.apply(this,arguments)},t.prototype.setPref=function(e,i){return __indexOf.call(this.myPrefNames,e)>=0?this.setMyPref(e,i):t.__super__.setPref.apply(this,arguments)},t.prototype.setMyPref=function(e,t){var i;return this.api({type:"put",method:"myPrefs/"+e,data:{value:t}}),i=_.clone(this.get("myPrefs")),i[e]=t,this.set({myPrefs:i})},t}(ModelWithPreferences);var Membership,MembershipList,MembershipModel,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};Membership=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t}(TrelloModel),MembershipList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Membership,t.prototype.initialize=function(){return this.memberIndex={},this.listenTo(this,"add",function(e){return function(t){return e.memberIndex[t.get("idMember")]=t}}(this)),this.listenTo(this,"remove",function(e){return function(t){return delete e.memberIndex[t.get("idMember")]}}(this)),this.listenTo(this,"reset",function(e){return function(){var t,i,n,r,o;for(e.memberIndex={},r=e.models,o=[],i=0,n=r.length;n>i;i++)t=r[i],o.push(e.memberIndex[t.get("idMember")]=t);return o}}(this))},t.prototype.getMember=function(e){var t,i;return t=null!=(i=null!=e?e.id:void 0)?i:e,this.memberIndex[t]},t}(CollectionWithHelpers),MembershipModel=function(){function e(){}return e.prototype.orderedVisibleMembers=function(){return this.memberList.sortBy(function(e){return function(t){var i;return i=function(){if(Auth.isMe(t))return"0";if(this.isDeactivated(t))return"5";if(this.isVirtual(t))return"4";switch(t.get("status")){case"active":return"1";case"idle":return"2";default:return"3"}}.call(e),i+t.get("fullName")}}(this)).filter(function(e){return function(t){return(!e.isDeactivated(t)||e.canSeeDeactivated(Auth.me()))&&!e.isObserver(t)}}(this))},e.prototype.getMemberType=function(e){var t,i;return t=("function"==typeof this.getOrganization&&null!=(i=this.getOrganization())?i.isPremOrgAdmin(e):void 0)?"admin":this.getExplicitMemberType(e),"public"!==t&&("function"==typeof this.isVirtual?this.isVirtual(e):void 0)&&(t="virtual"),t},e.prototype._refreshMemberships=function(){return this._memberships.update(this.get("memberships"))},e.prototype._getMembershipFor=function(e){return this._memberships||(this._memberships=new MembershipList,this._refreshMemberships(),this.listenTo(this,"change:memberships",this._refreshMemberships)),this._memberships.getMember(e)},e.prototype.getMembershipFor=function(e){var t;return null!=(t=this._getMembershipFor(e))?t.toJSON():void 0},e.prototype.isMember=function(e){return null!=this._getMembershipFor(e)},e.prototype.isVirtual=function(e){return"ghost"===(null!=e?e.get("memberType"):void 0)},e.prototype.isDeactivated=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("deactivated"):void 0)===!0},e.prototype.isUnconfirmed=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("unconfirmed"):void 0)===!0},e.prototype.isObserver=function(e){return"observer"===this.getExplicitMemberType(e)},e.prototype.isPremOrgAdmin=function(e){var t,i,n,r;return _.isString(e)&&(e=this.Member.get(e)),i=null!=(n=null!=e&&"function"==typeof e.get?e.get("idPremOrgsAdmin"):void 0)?n:[],t=this.getOrganization?null!=(r=this.getOrganization())?r.id:void 0:this.id,__indexOf.call(i,t)>=0},e.prototype.getExplicitMemberType=function(e){var t,i;return this.isDeactivated(e)?"deactivated":this.isUnconfirmed(e)?"unconfirmed":(t=this._getMembershipFor(e))?t.get("memberType"):("function"==typeof this.getOrganization&&null!=(i=this.getOrganization())?i.isMember(e):void 0)?"org":"public"},e.prototype.canSeeDeactivated=function(e){var t,i;return this.isMember(e)||(null!=(t=e.organizationList)?t.get(null!=(i=this.getOrganization())?i.id:void 0):void 0)},e}();var CardSearchResultView,InstantSearchView,MemberSearchResultView,MemberSearchView,SavedSearch,SavedSearchList,SavedSearchView,Search,SearchInputView,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Search=new(function(){function e(){}return e.prototype.navigateToSearch=function(e,t){var i;return i=(null!=t?t:{trigger:!1}).trigger,Controller.navigate(Controller.getSearchUrl(e),{trigger:i})},e.prototype.init=function(){var e,t,i;this.keywordMap=this.getKeywordMap(),this.keywordsWithVariants=_.object(function(){var t,n;t=this.keywordMap,n=[];for(e in t)i=t[e],i.hasOwnProperty("variants")&&n.push([e,i]);return n}.call(this)),this.keywords=_.keys(this.keywordMap),this.variants=_.compact(_.flatten(function(){var i,n;i=this.keywordMap,n=[];for(e in i)t=i[e],n.push(t.variants);return n}.call(this))),this.keywordsAndVariants=this.keywords.concat(this.variants),this.keywordsWithSearchSuggest=_.object(function(){var t,n;t=this.keywordMap,n=[];for(e in t)i=t[e],i.hasOwnProperty("suggestionsSearchModelTypes")&&n.push([e,i]);return n}.call(this))},e.prototype.inputIndex=null,e.prototype.isOnSearchPage=function(){return"search"===Controller.viewType},e.prototype.getSuggestionObjectContainingVariantOrKey=function(e){var t,i,n;if(i=this.keywordMap[e],null!=i)return{key:e,obj:i};n=this.keywordsWithVariants;for(t in n)if(i=n[t],__indexOf.call(i.variants,e)>=0)return{key:t,obj:i};return{}},e.prototype.findKeywords=function(e){var t;return""===e?[]:t=_.filter(this.keywordsAndVariants,function(t){return RegExp("^"+Util.escapeForRegex(e)).test(t)})},e.prototype.findUniqueKeywords=function(e){var t,i;return t=this.findKeywords(e),i=_.uniq(t,!1,function(e){return function(t){return e.getSuggestionObjectContainingVariantOrKey(t).key}}(this))},e.prototype.getKeywordMap=function(){return{"is:archived":{variants:["archived","is:closed","closed"],description:"Only include archived cards.",containsRegex:/\bis:archived\b/},"is:open":{variants:["open"],description:"Only include open cards.",containsRegex:/\bis:open\b/},"is:starred":{variants:["is:starred"],description:"Only include cards on starred boards.",containsRegex:/\bis:starred\b/},"has:attachments":{variants:["attachments"],description:"Only include cards with attachments.",containsRegex:/\bhas:attachments\b/},"has:cover":{variants:["cover"],description:"Only include cards with a cover.",containsRegex:/\bhas:cover\b/},"has:description":{variants:["description"],description:"Only include cards that have a description.",containsRegex:/\bhas:description\b/},"has:stickers":{variants:["stickers"],description:"Only include cards that have stickers.",containsRegex:/\bhas:stickers\b/},"has:members":{variants:["members"],suggestString:"has:members",description:"Only include cards that have members assigned.",containsRegex:/\bhas:members\b/},"@":{moreInputNeeded:!0,description:"Cards assigned to a member.",containsRegex:/@\S*\b/,suggestionsSearchModelTypes:"members"},"@me":{variants:["me"],description:"Only include cards assigned to me.",containsRegex:/\b@me\b/},"member:":{moreInputNeeded:!0,description:"Cards assigned to a member.",containsRegex:/\bmember:\S*\b/,suggestionsSearchModelTypes:"members"},"label:":{moreInputNeeded:!0,description:"Cards with this label.",containsRegex:/\blabel:\S*\b/},"#":{moreInputNeeded:!0,description:"Cards with this label.",containsRegex:/\b\#\S*\b/},"board:":{moreInputNeeded:!0,description:"Only cards on a particular board.",containsRegex:/\bboard:\S*\b/,suggestionsSearchModelTypes:"boards"},"list:":{moreInputNeeded:!0,description:"Cards in the list with matching text.",containsRegex:/\blist:\S*\b/},"name:":{moreInputNeeded:!0,description:"Cards that match text in the name.",containsRegex:/\bname:\S*\b/},"comment:":{moreInputNeeded:!0,description:"Cards that match text in the comment.",containsRegex:/\bcomment:\S*\b/},"checklist:":{moreInputNeeded:!0,description:"Cards that match text in a checklist.",containsRegex:/\bchecklist:\S*\b/},"description:":{moreInputNeeded:!0,description:"Cards that match text in the description.",containsRegex:/\bdescription:\S*\b/},"due:day":{variants:["day","today"],description:"Cards due in the next 24 hours.",containsRegex:/\bdue:day\b/},"due:week":{description:"Cards due in the next 7 days.",containsRegex:/\bdue:week\b/},"due:month":{description:"Cards due in the next 28 days.",containsRegex:/\bdue:month\b/},"due:overdue":{variants:["overdue"],description:"Cards that are past due.",containsRegex:/\bdue:overdue\b/},"created:day":{description:"Cards created in the last 24 hours.",containsRegex:/\bcreated:day\b/},"created:week":{description:"Cards created in the last 7 days.",containsRegex:/\bcreated:week\b/},"created:month":{description:"Cards created in the last 28 days.",containsRegex:/\bcreated:month\b/},"edited:day":{description:"Cards edited in the last 24 hours.",containsRegex:/\bedited:day\b/},"edited:week":{description:"Cards edited in the last 7 days.",containsRegex:/\bedited:week\b/},"edited:month":{description:"Cards edited in the last 28 days.",containsRegex:/\bedited:month\b/}}
},e}()),window.Search=Search,SearchInputView=function(e){function t(){this.fSearchOpen=!1,this.saveQueryDebounced=_.debounce(this.saveQuery,100),this.openSearchResultsViewDebounced=_.debounce(this.openSearchResultsView,100),this.autosuggestDebounced=_.debounce(this.autosuggest,100),UserInput.addHandler(this,{scope:"search_box"}),t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderInputState"),this.listenTo(SearchState,{"change:query":this.renderInputQuery})},t.prototype.events={"keydown .js-search-input":"searchKeydown","click .js-search-input":"openSearchResultsView","focus .js-search-input":"openSearchResultsView","click .js-open-search-page":"openSearchPage","click .js-search-focus":"openSearchResultsView","mousedown .js-search-close":"clearSearch",shortcut:"shortcut"},t.prototype.render=function(){return this.$el.html(templates.fill("header_search")),this.renderInputStateDebounced(),this.$(".js-search-input").val(SearchState.getQuery()),this},t.prototype.renderInputQuery=function(){var e,t,i;e=this.$(".js-search-input"),i=e.val(),t=SearchState.getQuery(),e.length>0&&i!==t&&(e.val(t),Util.setCaretAtEnd(e))},t.prototype.renderInputState=function(){var e,t;t=this.fSearchOpen,e=this.hasInputValue(),this.$(".js-search-input").toggleClass("header-search-input-wide focus",t),this.$(".js-search-icon, .js-close-icon, .js-open-button").toggleClass("header-search-icon-dark",t),this.$(".js-search-icon").toggleClass("hide",t),this.$(".js-close-icon").toggleClass("hide",!t),this.$(".js-open-button").toggleClass("hide",!t)},t.prototype.hasInputValue=function(){var e;return(null!=(e=this.$(".js-search-input").val())?e.length:void 0)>0},t.prototype.shortcut=function(e,t){return e!==Key_Forward_Slash||t?void 0:(this.focusInput(),"Search")},t.prototype.focusInput=function(){var e;e=this.$(".js-search-input"),e.length&&Util.setCaretAtEnd(e)},t.prototype.clearSearch=function(e){Util.stop(e),this.closeSearch()},t.prototype.closeSearch=function(){this.$(".js-search-input").val("").blur(),SearchState.setQuery(""),this.fSearchOpen=!1,this.renderInputStateDebounced()},t.prototype.searchKeydown=function(e){var t,i,n,r;return this.renderInputStateDebounced(),(i=e.keyCode)===Key_Enter||i===Key_Tab||i===Key_Arrow_Right?(t=$(".js-select-suggestion.selected").length,void(t&&(Util.stop(e),$(".js-select-suggestion.selected").click()))):(n=e.keyCode)===Key_Arrow_Up||n===Key_Arrow_Down?(t=$(".js-select-suggestion.selected").length,void(t&&(Util.stop(e),Util.navMenuList($(".js-search-suggestions-list"),".js-select-suggestion",e.keyCode)))):(r=e.keyCode,void(__indexOf.call(_.flatten([Keys_Control,Key_Arrow_Left,Key_Escape]),r)>=0||(this.autosuggestDebounced(),this.saveQueryDebounced(),this.openSearchResultsViewDebounced())))},t.prototype.autosuggest=function(){var e,t,i,n,r,o,s,a,l,c,d,u;e=this.$(".js-search-input"),c=Util.getWordFromCaret(e).str,n=Search.findUniqueKeywords(c),s=SearchState.getQuery(),Search.inputIndex=Util.getCaretPosition(e),r=_.filter(n,function(e){var t;return t=Search.getSuggestionObjectContainingVariantOrKey(e).obj.containsRegex,!t.test(s)}),SearchState.setSuggestions(r),t=!1,u=Search.keywordsWithSearchSuggest;for(i in u)if(l=u[i],a=l.containsRegex,a.test(c))return t=!0,d=l.suggestionsSearchModelTypes,SearchState.setSuggestionSearchModelTypes(d),o=c.replace(RegExp("^"+i),""),void SearchState.setSuggestionSearchTerm(o);t||(SearchState.clearSuggestionSearchTerm(),SearchState.clearSuggestionSearchModelTypes())},t.prototype.saveQuery=function(){var e;e=this.$(".js-search-input").val(),SearchState.setQuery(e),/\/search/.test(location.pathname)&&Controller.navigate(Controller.getSearchUrl(e),{replace:!0})},t.prototype.getResultsView=function(){return this.subview(InstantSearchView,null,null,"headerSearchResultsView")},t.prototype.openSearchResultsView=function(e){var t;Util.stop(e),this.fSearchOpen||Search.isOnSearchPage()||(this.fSearchOpen=!0,t=this.$(".js-search-input"),t.focus(),Util.setCaretAtEnd(t),PopOver.show({elem:t,top:t.outerHeight()+8,view:InstantSearchView,elActive:t,hidden:_.bind(this.closeSearch,this)})),this.fSearchOpen=!0,this.renderInputStateDebounced()},t.prototype.openSearchPage=function(e){var t;return Util.stop(e),t=SearchState.getQuery(),PopOver.hide(),Search.navigateToSearch(t,{trigger:!0}),track("Header","Open Search Page")},t}(ViewWithId),InstantSearchView=function(e){function t(){this.results=null,this.serial=0,this.suggestSerial=0,this.cardPageNumber=0,this.cardsLimit=Search.isOnSearchPage()?12:8,this.searchStates=["no-results","no-input","searching","search-results","err"],this.searchState="no-results",t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Search Results"},t.prototype.className="search-results-view",t.prototype.displayType="search-over",t.prototype.hideHeader=!0,t.prototype.maxWidth="600",t.prototype.initialize=function(){return this.makeDebouncedMethods("renderSearchedSuggestions"),this.listenTo(SearchState,{"change:query":this.debounce(this.update,200),"change:suggestions":this.renderSuggestions,"change:suggestionSearchTerm":this.renderSearchedSuggestionsDebounced}),this.listenTo(Auth.me().savedSearchList,"add remove reset change",this.renderSavedSearches)},t.prototype.events={"click .js-see-all-saved-searches":"clearSearch","click .js-saved-search-name":"doSavedSearch","sortstop .js-saved-searches-list":"sortStop","click .js-save-this-search":"saveThisSearch","input .js-saved-search-name-input":"changeSearchName","submit .js-save-this-search-form":"confirmSave","click .js-save-this-search-cancel":"cancelSave","click .js-show-search-tips":"showTips","click .js-member-results .js-list .js-select-member":"trackMemClick","click .js-org-results .js-list .list-card":"trackOrgClick","click .js-select-suggestion":"selectSuggestion","mouseenter .js-select-suggestion":"mouseenterSuggestion","mouseleave .js-select-suggestion":"mouseleaveSuggestion","click .js-show-more-cards":"showMoreCards","click .js-show-more-boards":"showMoreBoards","click .js-show-more-members":"showMoreMembers","click .js-show-more-orgs":"showMoreOrgs","mouseenter .search-result-card-hover-target":"highlightCard","mouseleave .search-result-card-hover-target":"unHighlightCard"},t.prototype.update=function(){var e,t,i,n;return t=null!=t?t:SearchState.getQuery(),this.err=null,this.results=_.isEmpty(t)?{}:null,++this.serial,i=this.serial,this.renderResults(),_.isEmpty(t)?void 0:(e={query:t,partial:"undefined"!=typeof partial&&null!==partial?partial:!0,modelTypes:"cards,boards,organizations,members",board_fields:"name,url,prefs",cards_limit:null!=(n=this.cardsLimit)?n:6,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover",boards_limit:8,members_limit:8,organizations_limit:6},ModelLoader["for"](this.modelCache).loadSearchData(e,function(e){return function(t,n){var r,o;return e.err=t,i!==e.serial?(r=_.pluck(null!=n&&null!=(o=n.options)?o.terms:void 0,"text"),void log("search","discarding search for "+r+", serial "+i)):(e.err=t,e.results=n,e.renderResults())}}(this)))},t.prototype.getMoreCards=function(e,t){var i,n,r,o,s;r=t.partial,i=t.cards_page,n={query:e,partial:null!=r?r:!1,modelTypes:"cards",cards_limit:null!=(o=this.cardsLimit)?o:6,cards_page:null!=(s=this.cardPageNumber)?s:0,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover"},ModelLoader["for"](this.modelCache).loadSearchData(n,function(e){return function(t,i){var n,r;return e.err=t,n=_.pluck(null!=(r=null!=i?i.cards:void 0)?r:[],"id"),e.err=t,e.results.cards=i.cards,e.$(".js-loading-cards").addClass("hide"),e.renderCardResults(n,{append:!0})}}(this))},t.prototype.render=function(){var e;return e={savedSearchesEnabled:Auth.me().isFeatureEnabled("savedSearches")},this.$el.html(templates.fill("search_instant_results",e)),this.update(),this.renderSuggestions(),this.renderSearchedSuggestionsDebounced(),this},t.prototype.selectSuggestion=function(e){var t,i,n,r,o,s,a;Util.stop(e),t=$(e.target).closest(".js-select-suggestion"),o=t.attr("data-suggestionphrase"),s=Search.keywordMap[o],n=SearchState.getQuery(),i=Search.inputIndex,r=Util.removeWordAtIndex(n,i),a=Util.stripExtraSpaces(""+r+" "+o),(null!=s?s.moreInputNeeded:void 0)||(a+=" "),SearchState.clearSuggestions(),SearchState.setQuery(a),SearchState.clearSuggestionSearchTerm(),SearchState.clearSuggestionSearchModelTypes()},t.prototype.mouseleaveSuggestion=function(){return this.$(".js-select-suggestion").removeClass("selected")},t.prototype.mouseenterSuggestion=function(e){return $(e.target).closest(".js-select-suggestion").addClass("selected")},t.prototype.renderSuggestions=function(){var e,t,i,n,r,o,s,a,l,c;if(a=SearchState.getSuggestions(),i=a.length>0,e=this.$(".js-search-suggestions"),t=e.find(".js-search-suggestions-list").empty(),i){for(n="",l=0,c=a.length;c>l;l++)r=a[l],o=Search.getSuggestionObjectContainingVariantOrKey(r),s=o.obj,s.phrase=o.key,n+=templates.fill("search_suggetion",s);t.append(n),this.$(".js-select-suggestion").first().addClass("selected"),e.removeClass("hide")}else e.addClass("hide");return this},t.prototype.renderSearchedSuggestions=function(){var e,t,i,n,r;e=this.$(".js-search-suggestions").addClass("hide"),t=e.find(".js-search-suggestions-list").empty(),++this.suggestSerial,r=this.suggestSerial,n=SearchState.getSuggestionSearchTerm(),""!==n&&(i={query:n,modelTypes:SearchState.getSuggestionSearchModelTypes(),partial:!0,board_fields:"name,url,prefs",boards_limit:6,members_limit:6},ModelLoader["for"](this.modelCache).loadSearchData(i,function(i){return function(n,o){var s,a,l,c,d,u,p,h,m,f,g,b,v,y,_;if(r===i.suggestSerial&&(a=(null!=o&&null!=(b=o.boards)?b.length:void 0)>0,l=(null!=o&&null!=(v=o.members)?v.length:void 0)>0,c=a||l,d="",c&&!n)){if(a)for(y=o.boards,h=0,f=y.length;f>h;h++)p=y[h],s=p,s.phrase='board:"'+p.name+'"',d+=templates.fill("search_suggetion_board",s);else if(l)for(_=o.members,m=0,g=_.length;g>m;m++)p=_[m],s=p,s.phrase="@"+p.username,u={member:templates.member},d+=templates.fill("search_suggetion_member",s,"",u);return t.append(d),i.$(".js-select-suggestion").first().addClass("selected"),e.removeClass("hide")}}}(this)))},t.prototype.renderResults=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m,f;for(t=_.pluck(null!=(a=null!=(l=this.results)?l.cards:void 0)?a:[],"id"),e=_.pluck(null!=(c=null!=(d=this.results)?d.boards:void 0)?c:[],"id"),i=_.pluck(null!=(u=null!=(p=this.results)?p.members:void 0)?u:[],"id"),n=_.pluck(null!=(h=null!=(m=this.results)?m.organizations:void 0)?h:[],"id"),this.searchState=null!=this.err?"err":""===SearchState.getQuery()?"no-input":null==this.results?"searching":_.all([t,e,i,n],_.isEmpty)?"no-results":(this.renderCardResults(t),this.renderBoardResults(e),this.renderMemberResults(i),this.renderOrganizationResults(n),"search-results"),this.renderSavedSearches(),f=this.searchStates,o=0,s=f.length;s>o;o++)r=f[o],this.$(".js-"+r).toggleClass("hide",r!==this.searchState);return this},t.prototype.renderSavedSearches=function(){var e,t,i,n,r,o;return r="no-input"===this.searchState,e=this.$(".js-save-this-search-menu"),n=!e.hasClass("hide"),this.$(".js-saved-search-links").toggleClass("hide",r||n),t=this.$(".js-saved-searches").toggleClass("hide",!r),r?(e.addClass("hide"),this.renderSavedSearchItems(t)):(o=SearchState.getQuery(),i=_.find(Auth.me().savedSearchList.models,function(e){return e.toJSON().query===o}),null!=i&&this.$(".js-current-search-name").text(i.get("name")),this.$(".js-save-this-search").toggleClass("hide",null!=i),this.$(".js-current-search").toggleClass("hide",null==i)),this},t.prototype.renderSavedSearchItems=function(e){var t,i,n,r,o;return t=e.find(".js-saved-searches-list"),t.sortable({axis:"y",delay:"75",distance:"7",containment:".js-saved-searches-list",tolerance:"pointer",items:".saved-search",start:function(e,t){var i;return DragSort.sorting=!0,i=$(t.helper).outerHeight(),$(t.placeholder).height(i)},stop:function(){return _.defer(function(){return DragSort.sorting=!1})}}),i=Auth.me(),r=i.savedSearchList.models,this.$(".js-no-saved-searches").toggleClass("hide",r.length>0),o=function(){var e,t,i;for(i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(this.subview(SavedSearchView,n,{parent:this}));return i}.call(this),t.empty(),this.appendSubviews(o,t),this},t.prototype.renderCardResults=function(e,t){var i,n,r,o,s,a,l;return r=(null!=t?t:{}).append,i=this.$(".js-card-results").addClass("hide"),e.length>0&&(n=i.find(".js-list"),null==r&&n.empty(),s=function(){var t,i,n;for(n=[],t=0,i=e.length;i>t;t++)a=e[t],o=this.Card.get(a),n.push(this.subview(CardSearchResultView,o));return n}.call(this),this.appendSubviews(s,n),i.removeClass("hide")),l=e.length===this.cardsLimit,this.$(".js-show-more-cards").toggleClass("hide",!l),this},t.prototype.renderBoardResults=function(e){var t,i,n,r,o;return t=this.$(".js-board-results").addClass("hide"),e.length>0&&(i=t.find(".js-list").empty(),n=function(){var t,i,n;for(n=[],t=0,i=e.length;i>t;t++)r=e[t],n.push(this.subview(BoardListSearchItemView,this.Board.get(r)));return n}.call(this),this.appendSubviews(n,i),t.removeClass("hide")),o=!1,this.$(".js-show-more-boards").toggleClass("hide",!o),this},t.prototype.renderMemberResults=function(e){var t,i,n,r,o;return t=this.$(".js-member-results").addClass("hide"),e.length>0&&(i=t.find(".js-list").empty(),r=function(){var t,i,r;for(r=[],t=0,i=e.length;i>t;t++)n=e[t],r.push(this.subview(MemberSearchResultView,this.Member.get(n)));return r}.call(this),this.appendSubviews(r,i),t.removeClass("hide")),o=!1,this.$(".js-show-more-members").toggleClass("hide",!o),this},t.prototype.renderOrganizationResults=function(e){var t,i,n,r;return t=this.$(".js-org-results").addClass("hide"),e.length>0&&(r=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(templates.fill("organization_search_list_item",this.Organization.get(i).toJSON()));return r}.call(this),t.removeClass("hide").find(".js-list").empty().append(r)),n=!1,this.$(".js-show-more-orgs").toggleClass("hide",!n),this},t.prototype.clearSearch=function(){return SearchState.setQuery("")},t.prototype.doSavedSearch=function(e){var t;return t=this.$(e.target).closest(".saved-search").find(".js-saved-search-query").text(),SearchState.setQuery(t)},t.prototype.sortStop=function(e,t){Util.stopPropagation(e),t.item.trigger("movesavedsearch",[t])},t.prototype.saveThisSearch=function(){return this.$(".js-saved-search-links").addClass("hide"),this.$(".js-save-this-search-menu").removeClass("hide"),this.$(".js-saved-search-name-input").val("").focus(),this.$(".js-save-this-search-submit").addClass("disabled")},t.prototype.changeSearchName=function(){var e,t;return t=this.$(".js-save-this-search-submit"),e=this.$(".js-saved-search-name-input"),t.toggleClass("disabled",0===e.val().trim().length)},t.prototype.confirmSave=function(e){var t,i;return Util.preventDefault(e),this.$(".js-save-this-search-submit").hasClass("disabled")?void 0:(t=this.$(".js-saved-search-name-input").val().trim(),i=SearchState.getQuery(),Auth.me().savedSearchList.saveSearch(t,i),this.cancelSave())},t.prototype.cancelSave=function(){return this.$(".js-saved-search-links").removeClass("hide"),this.$(".js-save-this-search-menu").addClass("hide")},t.prototype.closeAllDeleteMenus=function(){var e,t,i,n,r;for(n=this.subviewsOfType(SavedSearchView),r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(e.cancelDeletion());return r},t.prototype.trackMemClick=function(){return track("Search","Select Member")},t.prototype.trackOrgClick=function(){return track("Search","Select Organization")},t.prototype.showTips=function(e){Util.stop(e),this.$(".js-search-tips-helper").addClass("hide"),this.$(".js-search-tips-list").removeClass("hide")},t.prototype.showMoreCards=function(){this.$(".js-loading-cards").removeClass("hide"),this.$(".js-show-more-cards").addClass("hide"),this.cardPageNumber++,this.getMoreCards(SearchState.getQuery(),{partial:!0})},t.prototype.showMoreBoards=function(){},t.prototype.showMoreMembers=function(){},t.prototype.showMoreOrgs=function(){},t.prototype.highlightCard=function(e){var t;t=$(e.target).closest(".search-result-card").addClass("search-result-card-highlight-card"),t.closest(".js-list").addClass("search-result-card-highlight-section")},t.prototype.unHighlightCard=function(e){var t;t=$(e.target).closest(".search-result-card").removeClass("search-result-card-highlight-card"),t.closest(".js-list").removeClass("search-result-card-highlight-section")},t}(ViewWithId),SavedSearch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typename="SavedSearch",t}(TrelloModel),SavedSearchList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=SavedSearch,t.prototype.url=function(){return"/1/member/"+this.member.id+"/savedSearches"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.saveSearch=function(e,t){var i;return i=this.length?this.at(this.length-1).get("pos")+Util.spacing:Util.spacing,this.create({name:e,query:t,pos:i},{modelCache:this.modelCache})},t}(CollectionWithHooks),SavedSearchView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="saved-search",t.prototype.events={"click .js-delete-saved-search":"deleteSavedSearch","click .js-delete-saved-search-confirm":"confirmDeletion","click .js-delete-saved-search-cancel":"cancelDeletion",movesavedsearch:"moveSavedSearch"},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.allowDelete=Auth.me().isFeatureEnabled("savedSearches")||"@me"!==e.query,this.$el.html(templates.fill("saved_search",e)),this},t.prototype.deleteSavedSearch=function(){return this.options.parent.closeAllDeleteMenus(),this.$(".js-saved-search-name").addClass("saved-search-item-faded"),this.$(".js-delete-saved-search").addClass("hide"),this.$(".js-delete-saved-search-menu").removeClass("hide"),_.defer(function(e){return function(){return e.$(".js-delete-saved-search-menu").addClass("saved-search-delete-menu-shown")}}(this))},t.prototype.confirmDeletion=function(){return this.model.destroy()},t.prototype.cancelDeletion=function(){return this.$(".js-saved-search-name").removeClass("saved-search-item-faded"),this.$(".js-delete-saved-search").removeClass("hide"),this.$(".js-delete-saved-search-menu").addClass("hide").removeClass("saved-search-delete-menu-shown")},t.prototype.moveSavedSearch=function(e,t){var i,n;return n=t.item.parent().children(),i=n.index(t.item),this.model.update("pos",Util.calcPos(i,Auth.me().savedSearchList,this.model)),this.model.collection.sort({silent:!0})},t}(ViewWithId),CardSearchResultView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="search-result-card",t.prototype.events={"click .list-card":"openCard"},t.prototype.render=function(){var e,t,i,n,r;return e=this.model.getBoard(),r=this.model.getList(),n=this.model.toJSON(),n=_.extend(n,{listName:r.get("name"),boardName:e.get("name"),permLevel:e.getPermLevelIconClass(),archived:r.get("closed")?" (archived)":""}),i={viewPrefix:"search_",hideMenu:!0,applyBoardCardFilter:!1},this.$el.html(templates.fill("search_results_card",n)),t=this.subview(CardView,this.model,i),this.appendSubview(t,this.$(".js-list-card-container")),this},t.prototype.openCard=function(){this.model.showDetail(),track("Search","Select Card")},t}(ViewWithId),MemberSearchView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.renderSearchResults=function(e,t){var i,n,r,o,s,a,l,c,d,u,p,h,m;if(this.$(".js-org-members").hide(),this.$el.find(".js-error").hide(),n=this.$el.find(".js-search-results"),i=n.find(".js-list").empty(),r=this.$el.find(".js-uninvited-search-results").hide().empty(),""===e)return this.clearSearchResults(),void this.loadingEl.hide();if(u=_.isEmpty(t),a=e.trim().length>=3,l=1===t.length&&Util.checkEmail(e),this.$(".js-no-results").toggleClass("hide",!u),n.toggle(!u),a||"function"==typeof this.renderOrgMembers&&this.renderOrgMembers(),this.helperEl.hide(),!u&&null==t[0].id)return this.renderEmailInviteToSearchResults(t[0]),n.hide(),this.loadingEl.hide(),void PopOver.calcPos();for(h=0,m=t.length;m>h;h++)d=t[h],c=d.joined,p=d.similarity>0,delete d.joined,delete d.similarity,this.modelCache.update("Member",d),o={id:d.id},c&&(o.extraText="ghost"===d.memberType?"invited":"joined",o.className="disabled"),o.isKnownMember=p||l,this.appendMemberToSearchResults(o);this.loadingEl.hide(),s=this.$(".js-search-results .js-list li.js-autoselect:first"),Util.selectMenuItem(this.$(".js-search-results .js-list"),"li",s),PopOver.calcPos()},t.prototype.appendMemberToSearchResults=function(e){var t,i,n,r,o;return i=this.Member.get(e.id),r="function"==typeof(o=this.model).getOrganization?o.getOrganization():void 0,t=(null!=r?r.isPremOrgAdmin(i):void 0)?_.compact([e.className,"no-option"]).join(" "):e.className,n=this.subview(SelectMemberView,i,_.extend({showUnconfirmed:!0},e)),this.appendSubview(n,this.$(".js-search-results .js-list")),n.$("li").addClass(t)},t}(ViewWithId),MemberSearchResultView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.tagName="li",t.prototype.className="search-result-member",t.prototype.events={"mouseenter .js-select-member":"hoverMember","mouseleave .js-select-member":"blurMember"},t.prototype.render=function(){return this.$el.empty(),this.appendSubview(this.subview(SelectMemberView,this.model,{linkName:!0})),this},t.prototype.blurMember=function(e){var t;t=$(e.target).closest(".item").removeClass("selected")},t.prototype.hoverMember=function(e){var t;t=$(e.target).closest(".item"),Util.selectMenuItem($(e.target).closest(".js-list"),".item",t)},t}(ViewWithId),$(function(){return Search.init()});var Action,ActionList,ActionListMaker,ActionListView,ActionView,CommentActionView,GroupedActionView,_ActionView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice;Action=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var i;return __extends(t,e),t.prototype.typeName="Action",t.prototype.urlRoot="/1/actions",i=64,t.getListForModel=function(){var e,t,i,n,r;if(t=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],2===e.length)r=e[0],i=e[1];else{if(1!==e.length)return;n=e[0],r=n.typeName,i=n.id}return r=r.toLowerCase(),_.filter(this.all(t),function(e){return e.includesModel(r,i)})},t.prototype.getModel=function(){return this.collection.options.model},t.prototype.triggerCacheEvents=function(e,t){var i,n,r,o;for(o=this.idModels(),n=0,r=o.length;r>n;n++)i=o[n],e.trigger(""+t+":"+this.typeName+":"+i)},t.prototype.isMember=function(e){return this.get("idMemberCreator")===e.id},t.prototype.getDate=function(){return Dates.parse(this.get("date"))},t.prototype.getBoard=function(){var e,t;return this.Board.get(null!=(e=this.get("data"))&&null!=(t=e.board)?t.id:void 0)},t.prototype.getCard=function(){var e,t;return this.Card.get(null!=(e=this.get("data"))&&null!=(t=e.card)?t.id:void 0)},t.prototype.editable=function(){var e,t;return e=this.get("idMemberCreator"),"commentCard"===(t=this.get("type"))&&Auth.isMe(e)},t.prototype.deletable=function(){var e,t,i,n;return t=this.get("idMemberCreator"),"commentCard"===(i=this.get("type"))&&("observer"!==(null!=(n=this.getBoard())?n.getExplicitMemberType(Auth.me()):void 0)&&Auth.isMe(t)||null!=(e=this.getBoard())&&e.compareMemberType(Auth.me(),this.Member.get(t),{mode:"commentDelete"})>0&&!(!e.isPremOrgAdmin(Auth.me())&&e.isPremOrgAdmin(t)))},t.prototype.isPlaceholder=function(){return null==this.get("date")},t.prototype.includesModel=function(e,t){var i,n;return e=e.toLowerCase(),(null!=(i=this.get("data"))&&null!=(n=i[e])?n.id:void 0)===t||"member"===e&&this.get("idMemberCreator")===t},t.prototype.idModels=function(){var e,t,i,n;return t=function(){var e,t,r;t=null!=(e=this.get("data"))?e:{},r=[];for(i in t)n=t[i],null!=(null!=n?n.id:void 0)&&r.push(n.id);return r}.call(this),e=this.get("idMemberCreator"),null!=e&&t.push(e),t},t.prototype.takingTooLong=function(){return this.isTakingTooLong=!0,this.trigger("takingTooLong")},t}(TrelloModel),ActionListMaker=function(e){function t(e){this.modelCache=e}return __extends(t,e),t.getActionListMaker=function(e){var t,i;return null==this._makers&&(this._makers={}),null!=(t=this._makers)[i=e.name]?t[i]:t[i]=new this(e)},t.prototype.getCardUrl=function(e,i){var n,r;return null!=(null!=(r=n=this.Card.get(i.id))?r.get("url"):void 0)?Controller.getCardUrl(n):t.__super__.getCardUrl.apply(this,arguments)},t.prototype.getBoardUrl=function(e){var i,n;return null!=(null!=(n=i=this.Board.get(e.id))?n.get("url"):void 0)?Controller.getBoardUrl(this.modelCache,i):t.__super__.getBoardUrl.apply(this,arguments)},t.prototype.getMember=function(e){return this.Member.get(e)},t.prototype.getBoard=function(e){return this.Board.get(e)},t.prototype.attachmentPreviewEntity=function(e){var i;return i=t.__super__.attachmentPreviewEntity.call(this,e),Browser.isHighDPI()&&null!=e.previewUrl2x&&(i.url=e.previewUrl2x),i},t.prototype.attachmentEntity=function(e){var i;return i=t.__super__.attachmentEntity.call(this,e),i.known=KnownServices.interpret(i.url,this.modelCache),i},t}(SharedActionList),Util.extendWithModelCacheHelpers(ActionListMaker),ActionList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Action,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return-e.getDate()||0},t.prototype._getRelatedBoards=function(e){var t,i,n;return i=function(){var e,i,r,o,s,a,l;for(r=this.models,l=[],e=0,i=r.length;i>e;e++)n=r[e],("moveCardToBoard"===(o=n.get("type"))||"moveCardFromBoard"===o)&&(t=n.get("data"),l.push((null!=(s=t.boardTarget)?s.id:void 0)||(null!=(a=t.boardSource)?a.id:void 0)));return l}.call(this),i=_.compact(_.uniq(i)),i=_.reject(i,function(e){return function(t){return null!=e.Board.get(t)}}(this)),0===i.length?e():ModelLoader["for"](this.modelCache).loadBoardNames(i,e)},t}(CollectionWithHelpers),ActionListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(e){return this.renderOpts=e.renderOpts,this.makeDebouncedMethods("render"),this.listenTo(this.collection,"add remove reset",this.renderDebounced),this.actionViews=[]},t.prototype.getActionListMaker=function(){return ActionListMaker.getActionListMaker(this.modelCache)},t.prototype.render=function(){return this.collection._getRelatedBoards(function(e){return function(){var t,i,n,r,o,s,a,l,c,d,u,p;for(p=e.saveEdits(),r=p[0],n=p[1],i=e.collection.models,i=_.sortBy(i,function(e){return-Dates.parse(e.get("date"))}),t=e.getActionListMaker().groupActions(i,{limit:e.renderOpts.limit}),l=!e.$el.html(),l&&e.removeActionViews(),e.$(".js-board-member-profile-no-activity").toggleClass("hide",t.length>0),a=d=0,u=t.length;u>d;a=++d)s=t[a],o=_.first(s),(l||e.actionGroupNeedsRerender(s,o,a))&&(c=e.rerenderActionGroup(s,o,a,t,{rerenderAll:l}),e.restoreEdits(r,n,c))}}(this))},t.prototype.saveEdits=function(){var e,t;return t=[],e=0,this.$(".editing textarea").each(function(){var i;return i=$(this),t.push(i.val()),i.is(":focus")?(i.parents(".editing").addClass("focused"),e=Util.getCaretPosition(textarea)):void 0}),null!=t&&t.reverse(),[t,e]},t.prototype.restoreEdits=function(e,t,i){var n;return i.$el.hasClass("editing")?(i.$("textarea").val(e.pop()),n=Util.getElem(i.$("textarea")),i.$el.hasClass("focused")&&Util.setCaretPosition(n,t),i.openEditView()):void 0},t.prototype.rerenderActionGroup=function(e,t,i,n,r){var o,s,a;return o=1===e.length?/^comment/.test(t.get("type"))?this.subview(CommentActionView,t,this.renderOpts):this.subview(ActionView,t,this.renderOpts):this.subview(GroupedActionView,t,_.defaults({list:e},this.renderOpts)),r.rerenderAll?(this.appendSubview(o),this.actionViews.push(o)):(this.insertActionView(o,i),1===this.actionViews.length&&1===n.length?(this.actionViews[i].remove(),this.actionViews.splice(i,1,o)):null==this.actionViews[i+1]?this.actionViews.splice(i,1,o):n.length<=this.actionViews.length?this.actionViews[i+1].model.id===(null!=(s=_.first(n[i+1]))?s.id:void 0)?(this.actionViews[i].remove(),this.actionViews.splice(i,1,o)):(this.actionViews.splice(i,0,o),null!=(a=this.actionViews[this.actionViews.length-1])&&a.remove(),this.actionViews=this.actionViews.splice(0,this.actionViews.length-1)):this.actionViews.splice(i,0,o)),o},t.prototype.actionGroupNeedsRerender=function(e,t,i){var n,r,o,s,a,l,c,d,u;if((null!=(d=this.actionViews[i+1])&&null!=(u=d.model)?u.id:void 0)===t.id&&(this.actionViews[i].remove(),this.actionViews.splice(i,1)),r=this.actionViews[i],!(1!==e.length||r&&t.id===r.model.id))return!0;if(e.length>1){if(null==(null!=r?r.list:void 0))return!0;for(o=r.list,a=l=0,c=e.length;c>l;a=++l)if(n=e[a],s=null!=o?o[a]:void 0,(null!=s?s.id:void 0)!==n.id)return!0}return!1},t.prototype.insertActionView=function(e,t){return this.actionViews[t]?(e.delegateEvents(),e.render().$el.insertBefore(this.actionViews[t].el)):this.appendSubview(e)},t.prototype.removeActionViews=function(){var e,t,i,n;for(n=this.actionViews,t=0,i=n.length;i>t;t++)e=n[t],e.remove();this.actionViews=[]},t.prototype.delegateEvents=function(){var e,i,n,r;for(t.__super__.delegateEvents.apply(this,arguments),r=this.actionViews,i=0,n=r.length;n>i;i++)e=r[i],e.delegateEvents()},t.prototype.undelegateEvents=function(){var e,i,n,r;for(t.__super__.undelegateEvents.apply(this,arguments),r=this.actionViews,i=0,n=r.length;n>i;i++)e=r[i],e.undelegateEvents()},t.prototype.remove=function(){return this.removeActionViews(),t.__super__.remove.apply(this,arguments)},t}(ViewWithId),ActionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="phenom phenom-action clearfix",t.prototype.getActionListMaker=function(){return ActionListMaker.getActionListMaker(this.modelCache)},t.prototype.initialize=function(e){var t,i;return this.context=e.context,this.listenTo(this.model,"takingTooLong change",this.render),t=this.model.get("data"),null!=(null!=(i=t.card)?i.id:void 0)&&t.board?this.listenTo(this.modelCache,"remove:Action:"+this.model.get("id"),function(e){return function(){return e.remove()}}(this)):void 0},t.prototype.events={"click .js-show-mem-menu":"viewMemberActionMenu","click .js-open-attachment-viewer":"openAttachmentViewer","click .js-reply-to-action":"reply"},t.prototype.destructor=function(){},t.prototype.addAdditionalInfo=function(e){var t,i,n,r;for(r=e.entities,i=0,n=r.length;n>i;i++)t=r[i],t[t.type+"Type"]=!0,t&&(t.id||t.idContext)&&(t.isContext=e.isContext=t.id===this.context.id||t.idContext===this.context.id)},t.prototype.addContextData=function(e){var t,i,n,r,o,s,a,l,c,d,u,p;i=this.Board.get(null!=(o=this.model.get("data"))&&null!=(s=o.board)?s.id:void 0),this.options.showBoard&&null!=i&&(e.board=i.toJSON({prefs:!0,url:!0}),e.boardPLevelIconClass=i.getPermLevelIconClass(),e.boardPLevelAltText=i.getPermLevelAltText()),this.options.showOrganization&&(r=this.Organization.get(null!=(a=this.model.get("data"))&&null!=(l=a.organization)?l.id:void 0),null!=r&&(e.organization=r.toJSON({prefs:!0,url:!0}),e.orgPLevelIconClass=r.getPermLevelIconClass(),e.orgPLevelAltText=r.getPermLevelAltText())),n=this.Member.get(this.model.get("idMemberCreator")),t=this.model.get("type"),e.showAttachmentPreview=!this.options.compact,e.showOptions=!this.model.isPlaceholder()&&!this.options.compact&&!this.options.readOnly,e.canReply=(null!=i?i.canComment(Auth.me()):void 0)&&("commentCard"===t||"copyCommentCard"===t||"addAttachmentToCard"===t)&&null!=n&&!Auth.isMe(n),e.canDelete=this.model.deletable(),e.canEdit=this.model.editable(),e.canPromoteToCard=("4dfa1af85ace37e9f202ad1c"===(c=null!=(d=this.model.getBoard())?d.id:void 0)||"51c323b425899096b700000f"===c)&&"commentCard"===this.model.get("type")&&(null!=(u=this.model.getCard())?u.editable():void 0),e.member=null!=n?n.toJSON():void 0,null!=(p=e.member)&&(p.url=Controller.getMemberProfileUrl(e.member.id))
},t.prototype.renderFromData=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b;switch(this.addContextData(e),a={entity:templates.entity,member:templates.member},e.entities=e.entities.slice(1),e.useEmbedly=!this.options.compact&&("commentCard"===(p=this.model.get("type"))||"copyCommentCard"===p),e.usePreviews=!this.options.compact&&"addAttachmentToCard"===(h=this.model.get("type")),log("actions",e),this.model.get("type")){case"commentCard":case"copyCommentCard":this.$el.addClass("phenom-comment");break;case"addAttachmentToCard":this.$el.addClass("phenom-attachment");break;default:this.$el.addClass("phenom-other")}if(this.$el.html(templates.fill("action",e,{},a)),e.useEmbedly)for(t=this.$(".js-embedly"),m=e.entities,d=0,u=m.length;u>d;d++)if(r=m[d],"comment"===r.type&&null!=r.embedly)try{f=JSON.parse(r.embedly);for(l in f)c=f[l],c["type_"+c.type]=!0,c.requireHttps=!0,t.show().append(templates.fill("embedly",c))}catch(v){}return e.hasMoreThanOneChild||"addAttachmentToCard"===(g=this.model.get("type"))||"attachmentPreview"===g||"commentCard"===g||"copyCommentCard"===g||(o=_.last(this.$(".phenom-desc").contents()),b=$.trim(o.nodeValue),s=".",b.length>0&&(s=" "+$.trim(o.nodeValue)+"."),this.$(".phenom-desc").contents().last().remove(),this.$(".phenom-desc").append(_.escape(s))),e.usePreviews&&(n=_.filter(e.entities,function(e){return"attachment"===e.type}),_.isEmpty(n)||(i=this.$(".js-previews"),KnownServices.previewHtml(n[0].url,function(e,t){if(i.empty(),null!=e){if(null!=e.login)return $("<div>").addClass("attachment-extra-info-login").html(e.login).appendTo(i),i.removeClass("hide")}else if(null!=t)return $("<div>").addClass("attachment-extra-info").html(t).appendTo(i),i.removeClass("hide")}))),Dates.update(this.el),this.model.isTakingTooLong?this.$el.addClass("unsent"):this.$el.removeClass("unsent"),this},t.prototype.render=function(){var e,t,i;return log("render","rendering action"),e={saved:null!=this.model.id,entities:this.getActionListMaker().getEntityList(this.model).entities,date:this.model.get("date"),hasChildren:!1,dateLastEdited:null!=(t=this.model.get("data"))?t.dateLastEdited:void 0,textData:null!=(i=this.model.get("data"))?i.textData:void 0},this.addAdditionalInfo(e),this.renderFromData(e)},t.prototype.viewMemberActionMenu=function(e){var t,i,n;Util.stop(e),t=this.Member.get(null!=(n=$(e.target).closest("[idmember]").attr("idmember"))?n:this.model.get("idMemberCreator")),i=22,$(e.target).closest(".member").length>0&&(i=36),PopOver.toggle({elem:this.$(e.target).closest(".js-show-mem-menu"),top:i,view:ActivityMemberMenuView,options:{model:t,modelCache:this.modelCache}})},t.prototype.openAttachmentViewer=function(e){var t,i;e.metaKey||e.ctrlKey||(t=$(e.target),t.closest(".window-main-col").length>0&&(Util.stop(e),i=t.closest(".js-open-attachment-viewer").attr("data-idattachment"),new AttachmentViewer({model:this.model.getCard(),modelCache:this.modelCache,idAttachment:i}).render()))},t.prototype.reply=function(e){return Util.stop(e),this.$el.trigger("replyToAction",this.model),track("Card","Reply to Comment")},t}(ViewWithId),GroupedActionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(e){return this.opts=e.opts,this.list=e.list,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l;for(log("render","rendering action"),s=this.getActionListMaker().getEntityLists(this.list)[0],i=s.entities,e=s.children,t={saved:null!=this.model.id,entities:i,date:this.model.get("date"),hasChildren:!0,dateLastEdited:null!=(a=this.model.get("data"))?a.dateLastEdited:void 0,children:_.sortBy(e,function(e){return e.id}),hasMoreThanOneChild:e.length>1},this.addContextData(t),l=t.children,r=0,o=l.length;o>r;r++)n=l[r],this.addAdditionalInfo(n);return this.addAdditionalInfo(t),this.renderFromData(t)},t}(ActionView),CommentActionView=mixin(AutoInsertionView,CompleterUtil,_ActionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events=Util.extendEvents({"click .action-comment":"clickComment","click .js-confirm-delete-action":"confirmDeleteAction","click .js-promote-to-card":"promoteToCard","click .js-edit-action":"editAction","click .js-save-edit":"saveEdit","keyup .js-text":"keyAutoMention","keydown .js-text":"keydownJsText","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji","click .js-comment-add-card":"commentAddCard"}),t.prototype.confirmDeleteAction=function(e){Util.stop(e),Confirm.toggle({elem:$(e.target).closest(".js-confirm-delete-action")[0],top:22,model:this.model,title:"Delete Comment?",text:"Deleting a comment is forever. There is no undo.",confirmText:"Delete Comment",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return track("Card","Delete Comment"),e.model.destroy()}}(this)})},t.prototype.getTextInput=function(){return this.$(".js-text")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},t.prototype.editAction=function(e){return Util.stop(e),this.$el.hasClass("editing")?void 0:(this.$el.addClass("editing"),this.$("textarea").focus().select(),this.openEditView())},t.prototype.openEditView=function(){this.$el.append(templates.fill("comment_edit_controls",{},{},{comment_options:templates.comment_options})),this.$(".js-text").attr("placeholder","").autosize()},t.prototype.keydownJsText=function(e){return Util.isForceSubmitKey(e)?this.saveEdit(e):this.checkInsert(e)},t.prototype.saveEdit=function(e){var t;if("keypress"!==e.type||Util.isForceSubmitKey(e)||13===e.keyCode&&(!$(e.target).is("textarea")||$(e.currentTarget).hasClass("single-line"))){if(t=this.$(".js-text").val(),/^\s*$/.test(t))return this.$(".js-text").val("").focus(),void this.$(".js-text").attr("placeholder","Must have at least ONE character...");Util.stop(e),this.$(".js-spinner").show(),this.$(".js-hide-on-sending").hide(),this.$(".current-comment").text(t),Layout.cancelEdits(),this.model.set("data",_.extend(this.model.get("data"),{text:t})).update("text",t),this.$(".js-text").trigger("autosize.destroy"),track("Card","Edit Comment")}},t.prototype.showError=function(){},t.prototype.cancelEdit=function(e){e&&Util.stop(e),PopOver.hide(),Layout.cancelEdits()},t.prototype.clickComment=function(e){var t,i;"Card"===this.context.typeName||$(e.target).is("a,textarea")||(Util.stop(e),i=this.getActionListMaker().getEntityList(this.model).entities,t=_.find(i,function(e){return"card"===e.type}),Controller.showCardDetail(this.Card.get(t.id)))},t.prototype.promoteToCard=function(){var e,t,i,n,r;return i=this.model.get("idMemberCreator"),n=this.Member.get(i),r=this.model.get("data").text,null!=n?(t="Proposed by ["+n.get("fullName")+"](/"+n.get("username")+")",e="@"+n.get("username")+" Your proposal has been accepted."):(t="Promoted from comment",e=null),async.waterfall([function(e){return function(i){return e.model.getCard().getList().cardList.create({name:r,desc:t,pos:"bottom"},{success:function(e){return i(null,e)},error:function(){return i("couldn't create card")}})}}(this),function(){return function(t,i){return null!=e?t.addComment(e):i()}}(this)],function(){})},t.prototype.getCard=function(){return this.model.getCard()},t}(ActionView));var AllAnnouncements,Announcement,Announcements,AnnouncementsList,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Announcement=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="Announcement",t.prototype._key=function(){return"announcement-"+this.id+"-read"},t.prototype.isUnread=function(){return!Storage.get(this._key())},t.prototype.markRead=function(){return $.post("/announcements/dismiss",{id:this.id}),Storage.set(this._key(),!0),this.trigger("change:unread")},t}(TrelloModel),AnnouncementsList=function(e){function t(e,i){this.requiresLogin=i.requiresLogin,this.dataUrl=i.dataUrl,t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Announcement,t.prototype.sync=function(e,t,i){return!this.requiresLogin||Auth.isLoggedIn()?$.ajax({url:this.dataUrl,success:function(e){return"function"==typeof i.success?i.success(t,e,i):void 0}}):void 0},t.prototype.getUnread=function(){return this.filter(function(e){return e.isUnread()})},t.prototype.unreadCount=function(){return this.filter(function(e){return e.isUnread()}).length},t.prototype.top=function(){return this.detect(function(e){return e.isUnread()})},t}(CollectionWithHelpers),Announcements=AllAnnouncements=null,_.defer(function(){var e,t,i,n;return Announcements=new AnnouncementsList([],{requiresLogin:!0,dataUrl:"/announcements"}),AllAnnouncements=new AnnouncementsList([],{requiresLogin:!1,dataUrl:"/announcements/all"}),i=Util.getMs({minutes:10+5*Math.random()}),n=null,t=("function"==typeof document.hasFocus?document.hasFocus():void 0)||!0,e=function(){return t&&(null==n||Date.now()-n>i)?(Announcements.fetch(),n=Date.now()):void 0},$(window).on("focus",function(){return t=!0,e()}),$(window).on("blur",function(){return t=!1}),setInterval(e,i/4),e()});var ArchivedBadge,AttachmentsBadge,Badge,BadgesView,ChecklistsBadge,CommentsBadge,DescriptionBadge,DueDateBadge,FogBugzBadge,NotificationsBadge,SubscribedBadge,VotesBadge,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};BadgesView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="badges",t.prototype.initialize=function(e){var t,i;i=e.detail,this.badges=function(){var e,i,n,r;for(n=[NotificationsBadge,SubscribedBadge,VotesBadge,DescriptionBadge,CommentsBadge,AttachmentsBadge,ChecklistsBadge,DueDateBadge,ArchivedBadge,FogBugzBadge],r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(new t(this,{modelCache:this.modelCache}));return r}.call(this)},t.prototype.render=function(){var e;return this.$el.append(function(){var t,i,n,r;for(n=this.badges,r=[],t=0,i=n.length;i>t;t++)e=n[t],e.visible()&&r.push(e.render().$el);return r}.call(this)),this},t.prototype.remove=function(){var e,i,n,r,o;for(t.__super__.remove.apply(this,arguments),r=this.badges,o=[],i=0,n=r.length;n>i;i++)e=r[i],o.push(e.remove());return o},t}(ViewWithId),Badge=function(){function e(e,t){var i,n;this.badgesView=e,this.modelCache=t.modelCache,null==this.$el&&(this.$el=$("<div>")),this.dependentBadges.length>0&&(n=function(){var e,t,n,r;for(n=this.dependentBadges,r=[],e=0,t=n.length;t>e;e++)i=n[e],r.push("change:badges."+i);return r}.call(this),this.badgesView.listenTo(this.badgesView.model,n.join(" "),function(e){return function(){return e.render()}}(this)))}return e.prototype.shouldUpdate=!0,e.prototype.dependentBadges=[],e.prototype.additionalClasses=[],e.prototype.rendered=!1,e.prototype.visible=function(){throw new Error("Badge subclasses must specify a `visible` predicate")},e.prototype.update=function(){return this.shouldUpdate&&this.$el.attr("title",_.result(this,"title")).find(".badge-text").html(this.text?_.result(this,"text"):""),this},e.prototype.remove=function(){var e;return null!=(e=this.$el)&&e.detach(),this.rendered=!1},e.prototype.render=function(){var e,t,i;return this.rendered?(this.visible()?this.update():this.remove(),this):this.visible()?(i=this.text?_.result(this,"text"):"",t=_.result(this,"icon"),this.$el.attr("title",_.result(this,"title")).attr("class","").addClass("badge").addClass(_.result(this,"additionalClasses").join(" ")).toggleClass("badge-state-image-only",!i).html(templates.fill("badge",{text:i,icon:t})),e=_.find(this.badgesView.badges,function(e){return function(t){return t.rendered&&t.position>e.position}}(this)),null==e?this.badgesView.$el.append(this.$el):this.$el.insertBefore(e.$el),this.rendered=!0,this):this},e.prototype.badge=function(e){var t;return null!=(t=this.badgesView.model.get("badges"))?t[e]:void 0},e}(),Util.extendWithModelCacheHelpers(Badge),NotificationsBadge=function(e){function t(){var e,i;t.__super__.constructor.apply(this,arguments),this._cachedNotificationCount=null,i=function(){var t,i,n,r;for(n=["add","remove","change"],r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(""+e+":Notification:"+this.badgesView.model.id);return r}.call(this),this.badgesView.listenTo(this.modelCache,i.join(" "),function(e){return function(){return e._cachedNotificationCount=null,e.render()}}(this))}return __extends(t,e),t.prototype.icon="notification",t.prototype.position=0,t.prototype.visible=function(){return this.notificationCount()>0},t.prototype.notificationCount=function(){return null==this._cachedNotificationCount&&(this._cachedNotificationCount=this.badgesView.model.id?_.count(this.Notification.all(),function(e){return function(t){var i,n;return t.get("unread")&&(null!=(i=t.get("data"))&&null!=(n=i.card)?n.id:void 0)===e.badgesView.model.id}}(this)):0),this._cachedNotificationCount},t.prototype.text=function(){return this.notificationCount().toString()},t.prototype.title=function(){return"This card has "+Util.formatCount(this.notificationCount(),"unread notification")+"."},t.prototype.additionalClasses=["badge-state-unread-notification"],t}(Badge),SubscribedBadge=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:subscribed",function(e){return function(){return e.render()}}(this))}return __extends(t,e),t.prototype.shouldUpdate=!1,t.prototype.position=1,t.prototype.icon="follow",t.prototype.visible=function(){return this.badgesView.model.get("subscribed")},t.prototype.title="You are subscribed to this card.",t}(Badge),VotesBadge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.position=2,t.prototype.dependentBadges=["votes","viewingMemberVoted"],t.prototype.icon="vote",t.prototype.additionalClasses=function(){var e;return e=["badge-state-votes"],this.badge("viewingMemberVoted")&&e.push("badge-state-voted"),e},t.prototype.title=function(){return"This card has "+Util.formatCount(this.voteCount(),"vote")+"."},t.prototype.text=function(){return Util.formatCount(this.voteCount(),"vote")},t.prototype.visible=function(){return this.voteCount()>0},t.prototype.voteCount=function(){var e;return null!=(e=this.badge("votes"))?e:0},t.prototype.update=function(){return this.$el.toggleClass("badge-state-voted",this.badge("viewingMemberVoted")),t.__super__.update.apply(this,arguments)},t}(Badge),DescriptionBadge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.shouldUpdate=!1,t.prototype.position=3,t.prototype.dependentBadges=["description"],t.prototype.icon="desc",t.prototype.title="This card has a description.",t.prototype.visible=function(){return this.badge("description")},t}(Badge),CommentsBadge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.position=4,t.prototype.dependentBadges=["comments"],t.prototype.icon="comment",t.prototype.title=function(){return"This card has "+Util.formatCount(this.commentCount(),"comment")+"."},t.prototype.text=function(){return this.commentCount().toString()},t.prototype.visible=function(){return this.commentCount()>0},t.prototype.commentCount=function(){var e;return null!=(e=this.badge("comments"))?e:0},t}(Badge),AttachmentsBadge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.position=5,t.prototype.dependentBadges=["attachments"],t.prototype.icon="attachment",t.prototype.attachmentCount=function(){var e;return null!=(e=this.badge("attachments"))?e:0},t.prototype.visible=function(){return this.attachmentCount()>0},t.prototype.text=function(){return this.attachmentCount().toString()},t.prototype.title=function(){return"This card has "+Util.formatCount(this.attachmentCount(),"attachment")+"."},t}(Badge),ChecklistsBadge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.position=6,t.prototype.dependentBadges=["checkItems","checkItemsChecked"],t.prototype.icon="checklist",t.prototype.title=function(){return"This card has "+this.badge("checkItemsChecked")+" of "+this.badge("checkItems")+" checklist items completed."},t.prototype.visible=function(){return this.badge("checkItems")},t.prototype.text=function(){return""+this.badge("checkItemsChecked")+"/"+this.badge("checkItems")},t.prototype.additionalClasses=function(){return this.isCompleted()?["badge-state-complete"]:[]},t.prototype.isCompleted=function(){return this.badge("checkItemsChecked")===this.badge("checkItems")},t.prototype.update=function(){return this.$el.toggleClass("badge-state-complete",this.isCompleted()),t.__super__.update.apply(this,arguments)},t}(Badge),DueDateBadge=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:due",function(e){return function(){return e.render()}}(this))}return __extends(t,e),t.prototype.shouldUpdate=!0,t.prototype.position=7,t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.badgesView.stopListening(Dates,"renderInterval"),this.visible()&&this.badgesView.listenTo(Dates,"renderInterval",function(e){return function(){return e.render()}}(this)),this},t.prototype.icon="clock",t.prototype.visible=function(){return null!=this.badgesView.model.get("due")},t.prototype.text=function(){return Dates.toDateString(this.dueDate(),{smartYear:!0})},t.prototype.dueDate=function(){return Dates.parse(this.badgesView.model.get("due"))},t.prototype.hoursLeft=function(){return(this.dueDate()-new Date)/Util.getMs({hours:1})},t.prototype.classDispatch=[[-36,"badge-state-due-past"],[0,"badge-state-due-now"],[24,"badge-state-due-soon"],"badge-state-due-future"],t.prototype.additionalClasses=function(){return[this.firstLessThan(this.hoursLeft(),this.classDispatch)]},t.prototype.titleDispatch=[[-36,"This card is past due."],[0,"This card is recently overdue!"],[1,"This card is due in less than an hour."],[1.3,"This card is due in about an hour."],[24,function(e){var t;return t=this.firstLessThan(e%1,[[.3,Math.floor(e).toString()],[.7,""+Math.floor(e).toString()+" and a half"],Math.ceil(e).toString()]),"This card is due in "+t+" hours."}],"This card is due later."],t.prototype.title=function(){return this.firstLessThan(this.hoursLeft(),this.titleDispatch)},t.prototype.firstLessThan=function(e,t){var i,n,r,o,s;for(o=0,s=t.length;s>o;o++){if(n=t[o],!_.isArray(n))return _.isFunction(n)?n.call(this,e):n;if(i=n[0],r=n[1],i>=e)return _.isFunction(r)?r.call(this,e):r}},t.prototype.update=function(){return this.$el.removeClass(),this.$el.addClass(_.result(this,"additionalClasses").join(" ")).addClass("badge"),t.__super__.update.apply(this,arguments)},t}(Badge),ArchivedBadge=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:closed",function(e){return function(){return e.render()}}(this))}return __extends(t,e),t.prototype.shouldUpdate=!1,t.prototype.icon="archive",t.prototype.text="Archived",t.prototype.title="This card is in the archive.",t.prototype.visible=function(){return this.badgesView.model.get("closed")},t}(Badge),FogBugzBadge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.rendered&&this.$el.click(function(e){return function(){return e.openLink()}}(this)),this},t.prototype.dependentBadges=["fogbugz"],t.prototype.icon="kiwi",t.prototype.title="This card has a FogBugz case.",t.prototype.visible=function(){return this.badge("fogbugz")},t.prototype.openLink=function(e){return window.open(this.badge("fogbugz"),"FogBugz"),Util.stop(e)},t}(Badge);var AddListPopoverView,Board,BoardDescView,BoardHeaderOrgMenuView,BoardObserversView,BoardState,BoardView,CreateBoardView,NewBoardHelperAddOrg,SharePopoverView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__bind=function(e,t){return function(){return e.apply(t,arguments)}},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},__slice=[].slice;BoardState=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.sync=function(){throw new Error("BoardState is a special weird non-persistent thing")},t.prototype.initialize=function(e,i){return t.__super__.initialize.apply(this,arguments),this.board=i.board,this.useSidebarPref()?(this.setShowSidebarFromPref(),this.listenTo(this.board,"change:myPrefs",this.setShowSidebarFromPref)):this.set("showSidebar",!WindowSize.fSmall),this.set("listComposerOpen",!1),this.listenTo(this,"change:idActiveCard",function(e){return function(){var t,i;return i=e.Card.get(e.previousAttributes().idActiveCard),null!=i&&e.stopListening(i,"change:closed"),t=e.getCard(),null!=t?e.listenTo(t,"change:closed",function(){return e.selectCardAfter(t)}):void 0}}(this))},t.prototype.defaults=function(){return{idActiveCard:null,archiveSidebarDropzoneVisible:!1}},t.prototype.getCurrentSidebarView=function(){return this.board.view.sidebarView.topSidebarView()},t.prototype.setSidebarDisplayType=function(e){return this.set("sidebarDisplayType",null!=e?e:"")},t.prototype.getSidebarDisplayType=function(){return this.get("sidebarDisplayType")},t.prototype.selectCard=function(e){return null==e?void this.set("idActiveCard",null):e.onId(function(t){return function(){return t.set("idActiveCard",e.id),TrelloClipboard.set(e.getFullUrl())}}(this))},t.prototype.isCardSelected=function(e){return null!=e&&this.get("idActiveCard")===e.id},t.prototype.isListSelected=function(e){var t;return(null!=(t=this.getCard())?t.get("idList"):void 0)===e.id},t.prototype.clearSelectedCard=function(){return this.set("idActiveCard",null)},t.prototype.getCard=function(){return this.Card.get(this.get("idActiveCard"))},t.prototype.getList=function(){var e;return null!=(e=this.getCard())?e.getList():void 0},t.prototype.selectCardAfter=function(e){var t,i,n,r;return i=e.getList(),r=null!=i?i.cardList.openCards():void 0,null==i||0===r.length?void this.set("idActiveCard",null):(t=function(){return function(e){return function(t){return t!==e&&t.get("pos")>=e.get("pos")}}}(this),n=_.find(r,t(e)),this.selectCard(null!=n?n:_.last(r)))},t.prototype.openListComposer=function(){return this.set("listComposerOpen",!0)},t.prototype.closeListComposer=function(){return this.set("listComposerOpen",!1)},t.prototype.useSidebarPref=function(){return Auth.isLoggedIn()&&(WindowSize.fExtraLarge||WindowSize.fLarge||WindowSize.fMedium)},t.prototype.setShowSidebar=function(e){var t;return e!==this.get("showSidebar")&&(t=e?"Show":"Hide",track("Board View","Toggle Board Sidebar",t),this.set("showSidebar",e),this.useSidebarPref())?this.board.setPref("showSidebar",e):void 0},t.prototype.setShowSidebarFromPref=function(){var e;return e=function(e){return function(){return e.set("showSidebar",e.board.getPref("showSidebar"))}}(this),null!=this.board.get("myPrefs")?e():this.board.once("change:myPrefs",e)},t.prototype.setArchiveSidebarDropzone=function(e){return this.set("archiveSidebarDropzoneVisible",e)},t}(TrelloModel),Board=function(e){function t(){return this.getPermDisplayText=__bind(this.getPermDisplayText,this),this.getPermLevelIconClass=__bind(this.getPermLevelIconClass,this),this.getPermLevelAltText=__bind(this.getPermLevelAltText,this),t.__super__.constructor.apply(this,arguments)}return __extends(t,e),mixin(MembershipModel,t),t.prototype.typeName="Board",t.prototype.urlRoot="/1/boards",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.destruct([this.listList=new ListList(null,{board:this}).owner(this).syncCache(this.modelCache,["idBoard","closed"],function(e){return function(t){return t.get("idBoard")===e.id&&!t.get("closed")}}(this)),this.invitationList=new BoardInvitationList([],{modelCache:this.modelCache,board:this}),this.checklistList=new ChecklistList([],{modelCache:this.modelCache,board:this}),this.memberList=(new MemberList).syncModel(this,"memberships",{fxGetIds:function(e){return _.pluck(e,"idMember")}}),this.adminList=(new MemberList).syncModel(this,"memberships",{fxGetIds:function(e){return function(t){var i;return i=_.filter(t,function(t){var i,n;return i=e.Member.get(t.idMember),"admin"===t.memberType||null!=i&&(null!=(n=e.getOrganization())?n.isPremOrgAdmin(i):void 0)}),_.pluck(i,"idMember")}}(this)}),this.filter=new CardFilter(this,{modelCache:this.modelCache}),this.composer=new CardComposer(this,{modelCache:this.modelCache}),this.listComposer=new ListComposer(this,{modelCache:this.modelCache}),this.viewState=new BoardState(null,{modelCache:this.modelCache,board:this})]),this.listenForPermChange(),this.cacheShortLink()},t.get=function(e,i){return Util.isShortLink(i)?t.findOne(e,function(e){return e.get("shortLink")===i}):t.__super__.constructor.get.apply(this,arguments)},t.prototype.cacheShortLink=function(){return this.onId(function(e){return function(){return e.waitForAttr("shortLink",function(){return IdCache.setBoardId(e.get("shortLink"),e.id)})}}(this))},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1})},t.prototype.markAsViewed=function(){return Auth.isLoggedIn()?ApiAjax({url:""+this.urlRoot+"/"+this.id+"/markAsViewed",type:"post",background:!0}):void 0},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.isStarred=function(){return null!=this.Auth.me().boardStarList.getBoardStar(this.id)},t.prototype.hasUnseenActivity=function(){var e,t;return t=this.get("dateLastView"),e=this.get("dateLastActivity"),null!=t&&null!=e&&e>t},t.prototype.getPermLevelAltText=function(e,t){var i,n,r,o,s;switch(null==e&&(e=this.getPref("permissionLevel")),null!=this.attributes?s=this.getOrganization():null!=t&&(s=t),n=" Only people added to the board can view and edit it.",i=" Only people added to the board can edit.",r=" Only people added to the board can edit.",null!=s&&(o=s.get("displayName"),s.isFeatureEnabled("superAdmins")&&(n=" Board members and admins in the "+o+" organization will be able to see and edit this board.",i=" Board members and admins in the "+o+" organization will be able to edit this board.",r=" Board members and admins in the "+o+" organization will be able to edit this board.")),e){case"private":return"This board is private. "+n;case"org":return"This board is visible to members of "+(o?o:"the organization")+". "+i;case"public":return"This board is public. It's visible to anyone with the link and will show up in search engines like Google. "+r;default:return""}},t.prototype.getPermLevelIconClass=function(e){var t;return null==e&&(e=null!=(t=this.get("prefs"))?t.permissionLevel:void 0),"org"===e?"org-private":""!==e&&null!=e?e:""},t.prototype.getRoleText=function(e){switch(e){case"admin":return"Can view and edit cards, remove members, and change settings for the board.";case"normal":return"Can view and edit cards. Can't change settings.";case"observer":return"Can view, comment, and vote on cards. Can't move or edit cards or change settings.";default:return""}},t.prototype.getPermDisplayText=function(e){var t;switch(null==e&&(e=null!=(t=this.get("prefs"))?t.permissionLevel:void 0),e){case"private":return"Private";case"org":return"Org Visible";case"public":return"Public";default:return""}},t.prototype._translatePref=function(e){switch("none"===e&&(e="disabled"),e){case"disabled":case"members":case"public":return Util.toTitleCase(e);case"observers":return"Members and observers";case"org":return"Organization members";default:return""}},t.prototype.getDisplayVotePerms=function(){var e;return this._translatePref(null!=(e=this.get("prefs"))?e.voting:void 0)},t.prototype.getDisplayCommentPerms=function(){var e;return this._translatePref(null!=(e=this.get("prefs"))?e.comments:void 0)},t.prototype.getDisplayInvitePerms=function(){var e,t;return e=null!=(t=this.get("prefs"))?t.invitations:void 0,"members"===e||"admins"===e?Util.toTitleCase(e):""},t.prototype.toJSON=function(e){var i,n;return null==e&&(e={}),i=t.__super__.toJSON.apply(this,arguments),e.org&&(n=this.getOrganization(),null!=n&&(i.hasOrg=!0,i.org=n.toJSON({url:!0}))),e.url&&null==i.url&&(i.url=Controller.getBoardUrl(this.modelCache,this)),e.shortUrl&&null==i.shortUrl&&(i.shortUrl=Controller.getBoardShortUrl(this.modelCache,this)),i},t.prototype.calcPos=function(e,t){return Util.calcPos(e,this.listList,t,function(e){return!e.get("closed")})},t.prototype.getCard=function(e){return Util.isShortId(e)?this.Card.findOne("idShort",Number(e)):this.Card.get(e)},t.prototype.getList=function(e){return this.listList.get(e)},t.prototype.getUrl=function(){return Controller.getBoardUrl(this.modelCache,this)},t.prototype.getShortUrl=function(){return Controller.getBoardShortUrl(this.modelCache,this)},t.prototype.getChecklist=function(e){return Checklist.get(e)},t.prototype.getBoardInvitation=function(e){return this.invitationList.get(e)},t.prototype.getCheckItem=function(e){var t,i,n,r,o,s;for(o=this.checklistList.models,n=0,r=o.length;r>n;n++)if(i=o[n],t=null!=i&&null!=(s=i.checkItemList)?s.get(e):void 0)return t},t.prototype.editable=function(){var e;return e=Auth.me(),e&&this.editableByMember(e)},t.prototype.editableByMember=function(e){return this.isMember(e)},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.owned=function(){var e;return e=Auth.me(),e&&this.ownedByMember(e)},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.canJoin=function(){var e,t,i;return(this.isPremOrgAdmin(Auth.me())||(null!=(e=this.get("prefs"))?e.selfJoin:void 0)&&(null!=(t=this.getOrganization())?t.isMember(Auth.me()):void 0))&&(i=this.id,__indexOf.call(Auth.me().get("idBoards"),i)<0)},t.prototype.canInviteMembers=function(){var e,t,i;return null!=this.getOrganization()||this.getPref("canInvite")?("admins"===(null!=(t=this.get("prefs"))?t.invitations:void 0)?e="admin":"members"===(null!=(i=this.get("prefs"))?i.invitations:void 0)&&(e="normal"),"admin"===this.getMemberType(Auth.me())||e===this.getMemberType(Auth.me())):!1},t.prototype.compareMemberType=function(e,t,i){return Util.compareMemberType(this,e,t,i)},t.prototype.isMemberPublic=function(e){return"public"===this.getMemberType(e)},t.prototype.isMemberOrg=function(e){return"org"===this.getMemberType(e)},t.prototype.isMemberObserver=function(e){return"observer"===this.getMemberType(e)},t.prototype.memberMatchesSetting=function(e,t){switch(this.getPref(t)){case"public":return Auth.isLoggedIn();case"org":return this.isMember(e)||this.isMemberOrg(e)||this.isMemberObserver(e);case"observers":return this.isMember(e)||this.isMemberObserver(e);case"members":return this.isMember(e);case"admins":return this.ownedByMember(e);default:return!1}},t.prototype.canVote=function(e){return this.memberMatchesSetting(e,"voting")},t.prototype.canComment=function(e){return this.memberMatchesSetting(e,"comments")},t.prototype.canInvite=function(e){return this.memberMatchesSetting(e,"invitations")},t.prototype.prefNames=["permissionLevel","voting","comments","invitations","selfJoin","background","cardAging","calendarFeedEnabled"],t.prototype.myPrefNames=["showSidebar","showSidebarMembers","showSidebarBoardActions","showSidebarActivity","emailKey","idEmailList","emailPosition","calendarKey","fullEmail"],t.prototype.getLabelName=function(e){var t;
return t=this.get("labelNames"),(null!=t?t[e]:void 0)||""},t.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")},t.prototype.getInviteToken=function(){return util.inviteTokenFor(this.id)},t.prototype.getIdBoardMems=function(){return _.map(this.memberList.models,function(){return function(e){return e.id}}(this))},t.prototype.getOrganization=function(){return this.Organization.get(this.get("idOrganization"))},t.prototype.orgMembersAvailable=function(){var e;return e=this.getOrganization(),_.chain(e.memberList.filter(function(){return function(t){return!e.isDeactivated(t)}}(this))).difference(this.memberList.models).value()},t.prototype.joinBoard=function(e){var t,i,n,r;return i=Auth.me(),t=this.isPremOrgAdmin(i),n=t?"admin":"normal",i.set("idBoards",i.get("idBoards").concat(this.id)),t&&i.set("idPremOrgsAdmin",(null!=(r=i.get("idPremOrgsAdmin"))?r:[]).concat(this.id)),this.addMember(i,n,e)},t.prototype.addMember=function(){var e,t,i,n,r;return e=arguments[0],n=3<=arguments.length?__slice.call(arguments,1,r=arguments.length-1):(r=1,[]),i=arguments[r++],t=n[0],null==t&&(t="normal"),this.memberList.add(e),this.api({type:"put",method:"members/"+e.id,data:{type:t}},i),this.set("memberships",this.get("memberships").concat({idMember:e.id,memberType:"normal"}))},t.prototype.removeMember=function(e){return this.memberList.remove(e),this.set("memberships",_.reject(this.get("memberships"),function(t){return t.idMember===e.id}))},t.prototype.getObserverList=function(){var e,t,i,n,r;for(n=this.memberList.models,r=[],t=0,i=n.length;i>t;t++)e=n[t],this.isObserver(e)&&r.push(e);return r},t.prototype.filterLabels=function(e){var t,i,n,r,o,s,a;for(r=RegExp("^"+Util.escapeForRegex(e)),i=[],a=Util.labelNames,o=0,s=a.length;s>o;o++)t=a[o],n=this.getLabelName(t).toLowerCase().split(" "),n.push(t),_.find(n,function(e){return r.test(e)})&&i.push(t);return i},t.prototype.openLists=function(){return this.listList.filter(function(e){return!e.get("closed")})},t.prototype._generateKey=function(e){return this.api({type:"post",method:""+e+"Key/generate"})},t.prototype.generateEmailKey=function(){return this._generateKey("email")},t.prototype.generateCalendarKey=function(){return this._generateKey("calendar")},t.prototype.openCards=function(){var e;return _.flatten(function(){var t,i,n,r;for(n=this.openLists(),r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(e.cardList.openCards());return r}.call(this))},t.prototype.listenForPermChange=function(){var e,t,i;if(Auth.isLoggedIn())return t=function(e){return function(){var t,i,n;return t=Auth.me(),e.isObserver(t)?"observer":"normal"===(i=e.getMemberType(t))||"admin"===i?"member":Util.hasValidInviteTokenFor(e.modelCache,e.id)?"inviteToken":(null!=(n=e.getOrganization())?n.isMember(t):void 0)&&"org"===e.getPref("permissionLevel")?"org":"public"===e.getPref("permissionLevel")?"public":"none"}}(this),i=t(),e=Util.voidDebounced(function(e){return function(){var n;return n=t(),n!==i?(i=n,e.trigger("permChange",n)):void 0}}(this)),this.listenTo(Auth.me().boardList,"add remove reset",e),this.listenTo(Auth.me().organizationList,"add remove reset",e),this.listenTo(this.memberList,"add remove reset",e),this.listenTo(this,"change:memberships change:prefs.permissionLevel",e)},t.prototype.getClientBackgroundColor=function(e){var t,i;return null!=(t=null!=(i=Backgrounds[e])?i.color:void 0)?t:Backgrounds.blue.color},t}(ModelWithPersonalPreferences),BoardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="board-wrapper",t.prototype.events={sortstop:"sortStop","click .js-rename-board":"renameBoard","click .js-open-org-menu":"openOrgMenu","click .js-change-vis":"changeVis","click .js-open-desc":"openDesc","click .js-close-calendar":"toggleCalendar","click .js-calendar":"toggleCalendar","click .js-filter-cards-indicator":"openFilter","click .js-filter-card-clear":"clearFilters","click .js-board-header-subscribed":"openUnsubscribe","click .js-star-board":"toggleStarred","click .js-show-sidebar":"setSidebarShow","dblclick #board":"dblClickAddListMenu","click .js-reopen":"reopen",shortcut:"shortcut",transitionend:"finishMovingSidebar",webkitTransitionEnd:"finishMovingSidebar"},t.prototype.initialize=function(){var e;t.__super__.initialize.apply(this,arguments),this.model.view=this,this.sidebarView=this.subview(BoardSidebarView,this.model),this.inlineListComposerView=this.subview(InlineListComposerView,this.model),this.makeDebouncedMethods("refreshOrganization","render","renderBoardBackground","renderBoardHeader","renderBoardHeaderCalendar","renderBoardHeaderDescription","renderBoardHeaderSubscribed","renderLists","renderPermissionLevel","updateControllerTitle"),this.listenTo(this.model,{"change:closed":this.renderDebounced,"change:desc":this.renderBoardHeaderDescriptionDebounced,"change:idOrganization":this.refreshOrganizationDebounced,"change:memberships":this.renderPermissionLevelDebounced,"change:name":function(e){return function(){return e.renderBoardHeaderDebounced(),e.updateControllerTitleDebounced()}}(this),"change:powerUps":this.renderBoardHeaderCalendarDebounced,"change:prefs.cardCovers":this.renderListsDebounced,"change:prefs.permissionLevel":function(e){return function(){return e.renderListsDebounced(),e.renderPermissionLevelDebounced()}}(this),"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness":function(e){return function(){return e.renderBoardBackgroundDebounced(!0)}}(this),"change:subscribed":this.renderBoardHeaderSubscribedDebounced,permChange:this.permChange}),this.listenTo(this.model.viewState,{"change:archiveSidebarDropzoneVisible":this.renderArchiveSidebarDropzone,"change:showSidebar":this.renderSidebarState,"change:sidebarDisplayType":this.renderSidebarDisplayType}),this.listenTo(this.Auth.me().boardStarList,"add remove reset",function(e){return function(){return e.renderBoardHeaderStarred()}}(this)),this.memberTypeMe=this.model.getMemberType(Auth.me()),this.refreshOrganization(),this.listScrollLeft=null,this.savingScroll=!1,this.calcState={},this.listenTo(this.model.filter,"change",this.renderFilteringStatus),UserInput.addHandler(this,{scope:"board"}),e=this.debounce(function(e){return function(){return e.calcBoardLayout()}}(this),300),$(window).on("resize."+this.uniqueId(),e),this.versionTag=new VersionTagView},t.prototype.remove=function(){return $(window).off("."+this.uniqueId()),t.__super__.remove.apply(this,arguments)},t.prototype.permChange=function(e){return"none"===e?Controller.defaultView():this.render()},t.prototype.shortcut=function(e){var t,i,n,r,o;switch(i=this.model.editable(),r=Auth.isLoggedIn(),e){case Key_Q:if(r)return this.model.filter.toggleQuietMode(),"Q - My cards";break;case Key_X:return this.model.filter.clear(),"X - Clear All Filters";case Key_W:return this.toggleSidebar(),"W - Toggle Board Sidebar";case Key_Arrow_Down:case Key_J:return this.moveCard("down"),["Keyboard Nav","Down"];case Key_Arrow_Up:case Key_K:return this.moveCard("up"),["Keyboard Nav","Up"];case Key_Arrow_Right:return this.moveCard("right"),["Keyboard Nav","Right"];case Key_Arrow_Left:return this.moveCard("left"),["Keyboard Nav","Left"];case Key_N:if(i&&(o=this.model.viewState.getList(),t=this.model.viewState.getCard(),null!=o&&null!=t))return n=_.indexOf(o.cardList.openCards(),t),this.model.composer.save({idList:o.id,index:n+1,vis:!0}),"N - Insert Card";break;case Key_Escape:if(i)return DragSort.sorting?DragSort.abort():Layout.isEditing()||PopOver.isVisible||Dialog.isVisible||(this.model.composer.get("vis")?this.model.composer.save("vis",!1):this.model.viewState.get("listComposerOpen")?this.model.viewState.set("listComposerOpen",!1):this.sidebarView.popWidgetView()),Controller.showingCalendar(this)&&$(".calendar-day.active").removeClass("active"),!0}},t.prototype.scrollToCard=function(e,t){var i,n,r,o,s,a,l,c;return a=this.collectionSubview(ListListView,this.model.listList),c=a.subview(ListView,t),i=c.$(".list-cards"),l=i.prop("scrollTop"),s=i.outerHeight(),r=t.cardList.openCards()[e].view.$el[0],n=r.clientHeight,o=r.offsetTop-n,c.scrollIntoView(),o+n>l+s?i.scrollTop(o+n-s):l>o?i.scrollTop(o):void 0},t.prototype.moveCard=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y,w;if(this.ignoreMouseCardSelects||(this.ignoreMouseCardSelects=!0,$(document).one("mousemove",function(e){return function(){return e.ignoreMouseCardSelects=!1}}(this))),f=this.model.viewState.getCard(),null==f)return a=_.find(this.model.openLists(),function(e){return!_.isEmpty(e.openCards())}),void(null!=a&&a.selectFirstCardInList());if(g=f.getList(),h=g.cardList.openCards(),t=_.indexOf(h,f),n=function(e){return function(t,i,n,r){var o;if(o=t+i,e.model.filter.isFiltering)for(;o>=0&&n>o&&!r(o);)o+=i;return o}}(this),"up"===e||"down"===e){if(r="up"===e?-1:1,l=n(t,r,h.length,function(e){return function(t){return e.model.filter.satisfiesFilter(h[t])}}(this)),l>=0&&l<h.length)return this.scrollToCard(l,g),this.model.viewState.selectCard(h[l])}else if(("left"===e||"right"===e)&&(m=_.filter(this.model.openLists(),function(e){return e.cardList.openCards().length>0}),o=_.indexOf(m,g),s="left"===e?-1:1,u=n(o,s,m.length,function(e){return function(t){return _.any(m[t].cardList.openCards(),function(t){return e.model.filter.satisfiesFilter(t)})}}(this)),u>=0&&u<m.length)){for(d=m[u],p=d.cardList.openCards(),c=Math.min(t,p.length-1),y=[1,-1],w=[],b=0,v=y.length;v>b;b++){if(i=y[b],l=n(c-i,i,p.length,function(e){return function(t){return e.model.filter.satisfiesFilter(p[t])}}(this)),l>=0&&l<p.length){this.model.viewState.selectCard(p[l]),this.scrollToCard(l,d);break}w.push(void 0)}return w}},t.prototype.render=function(){var e,t,i,n,r,o,s;if(this.forceIntoDom(),n=this,t=n.model,t.get("closed"))return this.$el.html(templates.fillFromModel("board_closed",t)),this.defaultBoardBackground(),this;for(e={},e.url=Controller.getBoardUrl(this.modelCache,this.model),s=t.prefNames.concat(t.myPrefNames),r=0,o=s.length;o>r;r++)i=s[r],e[""+i+"_"+t.getPref(i)]=!0;return e.canJoin=t.canJoin(),e.canInviteMembers=t.canInviteMembers(),e.confirmed=Auth.me().get("confirmed"),this.$el.html(templates.fillFromModel("board",t)),this.renderBoardHeader(),this.renderBoardBackground(),this.appendSubview(this.sidebarView,this.$(".board-widgets")),this.renderSidebarState(),this.calcBoardLayout(),this.renderLists(),Controller.setLocation({title:e.name}),_.defer(function(e){return function(){return e.$("#board").dragscrollable({fxIgnore:function(e){var t,i,n;return t=$(e.target).closest("#board"),n=e.offsetY>t.height()-11,i=$(e.target).closest(".list").length>0,n||i}}),DragSort.refreshListSortable()}}(this)),this},t.prototype.renderFilteringStatus=function(){var e;return e=this.model.filter.isFiltering(),this.$(".js-filter-cards-indicator").toggleClass("hide",!e),this.$(".js-num-cards").toggleClass("hide",!e),this.$("#board").toggleClass("filtering",e)},t.prototype.calcBoardLayout=function(){var e,t,i,n,r;r=$(window).height(),n=$("#header").outerHeight(),e=$(".header-banner:visible").outerHeight(),t=this.$(".board-header").outerHeight(),i=r-(n+e+t),this.$(".board-canvas").height(i),this.calcSidebarHeight()},t.prototype.attachVersionTag=function(){return this.$("#board").append(this.versionTag.$el)},t.prototype.removeSidebarDisplayTypes=function(){this.$el.removeClass("sidebar-display-wide")},t.prototype.renderSidebarDisplayType=function(){var e;this.removeSidebarDisplayTypes(),e=this.model.viewState.getSidebarDisplayType(),this.$el.addClass(e)},t.prototype.renderSidebarState=function(){this.renderSidebarDisplayType(),this.$(".board-header-name-text").css("max-width",""+($(".board-header").parent().width()-160)+"px"),this.model.viewState.get("showSidebar")?this.showSidebar():this.hideSidebar()},t.prototype.toggleSidebar=function(){return this.model.viewState.setShowSidebar(!this.model.viewState.get("showSidebar"))},t.prototype.setSidebarShow=function(){this.model.viewState.setShowSidebar(!0)},t.prototype.showSidebar=function(){WindowSize.fSmall&&$("body").addClass("overflow-hidden"),this.renderSidebarDisplayType(),this.$(".board-widgets").removeClass("hide"),_.defer(function(e){return function(){return e.$el.removeClass("disabled-all-widgets")}}(this))},t.prototype.hideSidebar=function(){$("body").removeClass("overflow-hidden"),this.removeSidebarDisplayTypes(),this.$el.addClass("disabled-all-widgets")},t.prototype.finishMovingSidebar=function(){return this.model.getPref("showSidebar")?void 0:this.$(".board-widgets").addClass("hide")},t.prototype.refreshOrganization=function(){var e,t,i,n,r,o;if(e=this.Organization.get(this.model.previous("idOrganization")),t=this.model.getOrganization(),null!=e&&this.stopListening(e),null!=t)for(o=["name","logoHash","displayName"],n=0,r=o.length;r>n;n++)i=o[n],this.listenTo(t,"change:"+i,this.debounce(this.renderBoardHeader));return this.renderBoardHeader()},t.prototype.renderBoardHeader=function(){var e,t,i,n,r;return n=this,t=n.model,e={},e.isPremOrgAdmin=t.isPremOrgAdmin(Auth.me()),e.canRename=e.isPremOrgAdmin||t.owned(),i=t.getOrganization(),null!=i&&(e.orgDisplayName=i.get("displayName"),e.orgName=i.get("name"),r=i.get("logoHash"),r&&(e.orgLogoUrl=""+logoDomain+"/"+r+"/30.png"),e.hasBusinessClass=i.isPremium()),e.hasCalendar=__indexOf.call(this.model.get("powerUps"),"calendar")>=0,this.$(".js-board-header").html(templates.fillFromModel("board_header",t,e)),this.renderPermissionLevel(),this.renderBoardHeaderDescription(),this.renderBoardHeaderCalendar(),this.renderBoardHeaderSubscribed(),this.renderFilteringStatus(),this.renderBoardHeaderStarred(),this},t.prototype.renderBoardHeaderStarred=function(){return this.$(".js-star-board").toggleClass("board-header-btn-enabled",this.model.isStarred()),this},t.prototype.toggleStarred=function(){var e;return e=this.Auth.me().boardStarList,null!=e.getBoardStar(this.model.id)?e.unstarBoard(this.model.id):e.starBoard(this.model.id),this},t.prototype.renderBoardHeaderCalendar=function(){var e;return e=__indexOf.call(this.model.get("powerUps"),"calendar")>=0,this.$(".js-calendar").toggleClass("hide",!e),this},t.prototype.getAllBackgroundClasses=function(){return["body-custom-board-background","body-custom-board-background-tiled","body-light-board-background","body-dark-board-background","body-default-header"].join(" ")},t.prototype.defaultBoardBackground=function(){this.clearBoardBackground(),$("body").addClass("body-default-header")},t.prototype.clearBoardBackground=function(){var e,t;t=this.model.get("prefs"),e=this.getAllBackgroundClasses(),$("body").removeClass(e).css({"background-image":"","background-color":""})},t.prototype.renderBoardBackground=function(e){var t,i,n,r,o,s,a,l,c,d;return null==e&&(e=!1),this.clearBoardBackground(),r=this.model.get("prefs"),t=$("body"),null!=r.backgroundColor?(n=this.model.getClientBackgroundColor(r.background),t.css({"background-color":n}),FavIcon.setBackground({color:n})):(r.backgroundTile?o=s=r.backgroundImage:(s=null!=(a=null!=(l=Util.smallestPreviewBiggerThan(r.backgroundImageScaled,$(window).width(),$(window).height()))?l.url:void 0)?a:r.backgroundImage,o=null!=(c=null!=(d=Util.smallestPreviewBiggerThan(r.backgroundImageScaled,64,64))?d.url:void 0)?c:r.backgroundImage),i=function(){return function(){var e;switch(t.addClass("body-custom-board-background"),r.backgroundTile&&t.addClass("body-custom-board-background-tiled"),e=r.backgroundBrightness){case"light":t.addClass("body-light-board-background");break;case"dark":t.addClass("body-dark-board-background")}return t.css({"background-image":'url("'+s+'")'}),FavIcon.setBackground({url:o,tiled:r.backgroundTile})}}(this),e?Util.waitForImageLoad(s,i):i())},t.prototype.renderBoardHeaderSubscribed=function(){var e;return e=this.model.get("subscribed"),this.$(".js-board-header-subscribed").toggleClass("hide",!e),this},t.prototype.renderBoardHeaderDescription=function(){var e,t,i;return e=this.$(".js-fill-desc"),(t=this.model.get("desc"))?(t?i=t:this.model.editable()&&(i="Click to add a description..."),e.attr("title",i),e.removeClass("hide"),this):(e.addClass("hide"),this)},t.prototype.renameBoard=function(e){Util.stop(e),track("Board View","Board Header","Open Rename Board From Title"),PopOver.toggle({elem:$(e.target).closest("a"),top:35,view:new RenameBoardView({model:this.model,modelCache:this.modelCache})})},t.prototype.openOrgMenu=function(e){Util.stop(e),track("Board View","Board Header","Open Org Menu"),PopOver.toggle({elem:$(e.target).closest("a"),top:35,view:new BoardHeaderOrgMenuView({model:this.model,modelCache:this.modelCache})})},t.prototype.renderPermissionLevel=function(){var e,t,i;return e=this.$("#permission-level"),i={},i.permissionLevel=this.model.getPermLevelIconClass(),i.permText=this.model.getPermDisplayText(),e.html(templates.fillFromModel("board_header_permissions",this.model,i)),e.attr("title",this.model.getPermLevelAltText()),t=this.model.canInvite(Auth.me()),this.$(".js-manage-board-members").toggle(t),this},t.prototype.postListListRender=function(){return log("render","rendering inline composer and calculating list layout"),this.renderInlineListComposer(),this.attachVersionTag(),this.renderFilteringStatus()},t.prototype.renderLists=function(){var e,t,i,n;return n=this,i=n.model,e=this.$("#board").empty(),t=this.collectionSubview(ListListView,this.model.listList,{el:e,resetCallback:function(){return function(){return n.postListListRender()}}(this)}),t.render(),_.defer(function(e){return function(){return e.postListListRender(),DragSort.refreshListCardSortable()}}(this)),this},t.prototype.renderInlineListComposer=function(){this.$(".list.add-list").remove(),this.model.editable()&&this.appendSubview(this.inlineListComposerView,this.$("#board"))},t.prototype.calcSidebarHeight=function(){return this.sidebarView.setSidebarContentHeight()},t.prototype.renderArchiveSidebarDropzone=function(){this.model.viewState.get("archiveSidebarDropzoneVisible")?(this.$el.addClass("active-sidebar-archive-dropzone"),clearTimeout(this.dropzoneTimeoutId)):(this.$el.removeClass("active-sidebar-archive-dropzone"),this.$(".js-sidebar-archive-dropzone").removeClass("hover-state"))},t.prototype.sortStop=function(e,t){Util.stopPropagation(e),t.item.data("dragCancel")||$(t.item).hasClass("list-card")||t.item.trigger("movelist",[t])},t.prototype.changeVis=function(e){Util.stop(e),track("Board View","Board Header","Open Change Visibilty via Header"),PopOver.toggle({elem:this.$(".js-change-vis"),top:35,view:ChangeBoardVisibilityView,options:{model:this.model}})},t.prototype.openDesc=function(e){Util.stop(e),track("Board View","Board Header","Edit Description Button via Header"),Dialog.show({view:new BoardDescView({model:this.model,modelCache:this.modelCache}),maxWidth:500})},t.prototype.toggleCalendar=function(){return this.calendarView?this.navigateToBoard():this.navigateToCalendar()},t.prototype.navigateToCalendar=function(){var e;return track("Board View","Board Header","Open Calendar View via Header"),e=Controller.getBoardUrl(this.modelCache,this.model.id,"calendar"),Controller.navigate(e,{trigger:!0})},t.prototype.navigateToBoard=function(){var e;return track("Board View","Board Header","Close Calendar View via Header"),e=Controller.getBoardUrl(this.modelCache,this.model.id),Controller.navigate(e,{trigger:!0})},t.prototype.showCalendar=function(e){var t,i,n,r;for(this.$(".calendar-btn").addClass("board-header-btn-enabled"),this.$("#board").addClass("hide"),r=this.getCardViews(),i=0,n=r.length;n>i;i++)t=r[i],t.stopListeningToActiveCardChanges();return this.calendarView=new CalendarControllerView({model:this.model,modelCache:this.modelCache}),this.$(".board-canvas").append(this.calendarView.render(e).el),this.calendarView.addedToDOM()},t.prototype.closeCalendarIfOpen=function(){return null!=this.calendarView?this.closeCalendar():void 0},t.prototype.closeCalendar=function(){var e,t,i,n;for(this.calendarView.remove(),this.calendarView=null,this.$(".calendar-btn").removeClass("board-header-btn-enabled"),this.$("#board").removeClass("hide"),n=this.getCardViews(),t=0,i=n.length;i>t;t++)e=n[t],e.listenToActiveCardChanges();return DragSort.refreshListCardSortable()},t.prototype.getCardViews=function(){var e,t,i,n,r,o,s,a,l,c,d;for(n=this.collectionSubview(ListListView,this.model.listList),i=[],c=n.subviewsOfType(ListView),o=0,a=c.length;a>o;o++)for(r=c[o],e=r.collectionSubview(CardListView,r.model.cardList),d=e.subviewsOfType(CardView),s=0,l=d.length;l>s;s++)t=d[s],i.push(t);return i},t.prototype.openFilter=function(e){Util.stop(e),track("Board View","Board Header","Open Filtering via Header"),this.sidebarView.showSubview("filter")},t.prototype.clearFilters=function(e){Util.stop(e),track("Board View","Board Header","Clear Filtering via Header"),this.model.filter.clear()},t.prototype.openUnsubscribe=function(e){Util.stop(e),Confirm.toggle({elem:$(e.target).closest(".js-board-header-subscribed")[0],top:22,model:this.model,title:"Unsubscribe?",text:"You can re-subscribe via the board menu",confirmText:"Unsubscribe",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return track("Board View","Board header","Unsubscribe"),e.model.subscribe(!1)}}(this)})},t.prototype.dblClickAddListMenu=function(e){Util.stop(e),this.model.isMember(Auth.me())&&0===$(e.target).closest(".list").length&&(track("Board View","Open Add List Menu via Double Click"),PopOver.show({clientx:e.clientX,clienty:e.clientY,top:35,view:new AddListPopoverView({model:this.model,modelCache:this.modelCache})}))},t.prototype.reopen=function(){return this.model.reopen()},t.prototype.updateControllerTitle=function(){return Controller.title(this.model.get("name"))},t.prototype.scrollListIntoView=function(e){return this.collectionSubview(ListListView,this.listList).subview(ListView,e).scrollIntoView()},t}(ViewWithId),BoardObserversView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Observers"},t.prototype.events={"click .js-select-member":"showMemberMenu","mouseenter .js-select-member":"hoverItem","mouseleave .js-list":"deselectMembers"},t.prototype.render=function(){return this.$el.html(templates.fillFromModel("observer_list",this.model)),this.renderObservers(),this},t.prototype.hoverItem=function(e){var t;return this.deselectMembers(),t=$(e.target).closest(".item"),Util.selectMenuItem(this.$(".js-list"),".item",t)},t.prototype.deselectMembers=function(){return this.$(".js-list .item").removeClass("selected")},t.prototype.showMemberMenu=function(e){var t,i;Util.stop(e),track("Board View","Show Observer Menu"),t=$(e.target).closest("a").attr("idmember"),i=this.Member.get(t),PopOver.pushView({view:new BoardMemberMenuView({board:this.model,model:i})})},t.prototype.renderObservers=function(){var e,t,i;return e=this.$(".js-list"),i=function(){var e,i,n,r;for(n=this.model.getObserverList(),r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(this.subview(SelectMemberView,t,{showStatus:!0,showUnconfirmed:!0}));return r}.call(this),this.appendSubviews(i,e),this},t}(ViewWithId),AddListPopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add List"},t.prototype.events={"change .js-select-list-pos":"renderValue","click .js-add-list":"addList","submit form":"addList","click .js-cancel":"cancel"},t.prototype.getLists=function(){return this.lists=this.model.openLists(),this.listsLength=this.lists.length+1},t.prototype.render=function(){var e;return e=this,this.$el.html(templates.fill("popover_add_list")),_.delay(function(e){return function(){return e.getClosestListPos(),e.getLists(),e.updateListList()}}(this),10),this},t.prototype.getClosestListPos=function(){var e,t,i;return t=$(".list"),i=[],this.closestListIdx=0,t.each(function(){return function(e){var n;return n=parseInt(Math.abs($(t[e]).offset().left+$(t[e]).width()/2-PopOver.el_left),10),i.push(n)}}(this)),this.closestListIdx=_.indexOf(i,_.min(i)),e=$(t[this.closestListIdx]),e.length>0&&PopOver.el_left>e.offset().left+e.width()/2&&this.closestListIdx<t.length-1?this.closestListIdx+=1:void 0},t.prototype.updateListList=function(){var e,t,i,n,r,o,s;for(r=this,e=$(r.el),i=e.find(".js-select-list-pos"),n=o=0,s=this.listsLength;s>=0?s>o:o>s;n=s>=0?++o:--o)$("<option>").val(n).text(n+1).appendTo(i);return t=i.find("option:last"),t=i.find("option:eq("+this.closestListIdx+")"),t.attr("selected","selected"),this.renderValue()},t.prototype.renderValue=function(){var e;e=parseInt(this.$(".js-select-list-pos").val(),10)+1,$(".js-pos-value").text(Util.getNaturalNumber(e))},t.prototype.addList=function(e){var t,i,n,r,o;return Util.stop(e),r=this.$(".js-list-name").val().trim(),""===r?void this.$(".js-list-name").focus().select():(t=this.$(".js-select-list-pos"),o=parseInt(t.find("option:selected").val(),10),n=o===this.listsLength-1?!1:!0,i="List"===r?!1:!0,PopOver.hide(),void this.model.listList.create({name:r,pos:this.model.calcPos(o),closed:!1},{success:function(e){return function(t){return i&&n?track("Board","Add List","Successfully Add List - Changed Name, Changed Position"):i?track("Board","Add List","Successfully Add List - Changed Name, Default Position"):n?track("Board","Add List","Successfully Add List - Default Name, Changed Position"):track("Board","Add List","Successfully Add List - Default Name, Default Position"),e.model.view.scrollListIntoView(t)}}(this)}))},t.prototype.cancel=function(e){Util.stop(e),PopOver.hide(),track("Board Menu","Add List Menu","Click Cancel Button")},t}(ViewWithId),BoardDescView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:name change:desc",this.renderDebounced)},t.prototype.events={"click .js-edit-desc":"editDesc"},t.prototype.render=function(){var e,t,i;return t=this.model.get("desc"),i=this.model.get("descData"),e={hasDesc:!!t},this.$el.html(templates.fillFromModel("board_desc",this.model,e)),e.hasDesc&&$(this.el).find(".board-description>div.current").html(Format.markdownAsHtml(t,{textData:i})),this},t.prototype.editDesc=function(e){Util.stop(e),this.edit("desc")},t}(EditableView),SharePopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Share, Print, and Export"},t.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export-csv":"exportCSV","click input[type='text']":"focusUrl","submit form":"cancel"},t.prototype.render=function(){var e,t,i;return i=this,t=this.model.getOrganization(),e=this.model.toJSON(),e.hasCsvExport=!1,null!=t&&(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.hasCsvExport=!0,e.csvURL="/b/"+this.model.get("shortLink")+".csv"),(null!=t?t.isPremium():void 0)&&!(null!=t?t.isJPS():void 0)&&(e.needsUpgradeForCsv=!0,e.upgradeUrl="/"+t.get("name")+"/billing"),e.jsonURL="/b/"+this.model.get("shortLink")+".json",e.pLevelClass=this.model.getPermLevelIconClass(),e.pLevelAltText=this.model.getPermLevelAltText(),"org"===this.model.get("prefs").permissionLevel?e.helperText="visible to org":"private"===this.model.get("prefs").permissionLevel&&(e.helperText="private"),this.$el.html(templates.fill("popover_share",e)),this},t.prototype.focusUrl=function(){return this.$(".js-url").focus().select(),!1},t.prototype.cancel=function(e){return Util.stop(e),!1},t.prototype.printModel=function(e){Util.stop(e),track("Board Menu","Share, Print, and Export Menu","Print"),PopOver.hide(),_.defer(function(){return window.print()})},t.prototype.exportJSON=function(){return track("Board Menu","Share, Print, and Export Menu","Export JSON")},t.prototype.exportCSV=function(){return track("Board Menu","Share, Print, and Export Menu","Export CSV")},t}(ViewWithId),CreateBoardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return this.options.copyBoard?"Copy Board":"Create Board"},t.prototype.events={"change select[name='org-id']":"changeOrg","click .js-helper-add-org":"helperAddOrg","submit form":"submit","click .js-submit":"submit","click .js-create-org":"newOrg","click .js-change-vis":"openChangeVis","click .js-select":"selectVis"},t.prototype.getOrganization=function(){switch(this.model.typeName){case"Organization":return this.model;case"Board":return this.model.getOrganization();default:return this.options.organization}},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l,c;for(r=_.map(Auth.me().organizationList.models,function(e){return e.toJSON()}),i=null!=(l=this.getOrganization())?l.id:void 0,s=0,a=r.length;a>s;s++)n=r[s],n.selectOrg=n.id===i?!0:!1;return t=null!=i,e={orgs:r,hasOrg:t,canAddToOrgs:0!==r.length,isCopyBoard:this.options.copyBoard,isNewBoard:this.options.newBoard},o=["What are you organizing?","What are you planning?","Like “Vacation Planning” for example…","Like “House Stuff” for example…","Like “Bucket List” for example…","Like “Game Development Roadmap”…","Like “Calvinball Meetup Schedule”…","Like “Weekly Meal Planning” for example…","Like “School Research” for example…","Like “Team Product Sprint” for example…","Like “Publishing Calendar” for example…","Like “New Hire Onboarding” for example…","Like “Reading Collection” for example…"],e.placeholder=_.sample(o),this.options.term&&(e.name=this.options.term),e.pLevel="private",this.options.copyBoard&&this.model.owned()?e.pLevel=this.model.get("prefs").permissionLevel:t&&(e.pLevel="org"),(null!=(c=this.options)?c.newOrgBoard:void 0)&&(e.hideOrg=!0),this.$el.html(templates.fill("board_new",e)),this.renderBoardVisChooser(),this},t.prototype.renderBoardVisDisplay=function(e){var t,i,n;return n=this.getPermissionLevel(),e?i="<p>Checking visibility permissions…</p>":""!==n?(t={visIconClass:Board.prototype.getPermLevelIconClass(n),visDisplayText:Board.prototype.getPermDisplayText(n).toLowerCase()},i=templates.fill("board_new_vis",t)):i="<p>There was an error setting the visibility.</p>",this.$(".js-vis-display").html(i),PopOver.calcPos(),this},t.prototype.renderBoardVisChooser=function(e){var t,i,n,r,o,s,a,l,c;for(i=this.$("select[name='org-id']").val(),t=i&&""!==i?this.Organization.get(i):null,o={},c=["private","org","public"],a=0,l=c.length;l>a;a++)r=c[a],o["permText_"+r]=Board.prototype.getPermLevelAltText(r,t),o["iconClass_"+r]=Board.prototype.getPermLevelIconClass(r,t);return o.visRestrictionText="You can not create a board with this visibility due to a restriction created by an org admin.",o.hasOrg=null!=t,(null!=t?t.isFeatureEnabled("restrictvis"):void 0)?null!=t&&null!=t.get("memberships")&&null!=t.get("products")&&(null!=t?t.isFeatureEnabled("restrictVis"):void 0)?(this.disableSubmit(),o=_.extend(o,this.getAdditionalVisPermissions(e,t)),this._renderBoardVisChooser(o),this.renderBoardVisDisplay()):(this.disableSubmit(),this.renderBoardVisDisplay(!0),ModelLoader["for"](this.modelCache).loadOrganizationMinimal(i,function(i){return function(n){return null==n?(o=_.extend(o,i.getAdditionalVisPermissions(e,t)),i._renderBoardVisChooser(o),i.renderBoardVisDisplay()):void 0}}(this))):(n=["private","public"],null!=t?n.unshift("org"):o.disabledVis_org=!0,__indexOf.call(n,e)>=0?s=e:this.options.copyBoard&&this.model.owned()&&(s=this.model.get("prefs").permissionLevel),__indexOf.call(n,s)<0&&(s=n[0]),o["permissionLevel_"+s]=!0,this.setPermissionLevel(s),this.enableSubmit(),this._renderBoardVisChooser(o),this.renderBoardVisDisplay()),this},t.prototype.enableSubmit=function(){return this.$(".js-submit").removeClass("disabled")},t.prototype.disableSubmit=function(){return this.$(".js-submit").addClass("disabled")},t.prototype._renderBoardVisChooser=function(e){return this.$(".js-vis-chooser").html(templates.fill("board_menu_vis",e)),this},t.prototype.resetVisChooser=function(){this.$(".js-no-valid-org-privs").addClass("hide")},t.prototype.disableSubmitDueToVisRestrictions=function(e){var t;
t=e.owned(),t?(this.$(".js-org-account-url").attr("href","/"+e.get("name")+"/account"),this.$(".js-not-admin-text").addClass("hide"),this.$(".js-admin-text").removeClass("hide")):(this.$(".js-not-admin-text").removeClass("hide"),this.$(".js-admin-text").addClass("hide")),this.$(".js-no-valid-org-privs").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),this.$(".js-vis-display").addClass("hide")},t.prototype.getAdditionalVisPermissions=function(e,t){var i,n,r;if(i={},r="org",null!=t?t.isFeatureEnabled("restrictVis"):void 0){if(n=[],_.each(["private","org","public"],function(e){return function(r){return e.canChangeOrg(t,r)?n.push(r):(i["disabledVis_"+r]=!0,i["showVisRestriction_"+r]=!0)}}(this)),0===n.length)return this.setPermissionLevel(""),void this.disableSubmitDueToVisRestrictions(t);r=__indexOf.call(n,e)>=0?e:__indexOf.call(n,"org")>=0?"org":_.first(n),this.enableSubmit()}else null!=e?r=e:this.options.copyBoard&&this.model.owned()&&(r=this.model.get("prefs").permissionLevel);return this.setPermissionLevel(r),i["permissionLevel_"+r]=!0,i},t.prototype.openChangeVis=function(e){Util.stop(e),this.$(".js-vis-display").addClass("hide"),this.$(".js-vis-chooser").removeClass("hide"),PopOver.calcPos()},t.prototype.selectVis=function(e){var t,i;Util.stop(e),t=$(e.target).closest(".js-select"),t.hasClass("disabled")||(this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),i=t.attr("name"),this.renderBoardVisChooser(i),track("New Board","Change Visibility",i))},t.prototype.setPermissionLevel=function(e){return this.$("input[name='permissionLevel']").val(e)},t.prototype.getPermissionLevel=function(){var e;return null!=(e=this.$('input[name="permissionLevel"]').val())?e:""},t.prototype.canChangeOrg=function(e,t){var i,n,r,o;return i=Auth.me(),(null!=e?e.isFeatureEnabled("restrictVis"):void 0)?(o=e.getMembershipFor(i).memberType,n=function(){switch(o){case"admin":return 2;case"normal":return 1}}(),r=function(){var i,n;switch(null!=(i=e.get("prefs"))&&null!=(n=i.boardVisibilityRestrict)?n[t]:void 0){case"none":return 3;case"admin":return 2;default:return 1}}(),n>=r):!0},t.prototype.changeOrg=function(){return this.resetVisChooser(),this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),this.renderBoardVisChooser(this.getPermissionLevel())},t.prototype.helperAddOrg=function(e){Util.stop(e),PopOver.pushView({view:new NewBoardHelperAddOrg({model:this.model,modelCache:this.modelCache})})},t.prototype.submit=function(e){var t,i,n,r,o,s,a,l,c,d;return Util.stop(e),this.$(".js-submit").hasClass("disabled")?void 0:(t=this.$('input[name="name"]'),o=t.val().trim(),""===o?void t.focus().select():(n=null!=(d=this.$('select[name="org-id"]').val())?d:"",i={name:o,idOrganization:n,closed:!1},a=this.$('input[name="permissionLevel"]').val(),c=""!==n&&"private"!==a,l=_.extend({prefs_permissionLevel:a,prefs_selfJoin:c,defaultLists:!1},i),r=_.extend({prefs:{background:"blue",backgroundBrightness:"unknown",backgroundColor:"#23719F",backgroundTile:!1,canInvite:!0,comments:"members",invitations:"members",permissionLevel:a,selfJoin:c},myPrefs:{showSidebar:!0,showSidebarActivity:!0,showSidebarBoardActions:!0,showSidebarMembers:!0},powerUps:[],memberships:[{deactivated:!1,idMember:Auth.myId(),memberType:"admin",unconfirmed:!1}]},i),this.options.copyBoard&&(l.idBoardSource=this.model.id,l.keepFromSource=this.$("input:checkbox:checked").map(function(){return this.name}).get().join()),this.options.newBoard?track("New Board","New"):this.options.copyBoard&&track("New Board","Copy"),s=Auth.me().boardList.create(r,{modelCache:this.modelCache,requestData:l,success:function(e){return function(t){var i,n;e.options.copyBoard&&Alerts.hide("copying"),n=t.id,__indexOf.call(i=Auth.me().get("idBoards"),n)<0&&Auth.me().set("idBoards",i.concat(t.id)),e.options.copyBoard&&Controller.displayBoard({idBoard:t.id})}}(this)}),this.options.copyBoard?Alerts.show("Copying...","info","copying"):Controller.displayBoard({newBoard:s}),PopOver.hide()))},t.prototype.newOrg=function(e){return Util.stop(e),PopOver.pushView({view:new CreateOrgView({model:this.model,modelCache:this.modelCache})})},t}(ViewWithId),BoardHeaderOrgMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return""+this.model.getOrganization().get("displayName")},t.prototype.events={"click .js-change-org":"openChangeOrg","click .js-view-org":"viewOrg"},t.prototype.render=function(){var e,t;return t=this.model.getOrganization(),e=t.toJSON(),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(templates.fill("popover_board_header_org_menu",e)),this},t.prototype.openChangeOrg=function(){var e,t;this.model.owned()?(PopOver.pushView({view:BoardSelectOrganizationView,options:{model:this.model,modelCache:this.modelCache}}),track("Board Header","Change Org from Board Header Org Menu")):(e=this.model.get("idOrganization"),null!=(t=this.Organization.get(e))&&t.boardList.remove(this.model),this.model.update("idOrganization",""),PopOver.hide(),track("Board Header","Remove Org from Board Header Org Menu"))},t.prototype.viewOrg=function(){return track("Board Header","View Org From Board Header Org Menu")},t}(ViewWithId),NewBoardHelperAddOrg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add an Organization"},t.prototype.events={"click .js-create-org":"newOrg"},t.prototype.render=function(){var e;return e=this,this.$el.html(templates.fill("popover_helper_new_board_add_org")),this},t.prototype.newOrg=function(e){return Util.stop(e),PopOver.pushView({view:new CreateOrgView({model:this.model,modelCache:this.modelCache})})},t}(ViewWithId);var BoardBackground,BoardBackgroundList,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};BoardBackground=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typename="CustomBoardBackground",t}(TrelloModel),BoardBackgroundList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=BoardBackground,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardBackgrounds"},t.prototype.initialize=function(e,t){this.member=t.member},t}(CollectionWithHooks);var AttachmentTypePickerView,CalendarCardView,Card,CardCopyView,CardDetailMoreMenuView,CardDetailView,CardLabelSelectView,CardList,CardListView,CardMemberSelectView,CardMenuMoreMetaView,CardMoreMenuView,CardMoveView,CardView,CardViewHelpers,FormattingHelp,MemberCardsCardView,SelectCardPosition,UploadingLinkView,_CardCopyView,_CardDetailView,_CardMoveView,_CardView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};Card=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="Card",t.prototype.urlRoot="/1/cards",t.prototype.initialize=function(){return this.destruct([this.memberList=(new MemberList).syncModel(this,"idMembers"),this.memberVotedList=(new MemberList).syncModel(this,"idMembersVoted"),this.checklistList=(new ChecklistList).syncCache(this.modelCache,["idCard"],function(e){return function(t){return t.get("idCard")===e.id}}(this)),this.attachmentList=(new AttachmentList).syncSubModels(this,"attachments"),this.actionList=(new ActionList).syncCache(this.modelCache,[],function(e){return function(t){var i,n,r,o;return i=t.get("data"),t.includesModel(e.typeName,e.id)||(null!=i&&null!=(n=i.cardSource)?n.id:void 0)===e.id?(null!=(r=i.board)?r.id:void 0)===e.get("idBoard")||"commentCard"===(o=t.get("type"))||"copyCommentCard"===o:!1}}(this)),this.stickerList=new StickerList(this.get("stickers"),{card:this,modelCache:this.modelCache}).syncSubModels(this,"stickers"),this.memberEditingList=new MemberList]),this.listenTo(this,"change:id",function(e){return function(){return e.actionList.sync()}}(this)),this.markRelatedNotificationsReadNowDebounced=Util.voidDebounced(this.markRelatedNotificationsReadNow),this._initSubEventsOn("badges"),this.cacheShortLink(),this.cacheBoardId()},t.prototype.cacheShortLink=function(){return this.onId(function(e){return function(){return e.waitForAttr("shortLink",function(){return IdCache.setCardId(e.get("shortLink"),e.id)})}}(this))},t.prototype.cacheBoardId=function(){return this.onId(function(e){return function(){return e.waitForAttr("idBoard",function(){return IdCache.setBoardIdForCard(e.id,e.get("idBoard"))})}}(this))},t.get=function(e,i){return Util.isShortLink(i)?t.findOne(e,function(e){return e.get("shortLink")===i}):t.__super__.constructor.get.apply(this,arguments)},t.prototype.updateEditing=function(e){return null==this._editingTimeout&&(this._editingTimeout={}),this.memberEditingList.add(e),null!=this._editingTimeout[e.id]&&(clearTimeout(this._editingTimeout[e.id]),delete this._editingTimeout[e.id]),this._editingTimeout[e.id]=setTimeout(function(t){return function(){return t.memberEditingList.remove(e)}}(this),EDITING_AUTO_CLEAR_MS)},t.prototype.sync=function(e,i,n){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idList")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(["idBoard","idList"],function(r){return function(o){return r.set(o),t.__super__.sync.call(r,e,i,n)}}(this)),this.getBoard().onId(function(e){return function(t){return e.set("idBoard",t)}}(this)),this.getList().onId(function(e){return function(t){return e.set("idList",t)}}(this)))},t.prototype.set=function(e){var i;return(null!=e?e.labels:void 0)&&(e.labels=function(){var t,n,r,o,s;for(r=e.labels,s=[],t=0,n=r.length;n>t;t++)i=r[t],s.push(null!=(o=i.color)?o:i);return s}()),(null!=e?e.badges:void 0)&&(e.badges=_.extend({},this.get("badges"),e.badges)),t.__super__.set.apply(this,arguments)},t.prototype.moveToList=function(e,t){var i;return i=this,e.onId(function(){return function(n){var r,o,s,a,l,c;return s=e.calcPos(t,i),r=e.getBoard().composer,s!==i.get("pos")||i.get("idList")!==n||i.get("closed")?(l=i.get("idList"),c=i.getIndexInList(),i.update({pos:s,idList:n,closed:!1}),void((null!=r?r.get("vis"):void 0)&&(o=a=r.get("index"),r.get("idList")===n&&r.get("index")>=t&&o++,r.get("idList")===l&&r.get("index")>c&&o--,r.set("index",o)))):(o=r.get("index"),void(o===t?r.set("index",o+1):o===t+1&&r.set("index",o-1)))}}(this))},t.prototype.moveToNextList=function(){var e,t;t=this.getBoard().openLists(),e=_.indexOf(t,this.getList()),e<t.length-1&&this.moveToList(t[e+1],1e9)},t.prototype.moveToPrevList=function(){var e,t;t=this.getBoard().openLists(),e=_.indexOf(t,this.getList()),e>0&&this.moveToList(t[e-1],1e9)},t.prototype.toggleMember=function(){var e,t,i,n,r;return e=arguments[0],n=3<=arguments.length?__slice.call(arguments,1,r=arguments.length-1):(r=1,[]),i=arguments[r++],t=n[0],null==t&&(t=!this.hasMember(e)),t&&Auth.isMe(e)&&this.set("subscribed",!0),this.toggle("idMembers",e,t,i)},t.prototype.addMember=function(e,t){return this.toggleMember(e,!0,t)},t.prototype.removeMember=function(e,t){return this.toggleMember(e,!1,t)},t.prototype.hasMember=function(e){return this.memberList.get(e)},t.prototype.getIdCardMems=function(){return _.map(this.memberList.models,function(){return function(e){return e.id}}(this))},t.prototype.getIdCommenters=function(){var e,t;return t=[],e=_.each(this.Action.getListForModel(this),function(){return function(e){var i;return"commentCard"===e.get("type")?(i=e.get("idMemberCreator"),t.push(i)):void 0}}(this)),this.idCommenters=_.uniq(t),this.idCommenters},t.prototype.hasChecklist=function(e){return this.checklistList.get(e)},t.prototype.close=function(e){this.update({closed:!0},e)},t.prototype.reopen=function(){var e;e=this.getList(),null!=e&&this.update({closed:!1,pos:e.calcPos(e.cardList.length,this)})},t.prototype.getBoard=function(){var e,t;return null!=(e=this.Board.get(this.get("idBoard")))?e:null!=(t=this.getList())?t.getBoard():void 0},t.prototype.getIndexInList=function(){return _.indexOf(this.getList().cardList.models,this)},t.prototype.getList=function(){var e,t;return null!=(e=this.List.get(this.get("idList")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.getUrl=function(){return Controller.getCardUrl(this)},t.prototype.getFullUrl=function(){return""+siteDomain+this.getUrl()},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.addComment=function(e){var t,i,n;t=this,i=_.max([new Date,null!=(n=t.actionList.sort().first())?n.getDate().addSeconds(1):void 0]).toISOString(),""!==e&&t.onId(function(n){return function(){var r,o,s;return o=t.getBoard(),r=new Action({type:"commentCard",date:i,data:{text:e,card:{id:t.id,name:t.get("name")},board:{id:o.id,name:o.get("name")},textData:{emoji:Auth.me().allCustomEmoji()}},idMemberCreator:Auth.myId()},{modelCache:n.modelCache}),s=setTimeout(function(){return r.takingTooLong()},2e3),ApiAjax({url:"/1/cards/"+t.id+"/actions/comments",type:"post",data:{text:e},dataType:"json",success:function(e){return clearTimeout(s),r.isTakingTooLong=!1,n.modelCache.enqueueDelta(r,e)}})}}(this))},t.prototype.changeDueDateMaintainTime=function(e){var t,i,n;return i=null!=(n=new Date(this.get("due")))?n:(new Date).setHours(12,0,0,0),t=Dates.getDateWithSpecificTime(i,e),this.update({due:t})},t.prototype.vote=function(e){return this.getBoard().canVote(Auth.me())?this.waitForLock("vote",function(t){return function(i){var n,r;return e===t.voted()?i():(n=null!=(r=_.clone(t.get("badges")))?r:{},e?(n.votes++,n.viewingMemberVoted=!0):(n.votes--,n.viewingMemberVoted=!1),t.set("badges",n),void t.toggle("idMembersVoted",Auth.myId(),e,{collectionName:"membersVoted"},i))}}(this)):void 0},t.prototype.voted=function(){var e,t;return null!=(e=null!=(t=this.get("badges"))?t.viewingMemberVoted:void 0)?e:!1},t.prototype.hasStickers=function(){return this.stickerList.length>0},t.prototype.hasCover=function(){return null!=this.attachmentList.get(this.get("idAttachmentCover"))},t.prototype.getVoterDisplayData=function(e){return this.onId(function(t){return function(){return ModelLoader["for"](t.modelCache).loadCardVoters(t.id,e)}}(this))},t.prototype.getAllAgingClasses=function(){return"aging-level-0 aging-level-1 aging-level-2 aging-level-3 aging-pirate aging-regular"},t.prototype.getAgingData=function(){var e,t,i;return e=this.getBoard(),i=Date.now()-new Date(this.get("dateLastActivity")),t={level:function(){switch(!1){case!(i<Util.getMs({days:7})):return 0;case!(i<Util.getMs({days:14})):return 1;case!(i<Util.getMs({days:28})):return 2;default:return 3}}(),mode:e.get("prefs").cardAging},t.agingClassesToAdd="aging-level-"+t.level+" aging-"+t.mode,/64$/.test(this.id)&&(t.agingClassesToAdd+=" aging-treasure"),t},t.prototype.toggleVote=function(){this.vote(!this.voted())},t.prototype.subscribe=function(e){var t;e!==this.get("subscribed")&&(t=this.get("badges"),t.subscribed=e,this.update({subscribed:e}))},t.prototype.getCheckItem=function(e){var t,i,n,r,o,s;for(n=r=0,o=this.checklistList.length-1;o>=0?o>=r:r>=o;n=o>=0?++r:--r)if(i=this.checklistList.at(n),t=null!=i&&null!=(s=i.checkItemList)?s.get(e):void 0)return t;return null},t.prototype.getLabels=function(){var e,t,i,n,r;for(n=Util.labelNames,r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(this.getLabel(e));return r},t.prototype.getActiveLabels=function(){var e,t,i,n,r;for(n=this.getLabels(),r=[],t=0,i=n.length;i>t;t++)e=n[t],e.isActive&&r.push(e);return r},t.prototype.getCard=function(){return this},t.prototype.hasLabel=function(e){var t;return t=this.get("labels"),null==t&&(t=[]),__indexOf.call(t,e)>=0},t.prototype.setLabel=function(e,t){this.toggle("labels",e,t)},t.prototype.getLabel=function(e){return{shortcut:String.fromCharCode("1".charCodeAt(0)+_.indexOf(Util.labelNames,e)),color:e,name:this.getBoard().getLabelName(e),isActive:this.hasLabel(e)}},t.prototype.toggleLabel=function(e){this.setLabel(e,!this.hasLabel(e))},t.prototype.markRelatedNotificationsReadNow=function(){var e,t,i,n,r,o;for(t=function(e){return function(t){var i,n;return t.get("unread")&&(null!=(i=t.get("data"))&&null!=(n=i.card)?n.id:void 0)===e.id}}(this),r=Notification.all("header"),o=[],i=0,n=r.length;n>i;i++)e=r[i],t(e)&&o.push(e.markRead());return o},t.prototype.markRelatedNotificationsRead=function(){return"active"!==Monitor.getStatus()||("function"==typeof Monitor.getHidden?Monitor.getHidden():void 0)?$(Monitor).one("setStatus."+this.id+" visibilitychange."+this.id,function(e){return function(){return e.markRelatedNotificationsRead()}}(this)):this.markRelatedNotificationsReadNowDebounced()},t.prototype.unbindMarkRead=function(){return $(Monitor).off("setStatus."+this.id+" visibilitychange."+this.id)},t.prototype.toJSON=function(e){var i;return null==e&&(e={}),i=t.__super__.toJSON.apply(this,arguments),e.url&&(i.url=Controller.getCardUrl(this)),i},t.prototype.upload=function(){var e,t,i,n,r,o;return t=arguments[0],r=3<=arguments.length?__slice.call(arguments,1,o=arguments.length-1):(o=1,[]),n=arguments[o++],i=r[0],MemberState.addProcessingAttachment(),e=new FormData,e.append("token",Auth.myToken()),null!=i?e.append("file",t,i):e.append("file",t),ApiAjax({url:"/1/cards/"+this.id+"/attachments",data:e,type:"post",processData:!1,contentType:!1,error:function(){return function(e,r,o,s){var a,l,c;return l=e.status,a=e.responseText,413===l?n("Error uploading "+(null!=(c=t.name)?c:i)):s()}}(this),success:function(){return n()},complete:function(){return MemberState.removeProcessingAttachment()},timeout:Util.getMs({hours:6})})},t.prototype.uploadUrl=function(e,t,i){return MemberState.addProcessingAttachment(),ApiAjax({url:"/1/cards/"+this.id+"/attachments",type:"post",data:{url:e,name:t},error:function(){return function(e,t){var n,r;return r=e.status,n=e.responseText,i(t)}}(this),success:function(){return i()},complete:function(){return MemberState.removeProcessingAttachment()}})},t.prototype.removeCover=function(){return this.update({idAttachmentCover:""})},t.prototype.makeCover=function(e){return this.update({idAttachmentCover:e.id})},t.prototype.calcChecklistPos=function(e,t){return Util.calcPos(e,this.checklistList,t)},t.prototype._neighbor=function(e){var t,i,n;if(i=this.getList().openCards(),n=this.getBoard().filter,t=_.indexOf(i,this),t>=0){for(t+=e;null!=i[t]&&!n.satisfiesFilter(i[t]);)t+=e;return i[t]}return null},t.prototype.prevCard=function(){return this._neighbor(-1)},t.prototype.nextCard=function(){return this._neighbor(1)},t}(TrelloModel),CardList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Card,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.list=t.list},t.prototype.url="/1/cards",t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.openCards=function(){return this.filter(function(e){return!e.get("closed")})},t}(CollectionWithHelpers),CardViewHelpers=function(){function e(){}return e.prototype.openMemberOnCardMenu=function(e){var t,i,n,r;Util.stop(e),i=this.$(e.target).closest(".member"),n=i.attr("data-idmem"),r=this.Member.get(n),t=this.model,PopOver.toggle({elem:i,top:i.hasClass("member")?35:16,view:CardMemberMenuView,options:{model:r,modelCache:this.modelCache,card:t}})},e.prototype.getMemberOnCardHtml=function(e){var t,i,n;return t=e.toJSON(),i=this.model.getBoard().getOrganization(),t.isVirtual=(null!=i?i.isVirtual(e):void 0)||(null!=(n=this.model.getBoard())?n.isVirtual(e):void 0),null!=i&&(t.isDeactivated=i.isDeactivated(e)),templates.fill("member_on_card",t,"",{member:templates.member})},e}(),CardView=mixin(FileDropTarget,CardViewHelpers,_CardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.HOOK_DROPPABLE_QUEUE=new async.queue(function(e,t){return e.hookDroppable(_.defer(t))},1),t.prototype.className="list-card js-member-droppable",t.prototype.filterDeactivated=!0,t.prototype.showMemberStatus=!1,t.prototype.applyBoardCardFilter=!0,t.prototype.events={moveto:"moveTo",movein:"moveIn",moveToCalendarDay:"moveToCalendarDay",moveInCalendarDay:"moveInCalendarDay","click .js-open-quick-card-editor":"openQuickCardEditor","click .js-member-on-card-menu":"openMemberOnCardMenu",click:"showDetail",mouseover:"selectCard",mouseenter:"mouseEnterEvent",mouseleave:"mouseLeaveEvent",dragenter:"dragenterFront",dragover:"dragover",dragleave:"dragleave",dragexit:"dragexit",dragend:"dragend",drop:"dropFront",mousedown:"mousedown",mouseup:"mouseup",shortcut:"shortcut",paste:"paste"},t.prototype.initialize=function(){var e,t,i,n;for(this.onCalendar||(this.model.view=this),n=["filterDeactivated","showMemberStatus","applyBoardCardFilter"],t=0,i=n.length;i>t;t++)e=n[t],null!=this.options[e]&&(this[e]=this.options[e]);return this.makeDebouncedMethods("renderName","renderLabels","renderCover","renderFiltered","renderPowerUpEffects","renderStickers"),PostRender.enqueue("initialize_"+this.cid,function(e){return function(){var t,i;return e.listenTo(e.model,{"change:name":e.renderNameDebounced,"change:labels":e.renderLabelsDebounced,"change:idAttachmentCover":e.renderCoverDebounced,"change:name change:labels change:due":e.renderFilteredDebounced,"change:dateLastActivity":e.renderPowerUpEffectsDebounced}),e.listenTo(e.model.memberList,"add remove reset",function(){return e.renderMembers(),e.renderFiltered()}),e.listenTo(e.model.stickerList,{"add remove reset change sort":e.renderStickersDebounced}),t=e.model.getBoard(),e.listenTo(t,"change:powerUps change:prefs.cardAging",e.renderPowerUpEffectsDebounced),e.listenTo(t.filter,"change",e.renderFiltered),i=t.viewState,e.listenTo(i,"change:cardMode",function(){return i.get("idActiveCard")===e.model.id&&"editStickers"===i.get("cardMode")?e.editStickers():void 0}),e.listenToActiveCardChanges()}}(this))},t.prototype.destructor=function(){var e;return e=this.model.getBoard(),null!=e&&this.stopListeningToActiveCardChanges(),this.subview(BadgesView,this.model).recursivelyStopListening(),t.__super__.destructor.apply(this,arguments)},t.prototype.listenToActiveCardChanges=function(){var e;return e=this.model.getBoard().viewState,this.listenTo(e,"change:idActiveCard",this.setActiveCard)},t.prototype.stopListeningToActiveCardChanges=function(){var e;return e=this.model.getBoard().viewState,this.stopListening(e,"change:idActiveCard",this.setActiveCard)},t.prototype.setActiveCard=function(){var e;return this.model.getBoard().viewState.isCardSelected(this.model)?(UserInput.addHandler(this,{scope:"card"}),$(".list-card.active-card").removeClass("active-card"),null!=(e=this.$el)?e.addClass("active-card"):void 0):void 0},t.prototype.getKeyScope=function(){return"cardView"},t.prototype.shortcut=function(e){var t,i,n,r,o,s;switch(r=Auth.isLoggedIn(),i=this.model.editable(),o=this.onCalendar,e){case Key_Enter:return this.showDetail(),"Enter - Open Card";case Key_E:if(i)return this.openQuickCardEditor(),"E - Open Quick Card Editor";break;case Key_T:return Controller.showCardDetail(this.model,"editTitle"),"T - Open Card and Edit Title";case Key_D:if(i)return this.showPopOver(DatePickerView),["D - Due Dates","On Board View"];break;case Key_L:if(i)return this.showPopOver(CardLabelSelectView),["L - Edit Labels","On Board View"];break;case Key_1:case Key_2:case Key_3:case Key_4:case Key_5:case Key_6:case Key_Numpad_1:case Key_Numpad_2:case Key_Numpad_3:case Key_Numpad_4:case Key_Numpad_5:case Key_Numpad_6:if(i)return t=e>=Key_1&&Key_6>=e?Key_1:Key_Numpad_1,n=e-t,this.model.toggleLabel(Util.labelNames[n]),"1-6 - Toggle Specific Label";break;case Key_A:case Key_M:if(i)return this.showPopOver(CardMemberSelectView),["A - Assign Members","Board View"];break;case Key_Space:if(i)return this.model.toggleMember(Auth.myId()),"Space - Toggle Assigning Self";break;case Key_C:case Key_Delete:if(i)return this.model.close(),"C / Delete - Archive Card";break;case Key_Period:if(i&&!o)return this.model.moveToNextList(),"> - Move to Next List";break;case Key_Comma:if(i&&!o)return this.model.moveToPrevList(),"< - Move to Previous List";break;case Key_V:if(r)return this.model.toggleVote(),"V - Vote";break;case Key_S:if(r)return s=this.model.get("subscribed"),this.model.subscribe(!s),["S - Subscribe",s?"Unsubscribe":"Subscribe"]}},t.prototype.paste=function(e,t){var i;return"image"===e?(i=new Date,this.model.upload(t,"upload "+i.toString("yyyy-MM-dd")+" at "+i.toString("h.mm.ss tt").toLowerCase()+".png",function(){}),["Paste - Upload Image From Clipboard","Card"]):void 0},t.prototype.showPopOver=function(e){return PopOver.toggle({elem:this.$(".js-card-menu"),view:e,options:{model:this.model,showShortcuts:!0,hideOnSelect:!0}})},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l;for(log("render","rendering card "+this.model.get("name")),e=this.model.toJSON(),e.showCover=this.showCover(),e.showEditor=this.model.editable()&&!this.options.hideMenu,this.model.hasStickers()&&(e.hasStickers=!0),e.labels=this.model.getActiveLabels(),r=this.model.getBoard().getOrganization(),e.members=[],l=this.model.memberList.models.reverse(),s=0,a=l.length;a>s;s++)i=l[s],n=i.toJSON(),n.isVirtual=(null!=r?r.isVirtual(i):void 0)||this.model.getBoard().isVirtual(i),null!=r&&(n.isDeactivated=r.isDeactivated(i)),e.members.push(n);return this.$el.toggleClass("js-archive-card",this.model.get("closed")),this.showCover()&&(t=this.model.hasCover()),this.$el.toggleClass("has-cover",t),this.model.hasStickers()&&this.$el.addClass("has-stickers"),o={label:templates.label,member_on_card:templates.member_on_card,member:templates.member},this.el.innerHTML=templates.fill("card_in_list",e,{editable:this.model.editable()},o),this.setActiveCard(),this.renderFiltered(),this.renderBadges(),PostRender.enqueue("render_"+this.cid,function(e){return function(){return e.renderCover(),e.renderStickers(),e.renderPowerUpEffects(),e.model.onId(function(){return e.renderLink()}),e._droppableHookedSinceRender=!1,Browser.isTouch()?void 0:CardView.HOOK_DROPPABLE_QUEUE.push(e)}}(this)),this},t.prototype.hookDroppable=function(e){return null==this.$el?"function"==typeof e?e():void 0:this._droppableHookedSinceRender?"function"==typeof e?e():void 0:(this._droppableHookedSinceRender=!0,Browser.isTouch()||this.$el.droppable({refreshPositions:!0,inBounds:function(){return function(e){var t,i,n,r,o;return n=DragSort.boardOffset,t=DragSort.boardHeight,i=DragSort.boardWidth,n.left<(r=e.pageX)&&r<n.left+i&&n.top<(o=e.pageY)&&o<n.top+t}}(this),accept:".js-list-draggable-board-members .member, .js-draggable-sticker",hoverClass:"active-card",drop:function(e){return function(t,i){var n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y;i.draggable.hasClass("member")?(a=i.draggable.data("id"),s=i.draggable.clone(),l=e.model.memberList.detect(function(e){return e.id===a}),l||(e.model.addMember(a),track("Card","Add Member by Board Sidebar"))):i.draggable.hasClass("js-draggable-sticker")&&(h=i.draggable.data("sticker"),o=n=r=1,f=i.helper.offset(),g={top:e.$el.offset().top+o,left:e.$el.offset().left+n},b=e.$el.outerWidth()-n-r,d=f.left-g.left,u=f.top-g.top,c=d/b*100,m=e.$(".js-card-stickers").height(),v=e.$el.hasClass("has-stickers")||e.$el.hasClass("has-cover")?u/m*100:0,v>m&&(v=m),y=Util.getElemTransformMatrix(i.helper.find(".sticker-select-fixed")),p=null!=y?Util.getMatrixDegrees(y)%360:0,e.addNewStickerToList(h,c,v,p))}}(this)}),"function"==typeof e?e():void 0)},t.prototype.addNewStickerToList=function(e,t,i,n){var r,o;r=null!=(o=e.id)?o:e.get("image"),track("Card","Sticker",r),this.model.stickerList.create({image:r,left:t,top:i,rotate:n,zIndex:this.model.stickerList.nextZIndex(),imageUrl:e.get("url"),imageScaled:e.get("scaled")},{modelCache:this.modelCache})},t.prototype.showStickers=function(){return!this.onCalendar},t.prototype.renderStickers=function(){var e,t,i,n,r;return this.showStickers()?(t=this.$(".list-card-stickers-area"),e=this.$(".js-card-stickers").empty(),i=this.model.hasStickers(),i?(this.$el.addClass("has-stickers"),t.removeClass("hide"),r=function(){var e,t,i,r;for(i=this.model.stickerList.models,r=[],e=0,t=i.length;t>e;e++)n=i[e],r.push(this.subview(StickerView,n));return r}.call(this),this.appendSubviews(r,e)):(this.$el.removeClass("has-stickers"),t.addClass("hide")),this):void this.$el.removeClass("has-stickers")},t.prototype.renderName=function(){var e,t;return e=this.model.toJSON(),t=templates.fill("card_title_on_card_front",e),this.$(".js-card-name").html(t),this},t.prototype.renderLink=function(){var e;return e=Controller.getCardUrl(this.model),this.$(".js-card-name").attr("href",e),this},t.prototype.renderLabels=function(){var e,t;return t=function(){var t,i,n,r;for(n=this.model.getActiveLabels(),r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(templates.fill("label",e));return r}.call(this).join(""),this.$(".js-card-labels").empty().append(t),this},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()&&!this.onCalendar},t.prototype.renderCover=function(){var e,t,i,n,r,o,s,a,l,c;return this.showCover()&&(i=this.model.attachmentList.get(this.model.get("idAttachmentCover"))),null!=i?(s=Browser.isHighDPI()?600:300,a=null!=(l=i.smallestPreviewBiggerThan(s))?l:i.biggestPreview(),r=null!=a?a.url:i.get("url"),e=this.$(".js-card-cover"),e.css({"background-color":null!=(c=i.get("edgeColor"))?c:"transparent","background-image":'url("'+r+'")'}).removeClass("hide").toggleClass("no-preview-size",null==a),null!=a&&(t=this.$(".js-card-stickers"),o=Math.min(a.height,250),n=217*a.height/a.width,o>=n?(e.css({height:n,"background-size":"cover"}),t.css("height",n)):(e.css({height:o,"background-size":"contain"}),t.css("height",o)))):this.$(".js-card-cover").css({"background-image":""}).addClass("hide").removeClass("no-preview-size"),this.$el.toggleClass("has-cover",null!=i),this},t.prototype.renderFiltered=function(){var e,t;if(null==this.options.dontFilter)return null==this._visible&&(this._visible=!0),e=this.model.getBoard(),t=null==e||!Controller.onBoardView(e.id)||!this.applyBoardCardFilter||e.filter.satisfiesFilter(this.model),this._visible!==t&&(this.$el.toggleClass("hide",!t).height(t?"":0),this._visible=t),this},t.prototype.renderBadges=function(){var e;return e=this.subview(BadgesView,this.model),this.$(".badges").replaceWith(e.render().el),this},t.prototype.renderMembers=function(){var e,t,i,n,r;return e="",r=this.model.getBoard().getOrganization(),n=this.model.memberList.models.reverse(),i=function(){var e,i,r;for(r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(this.getMemberOnCardHtml(t));return r}.call(this).join(""),this.$(".js-list-card-members").empty().append(i),this},t.prototype.renderPowerUpEffects=function(){var e,t,i;return e=this.model.getBoard(),this.$el.removeClass(this.model.getAllAgingClasses()),__indexOf.call(null!=(i=e.get("powerUps"))?i:[],"cardAging")>=0&&!this.model.get("closed")?(t=this.model.getAgingData(),this.$el.addClass(t.agingClassesToAdd)):void 0},t.prototype.openQuickCardEditor=function(e){return Util.stop(e),PopOver.hide(),QuickCardEditorView.open(this),track("Card Front","Open Quick Card Editor"),this},t.prototype.moveToCalendarDay=function(e,t,i){var n,r,o,s,a,l,c;return(r=t.sender.hasClass("js-archive-items"))?(n=i.data.day,a=null!=(c=new Date(this.model.get("due")))?c:(new Date).setHours(12,0,0,0),s=Dates.getDateWithSpecificTime(a,n),this.model.update({due:s,closed:!1})):(i.getCardView(this.model).delegateEvents(),(o=DragSort.isInSidebarArchiveDropzone)?this.model.get("closed")?void 0:(this.model.close(),i.renderCardsAndListHeaders()):(l=new Date(i.data.day),this.model.changeDueDateMaintainTime(l),i.updateHeader(),i.renderCardsAndListHeaders()))
},t.prototype.moveInCalendarDay=function(e,t,i){var n;return i.getCardView(this.model).delegateEvents(),n=DragSort.isInSidebarArchiveDropzone,n&&(this.model.get("closed")||this.model.close()),i.renderCardsAndListHeaders()},t.prototype.moveTo=function(e,t,i,n){var r,o,s,a,l,c,d;return 0===t.item.parents(".list").length?(null!=i&&i.renderCards(),void(null!=(c=this.model.getList())&&null!=(d=c.view)&&d.renderCards())):(l=this.model,a=this.model.get("closed"),o=DragSort.isInSidebarArchiveDropzone,void(o?a||this.model.update("closed",!0):(r=t.item.parents(".list").find(".list-card:not(.placeholder,.js-composer)"),s=r.index(t.item),n||t.item.remove(),this.model.moveToList(i.model,s))))},t.prototype.moveIn=function(e,t,i){i.model.id===this.model.get("idList")&&this.moveTo(e,t,i,!0)},t.prototype.selectCard=function(){var e,t;PopOver.isVisible||DragSort.sorting||(null!=(e=this.model.getBoard())&&null!=(t=e.view)?t.ignoreMouseCardSelects:void 0)||this.model.getBoard().viewState.selectCard(this.model)},t.prototype.mouseEnterEvent=function(){this.selectCard(),CardView.HOOK_DROPPABLE_QUEUE.push(this)},t.prototype.mouseLeaveEvent=function(){this.deselectCard(),CardView.HOOK_DROPPABLE_QUEUE.push(this)},t.prototype.deselectCard=function(){var e,t;PopOver.isVisible||DragSort.sorting||(null!=(e=this.model.getBoard())&&null!=(t=e.view)?t.ignoreMouseCardSelects:void 0)||($(".list-card.active-card").removeClass("active-card"),UserInput.removeHandlerScope("card"),this.model.getBoard().viewState.selectCard(null))},t.prototype.showDetail=function(e){return e&&(e.ctrlKey||e.metaKey||e.shiftKey)||!this.doClicks()||this._wasLongPress?void 0:(Util.stop(e),Controller.showCardDetail(this.model))},t.prototype.dragenterFront=function(e){var t;return t=this.$el.outerHeight(),this.$(".list-card-dropzone").css({height:""+t+"px","line-height":""+t+"px"}),this.dragenter(e)},t.prototype.dropFront=function(e){return track("Card Front","Drop Attachment Upload"),this.drop(e)},t.prototype.doClicks=function(){return!DragSort.sorting},t.prototype._cancelLongPress=function(){return clearTimeout(this._longPressTimeout),this._longPressTimeout=null,this._wasLongPress?_.defer(function(e){return function(){return e._wasLongPress=!1}}(this)):void 0},t.prototype.mousedown=function(e){var t,i,n,r;if(this.model.editable())return this._cancelLongPress(),r=null!=(n=this._longPressHandler(e))?n:{},t=r.handler,i=r.timeout,null!=t?this._longPressTimeout=setTimeout(function(e){return function(){return e._cancelLongPress(),e.$el.hasClass("ui-sortable-helper")?void 0:(e._wasLongPress=!0,$(document).unbind(".sortable"),t())}}(this),i):void 0},t.prototype.mouseup=function(){return this._cancelLongPress()},t.prototype._longPressHandler=function(e){var t;return t=$(e.target).closest(".sticker"),t.length>0?{handler:function(t){return function(){return t.editStickers(e)}}(this),timeout:500}:null},t}(ViewWithId)),CardListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.viewType=CardView,t.prototype.getModels=function(){return this.collection.openCards()},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l;for(log("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),o=new async.queue(function(e){return function(t,i){var n;return e.appendSubviews(function(){var e,i,r;for(r=[],e=0,i=t.length;i>e;e++)n=t[e],r.push(this.subview(this.viewType,n));return r}.call(e)),_.defer(i)}}(this),1),"chrome"!==(l=Browser.browserStr)&&"firefox"!==l&&"opera"!==l&&"windows"===Browser.osStr&&(i=function(){return function(){return _.defer(function(){return $("#board").css({bottom:1})}),_.delay(function(){return $("#board").css({bottom:0})},150)}}(this),t=_.debounce(i,1e3),o.drain=function(){return t()}),e=20,r=this.getModels(),n=[];r.length>0;)n.push(r.splice(0,e));for(s=0,a=n.length;a>s;s++)r=n[s],o.push([r]);return this},t.prototype.insertSubview=function(e,t,i){var n;return null==i&&(i=this.$el),log("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?i.children().eq(0):t<i.children().length?i.children().eq(t):void 0:t instanceof ViewWithId&&(t=t.$el),n=e.model,e.$el.is(":empty")?(e.delegateEvents(),e.render()):i.hasClass("hide")||n.getBoard().filter.satisfiesFilter(n)||e.renderFiltered(),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):i.append(e.$el),DragSort.refreshIfInitialized(this.$el)},t}(CollectionView),CalendarCardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.onCalendar=!0,t}(CardView),MemberCardsCardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.cardView=this.subview(CardView,this.model,{filterDeactivated:!1,showMemberStatus:!1})},t.prototype.className="list-card-container",t.prototype.render=function(){var e;return e={listName:this.model.getList().get("name"),boardName:this.model.getBoard().get("name"),showBoard:this.options.dateSort},this.$el.html(templates.fill("member_cards_card",e)),this.appendSubview(this.cardView,this.$(".js-card")),this},t}(ViewWithId),AttachmentTypePickerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Attach From..."},t.prototype.initialize=function(){return this.listenTo(GoogleApi,"loaded",this.render)},t.prototype.events={"click .js-google-drive-attachment":"openGoogleDriveFilePicker","click .js-dropbox-attachment":"openDropboxFilePicker","click .js-one-drive-attachment":"openOneDriveFilePicker","click .js-box-attachment":"openBoxFilePicker","change .js-attach-file":"startUpload","click .js-gold-promo":"openPromo","click .js-add-attachment-url":"addUrl","keydown .js-attachment-url":"keydown"},t.prototype._scripts={dropbox:"https://www.dropbox.com/static/api/1/dropbox.js",box:"https://app.box.com/js/static/select.js",oneDrive:"https://js.live.net/v5.0/wl.js"},t.prototype.getData=function(){return async.forEach([this._scripts.dropbox,this._scripts.oneDrive,this._scripts.box],function(e){return function(t,i){return e._loadOnce(t,i)}}(this))},t.prototype.render=function(){var e,t,i,n;return e=this.model.toJSON(),e.hasLargeAttachments=(null!=(t=Auth.me())?t.isFeatureEnabled("largeAttachments"):void 0)||(null!=(i=this.model.getBoard())&&null!=(n=i.getOrganization())?n.isFeatureEnabled("largeAttachments"):void 0),e.googleDriveReady=GoogleApi.loaded,this.$el.html(templates.fill("attachment_type_picker",e)),this},t.prototype.startUpload=function(e){var t,i,n,r,o;if(o=this.model,r=$(e.target),t=this.$(".js-file-too-large").hide(),i=r[0].files,n=function(e){return e?(t.show(),track("Card Detail","Attachment","Upload Error - File Too Large")):(track("Card Detail","Upload Attachment Complete - Via Picker"),i.length>1&&Alerts.show("Finished!","info","AjaxQueueUpload",2e3),PopOver.hide())},(null!=i?i.length:void 0)>0){if(_.any(i,function(e){return!Util.validCardUpload(e)}))return void n("too large");async.forEachSeries(i,function(e){return function(t,i){return e.model.upload(t,i)}}(this),n)}else Util.uploadFile(r,n)},t.prototype._loadOnce=function(e,t){return null==this._loadedScripts&&(this._loadedScripts={}),this._loadedScripts[e]?t():$.getScript(e,function(i){return function(){return i._loadedScripts[e]=!0,t()}}(this))},t.prototype.openGoogleDriveFilePicker=function(e){return Util.stop(e),async.auto({picker:function(e){return gapi.load("picker",e)},oauthToken:function(e){var t;return t=GoogleApi.validToken(),GoogleApi.authorize(t,e)},open:["picker","oauthToken",function(e){return function(t,i){var n,r,o;return r=i.oauthToken,n=new google.picker.DocsView,n.setIncludeFolders(!0),o=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(n).setOAuthToken(r).setDeveloperKey(window.googleDrive.publicAPIKey).setCallback(function(t){null!=t.docs&&async.forEachSeries(t.docs,function(t,i){return ApiAjax({url:"/1/cards/"+e.model.id+"/attachments",type:"post",data:{url:t.url,name:t.name,mimeType:t.mimeType},success:function(){return i(),track("Card Detail","Upload Google Drive File"),PopOver.hide()}})},function(){})}).build(),o.setVisible(!0),$("iframe.picker-frame[src*=authserviceid]").attr("src",function(){return $(this).attr("src").replace(/authserviceid/g,"fixgoogle")})}}(this)]},function(e){if(e)throw e})},t.prototype.openDropboxFilePicker=function(e){return Util.stop(e),this._loadOnce(this._scripts.dropbox,function(e){return function(){return Dropbox.init({appKey:"36ipz29apw2svq8"}),Dropbox.choose({linkType:"preview",iframe:!0,success:function(t){async.forEachSeries(t,function(t,i){return ApiAjax({url:"/1/cards/"+e.model.id+"/attachments",type:"post",data:{url:t.link,name:t.name},success:function(){return i(),track("Card Detail","Upload Dropbox File"),PopOver.hide()}})},function(){})}})}}(this))},t.prototype.openOneDriveFilePicker=function(e){return Util.stop(e),this._loadOnce(this._scripts.oneDrive,function(e){return function(){var t;return WL.init({client_id:null!=(t=window.oneDriveClientId)?t:"0000000040119A6B",redirect_uri:""+siteDomain+"/onedrive_callback.html"}),WL.login({scope:"wl.skydrive wl.signin"}).then(function(){return WL.fileDialog({mode:"open",select:"single"}).then(function(t){var i;async.forEachSeries(_.toArray(null!=t&&null!=(i=t.data)?i.files:void 0),function(t,i){return ApiAjax({url:"/1/cards/"+e.model.id+"/attachments",type:"post",data:{url:t.link,name:t.name},success:function(){return i(),track("Card Detail","Upload OneDrive File"),PopOver.hide()}})},function(){})})})}}(this))},t.prototype.openBoxFilePicker=function(e){return Util.stop(e),this._loadOnce(this._scripts.box,function(e){return function(){var t,i;return t=new BoxSelect({clientId:"zclwcvudmddhz0cscz3w6awtcfs8bne3",linkType:"shared",multiselect:!0}),i=function(n){t.unregister(t.SUCCESS_EVENT_TYPE,i),async.forEachSeries(n,function(t,i){return ApiAjax({url:"/1/cards/"+e.model.id+"/attachments",type:"post",data:{url:t.url,name:t.name},success:function(){return i(),track("Card Detail","Upload Box File"),PopOver.hide()}})},function(){})},t.success(i),t.launchPopup()}}(this))},t.prototype.openPromo=function(){return track("Attachment","Open Trello Gold Promo - via Attachment Upload Limit")},t.prototype.keydown=function(e){return Util.isSubmitKey(e)?this.addUrl():void 0},t.prototype.addUrl=function(){var e;return e=this.$(".js-attachment-url").val().split(/\s+/),e=_.filter(e,function(e){return/\S/.test(e)}),!_.isEmpty(e)&&e.length<10?(PopOver.pushView({view:UploadingLinkView}),async.forEach(e,function(e){return function(t,i){return ApiAjax({url:"/1/cards/"+e.model.id+"/attachments",type:"post",data:{url:t},success:function(){return track("Card Detail","Upload link")},complete:function(){return i()}})}}(this),function(){return PopOver.hide()})):void 0},t}(ViewWithId),UploadingLinkView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Sending Links…"},t.prototype.render=function(){return this.$el.html('<div class="spinner loading"></div>'),this},t}(ViewWithId),CardDetailView=mixin(FileDropTarget,AutoInsertionView,CompleterUtil,CardViewHelpers,_CardDetailView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="clearfix",t.prototype.defaultActionLimit=50,t.prototype.maxActionLimit=1e3,t.prototype.maximumCommentLength=16384,t.prototype.initialize=function(){return this.fShowExtraActions=!1,this.makeDebouncedMethods("render","renderCover","renderStickers","renderName","renderDescription","renderArchived","renderLabels","renderList","renderVotes","renderDueDate","renderSubscribe","renderAttachments","renderMembers","renderAging"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:desc":this.renderDescriptionDebounced,"change:closed":this.renderArchivedDebounced,"change:labels":this.renderLabelsDebounced,"change:idList":this.renderListDebounced,"change:idMembersVoted":this.renderVotesDebounced,"change:due":this.renderDueDateDebounced,"change:subscribed":this.renderSubscribeDebounced,"change:dateLastActivity":this.renderAgingDebounced,"change:idAttachmentCover":function(){return this.renderAttachmentsDebounced(),this.renderCoverDebounced()},remove:this.closeDialog}),this.listenTo(this.model.memberList,{"add remove reset":this.renderMembersDebounced}),this.listenTo(this.model.memberVotedList,{"add remove reset":this.renderVotesDebounced}),this.listenTo(this.model.checklistList,{"add reset":this.renderChecklists,remove:this.removeChecklist,sort:this.sortChecklists}),this.listenTo(this.model.attachmentList,{"add remove reset":this.renderAttachmentsDebounced}),this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced}),this.listenTo(this.model.memberEditingList,{"add remove reset change:action":this.renderEditing}),this.listenTo(this.model.getBoard(),{"change:labelNames":this.renderLabelsDebounced,"change:prefs":function(e){var t,i;return t=function(t){var i,n;return(null!=(i=e.get("prefs"))?i[t]:void 0)!==(null!=(n=e.previous("prefs"))?n[t]:void 0)},t("cardCovers")&&this.renderCover(),i=t("cardAging")||t("comments")||t("voting"),i&&0===this.$(".editing").length?this.renderDebounced():void 0}}),this.getData(),this.listenTo(MemberState,"change:processingAttachmentsLength",function(){return this.renderProcessingAttachments()}),this.actionListView=this.collectionSubview(ActionListView,this.model.actionList,{renderOpts:{context:this.model,compact:!1}})},t.prototype.events={"click .js-edit-labels":"editLabelsSidebar","click .js-change-card-members":"changeMembersSidebar","click .js-add-checklist-menu":"addChecklistSidebar","click .js-add-due-date":"dueDateSidebar","click .js-attach":"openAttachPicker","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-subscribe":"subscribe","click .js-unsubscribe":"unsubscribe","click .js-vote":"vote","click .js-unvote":"unvote","click .js-archive-card":"archiveCard","click .js-unarchive-card":"unarchiveCard","click .js-delete-card":"deleteCardSidebar","click .js-more-menu":"showMoreMenu","click .js-open-card-cover-in-viewer":"openCoverInViewer","click .js-open-move-from-header":"openMoveFromHeader","click .js-details-edit-members":"editMembersMain","click .js-details-edit-labels":"editLabelsMain","click .js-edit-label .card-label":"editLabelsMainSingleLabel","click .js-details-edit-due-date":"showDueDateBadgeMenu","click .js-show-votes":"showVotes","click .js-edit-desc":"editDesc","click .js-member-on-card-menu":"openMemberOnCardMenu","click .js-format-help":"openFormatHelp","click .js-view-some-attachments":"showFewerAttachments","click .js-view-all-attachments":"showMoreAttachments","click .js-show-all-actions":"showAllActions","click .js-show-extra-actions":"showExtraActions","click .js-hide-extra-actions":"hideExtraActions","keydown .js-new-comment-input":"keydownCommentEvent","input .js-new-comment-input":"checkLength","click .js-add-comment:not(:disabled)":"submitComment","click .js-attach-comment":"attachComment","click .js-truncate-comment":"truncateComment","click .js-cancel-comment":"clearComment","click .js-new-comment":"inputComment","focus .js-new-comment-input":"inputComment","keyup .js-new-comment-input":"keyAutoMention","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji","click .js-comment-add-card":"commentAddCard",dragenter:"dragenterBack",dragover:"dragover",dragleave:"dragleave",dragexit:"dragexit",dragend:"dragend",drop:"dropBack","sortstop .js-checklist-list":"sortStop",shortcut:"shortcut",replyToAction:"replyToAction"},t.prototype.shortcut=function(e){var t,i,n,r,o,s,a,l;switch(i=this.model.getBoard(),n=this.model.editable(),o=Auth.isLoggedIn(),e){case Key_Space:if(n)return this.model.toggleMember(Auth.myId()),["Space - Toggle Assigning Self","Card Detail"];break;case Key_A:case Key_M:if(n)return this.changeMembersSidebar(),["A - Assign Members","Card Detail"];break;case Key_E:if(n)return this.editDesc(),["E - Edit Description","Card Detail"];break;case Key_L:if(n)return this.editLabelsSidebar(),["L - Edit Labels","Card Detail"];break;case Key_D:if(n)return null!=this.model.get("due")?this.showDueDateBadgeMenu():this.dueDateSidebar(),["D - Due Dates","Card Detail"];break;case Key_C:case Key_Delete:if(n)return this.archiveCard(),["C / Delete - Archive Card"];break;case Key_T:if(n)return this.editTitle(),"T - Edit Title";break;case Key_Period:if(n)return this.model.moveToNextList(),"> - Move to Next List";break;case Key_Comma:if(n)return this.model.moveToPrevList(),"< - Move to Previous List";break;case Key_Tab:if(n)return this.clickNextTabbable(),"Tab - Open Editable";break;case Key_1:case Key_2:case Key_3:case Key_4:case Key_5:case Key_6:case Key_Numpad_1:case Key_Numpad_2:case Key_Numpad_3:case Key_Numpad_4:case Key_Numpad_5:case Key_Numpad_6:if(n)return t=e>=Key_1&&Key_6>=e?Key_1:Key_Numpad_1,r=e-t,this.model.toggleLabel(Util.labelNames[r]),"1-6 - Toggle Specific Label";break;case Key_V:if(i.canVote(Auth.me()))return this.model.toggleVote(),"V - Vote";break;case Key_S:if(o)return l=this.model.get("subscribed"),this.model.subscribe(!l),["S - Subscribe",l?"Unsubscribe":"Subscribe"];break;case Key_J:if(null!=(s=this.model.nextCard()))return Controller.showCardDetail(s,null,!0),"J - Down";break;case Key_K:if(null!=(a=this.model.prevCard()))return Controller.showCardDetail(a,null,!0),"K - Up"}},t.prototype.paste=function(e,t){var i;return"image"===e?(i=new Date,this.model.upload(t,"upload "+i.toString("yyyy-MM-dd")+" at "+i.toString("h.mm.ss tt").toLowerCase()+".png",function(){}),["Paste - Upload Image From Clipboard","Card Detail"]):void 0},t.prototype.getData=function(){this.loading=!0,this.$(".js-loading-card-actions").show(),this.model.onId(function(e){return function(){return async.series([function(t){var i;return i=e.fShowAllActions?e.maxActionLimit:e.defaultActionLimit,ModelLoader["for"](e.modelCache).loadCardDetails(e.model.get("idBoard"),e.model.id,i,t)}],function(){return e.loading=!1,e.$(".js-loading-card-actions").hide(),e.toggleActionButton(),e.renderExtraActions()})}}(this))},t.prototype.render=function(){var e;return this.fShowAllAttachments=!1,this.fShowAllActions=!1,e={canComment:this.model.getBoard().canComment(Auth.me()),canVote:this.model.getBoard().canVote(Auth.me()),hasVoted:this.model.voted(),canSubscribe:Auth.isLoggedIn(),hasAttachments:this.model.attachmentList.length>0,dateAdded:null!=this.model.id?Util.idToDate(this.model.id):new Date,me:Auth.me().toJSON(),loading:this.loading},e.showActions=e.canVote||e.canSubscribe,this.$el.toggleClass("editable",this.model.editable()).html(templates.fillFromModel("card_detail",this.model,e,{member:templates.member,comment_options:templates.comment_options})),this.actionListView.setElement(this.$(".js-list-actions")[0]),this.commentInput=this.$(".new-comment-input")[0],this.renderCover().renderStickers().renderName().renderDescription().renderList().renderActionList().renderMembers().renderArchived().renderChecklists().renderSubscribe().renderVotes().renderDueDate().renderAttachments().renderLabels().renderAging().renderEditing(),this.recallDrafts(),this.$(".js-new-comment-input").autosize(),_.defer(_.bind(this.fixSidebar,this)),Dates.update(this.el),this},t.prototype.setRelativeSidebarPos=function(){return this.fFixed=!1,this.fRelative=!0,this.$(".window-sidebar").css({left:"",top:"",position:"relative"})},t.prototype.setFixedSidebarLeftPos=function(){var e,t;return this.fFixed?(t=parseFloat($(".window").offset().left),e=t+$(".window").width()-this.$(".window-sidebar").outerWidth(),this.$(".window-sidebar").css({left:e})):void 0},t.prototype.setFixedSidebarPos=function(){return this.fFixed=!0,this.fRelative=!1,this.setFixedSidebarLeftPos(),this.$(".window-sidebar").css({top:0,position:"fixed"})},t.prototype.fixSidebar=function(){var e,t,i,n,r;e=$(".window-overlay").off("scroll.fixSidebar"),this.fFixed=!1,this.fRelative=!1,t=parseInt($(".window").css("margin-top")),i=parseInt(this.$(".window-sidebar").css("padding-top")),r=function(n){return function(){var r,o,s,a,l,c;s=n.$(".window-header").outerHeight(),o=null!=(l=n.$(".window-cover:visible").outerHeight())?l:0,r=null!=(c=n.$(".window-archive-banner:visible").outerHeight())?c:0,a=t+s+o+r+i,e.scrollTop()<=a||WindowSize.fSmall||n.$(".window-sidebar").height()>$(window).height()?n.fRelative||n.setRelativeSidebarPos():n.fFixed||n.setFixedSidebarPos()}}(this),n=_.throttle(r,32),e.on("scroll.fixSidebar",n)},t.prototype.editDesc=function(e){Util.stop(e),this.edit("desc")},t.prototype.editTitle=function(){this.$(".card-detail-title .current").click()},t.prototype.archiveCard=function(){this.model.close(),track("Card Detail","Sidebar","Archive Button")},t.prototype.unarchiveCard=function(){track("Card Detail","Sidebar","Re-Open Button"),this.model.reopen()},t.prototype.deleteCardSidebar=function(){Confirm.toggle({elem:this.$(".js-delete-card"),model:this.model,top:35,title:"Delete Card?",text:"All actions will be removed from the activity feed and you won't be able to re-open the card. There is no undo. You can archive a card to remove it from the board and preserve the activity.",confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return Dialog.hide(),e.model.destroy(),track("Card","Delete")}}(this)}),track("Card Detail","Sidebar","Open Delete Confirm")},t.prototype.showMoreMenu=function(e){Util.stop(e),PopOver.toggle({elem:this.$(".js-more-menu"),top:30,view:CardDetailMoreMenuView,options:{model:this.model,modelCache:this.modelCache}}),track("Card Detail","Sidebar","Open More Menu")},t.prototype.openCoverInViewer=function(e){var t;Util.stop(e),this.showCover()&&(t=this.model.attachmentList.get(this.model.get("idAttachmentCover")),new AttachmentViewer({model:this.model,modelCache:this.modelCache,attachmentModel:t}).render(),track("Card Detail","Open Attachment Viewer via Cover",t.getType()))},t.prototype.openMoveMenu=function(e,t){PopOver.toggle({elem:e,top:t,view:CardMoveView,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openMoveFromHeader=function(e){Util.stop(e),this.openMoveMenu(this.$(".js-open-move-from-header"),20),track("Card Detail","Move Button (via Header)")},t.prototype.moveCard=function(e){Util.stop(e),this.openMoveMenu(this.$(".js-move-card"),35),track("Card Detail","Sidebar","Open Move Menu")},t.prototype.copyCard=function(e){Util.stop(e),PopOver.toggle({elem:this.$(".js-copy-card"),top:35,view:CardCopyView,options:{model:this.model,modelCache:this.modelCache}}),track("Card Detail","Sidebar","Open Copy Menu")},t.prototype.openLabelsPopOver=function(e,t){PopOver.toggle({elem:e,top:t,view:CardLabelSelectView,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.editLabelsMainSingleLabel=function(e){Util.stop(e),this.openLabelsPopOver(this.$(e.target).closest(".card-label"),35),track("Card Detail","Edit Labels Main Column - Single Label")},t.prototype.editLabelsMain=function(e){Util.stop(e),this.openLabelsPopOver(this.$(".js-details-edit-labels"),35),track("Card Detail","Edit Labels Main Column - Plus Button")},t.prototype.editLabelsSidebar=function(e){Util.stop(e),this.openLabelsPopOver(this.$(".js-edit-labels"),35),track("Card Detail","Sidebar","Edit Labels Button")},t.prototype.showVotes=function(e){Util.stop(e),this.model.getVoterDisplayData(),PopOver.toggle({elem:this.$(".js-show-votes"),top:35,view:MembersVotedView,options:{model:this.model,modelCache:this.modelCache}}),track("Card Detail","Header Vote Button")},t.prototype.doClicks=function(){return!DragSort.sorting},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.checkShowCover=function(){var e,t;e=this.showCover(),t=this.model.hasStickers(),e?this.$(".js-card-cover-box").removeClass("hide window-cover-stickers-only").addClass("has-cover"):t?this.$(".js-card-cover-box").removeClass("hide has-cover").addClass("window-cover-stickers-only"):this.$(".js-card-cover-box").addClass("hide")},t.prototype.clearCover=function(){var e;return this.$(".js-card-cover-box").css({"background-color":"","background-image":""}),e=["dialog-close-button-light","dialog-close-button-dark"],$(".dialog-close-button").removeClass(e.join(" "))},t.prototype.renderCover=function(){var e,t,i,n,r,o,s,a,l,c,d,u;return this.clearCover(),this.showCover()&&(t=this.model.attachmentList.get(this.model.get("idAttachmentCover")),null!=t&&(r=Browser.isHighDPI()?1400:700,s=t.get("previews"),o=null!=(l=Util.smallestPreviewBiggerThan(s,r))?l:Util.biggestPreview(s),i=null!=o?o.url:t.get("url"),a=null!=(c=null!=(d=Util.smallestPreviewBiggerThan(t.get("previews"),100,100))?d.url:void 0)?c:t.get("url"),e=this.$(".js-card-cover-box"),async.assembly([function(e){var i,n,r;return null!=(n=t.get("edgeColor"))?(i=n.match(/[0-9a-f]{2}/gi),e(null,function(){var e,t,n;for(n=[],e=0,t=i.length;t>e;e++)r=i[e],n.push(parseInt(r,16));return n}())):e("no edgeColor")},function(t,i){var n,r,o,s,a;a=i[0],s=i[1],r=i[2],e.css("background-color","rgb("+a+", "+s+", "+r+")"),n=(a+s+r)/3,n>150?o="dark":105>n&&(o="light"),null!=o&&$(".dialog-close-button").addClass("dialog-close-button-"+o)}],function(){}),n=Math.max(40,Math.min(null!=(u=null!=o?o.height:void 0)?u:160,160)),this.$(".js-card-cover-box").css({"background-image":'url("'+i+'")',height:n,"background-size":(null!=o?o.height:void 0)<n?"initial":"contain"}))),this.checkShowCover(),this},t.prototype.renderStickers=function(){var e,t,i,n,r;return e=this.$(".js-display-stickers").empty(),n=this.model.stickerList.models,t=n.length>0,t&&(r=function(){var e,t,r;for(r=[],e=0,t=n.length;t>e;e++)i=n[e],r.push(this.subview(StickerView,i,{board:this.model}));return r}.call(this),this.appendSubviews(r,e)),this.checkShowCover(),this},t.prototype.renderName=function(){var e;return e=this.model.get("name"),this.$(".js-card-title").text(e),Controller.title(""+e+" on "+this.model.getBoard().get("name")),this},t.prototype.renderDescription=function(){var e,t,i;return e=this.model.get("desc"),t=TFM.description.format(null!=e?e:"",{textData:this.model.get("descData")}).output,this.$(".js-card-desc").empty().append(t).data("unmarkeddown",e),i=!/^\s*$/.test(t),this.$(".js-show-with-desc").toggleClass("hide",!i),this.$(".js-hide-with-desc").toggleClass("hide",i),this},t.prototype.renderList=function(){var e;return e=this.model.getList(),null!=e&&this.$(".js-current-list").removeClass("hide").html(templates.fill("card_detail_list",{listName:e.get("name")},{editable:this.model.editable()})),this},t.prototype.renderArchived=function(){var e;return e=this.model.get("closed")===!0,this.$(".js-archive-banner").toggleClass("hide",!e),this.$(".js-archive-card").toggleClass("hide",e),this.$(".js-unarchive-card").toggleClass("hide",!e),this.$(".js-delete-card").toggleClass("hide",!e),this},t.prototype.showAllActions=function(){return this.fShowAllActions=!0,this.toggleActionButton(),this.getData()},t.prototype.toggleActionButton=function(){var e,t;return e=this.fShowAllActions||(null!=(t=this.model.actionList)?t.length:void 0)>0&&this.model.actionList.length!==this.defaultActionLimit,this.$(".js-show-all-actions").toggleClass("hide",e)},t.prototype.hideExtraActions=function(e){Util.stop(e),this.fShowExtraActions=!1,this.renderExtraActions()},t.prototype.showExtraActions=function(e){Util.stop(e),this.fShowExtraActions=!0,this.renderExtraActions()},t.prototype.renderExtraActions=function(){var e,t,i,n,r,o,s;e=this.model.actionList.length,i=this.model.get("badges").comments,t=this.model.get("badges").comments,o=e>8,r=i>0,n=t>0,s=i+t===e,o&&(r||n)&&!s?(this.$(".js-list-actions").toggleClass("hide-extra-actions",!this.fShowExtraActions),this.$(".js-show-extra-actions").toggleClass("hide",this.fShowExtraActions),this.$(".js-hide-extra-actions").toggleClass("hide",!this.fShowExtraActions)):(this.$(".js-list-actions").removeClass("hide-extra-actions"),this.$(".js-show-extra-actions").addClass("hide"),this.$(".js-hide-extra-actions").addClass("hide"))},t.prototype.renderActionList=function(){return this.model.onId(function(e){return function(){return e.actionListView.render()}}(this)),this},t.prototype.renderMembers=function(){var e,t,i,n,r;return e=this.$(".js-card-detail-members-list").empty(),r=this.model.memberList.filterDeactivated({model:this.model.getBoard()}).models,n=function(){var e,t,n;for(n=[],e=0,t=r.length;t>e;e++)i=r[e],n.push(this.getMemberOnCardHtml(i));return n}.call(this).join(""),e.html(n),this.model.editable()&&(t={classes:"js-details-edit-members"},e.append(templates.fill("card_detail_add_button",t))),this.$(".js-card-detail-members").toggleClass("hide",0===r.length),this},t.prototype.renderLabels=function(){var e,t,i,n,r;return t=this.model.getActiveLabels(),e=this.$(".js-card-detail-labels-list").empty(),r=function(){var e,i,r;for(r=[],e=0,i=t.length;i>e;e++)n=t[e],r.push(templates.fill("label",n));return r}().join(""),e.append(r),this.model.editable()&&(i={classes:"js-details-edit-labels"},e.append(templates.fill("card_detail_add_button",i)).addClass("editable-labels js-edit-label")),this.$(".js-card-detail-labels").toggleClass("hide",0===t.length),this},t.prototype.renderSubscribe=function(){var e,t,i;return e=this.$(".js-subscribe-sidebar-button"),t={subscribed:this.model.get("subscribed")||(null!=(i=this.model.get("badges"))?i.subscribed:void 0)},e.html(templates.fill("card_detail_subscribe",t)),this.$(".js-subscribed-indicator-header").toggleClass("hide",!t.subscribed),this},t.prototype.renderAging=function(){var e,t,i,n,r;return i=this.model.getBoard(),t=__indexOf.call(null!=(r=i.get("powerUps"))?r:[],"cardAging")>=0,e=this.$(".js-card-detail-age-badge").removeClass(this.model.getAllAgingClasses()),t&&(n=this.model.getAgingData(),e.removeData("date").attr("dt",this.model.get("dateLastActivity")),"pirate"===n.mode&&e.addClass(n.agingClassesToAdd),Dates.update(this.$(".js-card-detail-age"))),this.$(".js-card-detail-age").toggleClass("hide",!t),this},t.prototype.renderDueDate=function(){var e,t,i,n,r,o;return t=null!=(o=this.model.get("due"))?o:null,null!=t?(i=this.model.editable(),r=Dates.toLongString(new Date(t)),n=Util.getDueDateBadgeAdditionalTitle(t),null!=n&&(r+=" ("+n+")"),e=[],e.push(Util.getDueDateBadgeClasses(t)),i&&e.push("js-details-edit-due-date","badge-state-clickable"),this.$(".js-card-detail-due-date-badge").removeClass(function(e,t){return(t.match(/badge-state-\S+/g)||[]).join(" ")}).addClass(e.join(" ")).attr("title",Util.getDueDateBadgeTitle(t)).html(r),this.$(".js-card-detail-due-date").removeClass("hide")):this.$(".js-card-detail-due-date").addClass("hide"),this},t.prototype.renderVotes=function(){var e,t,i,n,r,o,s;return i=this.model.toJSON(),i.voted=this.model.voted(),i.canVote=this.model.getBoard().canVote(Auth.me()),e=this.$(".js-vote-sidebar-button"),e.html(templates.fill("card_detail_vote_btn_sidebar",i)),t=null!=(n=null!=(r=i.badges)?r.votes:void 0)?n:0,t&&this.$(".js-card-detail-votes-badge").html(Util.formatCount(t,"vote")).toggleClass("badge-state-voted",null!=(o=null!=(s=i.badges)?s.viewingMemberVoted:void 0)?o:!1),this.$(".js-card-detail-votes").toggleClass("hide",0===t),this},t.prototype.sortChecklists=function(){var e;return e=this.$(".js-checklist-list"),Util.withoutAlteringSelection(function(t){return function(){return t.model.checklistList.forEach(function(i){var n;return n=t.existingSubview(ChecklistView,i),e.append(n.el)})}}(this)),this},t.prototype.removeChecklist=function(e){return this.deleteSubview(this.existingSubview(ChecklistView,e))},t.prototype.renderChecklists=function(){var e,t,i,n;return log("render","rendering checklists"),e=this.$(".js-checklist-list").empty(),i=function(){var e,i,n,r;
for(n=this.model.checklistList.models,r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(this.subview(ChecklistView,t,{card:this.model}));return r}.call(this),this.appendSubviews(i,e),DragSort.refreshIfInitialized(e),(null!=(n=this.model)?n.editable():void 0)&&this.$(".js-checklist-list").sortable({axis:"y",handle:".window-module-title",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist placeholder",items:".checklist",start:function(e,t){var i;return i=$(t.helper).outerHeight(),$(t.placeholder).height(i)}}),this},t.prototype.showFewerAttachments=function(e){Util.stop(e),this.fShowAllAttachments=!1,this.renderAttachments()},t.prototype.showMoreAttachments=function(e){Util.stop(e),this.fShowAllAttachments=!0,this.renderAttachments()},t.prototype.renderAttachments=function(){var e,t,i,n,r,o,s,a,l,c,d,u;return c=4,a=(null!=(u=this.model.attachmentList)?u.length:void 0)>0,s=this.model.attachmentList.models.slice(0,c),l=this.model.attachmentList.length>c,i=this.$(".js-attachments-section"),e=i.find(".js-attachment-list").empty(),t=i.find(".js-num-attachments").text(this.model.attachmentList.length-c),n=i.find(".js-show-fewer-attachments").addClass("hide"),r=i.find(".js-show-more-attachments").addClass("hide"),i.toggleClass("hide",!a),a&&(l&&(this.fShowAllAttachments?(n.removeClass("hide"),s=this.model.attachmentList.models):r.removeClass("hide")),d=function(){var e,t,i;for(i=[],e=0,t=s.length;t>e;e++)o=s[e],i.push(this.subview(AttachmentThumbView,o));return i}.call(this),this.appendSubviews(d,e)),this},t.prototype.renderProcessingAttachments=function(){var e;return this.$(".js-attachment-thumb-processing").remove(),e=MemberState.getProcessingAttachmentsLength(),_.times(e,this.addProcessingAttachmentElement)},t.prototype.addProcessingAttachmentElement=function(){var e;e=this.$(".js-attachments-section .js-attachment-list"),e.prepend(templates.fill("attachment_thumb_processing"))},t.prototype.renderEditing=function(){var e,t,i,n;return n=this.model.memberEditingList.models,e={members:function(){var e,r,o;for(o=[],e=0,r=n.length;r>e;e++)t=n[e],Auth.isMe(t)||null==t.get("editing")||(i=t.toJSON(),i.icon=function(){switch(t.get("editing").action){case"commenting":return"comment";case"editing":return"edit";default:return"edit"}}(),o.push(i));return o}()},this.$(".js-editing-members").empty().append(templates.fill("edit_in_progress",e)).toggleClass("hide",0===e.members.length)},t.prototype.sortStop=function(e,t){Util.stopPropagation(e),t.item.trigger("movechecklist",[t])},t.prototype.keydownEvent=function(){return t.__super__.keydownEvent.apply(this,arguments),Auth.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"editing"})},t.prototype.keydownCommentEvent=function(e){return Auth.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"commenting"}),e.keyCode!==Key_Tab||!$(e.target).hasClass("new-comment-input")||!this.model.editable()||PopOver.view instanceof AutoMentionerView||""!==$(e.target).val()||(Util.stop(e),this.submitComment(e)),Util.isForceSubmitKey(e)?this.submitComment(e):this.checkInsert(e)},t.prototype.checkLength=function(){var e;return e=this.$(".new-comment-input").val().length>this.maximumCommentLength,this.$(".js-add-comment").prop("disabled",e),this.$(".too-long").toggleClass("hide",!e),this.$(".too-long").find(".js-attach-comment").toggle("undefined"!=typeof Blob&&null!==Blob)},t.prototype._cancelEditing=function(){return Auth.me().editing({idBoard:this.model.getBoard().id})},t.prototype.submitComment=function(e){var t,i,n;return track("Card Detail","Comment","Submit Comment"),Util.stop(e),t=$(this.commentInput),i={},n=$.trim(t.val()),t.val("").css("height",""),this._cancelEditing(),this.model.addComment(n),Layout.cancelEdits(),this.clearComment(),!1},t.prototype.clearEdits=function(){return this._cancelEditing(),t.__super__.clearEdits.apply(this,arguments)},t.prototype.commitEdits=function(){return this._cancelEditing(),t.__super__.commitEdits.apply(this,arguments)},t.prototype.stopEditing=function(){return this._cancelEditing(),t.__super__.stopEditing.apply(this,arguments)},t.prototype.truncateComment=function(){var e;return e=this.$(".new-comment-input"),e.val(e.val().substr(0,this.maximumCommentLength)),this.checkLength()},t.prototype.attachComment=function(){var e;return e=new Blob([this.$(".new-comment-input").val()],{type:"text/plain"}),this.model.upload(e,"comment.txt",function(){}),Layout.cancelEdits(),this.clearComment()},t.prototype.inputComment=function(e){var t;Util.stopPropagation(e),t=this.$(".new-comment"),Layout.cancelEdits(this.commentInput),t.addClass("focus")},t.prototype.clearComment=function(e){return Util.stop(e),this.stopEditing(e),$(this.commentInput).val("").focus().blur(),this.checkLength(),$(".new-comment").removeClass("focus"),PopOver.hide()},t.prototype.replyToAction=function(e,t){var i,n;i=null!=(n=this.Member.get(t.get("idMemberCreator")))?n.get("username"):void 0,null!=i&&(Layout.cancelEdits(this.commentInput),this.$(".new-comment").addClass("focus"),RegExp("@"+i+"(\\W|$)").test($(this.commentInput).val())?$(this.commentInput).focus():Util.insertSelection(this.commentInput,"@"+i+" "))},t.prototype.getCard=function(){return this.model},t.prototype.getTextInput=function(){return this.$(".new-comment-input")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},t.prototype.openEditMembersPopOver=function(e,t){PopOver.toggle({elem:e,top:t,view:CardMemberSelectView,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.editMembersMain=function(e){Util.stop(e),this.openEditMembersPopOver(this.$(".js-details-edit-members"),35),track("Card Detail","Edit Members via Main Column")},t.prototype.changeMembersSidebar=function(e){Util.stop(e),this.openEditMembersPopOver(this.$(".js-change-card-members"),35),track("Card Detail","Sidebar","Open Manage Member Menu")},t.prototype.addChecklistSidebar=function(e){return Util.preventDefault(e),PopOver.toggle({elem:e.target,top:35,view:AddChecklistMenu,options:{model:this.model,modelCache:this.modelCache,cardView:this}}),track("Card Detail","Add Checklist Button","Open Add Checklist Menu"),!1},t.prototype.showDueDateBadgeMenu=function(e){Util.stop(e),PopOver.toggle({elem:this.$(".js-details-edit-due-date"),top:35,view:DatePickerView,options:{model:this.model,modelCache:this.modelCache}}),track("Card Detail","Due Date Badge","Open Due Date Menu")},t.prototype.openAttachPicker=function(e){var t,i,n;return Util.stop(e),t=$(e.target).closest(".js-attach"),$(t).hasClass("inline")?(i=26,n="Via Inline Button"):(i=35,n="Via Sidebar Button"),PopOver.toggle({elem:t,top:i,view:AttachmentTypePickerView,options:{model:this.model,modelCache:this.modelCache}}),track("Card Detail","Open Attachment Type Picker",n),!1},t.prototype.dueDateSidebar=function(e){return Util.preventDefault(e),PopOver.toggle({elem:this.$(".js-add-due-date"),top:35,view:DatePickerView,options:{model:this.model,modelCache:this.modelCache}}),track("Card Detail","Sidebar","Open Due Date Menu"),!1},t.prototype.subscribe=function(){return this.model.subscribe(!0),track("Card Detail","Sidebar","Subscribe"),!1},t.prototype.unsubscribe=function(){return this.model.subscribe(!1),track("Card Detail","Sidebar","Unsubscribe"),!1},t.prototype.vote=function(e){return Util.preventDefault(e),this.model.vote(!0),track("Card Detail","Sidebar","Vote"),!1},t.prototype.unvote=function(e){return Util.preventDefault(e),track("Card Detail","Sidebar","Unvote"),this.model.vote(!1),!1},t.prototype.openFormatHelp=function(){return track("Card Detail","Formatting Help"),PopOver.toggle({elem:this.$(".js-format-help"),top:30,view:FormattingHelp,options:{model:this.model},keepEdits:!0}),!1},t.prototype.dragenterBack=function(e){var t;return t=$(".window-overlay").scrollTop()+200,this.$(".dropzone").css({"padding-top":""+t+"px"}),this.dragenter(e)},t.prototype.dropBack=function(e){return track("Card Detail","Drop Attachment Upload"),this.drop(e)},t.prototype.focusChecklistAdd=function(e){return this.existingSubview(ChecklistView,e).focusNewTaskInput()},t.prototype.closeDialog=function(){return Dialog.hide()},t.prototype.clickNextTabbable=function(){return $(".card-detail-title .edit").is(":visible")?$(".new-comment-input").focus():$(".card-detail-title .current").click()},t}(EditableView)),CardMemberSelectView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Members"},t.prototype.events={"click .js-select-member":"selectMem","mouseenter .pop-over-member-list .item":"hoverMemberSelect",keyup:"keyupEvent",keydown:"keydownEvent"},t.prototype.render=function(){var e,t;return t=this,e=$(this.el),e.html(templates.fill("popover_select_members",{},{})),this.memListEl=this.$(".js-mem-list"),this.allMembers=Util.sortMembers(this.model.getBoard().memberList.filterDeactivated({force:!0}).models),this.fillMems(this.allMembers),this},t.prototype.filterMembers=function(e){var t,i,n,r,o,s,a;if(""===e)return this.allMembers;for(r=RegExp("^"+Util.escapeForRegex(e.toLowerCase())),i=[],a=this.allMembers,o=0,s=a.length;s>o;o++)t=a[o],n=Util.getMemNameArray(this.modelCache,t.id),_.find(n,function(e){return r.test(e)})&&i.push(t);return i.slice(0,8)},t.prototype.fillMems=function(e){var t,i,n,r,o,s;if(n=this.model,this.memListEl.empty(),t=e.length>9,r=!1,t!==this.memListEl.hasClass("collapsed")&&(r=!0,this.memListEl.toggleClass("collapsed",t)),0===e.length)return void this.memListEl.append("<p class='empty' style='padding: 24px 6px;'>No results</p>");for(o=0,s=e.length;s>o;o++)i=e[o],this.appendSubview(this.subview(SelectMemberOnCardView,i,{showUnconfirmed:!0,card:this.model}),this.memListEl);r&&PopOver.calcPos({notNew:!0})},t.prototype.hoverMemberSelect=function(e){var t;return t=$(e.target).closest(".item"),Util.selectMenuItem(this.memListEl,".item",t)},t.prototype.keydownEvent=function(e){var t;((t=e.keyCode)===Key_Tab||t===Key_Enter)&&(Util.stop(e),this.$(".js-mem-list .item.selected:first .js-select-member").first().click(),$(".js-search-mem").val("").focus(),this.fillMems(this.allMembers))},t.prototype.keyupEvent=function(e){var t,i,n,r,o;if((r=e.keyCode)===Key_Tab||r===Key_Enter||r===Key_Shift||r===Key_Control||r===Key_Alt||r===Key_Caps_Lock||r===Key_Escape);else{if((o=e.keyCode)===Key_Arrow_Up||o===Key_Arrow_Down)return Util.navMenuList(this.memListEl,".item",e.keyCode);if(n=$(".js-search-mem").val().trim(),i=this.filterMembers(n),this.fillMems(i),this.focusSearch(),i.length<this.allMembers.length)return t=this.memListEl.find(".item").first(),Util.selectMenuItem(this.memListEl,".item",t)}},t.prototype.selectMem=function(e){var t,i,n,r;return Util.preventDefault(e),r=this.model,i=$(e.target).closest(".js-select-member"),t=i.closest(".item"),n=i.attr("idMember"),t.hasClass("active")?(r.removeMember(n),t.removeClass("active"),track(r.typeName,"Change Member","Remove Member")):(r.addMember(n),t.addClass("active"),track(r.typeName,"Change Member","Add Member")),this.focusSearch(),!1},t.prototype.focusSearch=function(){return $(".js-search-mem").focus()},t}(ViewWithId),FormattingHelp=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Formatting Help"},t.prototype.render=function(){return this.$el.html(templates.fill("formatting_help")),this},t}(ViewWithId),CardMenuMoreMetaView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-copy-card":"copyCard","click .js-delete":"deleteCard","click .js-url":"focusUrl"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:shortUrl",function(e){return function(){return e.render(),e.focusUrl()}}(this))},t.prototype.copyCard=function(){track("Card Detail","Card Copy Button","Via More Menu"),PopOver.pushView({view:CardCopyView,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.focusUrl=function(e){var t;return t=e.target,this.$(t).focus().select()},t.prototype.getShortLinkData=function(){null==this.model.get("shortUrl")&&this.model.fetch({fields:["shortUrl"]})},t.prototype.deleteCardConfirm=function(){Confirm.pushView({model:this.model,title:"Delete Card?",text:"All actions will be removed from the activity feed and you won't be able to re-open the card. There is no undo. You can archive a card to remove it from the board and preserve the activity.",confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return Dialog.hide(),e.model.destroy(),track("Card","Delete")}}(this)})},t.prototype.render=function(){var e,t,i;return e=_.extend({dateAdded:Util.idToDate(this.model.id),pLevelClass:null!=(t=this.model.getBoard())?t.getPermLevelIconClass():void 0,pLevelAltText:null!=(i=this.model.getBoard())?i.getPermLevelAltText():void 0},this.templateData()),this.$el.html(templates.fillFromModel(this.templateName,this.model,e,{meta:templates.card_menu_meta})),this.getShortLinkData(),Dates.update(this.el),this},t.prototype.deleteCard=function(e){Util.stop(e),track("Card Detail","Delete Button","Via More Menu"),this.deleteCardConfirm()},t}(ViewWithId),CardDetailMoreMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"More"},t.prototype.events=Util.extendEvents({"click .js-print":"printModel","click .js-export-json":"exportJSON"}),t.prototype.templateName="card_detail_more_menu",t.prototype.templateData=function(){return{jsonURL:"/"+this.model.typeName.toLowerCase()+"/"+this.model.id+"/"+Util.makeSlug(this.model.get("name"))+".json"}},t.prototype.printModel=function(e){Util.stop(e),PopOver.hide(),track("Card Detail","Print","Via More Menu"),_.defer(function(){return window.print()})},t.prototype.exportJSON=function(){return track("Card Detail","Export JSON")},t}(CardMenuMoreMetaView),CardMoreMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"More Actions"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:idMembersVoted",function(e){return function(){return e.render(),e.focusUrl()}}(this))},t.prototype.events=Util.extendEvents({"click .js-attach":"openAttachPicker","click .js-vote":"vote"}),t.prototype.templateName="card_menu",t.prototype.templateData=function(){return{hasVoted:this.model.voted(),canVote:this.model.getBoard().canVote(Auth.me()),showMore:!0}},t.prototype.openAttachPicker=function(e){return Util.stop(e),track("Card Menu","Open Attachment Type Picker"),PopOver.pushView({view:new AttachmentTypePickerView({model:this.model,modelCache:this.modelCache})}),!1},t.prototype.vote=function(e){return Util.preventDefault(e),track("Card Menu","Vote"),this.model.toggleVote(),this.render(),!1},t}(CardMenuMoreMetaView),SelectCardPosition=function(){function e(){}return e.prototype.renderValues=function(){var e,t,i,n,r,o,s;i=this.$(".js-select-board option:selected").val(),n=this.$(".js-select-list option:selected").val(),s=parseInt(this.$(".js-select-position option:selected").prop("index"),10)+1,e=this.Board.get(i),t=e.get("name"),r=_.find(e.listList.models,function(){return function(e){return e.id===n}}(this)),this.$(".js-board-value").text(t),null!=r?(o=r.get("name"),s=Util.getNaturalNumber(s),this.$(".js-list-value").text(o),this.$(".js-pos-value").text(s),this.$(".js-select-list,.js-select-position,.js-commit-position").removeAttr("disabled")):(this.$(".js-list-value").html("<i>No Lists</i>"),this.$(".js-pos-value").html("<i>N/A</i>"),this.$(".js-select-list,.js-select-position,.js-commit-position").attr("disabled","disabled"))},e.prototype.updateBoardData=function(){var e,t,i,n,r,o,s,a;if(t=this.$(".js-select-board"),n=t.find("option:selected").val(),i={},n===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),a=this._boardData.listList.models,o=0,s=a.length;s>o;o++)r=a[o],r.cardCount=this._boardData.listList.get(r.id).cardList.openCards().length;return this.updateListList()}return null!=n?(this.$(".js-submit").attr("disabled","disabled"),e=this.$(".select-list,.select-position"),e.attr("disabled","disabled"),ModelLoader["for"](this.modelCache).loadBoardListData(n,{lists:"open",list_fields:"name,pos,idBoard",cards:"visible",card_fields:"idList,idBoard,pos"},function(t){return function(){return t._boardData=t.Board.get(n),t.updateListList(),e.removeAttr("disabled"),t.$(".js-submit").removeAttr("disabled")}}(this))):void 0},e.prototype.updateListList=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p;for(t=this.$(".js-select-board"),i=this.$(".js-select-list").empty(),r=t.find("option:selected").val(),o=this.model.getList().id,s=r===this.model.getBoard().id?o:null!=(u=this._boardData.listList.at(0))?u.id:void 0,p=this._boardData.openLists(),c=0,d=p.length;d>c;c++)a=p[c],l=a.get("name"),n=l,a.id===o&&(n+=" (current)"),e=$("<option>").val(a.id).text(n).appendTo(i),a.id===s&&e.attr("selected","selected");return this.updatePositionList()},e.prototype.updatePositionList=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m;if(t=this.$(".js-select-list"),i=this.$(".js-select-position").empty(),s=t.find("option:selected").val(),null==s)return void this.renderValues();for(a=null!=(m=this._boardData.listList.get(s))?m:this._boardData.listList.at(0),u=(null!=a?a.id:void 0)===this.model.getList().id,l=this._boardData.listList.get(s).cardList.length,u?(n=_.indexOf(this.model.getList().cardList.openCards(),this.model),p=n,this.showCurrentPosition||(l-=1)):(n=-1,p=l),o=h=0;l>=0?l>=h:h>=l;o=l>=0?++h:--h)c=String(o+1),r=c,o===n?r+=" (current)":l>0&&(0===o?r+=" (top)":o===l&&(r+=" (bottom)")),d=0===o?"top":o===l?"bottom":a.calcPos(o),e=$("<option>").val(d).text(r).appendTo(i),o===p&&(this.$(".js-pos-value").html(Util.getNaturalNumber(c)),e.attr("selected","selected"));this.renderValues()},e}(),CardCopyView=mixin(SelectCardPosition,_CardCopyView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Copy Card"},t.prototype.showCurrentPosition=!0,t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","keydown textarea[name='name']":"keydownEvent","click .js-submit":"submit","submit form":"submit"},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l,c;for(t=this.model.toJSON(),t.numChecklists=this.model.checklistList.length,t.numMembers=t.idMembers.length,t.numLabels=t.labels.length,t.numAttachments=t.badges.attachments,t.numComments=t.badges.comments,t.numStickers=t.stickers.length,t.hasChecklists=t.numChecklists>0,t.hasMembers=t.idMembers.length>0,t.hasLabels=t.labels.length>0,t.hasAttachments=t.badges.attachments>0,t.hasComments=t.badges.comments>0,t.hasStickers=t.stickers.length>0,t.hasStuff=t.numChecklists+t.idMembers.length+t.labels.length+t.badges.attachments+t.badges.comments+t.stickers.length>0,t.loading=this.loading,t.organizations=Auth.me().getOpenBoardsByOrg(!0),l=t.organizations,r=0,s=l.length;s>r;r++)for(i=l[r],c=i.boards,o=0,a=c.length;a>o;o++)e=c[o],e.id===this.model.get("idBoard")&&(e.selected=!0);return n={move_card_controls:templates.move_card_controls},this.$el.html(templates.fill("card_copy",t,{editable:this.model.editable()},n)),PopOver.calcPos(),this.updateBoardData(),this},t.prototype.getData=function(){return this.loading=!0,ModelLoader["for"](this.modelCache).loadCardCopyData(this.model.get("idBoard"),this.model.id,function(e){return function(){return e.loading=!1,e.render()}}(this))},t.prototype.keydownEvent=function(e){e.keyCode===Key_Enter&&(Util.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,i,n,r,o,s,a,l,c,d,u;return Util.stop(e),c=this.$('textarea[name="name"]'),""===c.val().trim()?void c.focus().select():(t=this.$(".js-select-board"),i=this.$(".js-select-list"),n=this.$(".js-select-position"),o=t.find("option:selected").val(),s=i.find("option:selected").val(),u=n.find("option:selected").val(),a=parseInt(n.find("option:selected").prop("index"),10),d={idCardSource:this.model.get("id"),idBoard:o,idList:s,pos:u,name:c.val().trim(),closed:!1,keepFromSource:this.$("input:checkbox:checked").map(function(){return function(e,t){return t.name}}(this)).get().join(),badges:{}},r=this.Auth.me().boardList.find(function(e){return e.id===o}),l=r.listList.find(function(e){return e.id===s}),void l.cardList.create(d,{success:function(){return function(){return PopOver.hide(),track("Card","Copy Card")}}(this)}))},t}(ViewWithId)),CardMoveView=mixin(SelectCardPosition,_CardMoveView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Move Card"},t.prototype.initialize=function(){return this.listenTo(Auth.me().boardList,"add remove reset",this.render)},t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","click .js-submit":"commitChange"},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l,c;for(t={organizations:Auth.me().getOpenBoardsByOrg(!0)},l=t.organizations,r=0,s=l.length;s>r;r++)for(i=l[r],c=i.boards,o=0,a=c.length;a>o;o++)e=c[o],e.id===this.model.get("idBoard")&&(e.selected=!0);return n={move_card_controls:templates.move_card_controls},this.$el.html(templates.fill("popover_move_card",t,{},n)),this.updateBoardData(),this},t.prototype.commitChange=function(){var e,t,i,n,r,o,s,a;e=this.$(".js-select-board"),t=this.$(".js-select-list"),i=this.$(".js-select-position"),n=e.find("option:selected").val(),r=t.find("option:selected").val(),a=i.find("option:selected").val(),o=parseInt(i.find("option:selected").prop("index"),10),n===this.model.getBoard().id?(s=this.model.getBoard().listList.get(r),this.model.moveToList(s,o),track("Card","Move Menu","Same Board")):null!=n&&null!=r&&null!=a&&(track("Card","Move Menu","Changed Board"),this.model.getList().cardList.remove(this.model),Dialog.hide(),ApiAjax({url:"/1/cards/"+this.model.id,type:"put",data:{idList:r,idBoard:n,pos:a},success:function(e){return function(t){return e.model.board=null,e.model.set("idBoard",t.idBoard),e.model.set("idList",t.idList),e.model.set("pos",t.pos),IdCache.setBoardIdForCard(e.model.id,t.idBoard)}}(this)})),QuickCardEditorView.close(),PopOver.hide()},t}(ViewWithId)),CardLabelSelectView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Labels"},t.prototype.initialize=function(){return this.listenTo(Auth.me(),"change:prefs",this.render),this.listenTo(this.model.getBoard(),"change:labelNames",this.render),this.listenTo(this.model,"change:labels",this.render)},t.prototype.events={"click .card-label":"toggleLabel","click .js-edit-label-titles":"openEditLabelTitles","click .js-toggle-color-blind-mode":"toggleColorBlindMode",shortcut:"shortcut"},t.prototype.shortcut=function(e){var t,i;switch(e){case Key_1:case Key_2:case Key_3:case Key_4:case Key_5:case Key_6:case Key_Numpad_1:case Key_Numpad_2:case Key_Numpad_3:case Key_Numpad_4:case Key_Numpad_5:case Key_Numpad_6:return t=e>=Key_1&&Key_6>=e?Key_1:Key_Numpad_1,i=e-t,this.$(".card-label").eq(i).click(),"1-6 - Toggle Specific Label"}},t.prototype.render=function(){var e,t;return e={labels:this.model.getLabels(),showShortcuts:this.options.showShortcuts,hideEditTitles:this.options.hideEditTitles},t={editable:this.model.editable()},e.cbModeEnabled=Auth.me().get("prefs").colorBlind,e.cbToggleText="Enable",e.cbModeEnabled&&(e.cbToggleText="Disable"),this.$el.html(templates.fill("popover_change_labels",e,t)),this},t.prototype.toggleLabel=function(e){var t,i;return i=$(e.target).closest(".card-label"),(t=i.attr("label"))?(track(this.model.typeName,"Labels Menu","Change Label"),this.model.toggleLabel(t),this.options.hideOnSelect?void PopOver.hide():void i.toggleClass("active")):void 0},t.prototype.openEditLabelTitles=function(e){Util.stop(e),PopOver.pushView({view:EditLabelsView,options:{model:this.model.getBoard(),modelCache:this.modelCache}}),track(this.model.typeName,"Labels Menu","Open Edit Label Titles")},t.prototype.toggleColorBlindMode=function(){var e;e=Auth.me(),e.toggleColorBlindMode(),track(this.model.typeName,"Labels Menu","Toggle Color Blind Friendly Mode.")},t}(ViewWithId);var AddChecklistMenu,CheckItem,CheckItemList,CheckItemListView,CheckItemView,Checklist,ChecklistList,ChecklistView,_CheckItemView,_ChecklistView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Checklist=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="Checklist",t.prototype.urlRoot=function(){return"/1/checklists"},t.prototype.initialize=function(){return this.destruct([this.checkItemList=(new CheckItemList).syncSubModels(this,"checkItems")])},t.prototype.sync=function(e,i,n){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idCard")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(["idBoard","idCard"],function(r){return function(o){return r.set(o),t.__super__.sync.call(r,e,i,n)}}(this)),this.getBoard().onId(function(e){return function(t){return e.set("idBoard",t)}}(this)),this.getCard().onId(function(e){return function(t){return e.set("idCard",t)}}(this)))},t.prototype.getCard=function(){var e;return null!=(e=this.Card.get(this.get("idCard")))?e:this.collection.sourceModel},t.prototype.getBoard=function(){var e;return null!=(e=this.getCard())?e.getBoard():void 0},t.prototype.getCompletedCount=function(){var e;return e=0,this.checkItemList.each(function(t){return null!=t.get("state")&&"complete"===t.get("state")?e++:void 0}),e},t.prototype.getCheckItem=function(e){return this.checkItemList.get(e)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.calcPos=function(e,t){return Util.calcPos(e,this.checkItemList,t)},t}(TrelloModel),ChecklistList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Checklist,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t.prototype.idList=function(){return this.pluck("id")},t}(CollectionWithHooks),AddChecklistMenu=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add Checklist"},t.prototype.initialize=function(e){this.cardView=e.cardView},t.prototype.events={"click .js-add-checklist":"addChecklist","submit form":"addChecklist"},t.prototype.render=function(){var e,t,i,n,r,o,s;for(n=this,i=[],i.checklistCards=[],s=this.Card.find(function(e){return function(t){return t.get("idBoard")===e.model.getBoard().id&&!t.get("closed")}}(this)),r=0,o=s.length;o>r;r++)t=s[r],e=t.toJSON(),e.checklists=[],t.checklistList.forEach(function(){return function(t){var i,n,r;return(null!=(n=t.checkItemList)?n.length:void 0)>0?(i=Util.formatCount(null!=(r=t.checkItemList)?r.length:void 0,"Item"),e.checklists.push(_.extend(t.toJSON(),{length:i}))):void 0}}(this)),e.checklists.length>0&&i.checklistCards.push(e);return i.checklistCards.length>0&&(i.hasChecklistCards=!0),this.$el.html(templates.fill("checklist_add_menu",i)),this},t.prototype.addChecklist=function(e){var t,i,n,r,o;return Util.stop(e),o=this.$(".js-checklist-title").val(),r=this.$(".js-checklist-copy-source").val(),0===o.length?void this.$(".js-checklist-title").focus().select():(i=""!==r?"Copied Checklist Items":"No Checklist Items Copied",n="Checklist"===o?"Default Title (Checklist), "+i+")":"Renamed Title, "+i+")",track("Checklist","Create",""+n),t=this.model.checklistList.create({name:o,idChecklistSource:r,idCard:this.model.id}),this.cardView.focusChecklistAdd(t),void PopOver.hide())},t}(ViewWithId),CheckItem=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="CheckItem",t.prototype.urlRoot=function(){var e;return e=this.getChecklist(),""+e.getCard().url()+"/checklist/"+e.id+"/checkItem"},t.prototype.sync=function(e,i,n){var r;return null!=(r=this.getChecklist())?r.onId(function(){return t.__super__.sync.call(this,e,i,n)}):void 0},t.prototype.getChecklist=function(){return this.collection.sourceModel},t.prototype.getCard=function(){return this.getChecklist().getCard()},t.prototype.editable=function(){return this.getChecklist().editable()},t.prototype.getContext=function(){return this.getChecklist()},t.prototype.move=function(e){this.update("pos",this.getChecklist().calcPos(e,this)),this.collection.sort({silent:!0})},t}(TrelloModel),CheckItemList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=CheckItem,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t}(CollectionWithHooks),CheckItemView=mixin(AutoInsertionView,CompleterUtil,_CheckItemView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="checklist-item",t.prototype.allowNewlines=!1,t.prototype.initialize=function(){return this.listenTo(this.model,{"change:name":this.renderName,"change:state":this.renderState}),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"keyup .js-checkitem-input":"keyAutoMention","click .js-toggle-checklist-item":"toggleState","click .js-delete-item":"delete","click .js-convert-item-to-card":"convertToCard","click .js-open-editing-menu":"openEditingMenu",movecheckitem:"moveCheckItem"},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.render=function(){var e,t;return t=this,e=this.model,this.$el.html(templates.fill("checklist_item",{},{editable:this.model.editable()})),this.renderName(),this.renderState(),this.recallDrafts(),this},t.prototype.getTextInput=function(){return this.$(".js-checkitem-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.renderName=function(){var e;e=TFM.checkItems.format(this.model.get("name"),{textData:this.model.get("nameData")}).output,this.$(".js-checkitem-name").empty().append(e)},t.prototype.renderState=function(){var e;e=this.model.toJSON(),e.checked="complete"===e.state,this.$el.toggleClass("checklist-item-state-complete",e.checked)},t.prototype.toggleState=function(){var e,t;this.model.editable()&&(e="complete"===this.model.get("state"),t=e?"incomplete":"complete","complete"===t?(this.$el.addClass("checklist-item-fade-out"),_.delay(function(e){return function(){return e.model.update("state",t),e.$el.removeClass("checklist-item-fade-out")}}(this),200)):(this.$el.removeClass("checklist-item-fade-out"),this.model.update("state",t)),track("Checklist","Toggle Checklist Item State",t))},t.prototype["delete"]=function(e){Util.stop(e),this.model.destroy(),track("Checklist","Delete Single Checklist Item")},t.prototype.convertToCard=function(e){Util.stop(e),this.model.run("convertToCard"),this.model.getChecklist().checkItemList.remove(this.model),track("Checklist","Convert Checklist Item to Card")},t.prototype.moveCheckItem=function(e,t,i,n){var r,o,s;if(n||this.model.getChecklist()===i)return r=t.item.parent().children(),o=r.index(t.item),s=i.calcPos(o,this.model),n?(this.model.update({pos:s,idChecklist:i.id}),this.model.collection.remove(this.model),i.checkItemList.add(this.model)):this.model.update("pos",s),i.checkItemList.sort({silent:!0}),track("Checklist","Reorder Checklist Item")
},t.prototype.openEditingMenu=function(e){return Util.stop(e),PopOver.toggle({elem:e.target,top:36,view:InsertionOptionsView,options:{model:this.model,parent:this},keepEdits:!0})},t}(EditableView)),ChecklistView=mixin(AutoInsertionView,CompleterUtil,_ChecklistView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="checklist",t.prototype.initialize=function(){return this.makeDebouncedMethods("renderCheckedState"),this.listenTo(this.model.checkItemList,{"add remove reset change:state":function(){return this.renderProgress(),this.renderCheckedStateDebounced()}}),this.listenTo(MemberState,{"change:idCollapsedChecklists":this.renderCheckedStateDebounced}),this.listenTo(this.model,{"change:name":this.renderName})},t.prototype.events={"keydown .js-new-checklist-item-input":"keydownChecklistEvent","click .js-add-checklist-item":"submitTask","click .js-cancel-checklist-item":"cancelItemEditing","click .js-new-checklist-item-input":"focusNewTaskInput","click .js-confirm-delete":"confirmDeleteChecklist","click .js-hide-checked-items":"hideCheckedItems","click .js-show-checked-items":"showCheckedItems","sortstop .js-checklist-items-list":"sortStop","sortreceive .js-checklist-items-list":"sortReceive",movechecklist:"moveChecklist","click .js-open-editing-menu":"openEditingMenu","keyup .js-new-checklist-item-input":"keyAutoMention"},t.prototype.render=function(){var e,t;return log("render","rendering checklist state "+this.model.get("name")),this.$el.html(templates.fillFromModel("checklist",this.model)),e=this.$(".js-checklist-items-list"),(null!=(t=this.getCard())?t.editable():void 0)&&e.sortable({axis:"y",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist-item placeholder",items:".checklist-item",connectWith:".js-checklist-items-list",start:function(e,t){var i;return DragSort.sorting=!0,i=$(t.helper).outerHeight(),$(t.placeholder).height(i)},stop:function(){return _.defer(function(){return DragSort.sorting=!1})}}),this.newCheckItemInput=this.$(".js-new-checklist-item-input").autosize(),this.renderName(),this.renderCheckItems(),this.renderCheckedState(),this},t.prototype.renderName=function(){return this.$("div.checklist-title[attr=name] .current").text(this.model.get("name")),this},t.prototype.sortCheckItems=function(){var e;return e=this.$(".js-checklist-items-list"),Util.withoutAlteringSelection(function(t){return function(){return t.model.checkItemList.each(function(i){var n;return n=t.existingSubview(CheckItemView,i),e.append(n.el)})}}(this)),this},t.prototype.renderProgress=function(){var e,t,i,n;return t=this.model.getCompletedCount(this.getCard()),i=this.model.checkItemList.length,n=i>0?Math.round(100*t/i):0,e=t===i&&i>0,this.$(".js-checklist-progress-bar").width(n+"%"),this.$(".js-checklist-progress-percent").text(n+"%"),this.$(".js-checklist-progress-bar").toggleClass("checklist-progress-bar-current-complete",e),this},t.prototype.renderCheckItems=function(){var e,t;return e=this.$(".js-checklist-items-list"),t=this.collectionSubview(CheckItemListView,this.model.checkItemList,{el:e}),t.render(),DragSort.refreshIfInitialized(e),this.renderProgress(),this},t.prototype.isChecklistCollapsed=function(){return MemberState.inSet("idCollapsedChecklists",this.model.id)},t.prototype.renderCheckedState=function(){var e,t,i,n;return i=this.model.checkItemList.length,t=this.model.getCompletedCount(this.getCard()),n=i>0,e=i===t&&i>0,this.$(".js-checked-items-count").text(Util.formatCount(t,"completed item")),this.$(".js-completed-message").addClass("hide"),0!==t&&n?this.isChecklistCollapsed()?(this.$el.addClass("hide-completed-items"),this.$(".js-show-checked-items-button").removeClass("hide"),this.$(".js-hide-checked-items-button").addClass("hide"),this.$(".js-completed-message").toggleClass("hide",!e)):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items-button").addClass("hide"),this.$(".js-hide-checked-items-button").removeClass("hide")):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items-button").addClass("hide"),this.$(".js-hide-checked-items-button").addClass("hide")),this},t.prototype.hideCheckedItems=function(e){Util.stop(e),MemberState.pushCollapsedChecklist(this.model.id),track("Checklist","Hide Checked Items")},t.prototype.showCheckedItems=function(e){Util.stop(e),MemberState.pullCollapsedChecklist(this.model.id),track("Checklist","Show Checked Items")},t.prototype.getCard=function(){return this.options.card},t.prototype.cancelItemEditing=function(e){return $(e.target).closest(".js-new-checklist-item").find(".js-new-checklist-item-input").val(""),Layout.cancelEdits(),!1},t.prototype.focusNewTaskInput=function(){var e;this.$(".js-new-checklist-item").hasClass("focus")||(Layout.cancelEdits(this.newCheckItemInput),null!=(e=this.newCheckItemInput)&&e.focus().select(),this.$(".js-new-checklist-item").addClass("focus"))},t.prototype.keydownChecklistEvent=function(e){if($(e.target).hasClass("js-new-checklist-item-input")){if(PopOver.view instanceof EmojiCompleterView||PopOver.view instanceof AutoMentionerView)return this.checkInsert(e);if(Util.isSubmitKey(e))return this.submitTask(e),this.focusNewTaskInput()}},t.prototype.getTextInput=function(){return this.$(".js-new-checklist-item-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.submitTask=function(e){var t,i,n,r;return Util.stop(e),n=this.newCheckItemInput.val().trim(),/^\s*$/.test(n)?(Util.stop(e),this.focusNewTaskInput(),!1):(r=_.compact(n.split(/\r\n|\r|\n/)),t=this.model,async.forEachSeries(r,function(){return function(e,i){var n,r;return r=t.checkItemList.length>0?t.checkItemList.at(t.checkItemList.length-1).get("pos")+Util.spacing:Util.spacing,r+=Math.floor(1024*Math.random()),n={name:e.trim(),pos:r,nameData:{emoji:Auth.me().allCustomEmoji()}},t.checkItemList.create(n,{success:function(){return i()}})}}(this),function(){return function(){}}(this)),this.newCheckItemInput.val(""),this.focusNewTaskInput(),i=1===r.length?"Single Item":"Multiple Items",void track("Checklist","Add Checklist Item",i))},t.prototype.sortStop=function(e,t){Util.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!1])},t.prototype.sortReceive=function(e,t){Util.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!0])},t.prototype.confirmDeleteChecklist=function(e){var t;Util.stop(e),t=this.model.get("name"),Confirm.toggle({elem:this.$(e.target).closest(".js-confirm-delete"),top:20,model:this.model,title:"Delete "+t+"?",text:"Deleting a checklist is permanent and there is no way to get it back.",confirmText:"Delete Checklist",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return track("Checklist","Delete Checklist"),e.model.destroy()}}(this)})},t.prototype.moveChecklist=function(e,t){var i,n,r;i=this.model.getCard(),null!=i&&(n=t.item.parent().children(),r=n.index(t.item),this.model.update("pos",i.calcChecklistPos(r,this.model)),this.model.collection.sort({silent:!0}),track("Checklist","Reorder Checklist"))},t.prototype.openEditingMenu=function(e){return Util.stop(e),PopOver.toggle({elem:e.target,top:36,view:InsertionOptionsView,options:{model:this.model,parent:this},keepEdits:!0})},t}(EditableView)),CheckItemListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.viewType=CheckItemView,t}(CollectionView);var CustomEmoji,CustomEmojiList,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};CustomEmoji=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typename="CustomEmoji",t}(TrelloModel),CustomEmojiList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=CustomEmoji,t.prototype.url=function(){return"/1/member/"+this.member.id+"/customEmoji"},t.prototype.initialize=function(e,t){this.member=t.member},t}(CollectionWithHooks);var CustomSticker,CustomStickerList,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};CustomSticker=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typename="CustomSticker",t}(TrelloModel),CustomStickerList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=CustomSticker,t.prototype.url=function(){return"/1/member/"+Auth.me().id+"/customStickers"},t.prototype.initialize=function(e,t){this.member=t.member},t}(CollectionWithHooks);var InlineListComposerView,List,ListBulkMoveCardsView,ListComposer,ListCopyView,ListList,ListListView,ListMenuView,ListMoveView,ListView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};List=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="List",t.prototype.urlRoot="/1/lists",t.prototype.initialize=function(){return this.destruct([this.cardList=new CardList(null,{list:this}).owner(this).syncCache(this.modelCache,["idList","closed"],function(e){return function(t){return e.id&&t.get("idList")===e.id&&!t.get("closed")}}(this))])},t.prototype.sync=function(e,i,n){return"create"===e&&null==this.get("idBoard")?(this.waitForAttrs(["idBoard"],function(r){return function(o){return r.set(o),t.__super__.sync.call(r,e,i,n)}}(this)),this.getBoard().onId(function(e){return function(t){return e.set("idBoard",t)}}(this))):t.__super__.sync.apply(this,arguments)},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.move=function(e){this.update({pos:this.getBoard().calcPos(e,this)}),this.collection.sort({silent:!0})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1,pos:this.getBoard().calcPos(this.collection.length,this)})},t.prototype.onChange=function(){},t.prototype.calcPos=function(e,t,i){return Util.calcPos(e,this.cardList,t,function(e){return!e.get("closed")},i)},t.prototype.getBoard=function(){var e,t;return null!=(e=this.Board.get(this.get("idBoard")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.getAdjacentList=function(e){var t,i,n;return t=this.getBoard(),n=t.openLists(),i=this.getIndexInList(),n[(i+e+n.length)%n.length]},t.prototype.getNextList=function(){return this.getAdjacentList(1)},t.prototype.getPrevList=function(){return this.getAdjacentList(-1)},t.prototype.selectCardInList=function(e){var t;t=this.cardList.openCards()[e],null!=t&&this.getBoard().viewState.selectCard(t)},t.prototype.selectFirstCardInList=function(){return this.selectCardInList(0)},t.prototype.selectLastCardInList=function(){return this.selectCardInList(this.cardList.openCards().length-1)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.getIndexInList=function(){return _.indexOf(this.getBoard().openLists(),this)},t.prototype.openCards=function(){return this.cardList.filter(function(e){return!e.get("closed")})},t}(TrelloModel),ListList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=List,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.board=t.board},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.calcPos=function(e,t,i){return Util.calcPos(e,this,t,function(e){return!e.get("closed")},i)},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/lists"},t.prototype.openLists=function(){return this.filter(function(e){return!e.get("closed")})},t}(CollectionWithHelpers),ListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="list",t.prototype.events={"click .js-open-list-menu":"openMenu","mousedown .list-cards":"eventStopPropagation",dblclick:"eventStopPropagation","click .js-open-card-composer":"openCardComposer",movelist:"moveList",sortreceive:"sortReceive",sortstop:"sortStop"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.makeDebouncedMethods("toggleComposerLink","renderComposer","renderCardCount"),this.listenTo(this.model,{"change:name":this.renderName,"change:subscribed":this.renderSubscribed}),this.listenTo(this.model.cardList,{"add remove change:idList change:closed reset":this.renderCardCountDebounced}),this.listenTo(this.model.getBoard(),"permChange",this.renderEditable),this.listenTo(this.model.getBoard().composer,{"change:idList change:index change:vis":this.renderComposerDebounced,"change:idList change:vis":this.toggleComposerLinkDebounced})},t.prototype.render=function(){var e;return log("render","rendering list "+this.model.get("name")),this.$el.html(templates.fill("list",this.model.toJSON(),{editable:this.model.editable()})),e=this.$(".js-list-cards"),this.cardListView=this.collectionSubview(CardListView,this.model.cardList,{el:e}),this.cardListView.render(),this.toggleComposerLinkDebounced(),this.renderComposerDebounced(),this.renderCardCount(),this.renderEditable(),this.setListCardsHeight(),this},t.prototype.renderName=function(){return this.$(".js-list-name").text(this.model.get("name")),this},t.prototype.renderSubscribed=function(){return this.$(".js-list-subscribed").toggleClass("hide",!this.model.get("subscribed")),this},t.prototype.renderEditable=function(){var e;return e=this.model.editable(),this.$(".js-list-cards").toggleClass("js-sortable",e),this.$(".js-list-header").toggleClass("editable",e),this.$(".js-open-card-composer").toggleClass("hide",!e),this},t.prototype.setListCardsHeight=function(){var e;"explorer-10"===(e=Browser.browserVersionStr)&&_.defer(function(e){return function(){var t,i,n,r,o;return t=e.$el,o=e.$(".list-header").outerHeight(),n=e.$(".open-card-composer").outerHeight(),i=$("#board").height(),r=i-o-n-10,e.$(".list-cards").css({"max-height":r})}}(this))},t.prototype.toggleComposerLink=function(){return this.$(".js-open-card-composer").toggleClass("hide",this.composerOpen()||!this.model.editable())},t.prototype.composerOpen=function(){var e,t;return e=null!=(t=this.model.getBoard())?t.composer:void 0,null!=e&&e.get("vis")&&e.get("idList")===this.model.id},t.prototype.renderComposer=function(){var e,t;return this.composerOpen()&&(e=this.model.getBoard().composer,t=Controller.getCurrentBoardView().subview(CardComposerInlineView,e),this.insertComposerAtIndex(e.get("index"),t),t.scrollIntoView(),_.debounce(t.delegateEvents(),150)),this},t.prototype.insertComposerAtIndex=function(e,t){return 0===e?this.$(".list-cards").prepend(t.render().el):this.$(".list-card").not(".js-composer").eq(e-1).after(t.render().el)},t.prototype.renderCardCount=function(){return this.$(".js-num-cards").text(Util.formatCount(this.model.cardList.openCards().length,"card"))},t.prototype.editTitle=function(){return this.model.editable()?this.$(".js-list-name").click():void 0},t.prototype.openCardComposer=function(e){var t;Util.stop(e),PopOver.hide(),t=this.model.getBoard(),t.composer.save({idList:this.model.id,index:this.model.cardList.openCards().length,vis:!0}),track("Card Composer","Open","Via Bottom of List")},t.prototype.triggerOnItem=function(e,t,i){Util.stopPropagation(e),t.item.data("dragCancel")||_.defer(function(e){return function(){return t.item.trigger(i,[t,e])}}(this))},t.prototype.sortReceive=function(e,t){this.triggerOnItem(e,t,"moveto")},t.prototype.sortStop=function(e,t){this.triggerOnItem(e,t,"movein")},t.prototype.openMenu=function(e){var t;return t=this,DragSort.sorting?void 0:(Util.preventDefault(e),track("List Menu","Open List Menu"),PopOver.toggle({elem:e.target,top:24,view:new ListMenuView({model:this.model,modelCache:this.modelCache})}),!1)},t.prototype.moveList=function(e,t){var i,n;i=t.item.parent().children(),n=i.index(t.item),this.model.move(n)},t.prototype.eventStopPropagation=function(e){Util.stopPropagation(e)},t.prototype.scrollIntoView=function(){var e,t,i,n;return t=this.$el.offset().left,i=t+this.$el.width(),n=this.$("#board"),e=n.scrollLeft(),0>t?n.scrollLeft(e+t-16):i>n.width()?n.scrollLeft(e+(i-n.width())):void 0},t}(EditableView),ListListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.viewType=ListView,t.prototype.initialize=function(){return this.resetCallback=arguments[0].resetCallback,t.__super__.initialize.apply(this,arguments),this.resetCallback?this.listenTo(this.collection,{reset:this.resetCollection,"change:idBoard":this.boardChange}):void 0},t.prototype.getModels=function(){return this.collection.openLists()},t.prototype.boardChange=function(e,t){return t!==this.collection.board.get("id")?(this.collection.remove(e),DragSort.refreshIfInitialized(this.$el)):void 0},t.prototype.resetCollection=function(){return"function"==typeof this.resetCallback?this.resetCallback():void 0},t.prototype.addModel=function(){return t.__super__.addModel.apply(this,arguments),"function"==typeof this.resetCallback?this.resetCallback():void 0},t.prototype.insertSubview=function(e){t.__super__.insertSubview.apply(this,arguments),e.$el.find(".ui-sortable").length>0?DragSort.refreshIfInitialized(this.$el):DragSort.refreshListCardSortable()},t}(CollectionView),ListComposer=function(e){function t(e,i){this.board=e,t.__super__.constructor.call(this,null,i),this.board.onId(function(e){return function(t){return e.set({id:"boardListComposerSettings-"+t}),e.fetch()}}(this))}return __extends(t,e),t.prototype["default"]=function(){return{title:null,vis:!1}},t.prototype.clear=function(){return this.save(this["default"]())},t.prototype.clearItems=function(){this.save({title:""})},t.prototype.getBoard=function(){return this.board},t.prototype.toJSON=function(e){var i,n,r,o;return o=null!=e?e:{},i=o.board,r=o.list,n=t.__super__.toJSON.apply(this,arguments),i&&(n.board=this.getBoard().toJSON()),n},t}(LocalStorageModel),InlineListComposerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="list add-list idle",t.prototype.initialize=function(){return this.listenTo(this.model.viewState,"change:listComposerOpen",this.debounce(this.renderListComposer))},t.prototype.events={"click .js-open-add-list":"setOpen","click .js-cancel-edit":"setClose",submit:"addList"},t.prototype.render=function(){var e;return e=this.model.toJSON({board:!0}),this.$el.html(templates.fill("list_add",e)),this.renderListComposer(),this.model.editable()&&this.$el.removeClass("fade hide"),this},t.prototype.setOpen=function(e){Util.stop(e),this.model.viewState.set("listComposerOpen",!0)},t.prototype.setClose=function(e){Util.stop(e),this.model.viewState.set("listComposerOpen",!1)},t.prototype.renderListComposer=function(){return this.model.viewState.get("listComposerOpen")?this.renderOpen():this.renderClose()},t.prototype.renderOpen=function(e){Util.stop(e),this.$el.hasClass("idle")&&(this.$el.removeClass("idle"),$(".list-area-wrapper").scrollLeft($(".list-area").outerWidth()+100)),_.defer(function(e){return function(){return e.$(".list-name-input").focus().select()}}(this)),PopOver.hide()},t.prototype.renderClose=function(e){Util.stop(e),this.$el.addClass("idle")},t.prototype.addList=function(e){var t,i,n,r;return Util.stop(e),t=this.$(".list-name-input"),n=this.model.openLists(),r=n.length+1,i=t.val().trim(),""===i?void t.focus().select():(this.model.listList.create({name:i,pos:this.model.calcPos(r),closed:!1},{success:function(){return function(){return track("Board","Add List - via Inline List Composer")}}(this)}),void this.renderOpen())},t}(ViewWithId),ListMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"List Actions"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:subscribed",this.debounce(this.render))},t.prototype.events={"click .js-add-card":"addCard","click .js-move-list":"moveList","click .js-copy-list":"copyList","click .js-list-subscribe":"toggleSubscribe","click .js-move-cards":"moveCards","click .js-archive-cards":"archiveCards","click .js-close-list":"closeList"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(templates.fill("list_menu",e,{editable:this.model.editable()})),this},t.prototype.addCard=function(e){Util.stop(e),PopOver.hide(),this.model.getBoard().composer.save({idList:this.model.id,index:0,vis:!0}),track("List Menu","Add Card"),track("Card Composer","Open","Via List Menu")},t.prototype.moveList=function(e){Util.stop(e),track("List Menu","Open Move List Popover"),PopOver.pushView({view:new ListMoveView({model:this.model,modelCache:this.modelCache})})},t.prototype.copyList=function(e){Util.stop(e),track("List Menu","Open Copy List Popover"),PopOver.pushView({view:new ListCopyView({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleSubscribe=function(e){Util.preventDefault(e),this.model.get("subscribed")?(this.model.subscribe(!1),track("List Menu","Subscribe","Unsubscribe")):(this.model.subscribe(!0),track("List Menu","Subscribe","Subscribe"))},t.prototype.moveCards=function(e){Util.stop(e),track("List Menu","Open Move All Cards in List"),PopOver.pushView({view:new ListBulkMoveCardsView({model:this.model,modelCache:this.modelCache})})},t.prototype.archiveCards=function(e){Util.stop(e),track("List Menu","Open Archive All Cards in List"),Confirm.pushView({model:this.model,title:"Archive All Cards in this List?",text:'This will remove all the cards in this list from the board. To view archived cards and bring them back to the board, click "Menu" > "Archived Items".',confirmText:"Archive All",confirmBtnClass:"negate",fxConfirm:function(e){return function(){var t,i,n,r;for(PopOver.hide(),i=e.model.openCards(),n=0,r=i.length;r>n;n++)t=i[n],t.set({closed:!0});return e.model.run("archiveAllCards",{},e.listViewListen)}}(this)})},t.prototype.closeList=function(e){var t,i;return Util.stop(e),i=this,t=this.model,track("List Menu","Archive List"),PopOver.hide(),t.close(),!1},t}(ViewWithId),ListBulkMoveCardsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Move All Cards in List"},t.prototype.events={"click .js-select-list":"selectList"},t.prototype.render=function(){var e,t,i,n,r,o;for(e=this.model.toJSON(),e.lists=[],i=this.model.getBoard().openLists(),n=0,r=i.length;r>n;n++)t=i[n],o=_.clone(t.toJSON()),o.id===this.model.id&&(o.current=!0),e.lists.push(o);return this.$el.html(templates.fill("list_bulk_card_move",e)),this},t.prototype.selectList=function(e){var t,i,n,r,o,s,a;if(t=$(e.target).closest(".js-select-list"),r=t.attr("name"),!t.hasClass("disabled")){for(n=this.List.get(r),track("Card","Moved in Bulk via List Menu"),a=this.model.cardList.openCards(),o=0,s=a.length;s>o;o++)i=a[o],i.moveToList(n,1e3);PopOver.hide()}},t}(ViewWithId),ListCopyView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Copy List"},t.prototype.tagName="form",t.prototype.events={"click .js-submit":"submit",submit:"submit","keydown textarea[name='name']":"keydownEvent"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(templates.fill("list_copy",e,{editable:this.model.editable()})),this},t.prototype.keydownEvent=function(e){e.keyCode===Key_Enter&&(Util.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,i,n,r;return Util.stop(e),n=this.$('textarea[name="name"]'),""===n.val().trim()?void n.focus().select():(t=this.model.getBoard(),i=t.listList.calcPos(this.model.getIndexInList()+1,this.model,!0),r={idListSource:this.model.id,idBoard:this.model.get("idBoard"),pos:i,name:n.val().trim(),closed:!1},t.listList.create(r),PopOver.hide(),void track("List","Copy List"))},t}(ViewWithId),ListMoveView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Move List"},t.prototype.tagName="form",t.prototype.events={"change .js-select-list-pos":"renderValues","change .js-select-board":"updateBoardData","click .js-commit-position":"commitChange",submit:"commitChange"},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l,c,d;for(r=this,i=r.model,t={organizations:Auth.me().getOpenBoardsByOrg(!0)},c=t.organizations,o=0,a=c.length;a>o;o++)for(n=c[o],d=n.boards,s=0,l=d.length;l>s;s++)e=d[s],e.id===i.get("idBoard")&&(e.selected=!0);return this.$el.html(templates.fill("popover_move_list",t)),this.updateBoardData(),this},t.prototype.renderValues=function(){var e,t,i,n,r;e=$(this.el),n=e.find(".js-select-board option:selected").val(),r=parseInt(e.find(".js-select-list-pos option:selected").text(),10),t=this.Board.get(n),i=t.get("name"),r=Util.getNaturalNumber(r),e.find(".js-board-value").text(i),e.find(".js-pos-value").text(r)},t.prototype.updateBoardData=function(){var e,t,i,n,r,o,s,a,l;if(e=$(this.el),i=e.find(".js-select-board"),r=i.find("option:selected").val(),n={},r===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),l=this._boardData.listList.models,s=0,a=l.length;a>s;s++)o=l[s],o.cardCount=this._boardData.listList.get(o.id).cardList.openCards().length;return this.updateListList()}return t=e.find(".select-list,.select-position"),t.attr("disabled","disabled"),ModelLoader["for"](this.modelCache).loadBoardListData(r,{lists:"open",list_fields:"name,pos,idBoard"},function(e){return function(){return e._boardData=e.Board.get(r),e.updateListList(),t.removeAttr("disabled")}}(this))},t.prototype.updateListList=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h;for(p=this,l=p.model,a=this._boardData.listList.models,o=this.model.id,t=this.$(".js-select-list-pos"),t.empty(),d=this._boardData.openLists(),s=this._boardData.id===this.model.getBoard().id,s?(n=_.indexOf(d,this.model),i=d.length):(n=-1,i=d.length+1),r=h=0;i>=0?i>h:h>i;r=i>=0?++h:--h)c=r+1,r===n&&(c+=" (current)"),u=this._boardData.listList.calcPos(r,l),e=$("<option>").val(u).text(c).appendTo(t),r===n&&e.attr("selected","selected");return c=parseInt(this.$(".js-select-list-pos").val(),10)+1,this.renderValues()},t.prototype.commitChange=function(e){var t,i,n;Util.stop(e),t=this.$(".js-select-list-pos"),n=parseInt(t.find("option:selected").val(),10),i=this.$(".js-select-board option:selected").val(),this.model.getBoard().composer.save("vis",!1),i===this.model.getBoard().id?(this.model.update({pos:n}),track("List Menu","Move Menu","Successfully Moved")):null!=i&&null!=n&&(this.model.update({idBoard:i,pos:n}),track("List Menu","Move Menu","Changed Board")),PopOver.hide()},t}(ViewWithId);var AddEmailPopoverView,ChangeAvatarPopoverView,ChangeEmailFreqPopoverView,ChangeRolePopoverView,ChangeSetPasswordPopoverView,ChangeUserInfoPopoverView,EDITING_AUTO_CLEAR_MS,EarlyVersionFeedbackView,LoginView,Member,MemberAccountView,MemberAddView,MemberApplicationsView,MemberBillingCardView,MemberBillingView,MemberBoardProfileView,MemberBoardsView,MemberCardsBoardView,MemberCardsBoardsSectionView,MemberCardsDateSectionView,MemberCardsFilterPopOverView,MemberCardsView,MemberDeleteConfirmView,MemberGoldView,MemberList,MemberLoginsView,MemberNotificationsView,MemberPaidAccountFormView,MemberProductDetails,MemberProfileView,MemberSessionsView,MemberView,MembersVotedView,OrganizationChangeRolePopoverView,SelectMemberOnCardView,SelectMemberView,SessionView,TokenView,_MemberBoardProfileView,_MemberProfileView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},__slice=[].slice;EDITING_AUTO_CLEAR_MS=1e4,Member=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="Member",t.prototype.nameAttr="fullName",t.prototype.urlRoot="/1/members",t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.destruct([this.boardList=(new BoardList).syncModel(this,"idBoards"),this.organizationList=(new OrganizationList).syncModel(this,"idOrganizations")]),Auth.isMe(this)&&(this.destruct([this.boardStarList=new BoardStarList([],{member:this}).syncSubModels(this,"boardStars"),this.savedSearchList=new SavedSearchList([],{member:this}).syncSubModels(this,"savedSearches"),this.customStickerList=new CustomStickerList([],{member:this}).syncSubModels(this,"customStickers"),this.boardBackgroundList=new BoardBackgroundList([],{member:this}).syncSubModels(this,"boardBackgrounds"),this.customEmojiList=new CustomEmojiList([],{member:this}).syncSubModels(this,"customEmoji"),this.loginList=new LoginList([],{member:this}).syncSubModels(this,"logins")]),this.isFeatureEnabled("customEmoji")&&ModelLoader["for"](this.modelCache).loadMemberCustomEmoji(this.get("id"))),this.listenTo(this,"change:editing",function(e){return function(t){var i,n;return null!=(i=e.Card.get(null!=(n=t.get("editing"))?n.idCard:void 0))?i.updateEditing(t):void 0}}(this))},t.prototype.isLoggedIn=function(){return!this.get("notLoggedIn")},t.prototype.hasAtMe=function(e){var t;return this.isLoggedIn()&&null!=this.get("username")&&null!=this.get("fullName")?(t=_.compact([this.get("username")].concat(this.get("fullName").split(/\s+/))),_.find(t,function(t){return t.length>=2&&RegExp("(^|\\W)@"+Util.escapeForRegex(t)+"($|\\W)","i").test(e)})):!1},t.prototype.viewBoardProfile=function(e){var t;return(null!=e?e.id:void 0)&&(e=e.id),t=new MemberBoardProfileView({model:this,board:this.Board.get(e),modelCache:this.modelCache}),Controller.saveMemberBoardProfileLocation(this,e),Dialog.show({view:t,maxWidth:500,hide:function(){return function(){return Controller.setBoardLocation(e)}}(this)})},t.prototype.getMembershipData=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y;return t=e.adminList.models,c=Auth.isMe(this),h=Auth.me(),p=_.some(t,function(e){return function(t){return t.id!==e.id}}(this)),d=t.length>1,u=e.memberList.length>1,v=e.getMembershipFor(this),m="admin"===e.getExplicitMemberType(this)||"admin"===(null!=v?v.memberType:void 0),g="observer"===e.getExplicitMemberType(this)||"observer"===(null!=v?v.memberType:void 0),f=!(m||g),b=e.isVirtual(this),l=e.owned(),y="org"!==e.getExplicitMemberType(this),i=l,o=!f&&p&&l,s=!g&&p&&l,r=!m&&l,a=u&&(p&&(l||c)||!c&&y&&("function"==typeof e.canInviteMembers?e.canInviteMembers():void 0)&&("function"==typeof e.compareMemberType?e.compareMemberType(h,this):void 0)>=0),n=a&&"Organization"===e.typeName&&l&&!e.isDeactivated(this)&&!b,{isMe:c,canRemove:a,canDeactivate:n,canChangeRole:i,memberIsAdmin:m,memberIsObserver:g,memberIsNormal:f,memberIsVirtual:b,canMakeMember:o,canMakeObserver:s,canMakeAdmin:r,isMoreThanOneAdmin:d,isMoreThanOneMember:u}},t.prototype.isDismissed=function(e){var t;return __indexOf.call(null!=(t=this.get("oneTimeMessagesDismissed"))?t:[],e)>=0},t.prototype.dismiss=function(e){return this.addToSet("oneTimeMessagesDismissed",e)},t.prototype.owned=function(){return Auth.isMe(this)},t.prototype.prefNames=["minutesBetweenSummaries"],t.prototype.getMemberViewTitle=function(){var e,t,i;return t=this.get("username"),e=this.get("fullName"),i=""+e+" ("+t+")"},t.prototype.toggleColorBlindMode=function(){null!=this.get("prefs")&&(this.get("prefs").colorBlind?this.setPref("colorBlind",!1).save():this.setPref("colorBlind",!0).save(),$("body").toggleClass("color-blind-mode-enabled",this.get("prefs").colorBlind))
},t.prototype.getOpenBoardsByOrg=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h;for(o={},d=this.boardList.models,s=0,l=d.length;l>s;s++)t=d[s],t.get("closed")||e&&"observer"===t.get("myPermLevel")||(i=t.toJSON(),n=null!=(u=i.idOrganization)?u:"",null==o[n]&&(o[n]={boards:[],displayName:""===n?"Boards":null!=(p=this.Organization.get(n))?p.get("displayName"):void 0}),o[n].boards.push(i));for(r=_.sortBy(_.keys(o),function(e){return""===e?"":o[e].displayName}),h=[],a=0,c=r.length;c>a;a++)n=r[a],h.push(o[n]);return h},t.prototype.checkColorBlindMode=function(){var e;return $("body").toggleClass("color-blind-mode-enabled",(null!=(e=this.get("prefs"))?e.colorBlind:void 0)===!0)},t.prototype.isFeatureEnabled=function(e){return MemberFeatures.isFeatureEnabled(e,this.get("products"))},t.prototype.isGold=function(){return MemberFeatures.hasProduct(this.get("products"))},t.prototype.allCustomEmoji=function(){var e,t,i,n,r;if(e={},this.isFeatureEnabled("customEmoji"))for(r=this.customEmojiList.models,i=0,n=r.length;n>i;i++)t=r[i],e[t.get("name")]=t.get("url");return e},t.prototype.toJSON=function(e){var i,n;return null==e&&(e={}),i=t.__super__.toJSON.apply(this,arguments),e.hasPassword&&(i.hasPassword=__indexOf.call(i.loginTypes,"password")>=0),i.accountStanding=MemberFeatures.standingName(null!=(n=this.get("paidAccount"))?n.standing:void 0),i},t.prototype.editing=function(e){return null==e&&(e={}),_.isEqual(e,this.lastMessage)?void 0:(this.lastMessage=e,clearTimeout(this.clearLastTimeout),this.clearLastTimeout=setTimeout(function(e){return function(){return e.lastMessage=null}}(this),EDITING_AUTO_CLEAR_MS/2),Auth.isLoggedIn()?ApiAjax({url:""+this.urlRoot+"/"+this.id+"/editing",type:"post",background:!0,data:_.clone(e)}):void 0)},t.prototype.removeMembershipConfirmation=function(e){var t,i,n,r,o,s,a;return r=this.getMemberViewTitle(),n="Organization"===e.typeName,i=!n,o=e.get(n?"displayName":"name"),Auth.isMe(this)?(a="Leave "+e.typeName+"?",s="Leave "+o+"?",s+=n?" You will remain on all your boards in this organization.":" You will be removed from all cards on this board.",t="Leave "+e.typeName):(a="Remove Member?",s="Remove "+r+" from "+o+"?",s+=n?" The member will remain on all their boards in this organization. They will receive a notification.":" The member will be removed from all cards on this board. They will receive a notification.",t="Remove Member"),{title:a,text:s,confirmText:t,confirmBtnClass:"negate"}},t.prototype.clearAllNotifications=function(){ApiAjax({url:"/1/notifications/all/read",type:"post"})},t}(ModelWithPreferences),MemberList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Member,t.prototype.sortField="fullName",t.prototype.idList=function(){return this.pluck("id")},t.prototype.remove=function(e,i){var n;return null==this.sourceModel?t.__super__.remove.apply(this,arguments):(t.__super__.remove.call(this,e),n=(null!=i?i.invite:void 0)?"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/ghost/"+e.id:"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/members/"+e.id,(null!=i?i.mass:void 0)&&(n+="/all"),ApiAjax({url:n,type:"delete",success:function(e){return(null!=e?e.unreadable:void 0)&&Controller.displayErrorPage({errorType:"notFound"}),null!=i&&"function"==typeof i.success?i.success():void 0}}))},t.prototype.filterDeactivated=function(e){var i,n,r,o;return o=null!=e?e:{},r=o.model,i=o.force,null==r&&(r=this.sourceModel),null==i&&(i=!1),n=Auth.me(),new t(this.filter(function(e){return((null!=r?r.isMember(e):void 0)||(null!=r?r.isMemberObserver(e):void 0))&&!(null!=r?r.isDeactivated(e):void 0)||(null!=r?r.canSeeDeactivated(n):void 0)&&!i},this.options))},t.prototype.comparator=function(e){return e.get(this.sortField)},t}(CollectionWithHelpers),MemberView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),mixin(TabbedPaneView,t),t.prototype.initialize=function(){this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username change:bio change:prefs change:paidAccount",this.render),this.listenTo(this.model,"change:initials change:fullName change:username change:bio",this.renderDetails)},t.prototype.events={"click .js-change-avatar-profile":"changeAvInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection","click .js-gold-ad":"clickGoldAd"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,_.extend({},t.prototype.events,e||this.events))},t.prototype.render=function(){var e,t,i,n;return t=Auth.isMe(this.model),e=this.model.toJSON(),this.model.organizationList.models.length>0&&(e.showOrgs=!0),t&&(i=null!=(n=e.paidAccount)?n.standing:void 0,e.hasAccount=MemberFeatures.hasAccount(i),e.accountProblem=MemberFeatures.problem(i),e.isMe=!0),e.hasCrown=this.model.isFeatureEnabled("crown"),this.$el.html(templates.fill("member_detail",e,{editable:t})),this.renderDetails(),t&&this.renderAd(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e,t;return t=Auth.isMe(this.model),e=this.model.toJSON(),e.bioHtml=Format.markdownAsHtml(e.bio,{convertNewlines:!0,textData:e.bioData}),e.hasCrown=this.model.isFeatureEnabled("crown"),this.$(".js-current-details").empty().append(templates.fill("member_detail_profile_info",e,{editable:t})),t&&this.$(".js-profile-form").empty().append(templates.fill("member_detail_profile_edit",e,{editable:t})),this},t.prototype.renderAd=function(){var e,t,i,n;t={},this.$el.removeClass("has-factoid"),e=this.$(".js-header-factoid").empty(),(null!=(n=Auth.me())?n.isGold():void 0)||(this.$el.addClass("has-factoid"),i="factoid_gold_banner",e.append(templates.fill(i,t)))},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeAvInProfile=function(e){Util.stop(e),track("Member View","Header","Change Avatar Menu"),PopOver.toggle({elem:this.$(".js-change-avatar-profile"),top:93,view:new ChangeAvatarPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){Util.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),track("Member View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){Util.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset()},t.prototype.submitProfile=function(e){var t,i,n,r,o;if(Util.stop(e),!this.disabled){for(t={},o=["fullName","username","bio","initials"],n=0,r=o.length;r>n;n++)i=o[n],t[i]=this.$(".js-profile-form [name="+i+"]").val();t.username=t.username.toLowerCase().replace(/[^a-z0-9_]/g,""),t.initials=t.initials.toUpperCase(),this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){return e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?e.$(".js-profile-form-error").removeClass("hide").text(t):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),track("Member","Successfully Change User Info"))}}(this))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t.prototype.clickGoldAd=function(){return track("Member View","Clicked Gold Ad (in Profile Header)")},t}(ViewWithId),MemberProfileView=mixin(ViewWithActions,_MemberProfileView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActionsAndRemoveDateLimit"},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.limit=10,this.daysBack=payloads_memberProfile_daysBack,this.actionListView=this.collectionSubview(ActionListView,new ActionList(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{context:this.model,showBoard:!0,showOrganization:!0,readOnly:!0}}),this.listenTo(this.model.organizationList,"add remove reset",this.debounce(this.renderMainContent)),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderActions()}}(this))},t.prototype.renderMainContent=function(){var e;return e=this.model.toJSON(),this.setActiveView(".js-member-profile"),this.$(".js-content").html(templates.fill("member_profile",e)),_.defer(function(e){return function(){var t;return e.model.organizationList.length>0?(t=new OrganizationListView({model:e.model}),e.$(".js-list-orgs").html(t.render().el)):e.$(".js-list-orgs").closest(".window-module").hide(),e.actionListView.setElement(e.$(".list-actions")[0]),e.renderActions()}}(this)),this},t.prototype.renderActions=function(){return 0===this.actionListView.collection.length?this.actionListView.$el.html(templates.fill("actions_empty",{daysBack:this.daysBack})):this.actionListView.render(),this.$(".js-more-actions").toggleClass("hide",!this.hasMoreActionsOrDateLimited()),this},t.prototype.hasMoreActionsOrDateLimited=function(){return null!=this.daysBack||this.hasMoreActions()},t.prototype.loadMoreActionsAndRemoveDateLimit=function(){return this.daysBack=null,this.loadMoreActions()},t.prototype.getActionsFilter=function(){return payloads_memberActions},t}(MemberView)),MemberNotificationsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-more-notifications":"loadMoreNotifications"},t.prototype.className="member-notifications-view",t.prototype.initialize=function(){return this.nextPage=1,this.isMore=!0,this.listenTo(this.modelCache,"add:Notification remove:Notification change:Notification",this.debounce(this.renderNotificationList))},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),e.empty=0===this.Notification.all().length,this.$el.html(templates.fill("member_notifications",e)),this.isMore||this.$(".js-more-notifications").hide(),this.renderNotificationList(),this},t.prototype.renderNotificationList=function(){var e,t,i,n,r,o;for(e=this.$(".js-list-notifications"),e.empty(),o=this.Notification.sortedByDateDescending(),n=0,r=o.length;r>n;n++)t=o[n],i=this.subview(NotificationMemberView,t),e.append(i.render().el);return this},t.prototype.destructor=function(){return this.model.clearAllNotifications(),t.__super__.destructor.apply(this,arguments)},t.prototype.loadMoreNotifications=function(){return ModelLoader["for"](this.modelCache).loadMoreNotificationData(this.model.get("username"),this.nextPage,function(e){return function(t,i){return t?void 0:(e.nextPage++,e.renderNotificationList(),i.length<10?(e.isMore=!1,e.$(".js-more-notifications").hide()):void 0)}}(this))},t}(ViewWithId),MemberBoardsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset",this.debounce(this.render))},t.prototype.className="member-boards-view",t.prototype.render=function(){var e,t,i,n,r,o,s;for(i=new async.queue(function(e){return function(t,i){return e.$el.append(t.render().el),_.defer(i)}}(this),1),this.$el.empty().prepend(this.subview(MemberGoldView,this.model,{allowDismiss:!0}).render().el),i.push(this.subview(StarredBoardsListSectionView,this.model)),i.push(this.subview(MyBoardsListSectionView,this.model)),s=_.sortBy(this.model.organizationList.models,function(e){return e.get("displayName")}),r=0,o=s.length;o>r;r++)t=s[r],e="orgboardlistview-"+t.id,n=this.subview(MemberOrgBoardsListSectionView,this.model,{organization:t},e),i.push(n);return this},t}(ViewWithId),MemberCardsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset",function(){return this.renderMainContent()}),this.listenTo(MemberState,"change:cardsPageSortType",function(){return this.renderCardsSection()})},t.prototype.events={"click .js-toggle-sort":"toggleSort"},t.prototype.renderMainContent=function(){return this.setActiveView(".js-member-cards"),this.$(".js-content").html(templates.fill("member_cards_base")),this.renderCardsSection(),this},t.prototype.getCards=function(){return this.Card.find(function(e){return!e.get("closed")})},t.prototype.getSortType=function(){return MemberState.getCardsPageSortType()},t.prototype.renderFilterText=function(){var e;e="Sorting by <strong>"+this.getSortType()+"</strong>.",this.$(".js-sort-text").html(e)},t.prototype.toggleSort=function(e){Util.stop(e),track("Member View","Cards Page","Open Sorting and Filtering Options"),PopOver.toggle({elem:this.$(".js-toggle-sort"),top:30,view:new MemberCardsFilterPopOverView({model:this.model,modelCache:this.modelCache})})},t.prototype.clearContent=function(){return this.$(".js-cards-content").empty()},t.prototype.renderCardsSection=function(){switch(this.getSortType()){case"board":this.renderBoardSort();break;case"date":this.renderDateSort()}},t.prototype._appendNoVisibleCards=function(){var e,t;t=Auth.isMe(this.model)?"No visible cards. You must be added to a card for it to appear here.":"This member is not added to any cards you are able to see.",e={message:t,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-cards-content").append(templates.fill("empty_list",e))},t.prototype.renderBoardSort=function(){var e,t,i,n,r,o,s,a;for(this.clearContent(),this.renderFilterText(),i=this.getCards(),n=!1,a=this.model.boardList.models,o=0,s=a.length;s>o;o++)e=a[o],e.get("closed")||(t=_.filter(i,function(){return function(t){return t.get("idBoard")===e.id}}(this)),_.isEmpty(t)||(n=!0,r=this.subview(MemberCardsBoardsSectionView,e),this.appendSubview(r,this.$(".js-cards-content"))));return n||this._appendNoVisibleCards(),this},t.prototype.renderDateSort=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p;this.clearContent(),this.renderFilterText(),n=function(e,t){return function(i){return(null==e||null!=i&&i>=(new Date).addDays(e))&&(null==t||null!=i&&i<(new Date).addDays(t))}},t=function(e){var t;return t=e.get("due"),null!=t?Dates.parse(t):null},a={"Due in the Next Day":{fxTest:n(0,1),data:{isDueSoon:!0}},"Due in the Next 7 Days":{fxTest:n(1,7)},"Due in the Next Month":{fxTest:n(7,28)},"Due Later":{fxTest:n(28,null)},"Overdue Cards":{fxTest:n(null,0),data:{isOverdue:!0}},"Cards with No Due Date":{fxTest:function(e){return null==e},data:{iconType:"card"}}},r=_.sortBy(this.getCards(),function(){return function(e){return e.get("due")}}(this)),l=!1;for(c in a)p=a[c],o=p.fxTest,i=p.data,s=function(){var i,n,s;for(s=[],i=0,n=r.length;n>i;i++)e=r[i],o(t(e))&&s.push(e);return s}(),_.isEmpty(s)||(l=!0,u=_.extend({header:c},i),d=this.subview(MemberCardsDateSectionView,Auth.me(),{templateData:u,fxTest:o},"datesectionview-"+c),this.appendSubview(d,this.$(".js-cards-content")));return l||this._appendNoVisibleCards(),this},t}(MemberView),MemberCardsFilterPopOverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Sort Cards"},t.prototype.initialize=function(){return this.listenTo(MemberState,"change:cardsPageSortType",function(){return this.render()})},t.prototype.events={"click .js-sort-by-board":"sortByBoard","click .js-sort-by-due-date":"sortByDueDate"},t.prototype.render=function(){var e;return e={},e[MemberState.getCardsPageSortType()]=!0,this.$el.html(templates.fill("member_cards_filter",e)),this},t.prototype.sortByBoard=function(e){Util.stop(e),MemberState.sortCardsPageByBoard(),PopOver.hide(),track("Member View","Cards Page","Sort by Board")},t.prototype.sortByDueDate=function(e){Util.stop(e),MemberState.sortCardsPageByDate(),PopOver.hide(),track("Member View","Cards Page","Sort by Due Date")},t}(ViewWithId),MemberCardsDateSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="window-module",t.prototype.getCards=function(){var e,t,i,n,r,o;return n=function(e,t){return function(i){return(null==e||null!=i&&i>=(new Date).addDays(e))&&(null==t||null!=i&&i<(new Date).addDays(t))}},t=function(e){var t;return t=e.get("due"),null!=t?Dates.parse(t):null},r=this.options.fxTest,i=this.Card.find(function(e){return!e.get("closed")}),o=function(){var n,o,s;for(s=[],n=0,o=i.length;o>n;n++)e=i[n],r(t(e))&&s.push(e);return s}()},t.prototype.render=function(){var e;return e={iconType:"clock",isOverdue:!1,isDueSoon:!1},_.extend(e,this.options.templateData),this.getCards().length>0?(this.$el.html(templates.fill("member_cards_date",e)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e,t,i,n,r,o;for(i=[],o=this.getCards(),n=0,r=o.length;r>n;n++)e=o[n],i.push(this.subview(MemberCardsCardView,e,{dateSort:!0}));return this.appendSubviews(i,this.$(".js-list")),t=Util.formatCount(this.getCards().length,"Card",!0),this.$(".js-card-total").html(t)},t}(ViewWithId),MemberCardsBoardsSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="window-module",t.prototype.getCards=function(){var e,t;return t=this.Card.find(function(e){return!e.get("closed")}),e=_.filter(t,function(e){return function(t){return t.get("idBoard")===e.model.id}}(this))},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.boardUrl=this.model.getUrl(),e.permissionLevel_org&&(e.permissionLevel="org-private"),e.idOrganization&&!this.options.hideOrg&&(e.org=null!=(t=this.Organization.get(e.idOrganization))?t.toJSON():void 0),this.getCards().length>0?(this.$el.html(templates.fill("member_cards_board",e)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e,t,i,n,r,o;for(i=[],o=this.getCards(),n=0,r=o.length;r>n;n++)e=o[n],i.push(this.subview(MemberCardsCardView,e,{dateSort:!0}));return this.appendSubviews(i,this.$(".js-list")),t=Util.formatCount(this.getCards().length,"Card",!0),this.$(".js-card-total").html(t),this},t}(ViewWithId),MemberAccountView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:loginTypes change:prefs change:tokens change:credentials",this.debounce(this.renderMainContent))},t.prototype.events={"click .js-change-avatar":"changeAvatar","click .js-change-name-and-bio":"changeUserInfo","click .js-change-password":"changePassword","click .js-change-email-freq":"changeEmailFreq","click .js-allow-desktop-notifications":"allowDesktopNote","click .js-toggle-cb-mode":"toggleCB","click .js-confirm-delete-member":"deleteConfirm","click .js-add-email":"addEmail"},t.prototype.renderMainContent=function(){var e,t,i,n;return i=this.model.toJSON({prefs:!0,hasPassword:!0}),i["avatarSource_"+i.avatarSource]=!0,i.canAllowDesktopNotifications=DesktopNotification.notEnabled(),i.cbEnabled=this.model.get("prefs").colorBlind,this.$(".js-content").html(templates.fill("member_account",i,{editable:Auth.isMe(this.model)})),this.$(".js-member-applications").html(this.subview(MemberApplicationsView,this.model).render().el),this.$(".js-member-sessions").html(this.subview(MemberSessionsView,this.model).render().el),t=this.$(".js-credentials-section"),e=this.$(".js-credentials-list"),e.empty(),this.model.get("logins").length>0&&(n=this.collectionSubview(MemberLoginsView,this.model.loginList,{model:this.model}),this.appendSubview(n,e)),this.$(".js-content").prepend(this.subview(MemberGoldView,this.model,{allowDismiss:!1}).render().el),this.setActiveView(".js-member-account"),this},t.prototype.changeUserInfo=function(e){return Util.stop(e),track("Member View","Account Page","Open Change User Info Menu"),PopOver.toggle({elem:this.$(".js-change-name-and-bio"),top:50,view:new ChangeUserInfoPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.addEmail=function(e){return Util.stop(e),track("Member View","Account Page","Open Add Email Menu"),PopOver.toggle({elem:$(e.target),top:50,view:new AddEmailPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAvatar=function(e){return Util.stop(e),track("Member View","Account Page","Open Change Avatar Menu"),PopOver.toggle({elem:this.$(".js-change-avatar"),top:50,view:new ChangeAvatarPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.changePassword=function(e){return Util.stop(e),track("Member View","Account Page","Open Change Password Menu"),PopOver.toggle({elem:this.$(".js-change-password"),top:50,view:new ChangeSetPasswordPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.changeEmailFreq=function(e){return Util.stop(e),track("Member View","Account Page","Open Change Frequency Menu"),PopOver.toggle({elem:this.$(".js-change-email-freq"),top:50,view:new ChangeEmailFreqPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.allowDesktopNote=function(e){return Util.stop(e),track("Member View","Account Page","Allow Desktop Notifications"),DesktopNotification.requestPermission(function(e){return function(){e.render()}}(this))},t.prototype.toggleCB=function(e){Util.stop(e),track("Member View","Account Page","Toggle Color Blind Mode"),this.model.toggleColorBlindMode()},t.prototype.deleteConfirm=function(e){Util.stop(e),track("Member View","Account Page","Open Delete Account Confirmation Menu"),PopOver.toggle({elem:this.$(".js-confirm-delete-member"),top:35,view:new MemberDeleteConfirmView({model:this.model,modelCache:this.modelCache})})},t}(MemberView),ChangeUserInfoPopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Name and Bio"},t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(templates.fill("popover_change_user_info",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showError=function(e){return this.$("#account-error").text(null!=e?e:"error").show()},t.prototype.saveChanges=function(e){var t,i,n,r,o,s,a;for(n=this,Util.preventDefault(e),t={},this.$("#account-error").hide(),a=["fullName","initials","username","bio"],o=0,s=a.length;s>o;o++)i=a[o],t[i]=$.trim(this.getValue(i));t.username=t.username.toLowerCase().replace(/[^a-z0-9_]/g,""),t.initials=t.initials.toUpperCase(),r=Controller.getMemberProfileUrl(this.model.get("username"))===Controller.location,this.model.update(t,{waitForServer:!0},function(e){return function(t){return t?e.showError(t):(PopOver.popView(),r&&Controller.setLocation({location:Controller.getMemberProfileUrl(e.model.get("username"))}),track("Member","Successfully Change User Info"))}}(this))},t}(ViewWithId),AddEmailPopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add Email"},t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){return this.$el.html(templates.fill("popover_add_email")),this},t.prototype.showError=function(e){return this.$("#account-error").text(null!=e?e:"error").show()},t.prototype.saveChanges=function(e){var t;return Util.preventDefault(e),t=this.$('[name="email"]').val(),this.model.run("logins",{email:t},function(e){return function(t){return t?e.showError(t):(PopOver.popView(),Alerts.flash("Email Sent","confirm"),track("Member","Added Email Address"))}}(this))},t}(ViewWithId),ChangeSetPasswordPopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.debounce(this.render))},t.prototype.getViewTitle=function(){return __indexOf.call(this.model.get("loginTypes"),"password")<0?"Set Password":"Change Password"},t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0,hasPassword:!0}),this.$el.html(templates.fill("popover_change_set_password",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showPasswordError=function(e){return this.$("#password-error").text(null!=e?e:"error").show()},t.prototype.saveChanges=function(e){var t,i,n;Util.preventDefault(e),this.$("#password-error").hide(),n=this.getValue("oldpassword"),t=this.getValue("password"),i=this.getValue("password2"),(t||i)&&(t!==i?this.showPasswordError("Passwords must match."):this.model.run("updatePassword",{oldPassword:n,newPassword:t},function(e){return function(t){return null!=t?e.showPasswordError(/newPassword/.test(t)?"New password must be at least 4 characters long":/oldPassword/.test(t)?"The old password was incorrect":t):(track("Member","Changed Password"),PopOver.popView())}}(this)))},t}(ViewWithId),ChangeEmailFreqPopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Send Emails..."},t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.debounce(this.render))},t.prototype.events={"click li a":"changeFreq"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(templates.fill("popover_set_email_freq",e)),this},t.prototype.changeFreq=function(e){var t;track("Member","Changed Email Frequency"),t=parseInt($(e.target).closest("a").attr("value")),this.model.setPref("minutesBetweenSummaries",t).save(),PopOver.popView()},t}(ViewWithId),ChangeAvatarPopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Avatar"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:avatarSource change:uploadedAvatarHash",this.debounce(this.render))},t.prototype.events={"change .js-upload-avatar":"startUpload","click .js-use-gravatar":"useGravatar","click .js-use-uploaded-avatar":"useUploadedAvatar","click .js-take-photo":"takePhoto","click .js-no-avatar":"clearAvatar"},t.prototype.render=function(){var e,t,i,n,r;return r=this,t=this.model.toJSON({prefs:!0}),t["avatarSource_"+t.avatarSource]=!0,t.canTakePhoto=Camera.supportsGetUserMedia(),this.$el.html(templates.fill("avatar_change",t)),i=this.$(".js-grav"),e=i.find("img"),n="https://secure.gravatar.com/avatar/"+(""+this.model.get("gravatarHash")+".png?s=50&r=PG&d=404")+("&_="+Math.random()),Util.waitForImageLoad(n,function(){return i.show()}),this},t.prototype.startUpload=function(e){var t,i,n,r,o,s,a;return o=this.model,r=$(e.target),n=null!=(s=r[0])&&null!=(a=s.files)?a[0]:void 0,t=this.$(".js-error").hide(),null==n||Util.validFileSize(n)?(track("Member","Avatar","Use Uploaded - New"),!n&&r.val()?Util.uploadFile(r,this.uploadResult.bind(this)):null!=n?(i=new FormData,i.append("token",Auth.myToken()),i.append("file",n),ApiAjax({url:r.closest("form").attr("action"),data:i,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){var i,n;return n=t.status,i=t.responseText,e.uploadResult(Error(i))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(__slice.call(arguments)))}}(this),timeout:12e4})):void 0):(t.text("Images can not be larger than 10mb.").show(),track("Member","Avatar","Upload Error - File Too Large"),void PopOver.calcPos())},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?(t.show().text(e),PopOver.calcPos()):void 0},t.prototype.useUploadedAvatar=function(){return track("Member","Avatar","Use Uploaded - Existing"),this.model.update("avatarSource","upload"),PopOver.popView()},t.prototype.useGravatar=function(){return track("Member","Avatar","Use Gravatar"),this.model.update("avatarSource","gravatar"),PopOver.popView()},t.prototype.clearAvatar=function(){return track("Member","Avatar","Use Initials"),this.model.update("avatarSource","none"),PopOver.popView()},t.prototype.takePhoto=function(){var e;return e=new TakePhotoView({model:this.model,modelCache:this.modelCache}),PopOver.pushView({view:e}),track("Member","Avatar","Take Photo"),e.connectCamera(),e.on("done",function(e){return function(t){var i,n,r,o,s;return n=atob(t.split(",")[1]),i=function(){var e,t,i;for(i=[],s=e=0,t=n.length;t>=0?t>e:e>t;s=t>=0?++e:--e)i.push(n.charCodeAt(s));return i}(),r=new Blob([new Uint8Array(i)],{type:"image/png"}),o=new FormData,o.append("token",Auth.myToken()),o.append("file",r,"avatar.png"),ApiAjax({url:"/1/member/"+e.model.id+"/avatar",data:o,type:"post",processData:!1,contentType:!1,error:function(e,t,i,n){var r,o;return o=e.status,r=e.responseText,413!==o?n():void 0},timeout:6e4})}}(this))},t}(ViewWithId),MemberDeleteConfirmView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Delete Account?"},t.prototype.events={"click .js-delete-member":"deleteMember","click .js-cancel-delete":"cancelDeleteMember"},t.prototype.render=function(){var e;return e=this,this.$el.html(templates.fill("popover_confirm_member_delete",this.model.toJSON())),this},t.prototype.deleteMember=function(e){Util.stop(e),this.$(".js-delete-member").attr("disabled","disabled"),this.model.run("deleteAccount",{msg:"troodbye!"},function(){PopOver.hide(),Alerts.flash("Email Sent","confirm"),track("Member","Sent Account Delete Email")})},t.prototype.cancelDeleteMember=function(e){Util.stop(e),PopOver.hide()},t}(ViewWithId),MemberApplicationsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(){var e,t,i,n,r,o;if(t=this.model.toJSON({prefs:!0}),n=t.tokens,t.hasTokens=(null!=n?n.length:void 0)>0,this.$el.html(templates.fill("member_application_list",t)),null!=n)for(e=this.$(".member-applications"),r=0,o=n.length;o>r;r++)i=n[r],e.append(this.subview(TokenView,this.model,i,i.id).render().el);return this},t}(ViewWithId),MemberSessionsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:sessions",this.debounce(this.render))},t.prototype.events={"click .js-log-out-other":"logOutOther"},t.prototype.render=function(){var e,t,i,n,r,o;if(t=this.model.toJSON(),this.$el.html(templates.fill("member_session_list",t)),n=t.sessions,null!=n)for(e=this.$(".js-sessions"),r=0,o=n.length;o>r;r++)i=n[r],e.append(this.subview(SessionView,this.model,i,i.id).render().el);return this},t.prototype.logOutOther=function(e){return Util.stop(e),this.model.run("logoutOtherSessions"),this.model.set("sessions",_.filter(this.model.get("sessions"),function(){return function(e){return e.isCurrent}}(this))),this.render()},t}(ViewWithId),TokenView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="application clearfix",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l;return l=this.options,i=l.dateExpires,o=l.permissions,n=l.identifier,t=l.dateCreated,e={identifier:n,dateApproved:Dates.toLongString(Dates.parse(t)),dateExpires:i?Dates.toLongString(Dates.parse(i)):null,neverExpires:null==i},_.isEmpty(o)?e.permissions="read access on your public boards and organizations":(o=function(){var e,t,i;for(i=[],e=0,t=o.length;t>e;e++)r=o[e],s="",r.read&&(s+="read"),r.write&&(s+=" and write"),a=function(){if("*"===r.idModel)switch(r.modelType){case"*":return"your account and all boards and organizations";
case"Board":return"all your boards";case"Organization":return"all your organizations";default:return"unknown"}else switch(r.modelType){case"Member":return"your account";case"Board":return"a specific board";case"Organization":return"a specific organization";default:return"unknown"}}(),i.push(""+s+" access on "+a);return i}(),e.permissions=o.join(", ")),this.$el.html(templates.fill("member_application",e)),this},t.prototype.revoke=function(e){return Util.stop(e),this.model.set("tokens",_.filter(this.model.get("tokens"),function(e){return function(t){return t.id!==e.options.id}}(this))),this.model.pull("tokens",this.options.id,function(){return function(){return track("Member","Applications","Revoke App")}}(this))},t}(ViewWithId),SessionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="member-account-session",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t;return e=this.options,e["type_"+this.options.type]=!0,t=e.ipAddress,this.$el.html(templates.fill("member_session",e)),Dates.update(this.el),this},t.prototype.revoke=function(){return $.get("/login/revoke",{id:this.options.id},function(e){return function(){return e.model.set("sessions",_.filter(e.model.get("sessions"),function(t){return t.id!==e.options.id}))}}(this))},t}(ViewWithId),LoginView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="member-login",t.prototype.events={"click .js-primary":"setPrimary","click .js-remove":"confirmDeleteLogin"},t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.dateAdded=Util.idToDate(e.id),this.$el.html(templates.fill("member_login",e)),Dates.update(this.el),this},t.prototype.setPrimary=function(){return ApiAjax({url:"/1/members/me/logins/"+this.model.id+"/primary",type:"put",success:function(e){return function(){return e.model.set("primary",!0)}}(this)})},t.prototype.confirmDeleteLogin=function(e){return Util.stop(e),this.model.hasConflict()?void this.trigger("requestSetPassword"):Confirm.toggle(this.popover({title:"Remove Credential?",text:"Once you remove this credential, you won't be able to log into Trello with\nthe email "+this.model.get("email")+" anymore.",confirmText:"Delete Credential",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.deleteLogin()}}(this)}))},t.prototype.deleteLogin=function(){return ApiAjax({url:"/1/members/me/logins/"+this.model.id,type:"delete",success:function(e){return function(){return e.model.trigger("destroy",e.model,e.model.collection)}}(this)})},t.prototype.popover=function(e){return _.extend({elem:this.$(".js-remove"),top:30},e)},t}(ViewWithId),MemberLoginsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.viewType=LoginView,t.prototype.initialize=function(){return this.listenTo(this,"requestSetPassword",this.showSetPassword),t.__super__.initialize.apply(this,arguments)},t.prototype.showSetPassword=function(e){return Confirm.toggle(e.popover({title:"Cannot remove credential",text:"You must set a password or log in with a different Google account to remove this credential.",confirmText:"Set Password",confirmBtnClass:"confirm",fxConfirm:function(t){return function(){return PopOver.show(e.popover({view:ChangeSetPasswordPopoverView,options:{model:t.model}}))}}(this)}))},t}(CollectionView),SelectMemberView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){},t.prototype.render=function(){var e;return e=this.model.toJSON(),"ghost"===this.model.get("memberType")&&(e.isVirtual=!0),e.unconfirmed=this.options.showUnconfirmed&&!e.isVirtual&&!e.confirmed,e.showStatus=this.options.showStatus,e.isKnownMember=this.options.isKnownMember,e.extraText=this.options.extraText,e["status_"+this.model.get("status")]=!0,this.options.linkName?e.url="/"+this.model.get("username"):delete e.url,this.$el.html(templates.fill("select_member",e,{},{member:templates.member})),e.unconfirmed&&this.$(".js-insert-tooltip").html(this.subview(UnconfirmedMemberTooltipView,this.model).render().$el),this.$(".js-member").data("id",this.model.id),this},t}(ViewWithId),SelectMemberOnCardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.options.card,"change:idMembers",this.renderActive)},t.prototype.renderActive=function(){var e;return this.$(".js-member-item").toggleClass("active",(e=this.model.id,__indexOf.call(this.options.card.get("idMembers"),e)>=0))},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.renderActive(),this},t}(SelectMemberView),MemberProductDetails=function(){function e(){}return e.prototype.pricing={monthlyProduct:"trelloGoldMonthly",yearlyProduct:"trelloGoldYearly",showRecommend:!0},e.prototype.features=MemberFeatures,e.prototype.productPrefix="trelloGold",e}(),MemberBillingView=mixin(BillingView,MemberProductDetails,MemberBillingView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.apiPath="members",t.prototype.productName="Trello Gold",t.prototype.changeCardUrl=function(){return Controller.getMemberBillingCardUrl(this.model.get("username"))},t.prototype.productIconClass=function(){return"crown"},t.prototype.paidAccountLoader=function(e){return ModelLoader["for"](this.modelCache).loadMemberPaidAccount(this.model.id,e)},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.setup()},t.prototype.renderBanner=function(){var e,t,i,n,r,o;if(this.model.get("idPremOrgsAdmin").length>0)for(t=templates.fill("member_billing_org_link_list"),this.$(".js-content").prepend(t),o=this.model.organizationList.models,n=0,r=o.length;r>n;n++)i=o[n],e=i.toJSON(),i.isPremium()&&i.owned()&&(e.billingLink=Controller.getOrganizationBillingUrl(i),this.$(".js-org-link-list").append(templates.fill("member_billing_org_link",e)));return this},t}(MemberView)),MemberBillingCardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.renderMainContent=function(){var e;return e=this.getFormOpts(),this.$(".js-content").empty().append(new MemberPaidAccountFormView(e).render().el),this.setActiveView(".js-member-billing"),this},t.prototype.getFormOpts=function(){var e,t,i,n,r;return e={model:this.model,productName:"Trello Gold"},MemberFeatures.hasAccount(null!=(t=this.model.get("paidAccount"))?t.standing:void 0)?_.extend(e,{formAreas:{creditCard:!0},action:"js-submit-change-credit-card",productNumber:null!=(i=null!=(n=this.model.get("paidAccount"))?n.products[0]:void 0)?i:MemberFeatures.getProductNumber("trelloGoldMonthly")}):_.extend(e,{formAreas:{creditCard:!0,billingContactHidden:!0,subscribingTo:!0,billingOptions:!0},action:"js-submit-create-paid-account",productNumber:MemberFeatures.getProductNumber(null!=(r=this.options.product)?r:"trelloGoldMonthly")}),e},t}(MemberView),MemberPaidAccountFormView=mixin(MemberProductDetails,MemberPaidAccountFormView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.profileView=function(){return Controller.defaultView()},t.prototype.billingView=function(){return Controller.memberBillingView(this.model.get("username"))},t}(PaidAccountFormView)),MembersVotedView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Voters"},t.prototype.events={"click .js-more-members-voted":"showAll","click .js-vote":"vote","click .js-unvote":"unvote"},t.prototype.initialize=function(){return this.listenTo(this.model.memberVotedList,"add remove reset",this.render)},t.prototype.showAll=function(){return this.render(!0)},t.prototype.render=function(e){var t,i,n;return n=this.model.memberVotedList,t={members:function(){var e,t,r,o;for(r=n.models,o=[],e=0,t=r.length;t>e;e++)i=r[e],o.push(i.toJSON());return o}()},e!==!0&&(t.members=t.members.slice(0,48),t.fewMembers=n.length<14,t.moreMembers=n.length>48,t.lengthDiff=n.length-48,t.canVote=this.model.getBoard().canVote(Auth.me()),t.voted=_.include(this.model.get("idMembersVoted"),Auth.myId())),this.$el.html(templates.fill("members_voted",t,{},{member:templates.member})),PopOver.calcPos(),this},t.prototype.vote=function(e){return Util.preventDefault(e),this.model.vote(!0),!1},t.prototype.unvote=function(e){return Util.preventDefault(e),this.model.vote(!1),0===this.model.get("idMembersVoted").length&&PopOver.hide(),!1},t}(ViewWithId),ChangeRolePopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Permissions"},t.prototype.initialize=function(){this.parent=this.options.parent,this.listenTo(this.parent,"change:memberships",this.render)},t.prototype.events={"click .js-make-admin":"makeAdmin","click .js-make-member":"makeMember","click .js-make-observer":"makeObserver"},t.prototype.render=function(){var e,t,i,n,r,o,s;for(i=this,e=this.model.getMembershipData(this.parent),"Board"===this.parent.typeName&&(null!=(o=this.parent.getOrganization())?o.isFeatureEnabled("observers"):void 0)&&_.extend(e,{showObserver:!0}),s=["admin","normal","observer"],n=0,r=s.length;r>n;n++)t=s[n],e["roleText_"+t]=this.parent.getRoleText(t);return this.$el.html(templates.fill("popover_change_roles",e)),this},t.prototype.apiChangeRole=function(e){this.$el.find("ul a").addClass("disabled"),ApiAjax({type:"PUT",url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.model.id,data:{type:e},success:function(){return function(){return track("Member","Change Role",e),PopOver.hide()}}(this)})},t.prototype.getMemberType=function(){return this.parent.getExplicitMemberType(this.model)},t.prototype.isAdminAndMe=function(){return"admin"===this.getMemberType()&&Auth.isMe(this.model)},t.prototype.makeAdmin=function(e){Util.stop(e),$(e.target).closest("a").hasClass("disabled")||"admin"!==this.getMemberType()&&this.apiChangeRole("admin")},t.prototype.makeMember=function(e){Util.stop(e),$(e.target).closest("a").hasClass("disabled")||"normal"!==this.getMemberType()&&(this.isAdminAndMe()?Confirm.pushView({title:"Remove Admin Privileges?",text:"By becoming a normal member, you will lose all admin privileges such as the ability to change settings. To regain privileges, you will need another admin to change your role back to admin.",confirmText:"Make Me a Normal Member",fxConfirm:function(e){return function(){return e.apiChangeRole("normal")}}(this)}):this.apiChangeRole("normal"))},t.prototype.makeObserver=function(e){Util.stop(e),$(e.target).closest("a").hasClass("disabled")||"observer"!==this.getMemberType()&&(this.isAdminAndMe()?Confirm.pushView({title:"Remove Admin Privileges?",text:"By becoming an observer, you will lose all admin privileges such as the ability to change settings. To regain privileges, you will need another admin to change your role back to admin.",confirmText:"Make Me an Observer",fxConfirm:function(e){return function(){return e.apiChangeRole("observer")}}(this)}):this.apiChangeRole("observer"))},t}(ViewWithId),OrganizationChangeRolePopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.apiChangeRole=function(e){return t.__super__.apiChangeRole.apply(this,arguments),"admin"!==e&&this.isAdminAndMe()?Controller.navigate(Controller.getOrganizationUrl(this.parent),{trigger:!0}):void 0},t}(ChangeRolePopoverView),MemberBoardProfileView=mixin(ViewWithActions,_MemberBoardProfileView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActions"},t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board.memberList,"add remove reset",this.debounce(this.render)),this.actionListView=this.collectionSubview(ActionListView,new ActionList(this.Action.getListForModel(this.model),{modelCache:this.modelCache}),{renderOpts:{context:this.model,readOnly:!0}}),this.listenTo(this.modelCache,"add:Action:"+this.model.id+" remove:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.Action.getListForModel(e.model),{silent:!0}),e.renderActions()}}(this)),this.idModels=[this.board.id],this.nextPage=0,this.loadMoreActions()},t.prototype.render=function(){return this.$el.html(templates.fill("board_member_profile",this.model.toJSON())),this.actionListView.setElement(this.$(".list-actions")[0]),this.renderActions()},t.prototype.renderActions=function(){return this.actionListView.render(),this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.getActionsFilter=function(){return payloads_memberActions},t}(ViewWithId)),MemberGoldView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderDebounced),this.listenTo(this.model,"change:paidAccount",this.renderDebounced)},t.prototype.events={"click .js-close-modal":"closeGoldEarned","click .js-close-intro-helper":"closeGoldIntro","click .js-start-using-gold":"startUsingGold"},t.prototype.render=function(){var e,t,i,n,r,o,s,a;return this.$el.empty(),Auth.isMe(this.model)?(s=this.viewShown,this.model.isGold()&&!this.model.isDismissed("GoldIntro")?(this.viewShown="intro",this.$el.append(templates.fill("member_gold_intro"))):this.model.isDismissed("GoldEarned")&&this.options.allowDismiss||this.activating||(this.viewShown="earned",i=this.model.get("credits"),o=_.filter(i,function(e){var t;return!e.applied&&e.count>0&&("invitation"===(t=e.type)||"promoCode"===t)}),e=_.reduce(o,function(e,t){return e+t.count},0),e&&(e>12&&(e=12),r=_.chain(o).filter(function(e){return"invitation"===e.type&&null!=e.memberInvited}).pluck("memberInvited").pluck("fullName").value(),a=_.filter(o,function(e){return"promoCode"===e.type}),t=Util.humanReadableList(r),n={hasInvitations:r.length>0,hasPromoCodes:a.length>0,joinedNames:t,countMonths:Util.formatCount(e,"month"),showClose:this.options.allowDismiss},this.$el.append(templates.fill("member_gold_earned",n)))),null!=s&&s!==this.viewShown&&this.delegateEvents(),this):this},t.prototype.refreshPaidAccount=function(){return null==this.startedPolling&&(this.startedPolling=Date.now()),this.startedPolling+Util.getMs({minutes:1})<Date.now()?(Alerts.hide("activating"),void Alerts.show("Activating Trello Gold is taking a while, please check back later","error","activating-failed")):ModelLoader["for"](this.modelCache).loadMemberPaidAccount(this.model.id,function(e){return function(t,i){return t||null==i?void 0:e.model.isGold()?(delete e.startedPolling,e.activating=!1,Alerts.hide("activating")):e.setTimeout(_.bind(e.refreshPaidAccount,e),Util.getMs({seconds:1}))}}(this))},t.prototype.startUsingGold=function(e){return Util.stop(e),this.activating=!0,Alerts.show("Activating Trello Gold...","info","activating"),this.render(),this.model.run("unpaidAccount",{products:[MemberFeatures.productShortNames.trelloGoldMonthly]},function(e){return function(t,i){return null==t&&i?e.refreshPaidAccount():void 0}}(this))},t.prototype.closeGoldEarned=function(e){return Util.stop(e),this.model.dismiss("GoldEarned")},t.prototype.closeGoldIntro=function(e){return Util.stop(e),this.model.dismiss("GoldIntro")},t}(ViewWithId),MemberCardsBoardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(e){var t,i;return this.cards=e,t=this.model.toJSON({prefs:!0}),t.boardUrl=this.model.getUrl(),t.permissionLevel_org&&(t.permissionLevel="org-private"),t.idOrganization&&!this.options.hideOrg&&(t.org=null!=(i=Organization.get(t.idOrganization))?i.toJSON():void 0),this.cards.length>0?(this.$el.html(templates.fill("member_cards_board",t)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e,t,i,n,r;for(t=[],r=this.cards,i=0,n=r.length;n>i;i++)e=r[i],t.push(this.subview(MemberCardsCardView,e,{dateSort:!0}));return this.appendSubviews(t,this.$(".js-list")),this},t}(ViewWithId),EarlyVersionFeedbackView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.fDisabledSubmit=!1},t.prototype.events={"click .js-feedback-form-submit":"submitFeedback"},t.prototype.render=function(){return this.$el.html(templates.fill("early_version_feedback_form")),this},t.prototype.focusFeedback=function(e){Util.stop(e),this.$(".js-feedback-form-text").focus().select()},t.prototype.enableSubmit=function(){this.fDisabledSubmit=!1,this.$(".js-feedback-form-submit").removeAttr("disabled"),this.$(".js-feedback-form-text").removeAttr("disabled")},t.prototype.disableSubmit=function(){this.fDisabledSubmit=!0,this.$(".js-feedback-form-text").attr("disabled","disabled"),this.$(".js-feedback-form-submit").attr("disabled","disabled")},t.prototype.submitFeedback=function(e){var t,i,n,r,o,s;return Util.stop(e),i=this.$(".js-feedback-form"),t=i.find("input[name],textarea[name]"),s=this.Auth.me().toJSON(),r=new BrowserDetect,n=i.find(".js-feedback-form-text").val(),""===n?void this.focusFeedback():void(this.fDisabledSubmit||(this.disableSubmit(),this.$(".js-feedback-form-submit").val("Submitting…"),o="\n"+n+"\n\n\n------------\n\nTrello Username: "+s.username+"\n\nTrelloVersion:\n\n"+TrelloVersion+"\n\nOS: "+r.OS+"\nBrowser: "+r.browser+" "+r.version+"\n",Util.bugzscout({me:s,area:"Beta",description:"New Trello Feedback: "+TrelloVersion+"\n",extra:o},function(e){return function(){return e.enableSubmit(),e.$(".js-submitted-feedback").removeClass("hide"),e.$(".js-feedback-form-text").val("").focus().select(),e.$(".js-feedback-form-submit").val("Submit")}}(this))))},t}(ViewWithId),MemberAddView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.hoverMember=function(e){var t;return t=$(e.target).closest(".item"),Util.selectMenuItem(this.$(".pop-over-member-list"),".item",t)},t.prototype.openOption=function(e){var t,i,n,r;Util.stop(e),track("Invitations","Open Role Selector"),r=$(e.target).closest(".js-select-member").find(".username").text(),n=this.Member.findOne("username",r),i=!1,$(e.target).closest(".item.js-email-invite").length>0&&(i=!0,t=$(e.target).closest(".js-email-invite").find(".full-name").attr("name")),PopOver.pushView(n?{view:new SelectMemberRoleView({modelCache:this.modelCache,model:n,parent:this.model,onSendInvite:this.willBePopped.bind(this)})}:{view:new SelectNewMemberRoleView({model:this.Auth.me(),modelCache:this.modelCache,parent:this.model,email:t,onSendInvite:this.willBePopped.bind(this)})})},t}(ViewWithId);var HeaderNotificationListView,Notification,NotificationHeaderView,NotificationMaker,NotificationMemberView,NotificationView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};Notification=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="Notification",t.prototype.urlRoot="/1/notifications",t.sortedByDateDescending=function(e){return _.sortBy(this.all(e),function(e){return-new Date(e.get("date")).getTime()})},t.unreadCount=function(e){var t;return function(){var i,n,r,o;for(r=this.all(e),o=[],i=0,n=r.length;n>i;i++)t=r[i],t.get("unread")&&o.push(t);return o}.call(this).length},t.prototype.getModel=function(){return this.collection.options.model},t.prototype.triggerCacheEvents=function(e,t){var i,n,r,o;for(o=this.idModels(),n=0,r=o.length;r>n;n++)i=o[n],e.trigger(""+t+":"+this.typeName+":"+i)},t.prototype.idModels=function(){var e,t,i,n,r;n=null!=(i=this.get("data"))?i:{},r=[];for(e in n)t=n[e],null!=(null!=t?t.id:void 0)&&r.push(t.id);return r},t.prototype.getExpandedData=function(){var e,t,i,n,r,o,s,a,l,c;return i=_.extend({},null!=(s=this.toJSON().data)?s:{},{date:this.get("date"),unread:this.get("unread")}),i[this.get("type")]=!0,i.memberCreator=null!=(a=this.Member.get(this.get("idMemberCreator")))?a.toJSON():void 0,n=null!=(l=this.get("member"))?l.id:void 0,null!=n&&(i.member=null!=(c=this.Member.get(n))?c.toJSON():void 0),r=function(e){var t,n,r,o;return r=_.keys(e)[0],t=Util.capitalize(r),n=e[r],null!=Auth.me().get("id"+t+"sInvited")&&(o=n.id,__indexOf.call(Auth.me().get("id"+t+"sInvited"),o)>=0)&&!_.any(this.Notification.all(),function(e){return e.get("type")==="invitedTo"+t&&e.get("data")[r].id===n.id&&e.get("date")>i.date})},e=i.board,t=i.card,o=i.organization,0===this.get("type").indexOf("invitedTo")&&(null!=e&&(i.stillInvited=r({board:e})),null!=o&&(i.stillInvited=r({organization:o})),i.confirmed=Auth.me().get("confirmed")),i},t.prototype.getTemplateData=function(e){var t,i,n,r,o,s,a,l,c,d,u;if(c=_.extend({useHTML:!0,truncate:250},null!=e?e:{}),s=c.useHTML,r=c.truncate,t=this.getExpandedData(),t.entities=new NotificationMaker({modelCache:this.modelCache}).getEntityList(this.toJSON()),"member"===t.entities[0].type&&(t.member=null!=(d=this.Member.get(t.entities[0].id))?d.toJSON():void 0,null==t.member&&(t.memberDeleted=!0),t.entities.shift(1)),n={convertNewlines:!0,board:t.board,textData:t.textData},s)for(u=t.entities,a=0,l=u.length;l>a;a++)i=u[a],null!=i.text&&(o=_.isNumber(r)?Util.truncate(i.text,r):i.text,i.html=TFM.comments.format(o,n).output+(o.length<i.text.length?"&hellip;":""));return t},t.prototype.markRead=function(){return this.update({unread:!1})},t.prototype.navigateToView=function(){var e;return e=this.get("data"),null!=e&&null!=e.card&&null!=e.board?(Controller.displayBoard({idBoard:e.board.id,idCard:e.card.id}),!0):"memberJoinedTrello"===this.get("type")?(Controller.navigate("/recommend",{trigger:!0}),!0):!1},t.prototype.getUrlOfTarget=function(){var e;return e=this.get("data"),null!=e.card?Controller.getCardUrlWithoutModels(e.board.id,e.card.id,e.card.name):null!=e.board?Controller.getBoardUrl(ModelCacheCache["for"]("header"),e.board):null!=e.organization?Controller.getOrganizationUrl(e.organization.id):Controller.getMemberNotificationsUrl()},t}(TrelloModel),NotificationView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.enablePopupMenu=!0,t.prototype.showStatus=!1,t.prototype.className="phenom phenom-notification clearfix",t.prototype.events={click:"clickedNotification","click .js-show-mem-menu":"viewMemberActionMenu"},t.prototype.render=function(){var e,t;return e=this.model.getTemplateData(),"cardDueSoon"===this.model.get("type")?(e.isDueDateNotification=!0,e.hasIcon=!0,this.$el.addClass("due-soon")):("declinedInvitationToBoard"===(t=this.model.get("type"))||"declinedInvitationToOrganization"===t)&&(e.hasIcon=!0,e.isDeclinedInvitationNotification=!0),log("notifications",e),this.$el.html(templates.fill("notification",e,{},{entity:templates.entity,member:templates.member})),e.unread?this.$el.addClass("unread"):this.$el.removeClass("unread"),Dates.update(this.el),this},t.prototype.clickedNotification=function(e){return this.model.markRead(),this.isHeader?track("Header","Notifications Menu","Clicked Notification"):this.isNotifications&&track("Member View","Notifications Page","Clicked Notification"),$(e.target).is("a")?void 0:(this.model.navigateToView(),Util.stop(e))},t.prototype.viewMemberActionMenu=function(e){var t,i,n;Util.stop(e),t=this.Member.get(null!=(n=$(e.target).closest("[idmember]").attr("idmember"))?n:this.model.get("idMemberCreator")),$(e.target).closest(".pop-over").length>0?PopOver.pushView({view:ActivityMemberMenuView,options:{model:t,modelCache:this.modelCache}}):(i=22,$(e.target).closest(".member").length>0&&(i=36),PopOver.toggle({elem:this.$(".js-show-mem-menu"),top:i,view:ActivityMemberMenuView,options:{model:t,modelCache:this.modelCache}}))},t}(ViewWithId),NotificationMaker=function(e){function t(e){this.modelCache=e.modelCache,t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getCardUrl=function(e,i){var n,r;return null!=(null!=(r=n=this.Card.get(i.id))?r.get("url"):void 0)?Controller.getCardUrl(n):t.__super__.getCardUrl.apply(this,arguments)},t.prototype.getBoardUrl=function(e){var i,n;return null!=(null!=(n=i=this.Board.get(e.id))?n.get("url"):void 0)?Controller.getBoardUrl(this.modelCache,i):t.__super__.getBoardUrl.apply(this,arguments)},t.prototype.getMember=function(e){return this.Member.get(e)},t.prototype.getDateMs=function(e){return Time.serverToClient(e).getTime()},t}(SharedNotification),Util.extendWithModelCacheHelpers(NotificationMaker),NotificationHeaderView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.isHeader=!0,t.prototype.goToProfile=!0,t}(NotificationView),NotificationMemberView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.isNotifications=!0,t.prototype.goToProfile=!1,t}(NotificationView),HeaderNotificationListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Notifications"},t.prototype.maxWidth=450,t.prototype.displayType="popover-notifications",t.prototype.className="header-notification-list",t.prototype.events={"click .js-view-all-notifications":"viewAllNotifications","click .js-change-email-frequency":"changeEmailFrequency","click .js-allow-desktop-notifications":"allowDekstopNote"},t.prototype.markUnread=function(){var e,t,i,n;i=this.menuRows;for(e in i)t=i[e],t.model.get("unread")&&null!=(n=this.Notification.get(e))&&n.markRead()},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l;for(s=this,i=this.model,this.$el.empty(),t={},this.menuRows={},e=0,r=this.Notification.sortedByDateDescending(),a=0,l=r.length;l>a&&(n=r[a],!(e>4));a++)e++,this.menuRows[n.id]=this.subview(NotificationHeaderView,n),this.$el.append(this.menuRows[n.id].render().el);return r.length>0?(t.hasNotifications=!0,o=function(){var e,t,i,r;for(i=this.Notification.sortedByDateDescending().slice(5),r=[],e=0,t=i.length;t>e;e++)n=i[e],n.get("unread")&&r.push(n);return r}.call(this).length,t.unreadText=0===o?"":" ("+o+" more unread)",t.noteUrl="/"+this.model.get("username")+"/notifications",t.canAllowDesktopNotifications=DesktopNotification.notEnabled()):t.hasNotifications=!1,this.$el.append(templates.fill("header_notification_list_menu",t)),this},t.prototype.viewAllNotifications=function(){return track("Header","Notifications Menu","See All Notifications")},t.prototype.changeEmailFrequency=function(e){Util.stop(e),track("Header","Notifications Menu","Change Email Frequency"),PopOver.pushView({view:new ChangeEmailFreqPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.allowDekstopNote=function(e){Util.stop(e),track("Header","Notifications Menu","Allow Desktop Notifications"),DesktopNotification.requestPermission(function(e){return function(){e.render()}}(this))},t}(ViewWithId);var BusinessClassSelectOrgView,ChangeLogoPopoverView,ChangeOrgVisibilityView,CreateOrgView,ManageOrgMembersView,MemberOrgActivityView,Organization,OrganizationAccountView,OrganizationAllowNonOrgBoardInvitesView,OrganizationBillingCardView,OrganizationBillingView,OrganizationBoardsForMemberView,OrganizationBoardsView,OrganizationConfirmUpgradeView,OrganizationExportView,OrganizationLinkGAHelperView,OrganizationList,OrganizationListItemView,OrganizationListView,OrganizationMemberCardsView,OrganizationMembersItemView,OrganizationMembersView,OrganizationPaidAccountFormView,OrganizationPlansView,OrganizationProductDetails,OrganizationRestrictBoardVisibility,OrganizationRestrictInvitesOrg,OrganizationView,RemoveOrDeactivateOrgMemberView,__bind=function(e,t){return function(){return e.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};Organization=function(e){function t(){return this.getPermLevelAltText=__bind(this.getPermLevelAltText,this),this.getPermLevelDisplayText=__bind(this.getPermLevelDisplayText,this),this.getPermLevelIconClass=__bind(this.getPermLevelIconClass,this),t.__super__.constructor.apply(this,arguments)}return __extends(t,e),mixin(MembershipModel,t),t.prototype.typeName="Organization",t.prototype.nameAttr="displayName",t.prototype.urlRoot="/1/organizations",t.prototype.initialize=function(){return t.__super__.initialize.call(this),this.destruct([this.invitationList=new OrganizationInvitationList([]),this.boardList=(new BoardList).syncModel(this,"idBoards"),this.memberList=(new MemberList).syncModel(this,"memberships",{fxGetIds:function(e){return _.pluck(e,"idMember")}}),this.adminList=(new MemberList).syncModel(this,"memberships",{fxGetIds:function(){return function(e){var t;return t=function(e){var t,i;return i=e.memberType,t=e.deactivated,"admin"===i&&!t},_.pluck(_.filter(e,t),"idMember")}}(this)})])},t.prototype.prefNames=["permissionLevel","orgInviteRestrict","boardVisibilityRestrict","externalMembersDisabled"],t.prototype.editable=function(){var e,t;return e=Auth.me(),t=this.getMembershipFor(e),e&&"admin"===(null!=t?t.memberType:void 0)},t.prototype.isPremium=function(){return OrgFeatures.hasProduct(this.get("products"))},t.prototype.isPremiumMonthly=function(){return this.isPremium()&&OrgFeatures.isMonthly(this.get("products"))},t.prototype.isPremiumYearly=function(){return this.isPremium()&&"yearly"===OrgFeatures.getInterval(this.get("products"))},t.prototype.totalPerUserPrice=function(e){var t;return t=this.get("billableMemberCount"),OrgFeatures.isPerUser(e)&&null!=t?t*OrgFeatures.getPrice(e):void 0},t.prototype.isJPS=function(){return _.intersection([96,97],this.get("products")).length>0},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.canAddBoard=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=e.get("prefs").permissionLevel,this.canSetVisibility(t)):!0},t.prototype.canSetVisibility=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=this.get("prefs").boardVisibilityRestrict[e],!t||"org"===t||"admin"===t&&this.owned()):!0},t.prototype.owned=function(){return"admin"===this.getMemberType(Auth.me())},t.prototype.isLinkedToGoogleApps=function(){return this.isFeatureEnabled("googleApps")&&this.get("prefs").associatedDomain},t.prototype.isFeatureEnabled=function(e){return OrgFeatures.isFeatureEnabled(e,this.get("products"))},t.prototype.toJSON=function(e){var i,n;return null==e&&(e={}),i=t.__super__.toJSON.apply(this,arguments),e.url&&(i.url=Controller.getOrganizationUrl(this.get("name"))),_.extend(i,this.premiumFeatures()),i.accountStanding=OrgFeatures.standingName(null!=(n=this.get("paidAccount"))?n.standing:void 0),i},t.prototype.premiumFeatures=function(){var e,t,i,n,r;for(t={},r=OrgFeatures.features(this.get("products")),i=0,n=r.length;n>i;i++)e=r[i],t["premium:"+e]=!0;return t},t.prototype.getPermLevelIconClass=function(e){var t;return null==e&&(e=null!=(t=this.get("prefs"))?t.permissionLevel:void 0),e
},t.prototype.getPermLevelDisplayText=function(e){var t;return null==e&&(e=null!=(t=this.get("prefs"))?t.permissionLevel:void 0),Util.toTitleCase(e)},t.prototype.getPermLevelAltText=function(e){var t;switch(null==e&&(e=null!=(t=this.get("prefs"))?t.permissionLevel:void 0),e){case"private":return"This organization is private. It's not indexed or visible to those outside the org.";case"public":return"This organization is public. It's visible to anyone with the link and will show up in search engines like Google. Only those invited to the org can add and edit org boards."}},t.prototype.getRoleText=function(e){var t;switch(t="",this.isFeatureEnabled("superAdmins")&&(t=" Will have admin rights on all boards in this organization."),e){case"admin":return"Can view, create and edit org boards, and change settings for the organization."+t;case"normal":return"Can view, create, and edit org boards, but not change settings.";default:return""}},t}(ModelWithPreferences),OrganizationList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Organization,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t;return(null!=(t=e.get("name"))?t.toUpperCase():void 0)||""},t}(CollectionWithHelpers),OrganizationView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),mixin(TabbedPaneView,t),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:logoHash change:products change:paidAccount change:prefs",this.render),this.listenTo(this.model,"change:name change:displayName change:website change:desc",this.renderDetails),this.listenTo(this.model,"change:memberships",this.membershipChange),this.listenTo(this.model.memberList,"add remove reset",this.renderDebounced),this.memberTypeMe=this.model.getMemberType(Auth.me())},t.prototype.events={"click .js-change-org-logo":"changeLogoInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.render=function(){var e,t,i;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),this.model.editable()&&(t=null!=(i=e.paidAccount)?i.standing:void 0,e.hasAccount=OrgFeatures.hasAccount(t),e.accountActive=OrgFeatures.active(e.paidAccount),e.accountProblem=OrgFeatures.problem(t),e.accountInactive=OrgFeatures.inactive(t)),e.isInOrg=this.model.isMember(Auth.me()),e.hasBusinessClass=this.model.isPremium(),e.isOrgAdmin=this.model.owned(),e.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),e.pLevelAltText=this.model.getPermLevelAltText(),e.pLevelDisplayText=this.model.getPermLevelDisplayText(),e.websiteHref=Util.sanitizeWebAddress(e.website),e.descriptionHtml=Format.markdownAsHtml(e.desc,{convertNewlines:!0,textData:e.descData}),this.$el.html(templates.fill("org_detail",e,{editable:this.model.editable()})),this.renderDetails(),this.model.isMember(Auth.me())&&this.renderAd(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.hasBusinessClass=this.model.isPremium(),e.isOrgAdmin=this.model.owned(),e.pLevelAltText=this.model.getPermLevelAltText(),e.pLevelDisplayText=this.model.getPermLevelDisplayText(),e.websiteHref=Util.sanitizeWebAddress(e.website),e.descriptionHtml=Format.markdownAsHtml(e.desc,{convertNewlines:!0,textData:e.descData}),this.$(".js-current-details").empty().append(templates.fill("org_detail_profile_info",e,{editable:this.model.editable()})),this.model.editable()&&this.$(".js-profile-form").empty().append(templates.fill("org_detail_profile_edit",e,{editable:this.model.editable()})),this},t.prototype.renderAd=function(){var e,t,i,n;t={},this.$el.removeClass("has-factoid"),e=this.$(".js-header-factoid").empty(),this.model.isPremium()?this.model.isJPS()||(i="factoid_bc_banner_upgrade",n=this.model.owned()?"/"+this.model.get("name")+"/billing":"/"+this.model.get("name")+"/plans",t={url:n},this.$el.addClass("has-factoid"),e.append(templates.fill(i,t))):(i="factoid_bc_banner",t={url:"/"+this.model.get("name")+"/plans"},this.$el.addClass("has-factoid"),e.append(templates.fill(i,t)))},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,_.extend({},t.prototype.events,e||this.events))},t.prototype.membershipChange=function(){var e;return e=this.model.getMemberType(Auth.me()),e!==this.memberTypeMe?(this.memberTypeMe=e,this.render()):void 0},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeLogoInProfile=function(e){Util.stop(e),track("Organization View","Detail Sidebar","Open Change Logo Menu - From Profile Image"),PopOver.toggle({elem:this.$(".js-change-org-logo"),top:$(e.target).parent().height()+10,view:new ChangeLogoPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){Util.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),track("Member View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){Util.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset()},t.prototype.submitProfile=function(e){var t,i,n,r,o;if(Util.stop(e),!this.disabled){for(t={},o=["displayName","name","website","desc"],n=0,r=o.length;r>n;n++)i=o[n],t[i]=this.$(".js-profile-form [name="+i+"]").val();t.name=t.name.toLowerCase().replace(/[^a-z0-9_]/g,""),this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){return e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?e.$(".js-profile-form-error").removeClass("hide").text(t):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),track("Organization","Changed Name and Details"))}}(this))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(ViewWithId),ChangeLogoPopoverView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Logo"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:logoHash",this.debounce(this.render))},t.prototype.events={"change .js-upload-logo":"startUpload","click .js-remove-logo":"removeLogo"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(templates.fill("popover_org_logo",e)),this},t.prototype.startUpload=function(e){var t,i,n,r,o,s,a;return o=this.model,r=$(e.target),t=this.$(".js-error").hide(),n=null!=(s=r[0])&&null!=(a=s.files)?a[0]:void 0,null==n||Util.validFileSize(n)?!n&&r.val()?Util.uploadFile(r,this.uploadResult.bind(this)):null!=n?(i=new FormData,i.append("token",Auth.myToken()),i.append("file",n),ApiAjax({url:r.closest("form").attr("action"),data:i,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){var i,n;return n=t.status,i=t.responseText,e.uploadResult(Error(i))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(__slice.call(arguments)))}}(this),timeout:12e4})):void 0:(t.text("Images can not be larger than 10mb.").show(),track("Organization","Logo","Upload Error - File Too Large"),void PopOver.calcPos())},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?(track("Organization","Logo","Error - "+e),t.show().text(e),PopOver.calcPos()):(track("Organization","Logo","Use Uploaded - New"),PopOver.hide())},t.prototype.removeLogo=function(e){Util.stop(e),ApiAjax({url:"/1/organizations/"+this.model.id+"/logo",type:"DELETE",success:function(){return function(){return track("Organization","Logo","Remove Logo"),PopOver.hide()}}(this)})},t}(ViewWithId),OrganizationListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.tagName="ul",t.prototype.className="org-list",t.prototype.initialize=function(){this.listenTo(this.model.organizationList,{"add remove reset change:closed":this.debounce(this.render)})},t.prototype.render=function(){var e,t,i,n,r,o,s;for(n=this,e=this.model,$(n.el).html(""),s=e.organizationList.models,r=0,o=s.length;o>r;r++)t=s[r],i=new OrganizationListItemView({model:t}),$(n.el).append(i.render().el);return this},t}(ViewWithId),OrganizationListItemView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.tagName="li",t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0}),e.visIconClass=this.model.getPermLevelIconClass(),e.hasBusinessClass=this.model.isPremium(),this.$el.html(templates.fill("organization_list_item",e)),this},t}(ViewWithId),OrganizationBoardsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.renderDebounced)},t.prototype.events={"click .js-show-other-private-boards-section":"showPrivateBoards","click .js-close-intro-helper":"closeBCIntro"},t.prototype.renderMainContent=function(){var e,t;return e=this.model.toJSON(),e.isJPS=this.model.isJPS(),e.hasBusinessClass=this.model.isPremium(),e.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),t=this.model.getMembershipFor(Auth.me()),this.$(".js-content").empty(),e.isBusinessClassAdmin&&!Auth.me().isDismissed("BCIntro-"+this.model.id)&&this.$(".js-content").append(templates.fill("org_bc_intro",e)),this.$(".js-content").append(templates.fill("org_profile",e,{editable:this.model.editable(),owned:this.model.owned()})),this.renderBoards(),this.setActiveView(".js-org-profile"),this},t.prototype.closeBCIntro=function(){Auth.me().dismiss("BCIntro-"+this.model.id),track("Organization View","Profile Page","Dismiss BC Intro Helper"),this.renderMainContent(),Util.scrollToTop()},t.prototype.renderBoards=function(){var e,t;return e=this.$(".js-main-boards-section"),t=this.$(".js-other-private-boards-section"),e.empty(),t.empty(),this.model.getMembershipFor(Auth.me())?this.appendSubviews([this.subview(OrgMyBoardListView,this.model),this.subview(OtherOrgBoardListView,this.model)],e):this.appendSubview(this.subview(VisibleOrgBoardsListView,this.model),e),this.model.isPremium()&&this.model.owned()&&this.appendSubview(this.subview(OrgOtherPrivateBoardListView,this.model),t),this},t.prototype.showPrivateBoards=function(e){Util.stop(e),track("Organization View","Profile Page","Show Other Member's Private Boards"),this.$(e.target).closest("a").addClass("hide"),this.$(".js-other-private-boards-section").removeClass("hide")},t}(OrganizationView),OrganizationAccountView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-change-org-vis":"openChangeOrgVis","click .js-restrict-inv-org":"openChangeOrgInviteRestrictions","click .js-restrict-board-vis":"openChangeBoardVisRestrictions","click .js-confirm-delete-org":"orgDeleteConfirm","click .js-toggle-non-org-member-board-invites":"toggleNonOrgMemberBoardInvites"},t.prototype.renderMainContent=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.externalMembersDisabled=e.prefs.externalMembersDisabled,e.canDelete=!this.model.isPremium()||OrgFeatures.willExpire(e.paidAccount),this.$(".js-content").html(templates.fill("org_account",e,{editable:this.model.editable()})),this.setActiveView(".js-org-account"),this},t.prototype.openChangeOrgVis=function(e){Util.stop(e),track("Organization View","Account Page","Open Change Org Visibility"),PopOver.toggle({elem:this.$(".js-change-org-vis"),top:50,view:new ChangeOrgVisibilityView({model:this.model,modelCache:this.modelCache})})},t.prototype.openChangeOrgInviteRestrictions=function(e){Util.stop(e),track("Organization View","Account Page","Open Restrict Org Invites by Email Domain"),PopOver.toggle({elem:this.$(".js-restrict-inv-org"),top:50,view:new OrganizationRestrictInvitesOrg({model:this.model,modelCache:this.modelCache}),autoPosition:!0})},t.prototype.toggleNonOrgMemberBoardInvites=function(e){Util.stop(e),track("Organization View","Account Page","Toggle Allow Inviting Non-Org Members to Boards"),PopOver.toggle({elem:this.$(".js-toggle-non-org-member-board-invites"),top:50,view:new OrganizationAllowNonOrgBoardInvitesView({model:this.model,modelCache:this.modelCache})})},t.prototype.openChangeBoardVisRestrictions=function(e){Util.stop(e),track("Organization View","Account Page","Open Change Board Visibility"),PopOver.toggle({elem:this.$(".js-restrict-board-vis"),top:50,view:new OrganizationRestrictBoardVisibility({model:this.model,modelCache:this.modelCache})})},t.prototype.orgDeleteConfirm=function(e){Util.stop(e),track("Organization View","Account Page","Open Delete Org Dialog"),this.$(".js-delete-org").attr("disabled","disabled"),Confirm.toggle({elem:$(e.target),top:35,model:this.model,title:"Delete Organization?",text:"Deleting an organization is permanent. Are you sure you want to delete this organization? There is no undo. Boards with this organization won't be deleted. Your boards in this organization will appear in your personal boards list.",confirmText:"Delete Forever",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.model.destroy({success:function(){return track("Organization","Successfully Delete"),PopOver.hide(),Controller.navigate("/",{trigger:!0})}})}}(this)})},t}(OrganizationView),OrganizationAllowNonOrgBoardInvitesView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Inviting Non-Org Members"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.render)},t.prototype.events={"click a":"togglePref"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.externalMembersDisabled=e.prefs.externalMembersDisabled,this.$el.html(templates.fill("org_prefs_nonorg_invites",e,{editable:this.model.editable()})),this},t.prototype.togglePref=function(e){Util.stop(e),this.model.setPref("externalMembersDisabled",!this.model.getPref("externalMembersDisabled"))},t}(ViewWithId),OrganizationExportView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:exports",this.renderExports)},t.prototype.events={"click .js-create-new-export":"clickCreateNewExport","click .js-download-export":"downloadExport"},t.prototype.renderMainContent=function(){var e;return e={},e.hasCSV=this.model.isFeatureEnabled("csvExport"),this.$(".js-content").html(templates.fill("org_export",e,{editable:this.model.editable()})),this.renderExports(),this.setActiveView(".js-org-export"),this},t.prototype.renderExports=function(){var e,t,i,n,r,o,s;if(t=this.model.toJSON({prefs:!0}),e=this.$(".js-list-exports").empty(),_.isEmpty(t.exports))n=templates.fill("org_export_empty");else for(n="",s=t.exports,r=0,o=s.length;o>r;r++)i=s[r],t=_.clone(i),t.size=Format.bytes(t.size),t.time=Dates.toLongString(Dates.parse(t.startedAt)),t.generating=null==t.exportUrl,n+=templates.fill("org_export_item",t);return e.append(n),this},t.prototype["export"]=function(e){return ApiAjax({url:"/1/organizations/"+this.model.get("name")+"/exports",method:"post",data:{attachments:e},success:function(t){return function(i){return track("Organization","Export",""+(e?"With Attachments":"Without Attachments")),null!=i?(t.model.get("exports").unshift(i),t.model.trigger("change:exports")):void 0}}(this),error:function(){return function(e,t){return e.responseText.indexOf("in progress")>-1?Alerts.show("Your organization already has an export in progress","error","alert",5e3):t()}}(this)})},t.prototype.clickCreateNewExport=function(e){return Util.stop(e),this["export"](this.$("#includeAttachments").is(":checked")?!0:!1)},t.prototype.downloadExport=function(){track("Organization","Download Export")},t}(OrganizationView),OrganizationMembersView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.getGoogleAppsData(),this.listenTo(this.model,{"change:memberships":this.debounce(this.updateMembers),hideMember:this.debounce(this.renderMainContent),unhideMember:this.debounce(this.renderMainContent)})},t.prototype.events={"keyup .js-search":"searchMembers","click .js-link-google-apps":"startLinkingGoogleApps","click .js-show-all":"showAll","click .js-hide-hidden":"hideHidden","click .js-manage-members":"openManageMembers"},t.prototype.renderMainContent=function(){var e,t;return e=this.model.toJSON({prefs:!0}),t=e.name,e.canLinkGoogleApps=this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),e.canShowAll=this.model.isFeatureEnabled("googleApps")&&null!=this.mappingsData&&_.find(this.mappingsData,function(e){return function(t){var i;return null!=(i=e.Member.findOne("gMail",t.gMail))?i.get("hidden"):void 0}}(this)),e.showingAll=this.showingAll,this.$(".js-content").html(templates.fill("org_members",e,{editable:this.model.editable()})),this.setActiveView(".js-org-members"),this.renderMembers(this.getMembers()),this},t.prototype.showAll=function(){return this.showingAll=!0,this.renderMainContent()},t.prototype.hideHidden=function(){return this.showingAll=!1,this.renderMainContent()},t.prototype.updateMembers=function(){return this.renderMembers(this.getMembers()),this.getGoogleAppsData()},t.prototype.getMembers=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m;if(o=_.clone(this.model.memberList.models),null!=this.mappingsData)for(m=this.mappingsData,l=0,u=m.length;u>l;l++)a=m[l],null!=a.idMember?(r=this.Member.get(a.idMember),null==r?r=new Member({id:a.idMember,fullName:a.fullName,gMail:a.gMail,initials:a.initials,hidden:a.hidden},{modelCache:this.modelCache}):r.set("gMail",a.gMail)):(r=this.Member.findOne("gMail",a.gMail),null==r&&(r=new Member({fullName:a.fullName,gMail:a.gMail,initials:a.initials,hidden:a.hidden},{modelCache:this.modelCache}),a.idMember=r.cid)),__indexOf.call(o,r)<0&&o.push(r);for(s=_.sortBy(o,function(e){return e.get("fullName")}),t=[],c=0,p=s.length;p>c;c++)n=s[c],"deactivated"===this.model.getMemberType(n)&&t.push(n);for(i=[],d=0,h=s.length;h>d;d++)n=s[d],"virtual"===this.model.getMemberType(n)&&i.push(n);return e=_.difference(s,i,t),e.concat(t).concat(i)},t.prototype.renderMembers=function(e){var t,i,n,r;return t=this.$(".js-member-list").empty(),0===e.length?t.append("<p class='quiet gutter' style='padding: 15px 0;'>No results.</p>"):(i=null!=this.mappingsData,r=function(){var t,r,o;for(o=[],t=0,r=e.length;r>t;t++)n=e[t],o.push(this.subview(OrganizationMembersItemView,n,{org:this.model,showAll:this.showingAll,googleAppsLoaded:i}));return o}.call(this),this.appendSubviews(r,t)),this},t.prototype.startLinkingGoogleApps=function(e){return Util.stop(e),track("Organization View","Members Page","Start Linking Google Apps Domain"),$(e.target).hasClass("disabled")?(Util.stop(e),!1):PopOver.toggle({elem:this.$(".js-link-google-apps"),top:40,view:new OrganizationLinkGAHelperView({model:this.model,modelCache:this.modelCache})})},t.prototype.getGoogleAppsData=function(){return this.model.isLinkedToGoogleApps()&&this.model.editable()?ApiAjax({url:"/1/organizations/"+this.model.id+"/googleApps/mappings",success:function(e){return function(t){return e.mappingsData=t,e.renderMainContent()}}(this),error:function(e){return function(){return e.$(".js-google-apps-linker").show(),e.googleAppsFetchFailed=!0}}(this)}):void 0},t.prototype.searchMembers=function(){var e,t,i,n,r,o,s,a,l;if(i=$(this.el).find(".js-search").val().trim().toLowerCase(),this.oldTerm!==i){for(this.oldTerm=i,r=i.split(/\s+/),o=_.map(r,function(e,t){return t===r.length-1?RegExp("^"+Util.escapeForRegex(e),"i"):RegExp("^"+Util.escapeForRegex(e)+"$","i")}),t=[],l=this.getMembers(),s=0,a=l.length;a>s;s++)e=l[s],n=Util.getMemNameArray(this.modelCache,e),_.all(o,function(e){return _.find(n,function(t){return e.test(t)})})&&t.push(e);this.renderMembers(t)}},t.prototype.openManageMembers=function(e){Util.stop(e),track("Organization View","Members Page","Open Manage Members"),PopOver.toggle({elem:this.$(".js-manage-members"),top:35,view:ManageOrgMembersView,options:{model:this.model}})},t}(OrganizationView),OrganizationLinkGAHelperView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Link Google Apps Domain"},t.prototype.events={"click .js-link":"link"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(templates.fill("org_link_ga_helper",e,{editable:this.model.editable()})),this},t.prototype.link=function(){track("Organization View","Members Page","Google Apps Marketplace link"),Storage.enabled()&&Storage.set("idOrganizationLinking",this.model.id)},t}(ViewWithId),OrganizationMembersItemView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="member-list-item-detail clearfix",t.prototype.initialize=function(){this.org=this.options.org,this.listenTo(this.model,"change",this.debounce(this.render)),this.listenTo(this.org,"change:memberships",this.debounce(this.render))},t.prototype.events={"click .js-change-role":"changeRole","click .js-remove-or-deactivate":"removeOrDeactivate","click .js-reactivate":"reactivateMember","click .js-invite-to-org":"inviteToOrg","click .js-view-activity":"viewActivity","click .js-hide-member":"hideMember","click .js-unhide-member":"unhideMember"},t.prototype.render=function(){var e,t,i;return t=this.org.getMemberType(this.model),e=this.model.toJSON(),e.canRemove=this.model.getMembershipData(this.org).canRemove,e.orgMemberType=Util.toTitleCase(t),e.isMe=Auth.isMe(this.model),e.ownsOrg=this.org.owned(),e.orgIsBC=this.org.isPremium(),e.isDeactivated="deactivated"===t,e.isAppsMember=null!=this.model.get("gMail"),e.isOrgMember="public"!==t,e.isVirtual="virtual"===t,e.isOrganizationAdmin="admin"===t,e.showGoogleApps=this.org.isLinkedToGoogleApps()&&this.org.editable()&&(null!=(i=this.options)?i.googleAppsLoaded:void 0),this.org.owned()&&(e.allowTypeChange="deactivated"!==t&&"unconfirmed"!==t&&"virtual"!==t,e.allowReactivate="deactivated"===t,e.showActivity="virtual"!==t),this.$el.html(templates.fill("member_list_item_detail",e,{},{member:templates.member})),this.$el.removeClass("deactivated not-apps-member not-org-member"),e.isDeactivated&&this.$el.addClass("deactivated"),e.showGoogleApps&&(e.isAppsMember||this.$el.addClass("not-apps-member"),e.isOrgMember||this.$el.addClass("not-org-member")),Dates.update(this.el),e.isOrgMember||!this.model.get("hidden")||this.options.showAll||this.$el.addClass("hide"),this},t.prototype.unhideMember=function(){return this.model.get("gMail")?(this.model.set("hidden",!1),this.org.trigger("unhideMember"),ApiAjax({url:"/1/organization/"+this.org.id+"/hiddenGoogleAppsMembers",type:"delete",data:{gMail:this.model.get("gMail")}})):void 0},t.prototype.hideMember=function(){return this.model.get("gMail")?(this.model.set("hidden",!0),this.org.trigger("hideMember"),ApiAjax({url:"/1/organization/"+this.org.id+"/hiddenGoogleAppsMembers",type:"post",data:{gMail:this.model.get("gMail")}})):void 0},t.prototype.inviteToOrg=function(){return track("Organization View","Members Page","Add Google Apps Member"),ApiAjax(this.model.id?{url:"/1/organization/"+this.org.id+"/members/"+this.model.id,type:"put",data:{type:"normal"},dataType:"json",error:function(){return function(e){Alerts.show(e.responseText,"error","alert",3e3),track("Invitations","Error: "+e.responseText)}}(this)}:{url:"/1/organizations/"+this.org.id+"/members",type:"put",data:{fullName:this.model.get("fullName"),email:this.model.get("gMail"),type:"normal"},dataType:"json",success:function(){return function(){return Alerts.show("Invitation sent","info","alert",3e3)}}(this),error:function(){return function(e){Alerts.show(e.responseText,"error","alert",3e3),track("Invitations","Error: "+e.responseText)}}(this)})},t.prototype.changeRole=function(e){Util.stop(e),track("Organization View","Members Page","Change Role Button"),PopOver.toggle({elem:this.$(".js-change-role"),top:35,view:new OrganizationChangeRolePopoverView({model:this.model,parent:this.org,modelCache:this.modelCache})})},t.prototype.viewActivity=function(e){Util.stop(e),track("Organization View","Members Page","View Member Activity"),PopOver.toggle({elem:this.$(".js-view-activity"),top:35,view:new MemberOrgActivityView({model:this.model,org:this.org,modelCache:this.modelCache})})},t.prototype.removeOrDeactivate=function(e){this.$(".js-remove-or-deactivate").hasClass("disabled")||(Util.stop(e),track("Organization View","Members Page","Remove or Deactivate Member Button"),PopOver.toggle({elem:this.$(".js-remove-or-deactivate"),top:35,view:new RemoveOrDeactivateOrgMemberView({model:this.model,org:this.org,modelCache:this.modelCache})}))},t.prototype.reactivateMember=function(e){Util.stop(e),track("Organization View","Members Page","Reactivate"),ApiAjax({url:"/1/organizations/"+this.org.id+"/members/"+this.model.id+"/deactivated",type:"PUT",data:{value:!1}})},t}(ViewWithId),MemberOrgActivityView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Org Activity for "+this.model.get("fullName")},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-view-org-boards-for-member":"viewBoards","click .js-view-member-org-cards":"viewCards"},t.prototype.render=function(){var e,t,i,n,r,o,s;for(i=this.model.toJSON(),t=0,o=_.filter(this.org.boardList.models,function(){return function(e){return!e.get("closed")}}(this)),n=0,r=o.length;r>n;n++)e=o[n],s=this.model,__indexOf.call(e.memberList.models,s)>=0&&t++;return i.boardCount=Util.formatCount(t,"Board",!0),i.hasBoards=t>0,this.org.isFeatureEnabled("orgCards")&&(i.orgCardsUrl=Controller.getOrganizationMemberCardsUrl(this.org.get("name"),i.username)),this.$el.html(templates.fill("org_member_activity",i)),Dates.update(this.el),this},t.prototype.viewCards=function(){return track("Organization View","Members Page","Activity - View Org Cards")},t.prototype.viewBoards=function(e){Util.stop(e),track("Organization View","Members Page","Activity - View Boards"),PopOver.pushView({view:new OrganizationBoardsForMemberView({model:this.model,parent:this.org,modelCache:this.modelCache})})},t}(ViewWithId),OrganizationBoardsForMemberView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Boards for "+this.model.get("fullName")},t.prototype.initialize=function(){this.org=this.options.parent},t.prototype.render=function(){var e,t,i,n,r,o,s;for(n=this.model.toJSON(),i=[],s=_.filter(this.org.boardList.models,function(e){return function(t){return _.contains(t.memberList.models,e.model)&&!t.get("closed")}}(this)),r=0,o=s.length;o>r;r++)t=s[r],e=t.toJSON(),e.memberType=Util.toTitleCase(t.getMemberType(this.model)),e.url=t.getUrl(),i.push(e);return n.boards=i,this.$el.html(templates.fill("org_boards_for_member",n)),this},t}(ViewWithId),RemoveOrDeactivateOrgMemberView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return this.org.isPremium()?"Remove or Deactivate Member":"Remove Member"},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-deactivate":"deactivateMember","click .js-soft-remove":"removeMember"},t.prototype.render=function(){var e,t;return t=this.org.getMemberType(this.model),e=this.model.toJSON(),e.orgMemberType=Util.toTitleCase(t),e.ownsOrg=this.org.owned(),e.orgIsBC=this.org.isPremium(),e.isDeactivated="deactivated"===t,e.isOrgMember="Public"!==e.orgMemberType,e.isVirtual="Virtual"===e.orgMemberType,e.canDeactivate=this.org.isPremOrgAdmin(Auth.me())&&!e.isVirtual&&!e.isDeactivated,e.isMe=Auth.isMe(this.model),this.$el.html(templates.fill("org_remove_or_deactivate_member",e)),this},t.prototype._checkIfLostVisibility=function(){return Auth.isMe(this.model)?Controller.navigate("/",{trigger:!0}):void 0},t.prototype.deactivateMember=function(e){Util.stop(e),ApiAjax({url:"/1/organizations/"+this.org.id+"/members/"+this.model.id+"/deactivated",type:"PUT",data:{value:!0},success:function(e){return function(){return track("Organization","Deactivate Member From Organization"),PopOver.hide(),e._checkIfLostVisibility()}}(this)})},t.prototype.removeMember=function(e){var t;Util.stop(e),$(this.el).find("#hardRemove").is(":checked")||"deactivated"===this.org.getMemberType(this.model)?(t="Hard Remove",this.org.memberList.remove(this.model,{mass:!0})):(t="Soft Remove",this.org.memberList.remove(this.model)),track("Organization","Remove Member From Organization",t),PopOver.hide(),this._checkIfLostVisibility()},t}(ViewWithId),OrganizationMemberCardsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.renderMainContent=function(){var e,t;return this.model.isFeatureEnabled("orgCards")?(e=this.model.toJSON({prefs:!0}),t=e.name,e.memberData=this.options.member.toJSON(),e.memberData.bioHtml=Format.markdownAsHtml(this.options.member.get("bio"),{textData:this.options.member.get("bioData")}),this.setActiveView(".js-org-members"),e.members=[],this.$(".js-content").html(templates.fill("org_member_cards",e,{editable:this.model.editable()},{member:templates.member,member_profile:templates.member_profile_info})),_.defer(function(e){return function(){return e.renderCards()}}(this)),this):Controller.displayErrorPage({errorType:"notFound"})},t.prototype.renderCards=function(){var e,t,i,n,r,o,s,a;for(t=this.Board.find(function(e){return function(t){var i;return t.idOrganization===(null!=(i=e.model)?i.idOrganization:void 0)&&!t.get("closed")}}(this)),r=!1,s=0,a=t.length;a>s;s++)e=t[s],i=this.Card.find(function(t){return function(i){var n;return i.get("idBoard")===e.id&&!i.get("closed")&&(n=t.options.member.id,__indexOf.call(i.get("idMembers"),n)>=0)}}(this)),i.length&&(r=!0,this.$(".js-cards").append(this.subview(MemberCardsBoardView,e,{hideOrg:!0}).render(i).el));return r||(o=this.model.isPremOrgAdmin(Auth.me())?"This member is not added to any cards in this organization.":"This member is not added to any cards you are able to see.",n={message:o,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-content").append(templates.fill("empty_list",n))),this},t}(OrganizationView),OrganizationPlansView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-learn-more-plans":"learnMore","click .js-upgrade-to-business-class":"upgrade","click .js-reactivate":"reactivate","click .js-renew-expiring-yearly-business-class-sub":"renewExpiringYearly"},t.prototype.renderMainContent=function(){var e;return e=this.model.toJSON({prefs:!0}),e.activeAccount=this.model.isPremium(),e.isJPS=this.model.isJPS(),e.cancelledAccount=OrgFeatures.cancelled(e.paidAccount),e.isBCAdmin=this.model.isPremOrgAdmin(Auth.me()),e.isOrgAdmin=this.model.owned(),null!=e.paidAccount&&(e.willExpire=OrgFeatures.willExpire(e.paidAccount)),e.willExpire&&(e.yearlyExpirationDate=Dates.toLongDateString(e.paidAccount.expirationDates[e.paidAccount.products[0]])),e.cardUrl="#",e.isOrgAdmin&&(e.cardUrl="/"+e.name+"/billing/card/businessClassMonthly"),e.bcMonthlyPrice=OrgFeatures.formatPrice("businessClassMonthly"),e.bcYearlyPrice=OrgFeatures.formatPrice("businessClassYearly"),this.$(".js-content").html(templates.fill("org_plans",e,{editable:this.model.editable()})),this
},t.prototype.learnMore=function(){return track("Organization View","Plans View","Click Learn More Link")},t.prototype.upgrade=function(e){return $(e.target).hasClass("disabled")?void 0:track("Organization View","Plans View","Click Upgrade Button")},t.prototype.reactivate=function(e){var t,i;Util.stop(e),i=35,t="Monthly",track("Organization View","Plans View","Reactivate Business Class - Monthly"),this.delayShowAuthorizing(),ApiAjax({url:"/1/organizations/"+this.model.id+"/paidAccount/reactivate",type:"POST",data:{products:[i]},success:function(e){return function(){return track("Organization","Sucessfully Reactivate Business Class - "+t),e.pollForCCAuth()}}(this)})},t.prototype.renewExpiringYearly=function(){track("Organization View","Plans View","Renew Expiring Yearly Business Class Subscription"),ApiAjax({url:"/1/organizations/"+this.model.id+"/paidAccount/products",type:"POST",data:{products:[36]},success:function(e){return function(t){return track("Organization","Successfully Renewed Expiring Yearly Business Class Subscription"),e.model.set(t)}}(this)})},t.prototype.delayShowAuthorizing=function(){return this.finishedAuth=!1,_.delay(function(e){return function(){return e.finishedAuth?void 0:(Util.scrollToTop(),Alerts.show("Authorizing...","info","authorizing"))}}(this),1e3)},t.prototype.hideAuthorizing=function(){return this.finishedAuth=!0,Alerts.hide("authorizing")},t.prototype.pollForCCAuth=function(){return OrganizationPaidAccountFormView.pollForCCAuth.call(this)},t}(OrganizationView),OrganizationProductDetails=function(){function e(){}return e.prototype.pricing={monthlyProduct:"businessClassMonthly",yearlyProduct:"businessClassYearly"},e.prototype.features=OrgFeatures,e.prototype.productPrefix="businessClass",e}(),OrganizationBillingView=mixin(BillingView,OrganizationProductDetails,OrganizationBillingView=function(e){function t(){var e;this.events=_.extend({"click .js-open-confirm-jps-upgrade":"confirmUpgrade"},null!=(e=this.events)?e:{}),t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.apiPath="organizations",t.prototype.productName="Business Class",t.prototype.changeCardUrl=function(){return Controller.getOrganizationBillingCardUrl(this.model)},t.prototype.productIconClass=function(){return"briefcase"},t.prototype.renderBanner=function(){var e,t,i;return this.model.isPremium()&&!this.model.isJPS()&&(t=this.model.toJSON(),i=t.billableMemberCount,null!=i&&(t.formattedMemberCount=Util.formatCount(i,"member"),this.model.isPremiumMonthly()?(t.price=5*i,t.monthlyUpgrade=!0):this.model.isPremiumYearly()&&(t.price=45*i,e=OrgFeatures.getPrice(this.model.get("products")),t.price<e?t.yearlyCheaperUpgrade=!0:t.yearlyUpgrade=!0)),this.$(".js-content").prepend(templates.fill("jps_upgrade_banner",t))),this},t.prototype.confirmUpgrade=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target),top:50,view:OrganizationConfirmUpgradeView,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.paidAccountLoader=function(e){return ModelLoader["for"](this.modelCache).loadOrganizationPaidAccount(this.model.id,e)},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.setup()},t}(OrganizationView)),OrganizationConfirmUpgradeView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Upgrade Your Organization"},t.prototype.events={"click .js-upgrade-bc":"upgradeToPerUser"},t.prototype.render=function(){var e,t,i;return t=this.model.toJSON(),i=t.billableMemberCount,null!=i&&(t.formattedMemberCount=Util.formatCount(i,"member"),this.model.isPremiumMonthly()?(t.price=5*i,t.monthlyUpgrade=!0):this.model.isPremiumYearly()&&(t.price=45*i,e=OrgFeatures.getPrice(this.model.get("products")),t.price<e?t.yearlyCheaperUpgrade=!0:t.yearlyUpgrade=!0)),this.$el.html(templates.fill("popover_confirm_jps_upgrade",t)),this},t.prototype.upgradeToPerUser=function(){var e;if(this.model.isPremium())return e="monthly"===OrgFeatures.getInterval(this.model.get("products"))?[96]:[97],ApiAjax({url:""+this.model.urlRoot+"/"+this.model.id+"/paidAccount/products",type:"POST",data:{products:e},success:function(e){return function(t){return track(e.model.typeName,"Successfully Switched to Per-User"),e.model.set(t)}}(this)})},t}(ViewWithId),OrganizationBillingCardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.renderMainContent=function(){var e;return e=this.getFormOpts(),this.$(".js-content").empty().append(new OrganizationPaidAccountFormView(e).render().el),this.setActiveView(".js-billing"),this},t.prototype.getFormOpts=function(){var e,t,i,n,r;return e={model:this.model,action:"js-submit-change-credit-card",productName:"Business Class"},OrgFeatures.hasAccount(null!=(t=this.model.get("paidAccount"))?t.standing:void 0)?_.extend(e,{productNumber:null!=(i=null!=(n=this.model.get("paidAccount"))?n.products[0]:void 0)?i:OrgFeatures.getProductNumber("businessClassMonthly"),formAreas:{creditCard:!0},action:"js-submit-change-credit-card"}):_.extend(e,{productNumber:null!=(r=OrgFeatures.getProductNumber(this.options.product))?r:OrgFeatures.getProductNumber("businessClassMonthly"),formAreas:{creditCard:!0,billingContactHidden:!0,subscribingTo:!0,billingOptions:!0},action:"js-submit-create-paid-account"}),e},t}(OrganizationView),OrganizationPaidAccountFormView=mixin(OrganizationProductDetails,OrganizationPaidAccountFormView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.profileView=function(){return Controller.organizationBoardsView(this.model.get("name"),this.model.id)},t.prototype.billingView=function(){return Controller.organizationBillingView(this.model.get("name"))},t}(PaidAccountFormView)),ManageOrgMembersView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),mixin(MemberSearchView,MemberAddView,t),t.prototype.getViewTitle=function(){return"Members"},t.prototype.initialize=function(){this.savedSearch=""},t.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},t.prototype.render=function(){var e,t;return t={},t.canInviteMembers=!0,t.canAddMembers=!0,t.isJPS=this.model.isJPS(),t.jpsPrice=OrgFeatures.getPrice(this.model.get("products")),t.isYearly="yearly"===OrgFeatures.getInterval(this.model.get("products")),t.isMonthly="monthly"===OrgFeatures.getInterval(this.model.get("products")),this.$el.html(templates.fill("manage_members",t,{editable:this.model.editable()})),null!=(e=Ads.addMemberToOrganizationAd(Auth.me(),this.model))&&this.$(".js-ad").html(this.subview(e,this.model).render().el),_.delay(function(e){return function(){return e.input=e.$(".js-search-input"),e.input.click(function(e){return Util.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),PopOver.calcPos(),this},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(){var e;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),e=this.input.val().toLowerCase().trim(),""===e)return void this.clearSearchResults();this.loadingEl.show(),ApiAjax({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:e,_cache:Util.newestId(this.model.get("memberships"))},dataType:"json",success:function(t){return function(i){return t.renderSearchResults(e,i)}}(this)})}},t.prototype.keydownEvent=function(e){var t,i,n;if((t=e.keyCode)!==Key_Shift&&t!==Key_Alt&&t!==Key_Control&&t!==Key_Arrow_Right&&t!==Key_Arrow_Left&&t!==Key_Escape){if((i=e.keyCode)!==Key_Enter)return(n=e.keyCode)===Key_Arrow_Up||n===Key_Arrow_Down?(Util.stop(e),void Util.navMenuList(this.$(".js-search-results .js-list"),"li",e.keyCode)):void 0;if(this.$(".js-search-results .js-list .selected .js-select-member").length>0)return Util.stop(e),void this.$(".js-search-results .js-list .selected:first .js-select-member").click();if(this.$(".js-search-results .js-list .email-invite").length>0)return Util.stop(e),void this.$(".email-invite:first").click()}},t.prototype.addMember=function(e){var t,i;Util.stop(e),$(e.target).closest(".item.disabled").length>0||(this.clearSearchResults(),t=$(e.target).closest(".js-select-member").attr("idMember"),i=this.Member.get(t),ApiAjax({url:"/1/organization/"+this.model.id+"/members/"+t,type:"put",data:{type:"normal"},dataType:"json",success:function(e){return function(n){return null!=n.token||e.model.memberList.find(function(e){return e.id===t})?void 0:(e.model.memberList.add(i),track("Invitations","Add Member to Organization","Role: Member"))}}(this),error:function(e){return function(t){Alerts.show(t.responseText,"error","alert",3e3),e.input.focus().select(),track("Invitations","Error: "+t.responseText)}}(this)}))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,i,n;return n=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,i=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=_.compact(Util.removeDomainFromEmailAddress(e.email).split(n)).join(" ").replace(i,""),e.fullName=Util.toTitleCase(t),this.$(".js-uninvited-search-results").append(templates.fill("invite_add_name",e,"",{member:templates.member})).show()},t.prototype.sendEmailInvite=function(e){var t,i,n,r;if(Util.stop(e),i=this.$(".js-send-email-invite"),null==i.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),r=t.val().trim(),!Util.validName(r))return Util.setCaretAtEnd(t),void $(".js-name-error").show();n={fullName:r,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},i.attr("disabled","disabled"),ApiAjax({url:"/1/organizations/"+this.model.id+"/members",type:"put",dataType:"json",data:n,success:function(e){return function(t){var n;return n=new Member(t,{modelCache:e.modelCache}),e.model.memberList.get(n.id)||e.model.memberList.add(n),track("Invitations","Send Email Org Invite to New Member","Role: "+t.type),i.removeAttr("disabled"),PopOver.hide()}}(this),error:function(e){return function(t){e.$(".js-uninvited-search-results").empty().hide(),Alerts.show(t.responseText,"error","alert",3e3),i.removeAttr("disabled"),e.input.focus().select(),track("Invitations","Error: "+t.responseText)}}(this)})}},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-uninvited-search-results").hide().empty(),$(".js-search-results").hide()},t.prototype.removeInvitation=function(e){var t;t=$(e.currentTarget).closest(".invitation").data("id"),Invitation.prototype["delete"]({model:this.model,idInvitation:t,success:function(e){return function(){return track("Invitations","Delete Organization Invite"),e.search}}(this)}),Util.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===Auth.myId()||this.model.owned()},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(ViewWithId),CreateOrgView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Create Organization"},t.prototype.events={"click .js-save":"submit","submit form":"submit"},t.prototype.getValue=function(e){var t;return null!=(t=this.$("[name="+e+"]").val())?t.trim():void 0},t.prototype.render=function(){return this.$el.html(templates.fill("org_create")),this},t.prototype.submit=function(e){var t,i,n,r,o;for(Util.stop(e),t={},o=["displayName","desc"],n=0,r=o.length;r>n;n++)i=o[n],t[i]=this.getValue(i);Auth.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(){return function(e){Controller.organizationBoardsView(e.get("name"),e.id),PopOver.hide()}}(this)})},t}(ViewWithId),ChangeOrgVisibilityView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Select Visibility"},t.prototype.tagName="ul",t.prototype.className="pop-over-list",t.setVisibility=function(e){return function(t){return Util.stop(t),track("Organization","Changed Visibility"),this.model.setPref("permissionLevel",e),PopOver.hide()}},t.prototype.events={"click .js-select-members":t.setVisibility("private"),"click .js-select-public":t.setVisibility("public")},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),e["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0,e.publicText=this.model.getPermLevelAltText("public"),e.privateText=this.model.getPermLevelAltText("private"),this.$el.html(templates.fill("change_org_vis",e)),this},t}(ViewWithId),OrganizationRestrictInvitesOrg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Org Membership Restrictions"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.debounce(this.renderRestrictions))},t.prototype.events={"keydown .js-input-restricted":"addRestriction","click .js-restricted-address":"removeRestriction"},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.hasRestrictions=(null!=(t=this.model.get("prefs").orgInviteRestrict)?t.length:void 0)>0,this.$el.html(templates.fill("org_prefs_restrict_invites",e)),this.renderRestrictions(),this},t.prototype.renderRestrictions=function(){var e,t,i,n,r,o;if(e=this.$(".js-list"),e.empty(),(null!=(r=this.model.get("prefs").orgInviteRestrict)?r.length:void 0)>0){for(o=this.model.get("prefs").orgInviteRestrict,i=0,n=o.length;n>i;i++)t=o[i],e.append(templates.fill("org_pref_restriction",{restriction:t}));return this.$(".js-restriction-list").show()}return this.$(".js-restriction-list").hide()},t.prototype.addRestriction=function(e){var t;return e.keyCode===Key_Enter?(t=$(e.target).val(),/^@/.test(t)?t="*"+t:-1===t.indexOf("@")&&t.indexOf(".")>0&&(t="*@"+t),this.$(".js-loading").removeClass("hide"),ApiAjax({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"put",data:{value:t},dataType:"json",success:function(t){return function(){return $(e.target).val("").select().focus(),t.$(".js-loading").addClass("hide"),t.$(".js-errors").hide()}}(this),error:function(e){return function(t){return e.$(".js-loading").addClass("hide"),e.$(".js-errors").text(t.responseText).show()}}(this)})):void 0},t.prototype.removeRestriction=function(e){var t;return t=$(e.target).closest("a").attr("data-pattern"),$(e.target).closest("li").remove(),ApiAjax({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"delete",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").select().focus(),e.$(".js-errors").hide()}}(this)})},t}(ViewWithId),OrganizationRestrictBoardVisibility=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Board Creation Restriction"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.debounce(this.render))},t.prototype.events={"click a":"changeRestriction"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),this.$el.html(templates.fill("org_prefs_vis",e)),this},t.prototype.changeRestriction=function(e){var t,i,n;return t=$(e.target),i="boardVisibilityRestrict/"+t.closest("ul").attr("data-vis"),n=t.attr("data-restriction"),this.model.setPref(i,n)},t}(ViewWithId),window.cchelper=function(){var e,t,i,n;t={name:"Mr. Magick CC",cardNumber:5462311111542453,cvv:123,streetAddress1:"Main Street",city:"Home Town",state:"NY",zipCode:12345,country:"US",acceptTOS:!0};for(i in t)n=t[i],$("input[name="+i+"]").val(n);e={expMonth:12,expYear:20};for(i in e)n=e[i],$("select[name="+i+"]").val(n);return $("input[name=acceptTOS]").prop("checked",!0)},BusinessClassSelectOrgView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-select-org":"chooseOrg","click .js-disabled":"stop","click .js-create-org":"createOrg"},t.prototype.render=function(){var e,t,i,n,r,o,s;return e={},e.orgs=function(){var e,a,l,c;for(l=this.model.organizationList.models,c=[],e=0,a=l.length;a>e;e++)o=l[e],t=o.owned(),n=o.isPremium(),i=o.isJPS(),s=t&&!n?"/"+o.get("name")+"/billing/card":n&&!i&&t?"/"+o.get("name")+"/billing":"/"+o.get("name")+"/plans",r=Util.formatCount(o.get("memberships").length,"member"),c.push(_.extend(o.toJSON(),{memberCount:r,isAdmin:t,isPremium:n,isJPS:i,orgUrl:s}));return c}.call(this),this.$el.html(templates.fill("select_org_to_upgrade",e)),this},t.prototype.chooseOrg=function(){return track("Business Class Choose Org Page","Choose Org")},t.prototype.stop=function(e){return Util.stop(e)},t.prototype.createOrg=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target),top:20,view:CreateOrgView,options:{model:this.model,modelCache:this.modelCache}}),track("Business Class Choose Org Page","Create New Org")},t}(ViewWithId);var CalendarSettingsView,CardAgingSettingsView,POWER_UPS,PowerUpDetailView,PowerUpIconView,PowerUpScreenshotsView,PowerUpsListView,PowerUpsView,VotingSettingsView,powerUp,_i,_len,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};for(POWER_UPS=[{name:"voting",description:"Allow people to vote on cards.",imageClass:"power-up-icon-image-voting",aboutTemplate:"power_ups_about_voting",settingsView:function(e){return new VotingSettingsView({model:e})},backgroundColor:"hsl(82, 25%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/voting/screenshots/5a3055ee42904ad84ba81830694e4a03/screenshot1.png"]},{name:"cardAging",description:"Cards visibly age with inactivity.",imageClass:"power-up-icon-image-card-aging",aboutTemplate:"power_ups_about_card_aging",settingsView:function(e){return new CardAgingSettingsView({model:e})},backgroundColor:"hsl(227, 14%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/d073fc23fd31de74ff54d5d023e64478/screenshot1.png","https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/c80b3b4586309dc983d6de5c3d1a5607/screenshot2.png"]},{name:"calendar",description:"See your cards with due dates on a calendar.",imageClass:"power-up-icon-image-calendar",aboutTemplate:"power_ups_about_calendar",settingsView:function(e){return new CalendarSettingsView({model:e})},backgroundColor:"hsl(204, 30%, 90%)",screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/f6a00a55c883ce90c323f6f4b9d8bc57/screenshot1.png","https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/a26f919154bc1834a54f02e485dca9dd/screenshot2.png","https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/b1c5841496fcf25c103ec3951a318a8c/screenshot_mobile1.png"]}],_i=0,_len=POWER_UPS.length;_len>_i;_i++)powerUp=POWER_UPS[_i],powerUp.displayName=POWERUP_STRINGS.powerUpNames[powerUp.name];PowerUpsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){var e,t,i;for(this.listView=new PowerUpsListView({model:this.model}),this.currentMode="list",this.detailViews={},i=[],e=0,t=POWER_UPS.length;t>e;e++)powerUp=POWER_UPS[e],i.push(this.detailViews[powerUp.name]=new PowerUpDetailView({model:this.model,powerUp:powerUp}));return i},t.prototype.events={"click .js-back-view":"showListView","click .js-power-up-detail":"showDetailView"},t.prototype.render=function(){return this.$el.empty().append(this.listView.render().el),this},t.prototype.showListView=function(e){return Util.stop(e),this.$el.empty().append(this.listView.render().el),this.listView.delegateEvents(),this.currentMode="list",this.$el.css({background:"",backgroundColor:""})},t.prototype.showDetailView=function(e){var t,i,n;return Util.stop(e),"detail"!==this.currentMode?(i=$(e.target).closest(".js-power-up-detail").find(".js-power-up-name").attr("data-power-up-name"),this.$el.empty().append(this.detailViews[i].render().el),t=null!=(n=_.find(POWER_UPS,function(e){return e.name===i}).backgroundColor)?n:"",this.$el.css({backgroundColor:t}),this.detailViews[i].delegateEvents(),this.currentMode="detail"):void 0},t}(ViewWithId),PowerUpsListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){var e,t,i,n;for(this.listenTo(this.model,{"change:powerUps":this.renderPowerUpsLength}),this.iconViews=[],n=[],t=0,i=POWER_UPS.length;i>t;t++)powerUp=POWER_UPS[t],e={model:this.model,powerUp:powerUp,viewType:"list"},n.push(this.iconViews.push(new PowerUpIconView(e)));return n},t.prototype.render=function(){return this.$el.html(templates.fillFromModel("power_ups_list",this.model)),this.renderPowerUps(),this.renderPowerUpsLength(),this},t.prototype.delegateEvents=function(){var e,i,n,r,o;for(t.__super__.delegateEvents.apply(this,arguments),r=this.iconViews,o=[],i=0,n=r.length;n>i;i++)e=r[i],o.push(e.delegateEvents());return o},t.prototype.renderPowerUpsLength=function(){var e,t;return t=this.model.get("powerUps").length,e=this.$(".js-power-up-count").empty().addClass("hide"),t>0?e.text(""+t+" enabled").removeClass("hide"):void 0},t.prototype.renderPowerUps=function(){var e,t,i,n,r,o;for(e=this.$(".js-power-up-list").empty(),r=this.iconViews,o=[],i=0,n=r.length;n>i;i++)t=r[i],o.push(e.append(t.render().el));return o},t}(ViewWithId),PowerUpDetailView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="power-up-detail",t.prototype.initialize=function(e){return this.powerUp=e.powerUp,this.listenTo(this.model,{"change:powerUps":this.renderContent}),this.toolbarSelection="settings",this.iconView=new PowerUpIconView({model:this.model,powerUp:this.powerUp,viewType:"detail"}),this.screenshotsView=new PowerUpScreenshotsView({model:this.model,powerUp:this.powerUp})},t.prototype.events={"click .js-toolbar-select":"selectContentSection"},t.prototype.render=function(){return this.$el.html(templates.fillFromModel("power_up_detail",this.model)),this.renderIcon(),this.renderContent(),this},t.prototype.delegateEvents=function(){return t.__super__.delegateEvents.apply(this,arguments),this.iconView.delegateEvents()},t.prototype.renderIcon=function(){return this.$(".js-power-up-icon").empty().append(this.iconView.render().el)},t.prototype.powerUpEnabled=function(){var e;return e=this.powerUp.name,__indexOf.call(this.model.get("powerUps"),e)>=0},t.prototype.renderContent=function(){if(this.renderNavBar(),!this.powerUpEnabled())return this.renderScreenshots();switch(this.toolbarSelection){case"screenshots":return this.renderScreenshots();default:return this.renderSettings()}},t.prototype.renderNavBar=function(){var e,t;return e=this.$(".js-power-up-detail-navbar").empty(),this.powerUpEnabled()?(t={screenshots:"screenshots"===this.toolbarSelection,settings:"settings"===this.toolbarSelection},e.html(templates.fillFromModel("power_ups_detail_navbar",this.model,t))):void 0},t.prototype.renderSectionContent=function(e){return this.$(".js-power-up-detail-content").empty().append(e)},t.prototype.renderScreenshots=function(){return this.renderSectionContent(this.screenshotsView.render().el),this.screenshotsView.delegateEvents()},t.prototype.renderSettings=function(){var e;return e=this.powerUp.settingsView(this.model),this.renderSectionContent(e.render().el),e.delegateEvents()},t.prototype.selectContentSection=function(e){return Util.stop(e),this.toolbarSelection=$(e.target).attr("name"),this.renderContent()},t}(ViewWithId),PowerUpScreenshotsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="power-up-screenshots-wrapper",t.prototype.initialize=function(e){this.powerUp=e.powerUp},t.prototype.render=function(){var e;return e={screenshots:this.powerUp.screenshots},this.$el.html(templates.fill("power_up_detail_screenshots",e)),this},t}(ViewWithId),PowerUpIconView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="power-up-icon js-power-up-detail",t.prototype.initialize=function(e){return this.powerUp=e.powerUp,this.viewType=e.viewType,this.listenTo(this.model,{"change:powerUps":this.renderEnabled})},t.prototype.events={"click .js-toggle-power-up:not(.enabled)":"enablePowerUp","click .js-toggle-power-up.enabled":"disablePowerUp"},t.prototype.render=function(){var e;return e=_.clone(this.powerUp),"detail"===this.viewType?e.powerUpDesc=templates.fill(this.powerUp.aboutTemplate):(e.powerUpDesc=this.powerUp.description,e.isListView=!0),this.$el.html(templates.fillFromModel("power_up_icon",this.model,e)),this.renderEnabled(),this},t.prototype.enablePowerUp=function(){return this.model.addToSet("powerUps",this.powerUp.name)},t.prototype.disablePowerUp=function(){return this.model.pull("powerUps",this.powerUp.name),"calendar"===this.powerUp.name?Controller.getCurrentBoardView().closeCalendarIfOpen():void 0},t.prototype.renderEnabled=function(){var e,t,i,n,r;return r=this.powerUp.name,i=__indexOf.call(this.model.get("powerUps"),r)>=0,t=this.$(".js-toggle-btn"),n=i?"Disable":"Enable",t.text(n).toggleClass("enabled",i).toggleClass("primary",!i),e=this.$(".js-enabled-badge"),e.toggleClass("hide",!i)},t.prototype.renderButtonState=function(){var e,t,i;i=this.powerUp.name,t=__indexOf.call(this.model.get("powerUps"),i)>=0,e=this.$(".js-toggle-btn"),e.text(txt)},t}(ViewWithId),VotingSettingsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="fixed-width voting-prefs",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm","mouseenter .js-voting-select":"showSoftCheckMarks","mouseleave .js-voting-select":"clearSoftCheckMarks"},t.prototype.render=function(){var e,t,i,n,r,o;return i=this.model.toJSON({prefs:!0,url:!0}),r=this.model.getOrganization(),i.hasOrg=null!=(null!=r?r.id:void 0),i.orgCanSee=i.hasOrg&&("public"===(o=this.model.getPref("permissionLevel"))||"org"===o),i.premium=null!=r?r.isFeatureEnabled("observers"):void 0,i.voting_showObservers=(i.premium||i.voting_observers)&&i.hasOrg,(null!=r?r.owned():void 0)?(i.orgOwner=!0,i.orgName=r.get("displayName"),this.model.owned()||(i.setOrgNull=!0)):this.model.owned()||(i.noEditOrg=!0),this.$el.html(templates.fillFromModel("power_ups_voting_prefs",this.model,i)),e=this.$(".icon-check"),t=this.$(".checked-option")[0],n=e.index(t),this.displayChecksAbove(n,"checked-option"),this},t.prototype.selectPerm=function(e){var t,i;return Util.stop(e),t=$(e.target).closest(".js-voting-select"),i=t.attr("name"),this.model.setPref("voting",i)},t.prototype.showSoftCheckMarks=function(e){var t,i,n;return i=$(e.target).closest(".js-voting-select")[0],t=this.$(".js-voting-select"),n=t.index(i),this.displayChecksAbove(n,"soft-check")},t.prototype.clearSoftCheckMarks=function(){return this.displayChecksAbove(-1,"soft-check")},t.prototype.displayChecksAbove=function(e,t){var i;return i=this.$(".js-voting-select"),i.each(function(i,n){var r;return $(n).hasClass("disabled")||$(n).children(".icon-check").hasClass("checked-option")?void 0:(r=$(n).children("div.icon-check"),e>=i?r.addClass(t):r.removeClass(t))})},t}(ViewWithId),CardAgingSettingsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="fixed-width card-aging-prefs",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-select:not(.disabled)":"selectMode"},t.prototype.render=function(){var e,t;return t=this.model.toJSON({prefs:!0,url:!0}).prefs,e={aging_regular:"regular"===t.cardAging,aging_pirate:"pirate"===t.cardAging},this.$el.html(templates.fillFromModel("power_ups_card_aging_prefs",this.model,e)),this},t.prototype.selectMode=function(e){var t,i;return Util.stop(e),t=$(e.target).closest(".js-select"),i=t.attr("name"),this.model.setPref("cardAging",i)},t}(ViewWithId),CalendarSettingsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="fixed-width calendar-prefs",t.prototype.initialize=function(){return this.generating=!1,this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})},t.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"},t.prototype.generationComplete=function(){return this.generating=!1,this.render()},t.prototype.generateNewFeedURL=function(e){return Util.stop(e),this.generating=!0,this.model.generateCalendarKey(),this.render()},t.prototype.render=function(){var e,t,i,n;return n=this.model.toJSON({prefs:!0}).prefs,i=this.model.getPref("calendarKey"),t="webcal://"+location.host+"/calendar/"+Auth.me().id+"/"+this.model.id+"/"+i+".ics",i||(this.generating=!0,this.model.generateCalendarKey()),e={calendar_feed_enabled:n.calendarFeedEnabled,calendar_feed_generated:null!=i&&!this.generating,calendar_feed_url:t},this.$el.html(templates.fillFromModel("power_ups_calendar_prefs",this.model,e)),this},t.prototype.focusInput=function(){return this.$(".js-calendar-feed-url").focus().select()},t.prototype.selectFeedEnabled=function(e){var t,i;return Util.stop(e),t=$(e.target).closest("a"),i="enabled"===t.attr("name"),this.model.setPref("calendarFeedEnabled",i)},t}(ViewWithId);var BoardStar,BoardStarList,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};BoardStar=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typename="BoardStar",t}(TrelloModel),BoardStarList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=BoardStar,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardStars"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.getBoardStar=function(e){return _.find(this.models,function(t){return t.get("idBoard")===e})},t.prototype.starBoard=function(e){var t;if(!this.getBoardStar(e))return t=this.length?this.at(this.length-1).get("pos")+Util.spacing:Util.spacing,this.create({idBoard:e,pos:t},{modelCache:this.modelCache})},t.prototype.unstarBoard=function(e){var t;return t=this.getBoardStar(e),null!=t?t.destroy():void 0},t.prototype.updateStarBoard=function(e,t){var i,n;return i=this.getBoardStar(e),n=Util.calcPos(t,this,i),null!=i?i.update({pos:n}):void 0},t.prototype.getBoards=function(){var e;return e=this.getBoardIds(),_.compact(this.Board.get(e))},t.prototype.getBoardIds=function(){var e,t,i,n,r;for(t=_.sortBy(this.models,function(e){return e.get("pos")}),r=[],i=0,n=t.length;n>i;i++)e=t[i],r.push(e.get("idBoard"));return r},t}(CollectionWithHooks);var CustomStickerSelectionView,Sticker,StickerEditView,StickerList,StickerSelectionView,StickerView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e
};StickerSelectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="sticker-select js-draggable-sticker",t.prototype.enabled=function(){var e;return"standard"===this.model.get("type")||Auth.me().isFeatureEnabled("additionalStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("additionalStickers"):void 0)},t.prototype.render=function(){var e,t,i;return e=this.model.toJSON(),e.url=null!=(t=null!=(i=Util.smallestPreviewBiggerThan(e.scaled,STICKER_SIZE))?i.url:void 0)?t:e.url,e.pending=null==e.image&&null==e.id&&null==e.error,this.$el.toggleClass("disabled",!this.enabled()).html(templates.fill("sticker_select_item",e)).data("sticker",this.model),this},t}(ViewWithId),CustomStickerSelectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.toggleSelectable(),this.model.onId(function(e){return function(){return e.toggleSelectable()}}(this)),this.listenTo(this.model,"change:error",this.render)},t.prototype.events={"click .js-delete-sticker":"deleteSticker"},t.prototype.enabled=function(){var e;return Auth.me().isFeatureEnabled("customStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("customStickers"):void 0)},t.prototype.toggleSelectable=function(){var e;return e=null!=this.model.id,this.$el.toggleClass("js-draggable-sticker",e),this.$el.toggleClass("sticker-unselectable",!e)},t.prototype.deleteSticker=function(e){return Util.stop(e),Confirm.toggle({elem:$(e.target).closest(".js-delete-sticker"),top:32,model:this.model,title:"Delete Sticker?",text:"Deleting a sticker is permanent. There is no undo.",confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.model.destroy()}}(this)})},t}(StickerSelectionView),Sticker=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typename="Sticker",t}(TrelloModel),StickerList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Sticker,t.prototype.url=function(){return"/1/cards/"+this.card.get("id")+"/stickers"},t.prototype.initialize=function(e,t){this.card=t.card,this.listenTo(this,"change:zIndex",this.sort)},t.prototype.comparator=function(e){return e.get("zIndex")||0},t.prototype.nextZIndex=function(e){var t;return this.length>0?(t=_.max(this.pluck("zIndex")),(null!=e?e.get("zIndex"):void 0)===t&&1===this.filter(function(e){return e.get("zIndex")===t}).length?t:t+1):1},t}(CollectionWithHooks),StickerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="sticker",t.prototype.showEditControls=function(){return!1},t.prototype.render=function(){var e,t,i;return e=this.model.toJSON(),e.url=null!=(t=null!=(i=Util.smallestPreviewBiggerThan(e.imageScaled,STICKER_SIZE))?i.url:void 0)?t:e.imageUrl,e.showEditControls=this.showEditControls(),this.$el.html(templates.fill("sticker_on_card",e)).css({left:""+e.left+"%",top:""+e.top+"%"}),this},t}(ViewWithId),StickerEditView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"stopEditing",this.stopEditing),this.listenTo(this.model,"startEditing",this.editSticker),this.listenTo(this.model,"disableEditing",this.disableEditing),this.listenTo(this.model,"enableEditing",this.enableEditing)},t.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave",mousedown:"editSticker","mousedown .js-remove-sticker":"removeSticker","mousedown .js-rotate-sticker":"startRotate","mousedown .js-move-sticker":"startMove"},t.prototype.showEditControls=function(){return!0},t.prototype.disableEditing=function(){return this.$el.addClass("editing-disabled")},t.prototype.enableEditing=function(){return this.$el.removeClass("editing-disabled")},t.prototype.endCurrentEdit=function(){return $(document).off(".stickerrotate .stickermove .stickerautomove"),this.$el.removeClass("moving rotating"),$(".quick-card-editor").removeClass("invalid dragging")},t.prototype.stopEditing=function(e){var t,i,n,r,o;if(Util.stop(e),this.isEditing()){for(this.endCurrentEdit(),this.$el.removeClass("editing"),$(".quick-card-editor").removeClass("quick-card-editor-editing-stickers"),r=this.model.collection.models,o=[],i=0,n=r.length;n>i;i++)t=r[i],o.push(t.trigger("enableEditing"));return o}},t.prototype.isEditing=function(){return this.$el.is(".moving, .rotating, .editing")},t.prototype.isEditingDisabled=function(){return this.$el.is(".editing-disabled")},t.prototype.isMovingOrRotating=function(){return this.$el.is(".moving, .rotating")},t.prototype.saveStickerAttrs=function(e){var t,i,n,r,o,s,a,l,c;r=e.position,o=e.rotation,s=function(e){return Math.round(100*e)/100},c={zIndex:this.model.collection.nextZIndex(this.model)},r&&(t=this.$el.closest(".list-card"),i=t.find(".js-card-stickers"),l=i.width(),a=i.height(),c.left=s(parseFloat(this.$el.css("left"))/l*100),c.top=s(parseFloat(this.$el.css("top"))/a*100)),o&&(n=Util.getElemTransformMatrix(this.$el.find(".sticker-image")),c.rotate=s(Util.getMatrixDegrees(n)%360)),this.model.update(c)},t.prototype.mouseenter=function(){this.isEditingDisabled()||this.isEditing()||this.isMovingOrRotating()||this.$el.addClass("hover")},t.prototype.mouseleave=function(){this.$el.removeClass("hover")},t.prototype.editSticker=function(e){var t,i,n,r,o,s,a,l,c;if(null==e||1===e.which){for(Util.stop(e),n=!1,null!=e&&"mousedown"===e.type&&(r=e.pageX,o=e.pageY,i=function(){return function(){return $(document).off(".stickerautomove"),clearTimeout(t)}}(this),$(document).on("mousemove.stickerautomove",function(e){return function(t){return Math.pow(t.pageX-r,2)+Math.pow(t.pageY-o,2)>25?(n=!0,i(),e.startMove(t)):void 0}}(this)),$(document).on("mouseup.stickerautomove",i),t=setTimeout(i,1e3)),a=_.clone(this.model.collection.models),l=0,c=a.length;c>l;l++)s=a[l],s!==this.model&&(s.trigger("stopEditing"),s.trigger("disableEditing"));_.defer(function(e){return function(){return PopOver.hide(),e.$el.addClass("editing"),$(".quick-card-editor").addClass("quick-card-editor-editing-stickers")}}(this))}},t.prototype.startRotate=function(e){var t,i,n,r,o,s;if(this.isEditing())return Util.preventDefault(e),s={x:this.$el.offset().left+this.$el.width()/2,y:this.$el.offset().top+this.$el.height()/2},n={x:e.pageX,y:e.pageY},r=Util.calcDistanceFromCenter(this.$el,n.x,n.y),o=0,i=Util.getElemTransformMatrix(this.$el.find(".sticker-image")),null!=i&&(o=Util.getMatrixDegrees(i)),t=!1,$(document).on("mousemove.stickerrotate",function(e){return function(i){var a,l,c,d,u,p,h,m,f;t||(e.$el.removeClass("hover").addClass("rotating"),$(".quick-card-editor").addClass("dragging"),t=!0),m={x:i.pageX,y:i.pageY},l=4*Util.calcDistanceFromCenter(e.$el,m.x,m.y),c=l-4*r,u=m.x-s.x,p=m.y-s.y,h=Util.getDegrees(n.y-s.y,n.x-s.x),d=Util.getDegrees(p,u),a=d-h,f=o+a,e.$el.find(".sticker-image").css({transform:"rotate("+f+"deg)","-webkit-transform":"rotate("+f+"deg)"})}}(this)),$(document).on("mouseup.stickerrotate",function(e){return function(){return t?(e.saveStickerAttrs({rotation:!0}),e.endCurrentEdit()):$(document).off(".stickerrotate")}}(this)),!1},t.prototype.startMove=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h;if(this.isEditing())return Util.stop(e),t=this.$el.closest(".list-card"),i=t.find(".js-card-stickers"),h=i.offset(),l=h.left,c=h.top,p=this.$el.width(),u=this.$el.height(),d=i.width(),a=i.height(),n={left:-40,right:d-10,top:-40,bottom:a-10},null!=e?(o=this.$el.offset().left+this.$el.width()/2-e.pageX,s=this.$el.offset().top+this.$el.height()/2-e.pageY):(o=0,s=0),r=!1,$(document).on("mousemove.stickermove",function(e){return function(t){var i,a,d;return r||(e.$el.removeClass("hover").addClass("moving"),$(".quick-card-editor").addClass("dragging"),r=!0),i=t.pageX-l-p/2+o,a=t.pageY-c-u/2+s,d=!0,i>n.right&&(i=n.right,d=!1),i<n.left&&(i=n.left,d=!1),a>n.bottom&&(a=n.bottom,d=!1),a<n.top&&(a=n.top,d=!1),$(".quick-card-editor").toggleClass("invalid",!d),e.$el.css({left:i,top:a})}}(this)),$(document).on("mouseup.stickermove",function(e){return function(){return r?(e.saveStickerAttrs({position:!0}),e.endCurrentEdit()):$(document).off(".stickermove")}}(this)),!1},t.prototype.removeSticker=function(){var e;this.isEditing()&&(e=_.once(function(e){return function(){e.stopEditing(),e.model.destroy(),e.$el.remove()}}(this)),this.$el.one("transitionEnd webkitTransitionEnd",e),setTimeout(e,100),this.$el.addClass("fade-out"))},t}(StickerView);var Login,LoginList,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Login=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typename="Login",t.prototype.hasConflict=function(){var e;return e=this.collection.types(),!_.any([function(e){return function(){return _.isEmpty(e.get("types"))}}(this),function(){return function(){return"password"in e}}(this),function(){return function(){return e.google>=2}}(this)],function(e){return e()})},t}(TrelloModel),LoginList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Login,t.prototype.initialize=function(){return this.listenTo(this,"change:primary",this.resetPrimary)},t.prototype.resetPrimary=function(e){var t,i,n;if(e.get("primary")){for(n=this.without(e),t=0,i=n.length;i>t;t++)e=n[t],e.set("primary",!1);return this.sort()}},t.prototype.comparator=function(e){return Number(!e.get("primary"))+e.id},t.prototype.types=function(){return _.countBy(_.flatten(this.pluck("types")))},t}(CollectionWithHelpers);var ModelCache,__slice=[].slice,__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};ModelCache=function(){function e(e){var t;this.name=e,_.extend(this,Backbone.Events),this._cache={},this._locked=[],this._lockIndex=0,this._deltaQueue=[];for(t in this._collections)this._cache[t]={};this.createBoundObjects(),"board"===this.getCacheType()&&this.listenTo(this,"add:Board:"+this.name.split("_")[1],function(e){return function(t){return null!=t.get("idOrganization")&&ModelCacheCache.ensureSubscriptions(),e.listenTo(t,"change:idOrganization",function(){return ModelCacheCache.ensureSubscriptions()})}}(this))}return e.fullCacheTypes=["board","organization","tempboard"],e.prototype._collections={Action:{type:Action,test:"actions"},Card:{type:Card,test:"cards"},Checklist:{type:Checklist,test:"checklists"},Board:{type:Board,test:function(e){return/^board($|s)/.test(e)}},List:{type:List,test:function(e){return/^lists?/.test(e)}},Member:{type:Member,test:function(e){return/^member/.test(e)&&"memberships"!==e&&"memberType"!==e}},Notification:{type:Notification,test:"notifications"},Organization:{type:Organization,test:function(e){return/^organization/.test(e)}}},e.prototype.getRequiredSubscriptions=function(){var e,t,i,n,r;return i=Auth.isLoggedIn()?[{modelType:"Member",idModel:Auth.myId(),tags:["messages","updates"]}]:[],n=function(){var i;switch(this.getCacheType()){case"organization":return[{modelType:"Organization",idModel:this.name.split("_")[1],tags:["allActions","updates"]}];case"board":return e=this.name.split("_")[1],r=[{modelType:"Board",idModel:e,tags:["clientActions","updates"]}],(t=null!=(i=this.get("Board",e))?i.get("idOrganization"):void 0)&&r.push({modelType:"Organization",idModel:t,tags:["allActions","updates"]}),r;default:return[]}}.call(this),i.concat(n)},e.prototype.createBoundObjects=function(){var e,t,i,n,r,o,s,a,l,c,d,u;for(t=["get","waitFor","all","find","findOne"],e={Action:["getListForModel"],Notification:["sortedByDateDescending","unreadCount"]},this.bound={},c=[Action,Board,Card,Checklist,List,Member,Notification,Organization],o=0,a=c.length;a>o;o++)for(n=c[o],this.bound[n.prototype.typeName]={},u=t.concat(null!=(d=e[n.prototype.typeName])?d:[]),r=function(e){return function(t,i){return e.bound[t.prototype.typeName][i]=function(){var n;return n=1<=arguments.length?__slice.call(arguments,0):[],t[i].apply(t,[e].concat(__slice.call(n)))}}}(this),s=0,l=u.length;l>s;s++)i=u[s],r(n,i);return this.bound.Auth={me:function(e){return function(){return Member.get(e,Auth.myId())}}(this)}},e.prototype.getCacheType=function(){return this.name.split("_")[0]},e.prototype.updateDeltas=function(e,t){var i,n,r,o;for(o=[],n=0,r=t.length;r>n;n++)i=t[n],null!=i._id&&(null==i.id&&(i.id=i._id),delete i._id),o.push(this.enqueueDelta(e,i));return o},e.prototype.deleteDeltas=function(e,t){var i,n,r,o,s;for(s=[],n=0,r=t.length;r>n;n++)i=t[n],s.push(this.enqueueDelta(e,{id:null!=(o=i.id)?o:i._id,deleted:!0}));return s},e.prototype.clearAll=function(){var e,t,i,n,r;for(i in this._collections){r=null!=(n=this._cache[i])?n:{};for(e in r)t=r[e],t.destructor();this._cache[i]={}}return clearInterval(this._syncTimer)},e.prototype.get=function(e,t){var i;return null!=(i=this._cache[e])?i[t]:void 0},e.prototype.waitFor=function(e,t,i){var n;return n=this.get(e,t),null!=n?i(null,n):this.once("add:"+e+":"+t,function(n){return function(){return n.waitFor(e,t,i)}}(this))},e.prototype.all=function(e){return _.values(this._cache[e])},e.prototype.add=function(e){var t;if((!e.id||null==this.get(e.typeName,e.id))&&null!=this._collections[e.typeName])return t=e.id?e.id:e.cid,this._cache[e.typeName][t]=e,this.trigger("add:"+e.typeName,e),e.onId(function(t){return function(i){return delete t._cache[e.typeName][e.cid],t._cache[e.typeName][i]=e,t.trigger("add:"+e.typeName+":"+i,e),"function"==typeof e.triggerCacheEvents?e.triggerCacheEvents(t,"add",e):void 0}}(this)),e.off(null,null,this),e.on("change",function(t){return function(){var i,n,r,o;"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(t,"change",e),t.trigger("change:"+e.typeName,e),r=e.changedAttributes(),o=[];for(i in r)n=r[i],o.push(t.trigger("change:"+e.typeName+":"+i,e));return o}}(this),this),e.on("destroy",function(e){return function(t){return e.remove(t)}}(this),this)},e.prototype.remove=function(e){var t,i,n,r;if(null!=e){if(e instanceof Card)for(r=e.actionList.models,i=0,n=r.length;n>i;i++)t=r[i],this.remove(t);return delete this._cache[e.typeName][e.id],delete this._cache[e.typeName][e.cid],this.trigger("remove:"+e.typeName,e),null!=e.id&&this.trigger("remove:"+e.typeName+":"+e.id,e),"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"remove",e),e.off(null,null,this),"function"==typeof e.destructor?e.destructor():void 0}},e.prototype.update=function(e,t,i){var n,r,o,s,a,l,c,d,u,p,h,m,f,g;if(_.isArray(t))for(p=0,h=t.length;h>p;p++)a=t[p],this.update(e,a);else if(t.deleted)s=this.get(e,t.id),this.remove(s);else{c=_.clone(t),l=function(e){return function(i,n){var r;return r=t[i],_.isNumber(r)?c[""+i+"Count"]=r:e.update(n,r),delete c[i]}}(this),m=this._collections;for(n in m)if(f=m[n],u=f.type,d=f.test,_.isString(d))null!=t[d]&&l(d,n);else for(o in t)d(o)&&l(o,n);r=_.isString(e)?this.get(e,t.id):e,null!=r?r.set(c):null!=(null!=(g=this._collections[e])?g.type:void 0)&&new this._collections[e].type(c,{modelCache:this})}return"function"==typeof i?i(null,t):void 0},e.prototype.lock=function(e){var t;return t=this._lockIndex++,log("MC",""+e+" took lock "+t),this._locked.push(t),t},e.prototype.locked=function(){return!_.isEmpty(this._locked)},e.prototype.unlock=function(e){return __indexOf.call(this._locked,e)>=0?(log("MC","gave lock "+e),this._locked=_.without(this._locked,e),this.locked()||this.processDeltas(),!0):!1},e.prototype.enqueueDelta=function(e,t,i){return log("MC","got an update for "+(_.isString(e)?e:e.typeName)),this.locked()?this._deltaQueue.push({modelOrType:e,delta:t,next:i}):this.update(e,t,i)},e.prototype.processDeltas=function(){var e,t,i,n,r,o,s,a,l,c,d,u;for(n=this._deltaQueue,this._deltaQueue=[],r=function(e){return!_.isString(e)&&null==e.id},log("MC","Running "+n.length+" updates"),o=0,a=n.length;a>o;o++)c=n[o],t=c.modelOrType,e=c.delta,i=c.next,r(t)&&this.update(t,e,i);for(u=[],s=0,l=n.length;l>s;s++)d=n[s],t=d.modelOrType,e=d.delta,i=d.next,r(t)||u.push(this.update(t,e,i));return u},e}(),window.ModelCacheCache=new(function(){function e(){this._caches={}}return e.prototype.all=function(){return _.values(this._caches)},e.prototype.addCache=function(e){var t;return t=this._caches[e]=new ModelCache(e),$(t).on("outOfSync",function(e){return function(){return e.dropCache(t)}}(this)),this.ensureSubscriptions(),t},e.prototype.cachesSubscribedToModel=function(e){var t,i,n,r;i=[],r=this._caches;for(n in r)t=r[n],_.any(t.getRequiredSubscriptions(),function(t){return t.idModel===e})&&i.push(t);return i},e.prototype["for"]=function(e){var t,i;return e instanceof ModelCache?e:(null==this._caches[e]&&(t=this.addCache(e),i=t.getCacheType(),__indexOf.call(ModelCache.fullCacheTypes,i)>=0&&this.copyHeaderCacheTo(t)),this._caches[e])},e.prototype.hasCache=function(e){return null!=this._caches[e]},e.prototype.rename=function(e,t){return null!=this._caches[e]?(this._caches[t]=this._caches[e],delete this._caches[e],this._caches[t].name=t,this.ensureSubscriptions()):void 0},e.prototype.copyHeaderCacheTo=function(e){var t,i,n,r,o,s,a,l;if(i=this["for"]("header")){a=i._cache,l=[];for(o in a)s=a[o],l.push(function(){var i;i=[];for(n in s)r=s[n],t=$.extend(!0,{},r.attributes),i.push(new e._collections[o].type(t,{modelCache:e}));return i}());return l}},e.prototype.dropCache=function(e){return ModelLoader.dropLoaderFor(e),e.clearAll(),delete this._caches[e.name],this.ensureSubscriptions()},e.prototype.ensureSubscriptions=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m,f;for(a=_.flatten(function(){var t,i;t=this._caches,i=[];for(r in t)e=t[r],i.push(e.getRequiredSubscriptions());return i}.call(this)),s={},c=0,d=a.length;d>c;c++)u=a[c],n=u.modelType,i=u.idModel,l=u.tags,null==s[i]&&(s[i]={tags:[],modelType:n}),(p=s[i].tags).push.apply(p,l);h=rpc.currentSubscriptions;for(i in h)m=h[i],l=m.tags,n=m.modelType,null!=(o=s[i])&&_.isEmpty(t=_.difference(l,o.tags))||rpc.unsubscribe(n,i,t);for(i in s)f=s[i],l=f.tags,n=f.modelType,null!=(o=rpc.currentSubscriptions[i])&&_.isEmpty(_.difference(l,o.tags))||rpc.subscribe(n,i,l)},e}()),window.IdCache=new(function(){function e(){this._shortLinkToId={Card:{},Board:{}},this._idCardToIdBoard={}}return e.prototype.getId=function(e,t){if(Util.checkId(t))return t;if(Util.isShortLink(t))return this._shortLinkToId[e][t];throw new Error("Not a shortLink or id: "+t)},e.prototype.setId=function(e,t,i){if(!Util.checkId(i))throw new Error("Not an id: "+i);if(!Util.isShortLink(t))throw new Error("Not a shortLink: "+t);return this._shortLinkToId[e][t]=i},e.prototype.setCardId=function(e,t){return this.setId("Card",e,t)},e.prototype.setBoardId=function(e,t){return this.setId("Board",e,t)},e.prototype.setBoardIdForCard=function(e,t){return this._idCardToIdBoard[this.getCardId(e)]=this.getBoardId(t)},e.prototype.getCardId=function(e){return this.getId("Card",e)},e.prototype.getBoardId=function(e){return this.getId("Board",e)},e.prototype.getBoardIdForCard=function(e){return this._idCardToIdBoard[this.getCardId(e)]},e}()),$(rpc).bind("updateModels",function(e,t){var i,n,r,o;for(o=ModelCacheCache.cachesSubscribedToModel(t.idModelChannel),n=0,r=o.length;r>n;n++)i=o[n],i.updateDeltas(t.typeName,t.deltas)}),$(rpc).bind("deleteModels",function(e,t){var i,n,r,o;for(o=ModelCacheCache.cachesSubscribedToModel(t.idModelChannel),n=0,r=o.length;r>n;n++)i=o[n],i.deleteDeltas(t.typeName,t.deltas)});var ApplicationView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};ApplicationView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){var e,t,i,n;this.updatePinnedDrawer(),WindowSize.ensureRun(),this.listenTo(SidebarState,"change:pinBoardsListSidebar",function(){return this.updatePinnedDrawer()}),n=function(){WindowSize.calc(),PopOver.calcPos({notNew:!0}),Layout.setSurfaceHeight(),Dialog.isVisible&&Dialog.calcPos()},e=this.debounce(n,300),$(window).on("resize.windowEvent",e),i=window.devicePixelRatio,_.isNumber(i)?(t=i>=1.5?"High":"Normal",track("Pixel Ratio",t,i)):track("Pixel Ratio","Not available"),Layout.setSurfaceHeight()},t.prototype.updatePinnedDrawer=function(){return $("body").toggleClass("pinned-drawer",SidebarState.getPinSidebar())},t}(ViewWithId);var BoardInvitation,BoardInvitationList,Invitation,InvitationList,OrganizationInvitation,OrganizationInvitationList,SelectMemberRoleView,SelectNewMemberRoleView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice;Invitation=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="Invitation",t.prototype.initialize=function(e,t){log("invitation",t),this.invitationList=t.collection,this.setReady()},t.prototype.getParent=function(){return this.invitationList.options.model},t.prototype.create=function(e){var t,i,n,r;return n=e.model,t=e.data,r=e.success,i=e.error,ApiAjax({url:"/1/"+n.typeName+"/"+n.id+"/invitations",type:"post",data:t,dataType:"json",error:function(e){return function(){var t,n,r,o,s;return r=2<=arguments.length?__slice.call(arguments,0,o=arguments.length-1):(o=0,[]),n=arguments[o++],t=r[0],"Member email restricted by organization administrators"===t.responseText.trim()?void e.$(".error").show():("Member already invited"!==(s=t.responseText.trim())&&"Member already a member"!==s&&"Member email restricted by organization administrators"!==s&&n(),"function"==typeof i?i(t):void 0)}}(this),success:function(){return function(e){return"function"==typeof r?r(e):void 0}}(this)})},t.prototype["delete"]=function(e){var t,i,n,r;return n=e.model,i=e.idInvitation,r=e.success,t=e.error,ApiAjax({url:"/1/"+n.typeName+"/"+n.id+"/invitations/"+i,type:"delete",dataType:"json",error:function(){return function(){var e,i,n,r,o;return n=2<=arguments.length?__slice.call(arguments,0,r=arguments.length-1):(r=0,[]),i=arguments[r++],e=n[0],"Invitation not found"!==(o=e.responseText.trim())&&i(),"function"==typeof t?t(e):void 0}}(this),success:function(){return function(e){return"function"==typeof r?r(e):void 0}}(this)})},t.prototype.respond=function(e){var t,i,n,r,o;return n=e.model,r=e.response,t=e.data,o=e.success,i=e.error,ApiAjax({url:"/1/"+n.typeName+"/"+n.id+"/invitations/"+r,type:"post",dataType:"json",data:t,error:function(){return function(){var e,t,n,r,o;return n=2<=arguments.length?__slice.call(arguments,0,r=arguments.length-1):(r=0,[]),t=arguments[r++],e=n[0],"already a member"!==(o=e.responseText.trim())&&t(),"function"==typeof i?i(e):void 0}}(this),success:function(){return function(e){return"function"==typeof o?o(e):void 0}}(this)})},t}(TrelloModel),InvitationList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Invitation,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return e.get("dateExpires")?-Dates.parse(e.get("dateExpires")):-1/0},t}(CollectionWithHelpers),BoardInvitation=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="BoardInvitation",t}(Invitation),BoardInvitationList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=BoardInvitation,t}(InvitationList),OrganizationInvitation=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="OrganizationInvitation",t}(Invitation),OrganizationInvitationList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=OrganizationInvitation,t}(InvitationList),SelectMemberRoleView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add As..."},t.prototype.initialize=function(){return this.parent=this.options.parent,this.member=this.model,this.isBoard=this.isOrg=!1,this.objText="",this.didSendInvite=!0,this.parent instanceof Board?(this.isBoard=!0,this.objText="Board",this.invitationList=this.parent.invitationList):this.parent instanceof Organization?(this.isOrg=!0,this.objText="Org",this.invitationList=this.parent.invitationList):void 0},t.prototype.events={"click .js-invite":"invite"},t.prototype.render=function(){var e,t,i,n,r,o;for(e={},e.showObserver=!1,e.showAdmin=this.parent.owned(this.member),this.isBoard&&(null!=(r=this.parent.getOrganization())?r.isFeatureEnabled("observers"):void 0)&&(e.showObserver=!0),o=["admin","normal","observer"],i=0,n=o.length;n>i;i++)t=o[i],e["roleText_"+t]=this.parent.getRoleText(t);return this.$el.html(templates.fill("manage_members_select_role",e)),this},t.prototype.invite=function(e){var t,i,n,r,o,s,a;Util.stop(e),o=$(e.target).closest(".js-invite"),r=null,$(o).hasClass("js-select-admin")?r="Admin":$(o).hasClass("js-select-member")?r="Member":$(o).hasClass("js-select-observer")&&(r="Observer"),n=!1,this.isBoard&&(i=_.pluck(null!=(a=this.parent.organization)?a.memberList.models:void 0,"id"),n=_.include(i,this.member.id)),t={},t.type="Member"===r?"normal":r.toLowerCase(),ApiAjax({url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.member.id,type:"put",data:t,dataType:"json",success:function(){return function(){return track("Invitations","Add Member to Board","Role: "+r)}}(this),error:function(){return function(e){Alerts.show(e.responseText,"error","alert",3e3),track("Invitations","Error: "+e.responseText)}}(this)}),"function"==typeof(s=this.options).onSendInvite&&s.onSendInvite(),this.options.onSendInvite=null,PopOver.hide()},t}(ViewWithId),SelectNewMemberRoleView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.invite=function(e){var t,i,n;Util.stop(e),n=$(e.target).closest(".js-invite"),i=null,$(n).hasClass("js-select-admin")?i="Admin":$(n).hasClass("js-select-member")?i="Member":$(n).hasClass("js-select-observer")&&(i="Observer"),t={},t.email=this.options.email,t.type="Member"===i?"normal":i.toLowerCase(),Invitation.prototype.create.call(this,{model:this.parent,data:t,success:function(e){return function(){return track("Invitations","Send Email "+e.objText+" Invite to New Member","Role: "+i)}}(this)}),PopOver.popView()},t}(SelectMemberRoleView);var ActivityMemberMenuView,BoardMemberMenuView,CardMemberMenuView,LargeAvatarView,MemberMiniProfileView,MemberOnBoardView,MemberOnNotificationView,MemberOnSomethingView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};MemberOnSomethingView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="member",t.prototype.events={click:"showMenu"},t.prototype.initialize=function(){var e,t;this.enablePopupMenu=!0,this.showStatus=!0,this.model&&(this.enablePopupMenu=null!=(e=this.options.enablePopupMenu)?e:!0,this.options.goToBoardProfile&&(this.goToBoardProfile=!0),this.showStatus=null!=(t=this.options.showStatus)?t:!0,this.listenTo(this.model,"change",this.render)),this.showBoardAdmin&&this.listenTo(this.getBoard(),"change:memberships",this.render),this.showOrganizationAdmin&&this.listenTo(this.getOrganization(),"change:memberships",this.render)},t.prototype.render=function(){var e,t,i,n,r,o;return this.model?(log("render","rendering "+this.constructor.name+" "+this.model.get("fullName")),e=this.model.toJSON(),e.showStatus=this.showStatus&&rpc.isUsingSocket(),e["status_"+e.status]=!0,e.url=Controller.getMemberProfileUrl(e.id),t=function(e){return function(t){var i;return i=t.getMembershipFor(e.model),"admin"===(null!=i?i.memberType:void 0)}}(this),this.showBoardAdmin&&(e.isBoardAdmin=t(this.getBoard())||("function"==typeof this.getBoard&&null!=(n=this.getBoard().getOrganization())?n.isPremOrgAdmin(this.model):void 0)),e.isGhost="ghost"===this.model.get("memberType"),this.showOrganizationAdmin&&(e.isOrganizationAdmin=t(this.getOrganization())),i=null!=(r="function"==typeof this.getOrganization?this.getOrganization():void 0)?r:"function"==typeof this.getBoard?this.getBoard():void 0,i&&i.isDeactivated(this.model)&&(e.isDeactivated=!0,e.showStatus=!1),i&&i.isUnconfirmed(this.model)&&(e.showStatus=!1)):e={deleted:!0},this.$el.html(templates.fill("member",e)),this.model.isFeatureEnabled("crown")&&this.$el.addClass("has-crown"),this.enablePopupMenu||this.$el.addClass("member-no-menu"),e.isDeactivated&&this.$el.addClass("member-deactivated"),e.isGhost&&this.$el.addClass("member-virtual"),this.$el.data("id",null!=(o=this.model)?o.id:void 0),this},t.prototype.showMenu=function(e){var t,i;if((this.doClicks()&&this.enablePopupMenu||this.goToBoardProfile)&&this.model){if(Util.stop(e),this.goToBoardProfile&&(t=this.getBoard()))return void this.model.viewBoardProfile(this.getBoard());if(this.options.goToProfile)return void Controller.memberProfileView(this.model.get("username"));i=$(e.target).closest(".member"),PopOver.toggle({elem:i,top:i.hasClass("member")?35:16,view:this.getMenuView()})}},t.prototype.doClicks=function(){return!DragSort.sorting},t}(ViewWithId),MemberMiniProfileView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.debounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.displayType="miniprofile",t.prototype.delegateEvents=function(e){var i;return i={"click .js-profile":"showProfile","click .js-edit-profile":"editProfile","click .js-view-large":"viewLarge","click .js-change-av":"changeAvatar"},t.__super__.delegateEvents.call(this,_.extend(i,e||this.events))},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.isMe=Auth.isMe(this.model),e.showEmail=null!=e.email&&!e.isMe,null!=e.email||"ghost"!==this.model.get("memberType")||this.loaded||this.loadEmail(),this.$el.html(templates.fill("mini_profile",e,{},{member:templates.member})),this.renderMenu(),this},t.prototype.loadEmail=function(){return ModelLoader["for"](this.modelCache).loadMemberEmail(this.model.id,function(e){return function(){return e.loaded=!0}}(this))},t.prototype.showProfile=function(){track("Mini Profile","Click Profile")},t.prototype.editProfile=function(){track("Mini Profile","Click Edit Profile"),PopOver.pushView({view:new ChangeUserInfoPopoverView({model:this.model,modelCache:this.modelCache})})},t.prototype.viewLarge=function(){track("Mini Profile","View Large Avatar"),PopOver.pushView({view:new LargeAvatarView({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAvatar=function(){track("Mini Profile","Change Avatar"),PopOver.pushView({view:new ChangeAvatarPopoverView({model:this.model,modelCache:this.modelCache})})},t}(ViewWithId),LargeAvatarView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Avatar"},t.prototype.displayType="avdetail",t.prototype.events={"click .js-profile":"showProfile"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(templates.fill("member_large_avatar",e)),_.delay(function(){return function(){return PopOver.calcPos()}}(this),150),this
},t.prototype.showProfile=function(){track("Mini Profile","Large Avatar - Click Profile")},t}(ViewWithId),MemberOnNotificationView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getMenuView=function(){return this.subview(ActivityMemberMenuView,this.model)},t}(MemberOnSomethingView),ActivityMemberMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.renderMenu=function(){},t}(MemberMiniProfileView),CardMemberMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-remove-member":"removeMember"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.card=this.options.card},t.prototype.renderMenu=function(){return this.$el.append(templates.fillMenu("member_on_card_menu",this.model.toJSON(),{editable:this.card.editable()})),this},t.prototype.removeMember=function(){var e;PopOver.hide(),e=this.model.id,this.card.removeMember(e)},t}(MemberMiniProfileView),MemberOnBoardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.showBoardAdmin=!0,t.prototype.getBoard=function(){return this.options.parent},t.prototype.getMenuView=function(){return new BoardMemberMenuView({board:this.options.parent,model:this.model,modelCache:this.modelCache})},t}(MemberOnSomethingView),BoardMemberMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="board-member-menu",t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board,"change:prefs",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-remove-member":"removeMember","click .js-change-role":"changeRole"},t.prototype.renderMenu=function(){var e,t,i;return e=_.extend(this.model.toJSON(),"function"==typeof(t=this.board).premiumFeatures?t.premiumFeatures():void 0,this.model.getMembershipData(this.board)),e.boardProfileUrl=Controller.getMemberBoardProfileUrl(this.model.get("username"),this.board.id),e.type=null,e.memberIsVirtual?(e.type="Virtual",e.isGhost=!0):this.board.isDeactivated(this.model)?(e.type="Deactivated",e.canChangeRole=!1):(null!=(i=this.board.getOrganization())?i.isPremOrgAdmin(this.model):void 0)?(e.type="Admin",e.canChangeRole=!1):e.memberIsAdmin?e.type="Admin":e.memberIsNormal?e.type="Normal":e.memberIsObserver&&(e.type="Observer"),this.$el.append(templates.fillMenu("member_on_board_menu",e,{editable:this.board.editable(),owned:this.board.owned()})),this},t.prototype.changeRole=function(){PopOver.pushView({view:new ChangeRolePopoverView({model:this.model,parent:this.board,modelCache:this.modelCache})})},t.prototype.removeMember=function(e){Util.stop(e),Confirm.pushView(_.extend(this.model.removeMembershipConfirmation(this.board),{fxConfirm:function(e){return function(){return e.board.removeMember(e.model),PopOver.hide()}}(this)}))},t}(MemberMiniProfileView);var CardFilter,CardFilterView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},__slice=[].slice;CardFilter=function(e){function t(e,i){this.board=e,t.__super__.constructor.call(this,null,i),this.board.onId(function(e){return function(t){return e.set({id:"boardCardFilterSettings-"+t}),e.fetch(),e._resetNewCards()}}(this)),this.dueMap={day:1,week:7,month:28,overdue:0},this.newCardsWithoutIds=[],this.listenTo(this,"change:title change:labels change:idMembers change:due",this._resetNewCards)}return __extends(t,e),t.prototype["default"]=function(){return{idMembers:[],labels:[],title:null,due:null,limitMembers:!0,newCards:[]}},t.prototype.clear=function(){return this.save(this["default"]())},t.prototype.getBoard=function(){return this.board},t.prototype._resetNewCards=function(){return this.newCardsWithoutIds=[],this.save("newCards",[])},t.prototype.toggleQuietMode=function(){var e,t,i,n,r;if(e=Auth.myId(),null!=e){n=this["default"](),n.idMembers=[e],t=!0;for(i in n)r=n[i],t&&(t=_.isEqual(this.get(i),r));return t?this.clear():this.save(n)}},t.prototype.toggleLabel=function(e){return this.toggle("labels",e)},t.prototype.toggleMember=function(e){return this.toggle("idMembers",e)},t.prototype.isFiltering=function(){var e;return _.some([!_.isEmpty(this.get("idMembers")),!_.isEmpty(this.get("labels")),null!=(e=this.get("title"))?e.trim():void 0,null!=this.get("due")])},t.prototype.satisfiesFilter=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y;if(null==e)return!1;if(e.get("closed"))return!0;if(f=e.id,__indexOf.call(null!=(g=this.get("newCards"))?g:[],f)>=0||__indexOf.call(this.newCardsWithoutIds,e)>=0)return!0;for(b=["labels","idMembers"],p=0,m=b.length;m>p;p++)if(o=b[p],!_.isEmpty(this.get(o))&&_.isEmpty(_.intersection(this.get(o),e.get(o))))return!1;if(null!=this.get("due")){if(n=e.get("due"),null==n)return!1;switch(a=new Date,this.get("due")){case"overdue":if(Dates.parse(n)>=a)return!1;break;default:if(!(a<=(v=Dates.parse(n))&&v<=a.addDays(this.dueMap[this.get("due")])))return!1}}return c=this.get("title"),null==c||(r=function(e){return _.compact(e.toLowerCase().split(/[\s\x21\x22\x24-\x26\x28-\x2C\x2F\x3A-\x3F\x5B-\x60\x7B-\x7F]+/))},d=r(c),_.isEmpty(d)||(s=null!=e.get("idShort")?r(null!=(y=e.get("idShort"))?y.toString():void 0):[],t=_.flatten([r(e.get("name")),s]),i=2<=d.length?__slice.call(d,0,h=d.length-1):(h=0,[]),l=d[h++],!_.isEmpty(i)&&!_.isEmpty(_.intersection(i,t))||(u=function(e){return e.substring(0,l.length)===l},_.any(t,u))))?!0:!1},t.prototype.addNewCard=function(e){return this.newCardsWithoutIds.push(e),e.onId(function(t){return function(i){return t.newCardsWithoutIds=_.without(t.newCardsWithoutIds,e),t.addToSet("newCards",i)}}(this))},t.prototype.toJSON=function(e){var i,n,r,o,s,a,l,c,d,u,p;return u=null!=e?e:{},i=u.board,r=u.expanded,o=t.__super__.toJSON.apply(this,arguments),i&&(o.board=this.board.toJSON()),r&&(c=null!=(p=this.get("title"))?p:"",a=RegExp("^"+Util.escapeForRegex(c),"i"),s=this.board.toJSON({labelNames:!0}).labelNames,o.labels=function(){var e,t,i,r;for(i=Util.labelNames,r=[],e=0,t=i.length;t>e;e++)n=i[e],r.push({labelName:s[n],color:n,isActive:__indexOf.call(this.get("labels"),n)>=0,matchesFilter:""!==c&&(a.test(n)||a.test(s[n]))});return r}.call(this),o.members=function(){var e,t,i,n,r,o;for(i=this.board.memberList.models,o=[],e=0,t=i.length;t>e;e++)l=i[e],o.push(_.extend(l.toJSON(),{isActive:(n=l.id,__indexOf.call(null!=(r=this.get("idMembers"))?r:[],n)>=0),matchesFilter:""!==c&&("me"===c&&Auth.isMe(l)||_.any(Util.getMemNameArray(this.modelCache,l.id),function(e){return a.test(e)}))}));return o}.call(this),o.members=Util.sortMembers(o.members),o.dueOptions=function(){var e,t,i,n;for(i=_.keys(this.dueMap),n=[],e=0,t=i.length;t>e;e++)d=i[e],n.push({time:d,desc:"overdue"===d?"Overdue":"Due in the next "+d,isActive:d===this.get("due")});return n}.call(this)),o},t}(LocalStorageModel),CardFilterView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Filter Cards"},t.viewName="CardFilterView",t.prototype.className="board-widgets-content fancy-scrollbar",t.prototype.initialize=function(){return this.listenTo(this.model.board,"change:labelNames change:memberships",this.renderFilterOptions),this.listenTo(this.model,"change",this.renderFilterOptions)},t.prototype.events={"click .js-toggle-label-filter":"toggleLabelFilter","click .js-select-member":"toggleMemberFilter","click .js-show-all-members":"showAllMembers","click .js-clear-all":"clearFilter","click .js-due-filter":"toggleDateFilter","mouseenter .item":"hoverSelect","mouseenter .js-clear-all":"clearAllSelected","mouseenter .js-show-all-members":"clearAllSelected","keydown .js-input":"keyDownEvent","keyup .js-input":"keyUpEvent"},t.prototype.render=function(){var e;return this.isFiltering=!1,e=this.model.toJSON(),this.$el.html(templates.fill("filter_cards",e)),this.renderFilterOptions(),this},t.prototype.renderFilterOptions=function(){var e,t,i,n,r,o,s,a,l,c,d,u;if(t=this.model.toJSON({board:!0,expanded:!0}),n=_.any(t.labels,function(e){return e.matchesFilter}),r=_.any(t.members,function(e){return e.matchesFilter}),i=this.model.get("title")&&(n||r),null!=(d=this.model.get("limitMembers"))?d:!0)for(e=0,o=0,u=t.members,s=l=0,c=u.length;c>l;s=++l)a=u[s],(!i||i&&a.matchesFilter)&&(e++,e>6&&(a.exceedsLimit=!0,o++));return t.remainingMemsCount=o,t.limitMembers=o>0,_.extend(t,{filtering:i,showHelper:!i,showClearAll:!i,showLabels:!i||n,showMembers:!i||r,showDueTimes:!i}),t.isFiltering=this.model.isFiltering(),this.$(".js-filter-search-results").html(templates.fill("filter_cards_search_results",t,{},{member:templates.member,select_member:templates.select_member})),i&&this.selectFirstItem(),null===this.model.get("title")&&this.$(".js-input").val(""),this},t.prototype.keyDownEvent=function(e){var t,i,n;t=this.$(".item.selected").first(),0===t.length&&(i=this.$(".item.matches-filter"),1===i.length&&(t=i)),e.keyCode===Key_Escape||(e.keyCode===Key_Enter?t.find("a").click():((n=e.keyCode)===Key_Arrow_Up||n===Key_Arrow_Down)&&Util.navMenuList(t.parent(),".item",e.keyCode))},t.prototype.keyUpEvent=function(e){var t;if((t=e.keyCode)!==Key_Escape&&t!==Key_Enter&&t!==Key_Arrow_Up&&t!==Key_Arrow_Down)return this.model.save({title:this.$(".js-input").val(),limitMembers:!0})},t.prototype.showAllMembers=function(){this.model.save("limitMembers",!1)},t.prototype._clearAndFocusInput=function(){return this.model.save({title:""}),this.$(".js-input").val("").focus()},t.prototype.toggleLabelFilter=function(e){var t;return t=this.model.toJSON({expanded:!0}),_.any(t.labels,function(e){return e.matchesFilter})&&this._clearAndFocusInput(),this.model.toggleLabel($(e.target).closest("a").attr("name"))},t.prototype.toggleMemberFilter=function(e){var t;return t=this.model.toJSON({expanded:!0}),_.any(t.members,function(e){return e.matchesFilter})&&this._clearAndFocusInput(),Util.stop(e),this.model.toggleMember($(e.target).closest("a").attr("idMember"))},t.prototype.toggleDateFilter=function(e){var t;return t=$(e.target).closest("a").attr("time"),this.model.get("due")===t?this.model.save("due",null):this.model.save("due",t)},t.prototype.clearFilter=function(){return this.model.clear()},t.prototype.clearAllSelected=function(){return this.$("li").removeClass("selected")},t.prototype.hoverSelect=function(e){return this.clearAllSelected(),Util.selectMenuItem($(e.target).closest("ul"),".item",$(e.target).closest(".item"))},t.prototype.selectFirstItem=function(){return Util.selectMenuItem(this.$(".js-filter-search-results ul:visible:first"),".item:visible",$(".item:visible:first"))},t}(ViewWithId);var BoardList,BoardListItemView,BoardListSearchItemView,BoardListSectionView,MemberOrgBoardsListSectionView,MyBoardsListSectionView,OrgMyBoardListView,OrgOtherPrivateBoardListView,OtherOrgBoardListView,StarredBoardsListSectionView,VisibleOrgBoardsListView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};BoardList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Board,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t,i,n;return i=e.getOrganization(),n=(null!=i?i.get("displayName"):void 0)||"",t=e.get("name")||"",Util.rpad(n,64).toUpperCase()+t.toUpperCase()},t}(CollectionWithHelpers),BoardListSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150),this.initedSortable=!1,this.listenTo(this.model.boardList,"add remove reset",this.renderBoards)},t.prototype.events={"click .js-add-board":"createBoard"},t.prototype.className="window-module",t.prototype.getBoards=function(){return[]},t.prototype.hideSectionIfEmpty=function(){return!1},t.prototype.showOrgName=function(){return!1},t.prototype.showAddBoard=function(){return!0},t.prototype.getTemplateData=function(){return{}},t.prototype.postRenderBoardsEvent=function(){},t.prototype.render=function(){var e;return e=this.getTemplateData(),this.$el.html(templates.fill("board_list",e)),this.renderBoards(),this.debouncedPostRenderBoardsEvent(),this},t.prototype.renderBoards=function(){var e,t,i;return e=this.$(".js-board-list").empty(),this.$el.removeClass("hide"),this.getBoards().length>0?(i=function(){var e,i,n,r;for(n=this.getBoards(),r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(this.subview(BoardListItemView,t,{showOrgName:this.showOrgName()}));return r}.call(this),this.appendSubviews(i,e)):this.hideSectionIfEmpty()?this.$el.addClass("hide"):this.showAddBoard()||e.append("<p class='quiet' style='padding: 8px 12px;'>No boards.</p>"),this.showAddBoard()&&e.append(templates.fill("board_list_item_add")),this},t.prototype.createBoard=function(e){var t,i;Util.stop(e),t=null!=(i=this.options.organization)?i:null,PopOver.toggle({elem:this.$(".js-add-board"),top:0,view:CreateBoardView,options:{model:this.model,modelCache:this.modelCache,organization:t}})},t}(ViewWithId),MyBoardsListSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getBoards=function(){var e;return e=function(e){return function(t){var i,n;return i=null!=(n=t.getOrganization())?n.id:void 0,null!=i&&__indexOf.call(e.model.get("idOrganizations"),i)>=0}}(this),_.filter(this.model.boardList.models,function(t){return!e(t)&&!t.get("closed")})},t.prototype.getTemplateData=function(){return{title:"My Boards",iconClass:"member"}},t}(BoardListSectionView),StarredBoardsListSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.renderBoards()})},t.prototype.hideSectionIfEmpty=function(){return!0},t.prototype.showOrgName=function(){return!0},t.prototype.showAddBoard=function(){return!1},t.prototype.getBoards=function(){return _.filter(this.model.boardStarList.getBoards(),function(e){return!e.get("closed")})},t.prototype.getTemplateData=function(){return{title:"Starred Boards",iconClass:"star"}},t.prototype.postRenderBoardsEvent=function(){var e;return Browser.isTouch()?void 0:(e=this.$(".js-board-list"),this.initedSortable?DragSort.refreshIfInitialized(e):(this.initedSortable=!0,e.sortable({containment:"#surface",delay:"75",distance:"7",forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",scroll:!0,stop:function(e,t){_.defer(function(e){return function(){return t.item.trigger("moveto",[t,e])}}(this))},tolerance:"pointer"})))},t}(BoardListSectionView),MemberOrgBoardsListSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.getOrganization(),"change:name change:displayName change:logoHash",this.render)},t.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(e){return function(t){var i;return(null!=(i=t.getOrganization())?i.id:void 0)===e.getOrganization().id&&!t.get("closed")}}(this))},t.prototype.getOrganization=function(){return this.options.organization},t.prototype.getTemplateData=function(){var e,t;return t=this.getOrganization(),e=t.toJSON(),e.title=t.get("displayName"),e.iconClass="org",e.url=Controller.getOrganizationUrl(t),e.hasBusinessClass=t.isPremium(),e},t}(BoardListSectionView),VisibleOrgBoardsListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(e){var t;return"public"===(t=e.getPref("permissionLevel"))&&!e.get("closed")})},t.prototype.getTemplateData=function(){return{title:"Boards",iconClass:"board"}},t}(BoardListSectionView),OrgMyBoardListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(e){return function(t){return null!=e.Auth.me().boardList.get(t.id)&&!t.get("closed")}}(this))},t.prototype.getTemplateData=function(){return{title:"My Org Boards",iconClass:"board"}},t}(BoardListSectionView),OtherOrgBoardListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(e){return function(t){var i;return null==e.Auth.me().boardList.get(t.id)&&("org"===(i=t.getPref("permissionLevel"))||"public"===i)&&!t.get("closed")}}(this))},t.prototype.getTemplateData=function(){return{title:"Other Org-Visible Boards",iconClass:"board"}},t}(BoardListSectionView),OrgOtherPrivateBoardListView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.showAddBoard=function(){return!1},t.prototype.getBoards=function(){return _.filter(this.model.boardList.models,function(e){return function(t){var i;return null==e.Auth.me().boardList.get(t.id)&&"private"===(i=t.getPref("permissionLevel"))&&!t.get("closed")}}(this))},t.prototype.getTemplateData=function(){return{title:"Other Members’ Private Boards",iconClass:"board"}},t}(BoardListSectionView),BoardListItemView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.tagName="li",t.prototype.initialize=function(){var e;return this.listenTo(this.model,"change:prefs change:name change:idOrganization change:actionsCount",this.debounce(this.render)),this.listenTo(Auth.me().boardStarList,"add remove reset change:pos",function(){return this.renderStarred()}),this.listenTo(this.model,"change:dateLastActivity change:dateLastView",this.debounce(this.renderUnread)),(null!=(e=this.options)?e.showOrgName:void 0)?(this.listenTo(this.model,"change:idOrganization",function(e){return function(){var t;return t=e.Organization.get(e.model.previous("idOrganization")),null!=t&&e.stopListening(t,"change:displayName"),e.listenToOrgNameChange(),e.render()}}(this)),this.listenToOrgNameChange()):void 0},t.prototype.listenToOrgNameChange=function(){return null!=this.model.getOrganization()?this.listenTo(this.model.getOrganization(),"change:displayName",this.render):void 0},t.prototype.events={"click .js-open-board":"openBoard","click .js-star-board":"starBoard",moveto:"moveTo"},t.prototype.render=function(){var e,t,i,n,r,o;return t=this.model.toJSON({prefs:!0}),t.url=Controller.getBoardUrl(this.modelCache,this.model),this.model.getPref("backgroundTile")?(t.backgroundTile=!0,t.backgroundImageThumbnail=this.model.getPref("backgroundImage")):t.backgroundImageThumbnail=null!=(i=null!=(n=Util.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?n.url:void 0)?i:this.model.getPref("backgroundImage"),t.backgroundImageThumbnailUrl="url('"+t.backgroundImageThumbnail+"')",null==t.backgroundImageThumbnail&&(t.backgroundColor=this.model.getClientBackgroundColor("blue")),null!=this.model.getPref("backgroundColor")&&(e=this.model.getPref("background"),t.backgroundColor=this.model.getClientBackgroundColor(e)),t.backgroundBrightness=this.model.getPref("backgroundBrightness"),(null!=(r=this.options)?r.showOrgName:void 0)&&(t.orgname=null!=(o=this.model.getOrganization())?o.get("displayName"):void 0),this.$el.html(templates.fill("board_list_item",t)),this.renderStarred(),this.renderUnread(),this},t.prototype.trackBoardClick=function(){return track("Member View","Boards Page","Opened Board")},t.prototype.openBoard=function(){return _.defer(function(){return SidebarState.getPinSidebar()?void 0:SidebarState.hideSidebar()}),this.trackBoardClick()},t.prototype.starBoard=function(e){var t,i;Util.stop(e),i=this.model.id,t=this.Auth.me().boardStarList,null==t.getBoardStar(i)?t.starBoard(i):t.unstarBoard(i)},t.prototype.renderUnread=function(){var e;return e=this.model.hasUnseenActivity()&&!Controller.onBoardView(this.model.id),this.$(".js-unread").toggleClass("any",e),this.$el.toggleClass("has-unread-activity",e),this},t.prototype.moveTo=function(e,t){var i,n;n=t.item.closest(".js-board-list").find("li"),i=n.index(t.item),Auth.me().boardStarList.updateStarBoard(this.model.id,i)},t.prototype.renderStarred=function(){return null!=Auth.me().boardStarList.getBoardStar(this.model.id)?(this.$el.addClass("starred"),this.$(".icon-star").addClass("icon-star-active")):(this.$el.removeClass("starred"),this.$(".icon-star").removeClass("icon-star-active")),this},t}(ViewWithId),BoardListSearchItemView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={mouseenter:"select",mouseleave:"deselect"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,_.extend({},BoardListItemView.prototype.events,e||this.events))},t.prototype.select=function(){return this.$el.addClass("selected")},t.prototype.deselect=function(){return this.$el.removeClass("selected")},t.prototype.trackBoardClick=function(){return track("Search","Select Board")},t}(BoardListItemView);var BoardActivityView,BoardMembersView,BoardOrgMemberView,BoardOrgSelectPermLevelView,BoardSelectOrganizationForPermChangeView,BoardSelectOrganizationView,BoardSettingsView,BoardSidebarDefaultView,BoardSidebarView,ChangeBoardAddMemberPermsView,ChangeBoardBackgroundView,ChangeBoardCommentingPermsView,ChangeBoardPermsView,ChangeBoardVisibilityView,CustomBackgroundOptionsView,EditEmailSettingsView,EditLabelsView,RenameBoardView,SelectBackgroundView,SelectCustomBackgroundView,StickerPickerView,_BoardActivityView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};BoardSidebarView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){UserInput.addHandler(this,{scope:"board_sidebar"}),this.defaultView=this.subview(BoardSidebarDefaultView,this.model,{sidebarView:this}),this.viewStack=["default"]},t.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popWidgetView",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case Key_F:return this.showSubview("filter"),"F - Search and Filter Cards"}},t.prototype.render=function(){return this.$el.html(templates.fill("board_sidebar")),this.renderWidget(),this},t.prototype.sidebarSubviews=function(){return{"default":BoardSidebarDefaultView,filter:CardFilterView,archive:CardAndListArchiveView,stickers:StickerPickerView,settings:BoardSettingsView,background:ChangeBoardBackgroundView}},t.prototype.hackySidebarLifetimeEvents={archive:{didPush:function(e){return e.getData()}},filter:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],Util.setCaretAtEnd(t)}}},t.prototype.showSubview=function(e){var t,i,n,r,o,s,a,l,c,d,u;return o=this.viewNamed(e),i=null!=(s=null!=(a=this.hackySidebarLifetimeEvents)&&null!=(l=a[e])?l.didPush:void 0)?s:function(){},t=null!=(c=null!=(d=this.hackySidebarLifetimeEvents)&&null!=(u=d[e])?u.didBecomeVisible:void 0)?c:function(){},n=o===this.topSidebarView(),r=this.model.viewState.get("showSidebar"),r?n?t(o):$(".board-widgets-content").one("transitionend webkitTransitionEnd",function(){return function(){return t(o)}}(this)):$(".board-widgets").one("transitionend webkitTransitionEnd",function(){return function(){return t(o)}}(this)),n||(this.replaceWidgetViewNamed(e),i(o)),r?void 0:this.model.viewState.setShowSidebar(!0)},t.prototype.viewNamed=function(e){var t,i;if("default"===e)return this.defaultView;if(i=_.result(this,"sidebarSubviews")[e],null==i)throw new Error("Unknown sidebar view "+e);return t="filter"===e?this.model.filter:this.model,this.subview(i,t)},t.prototype.topSidebarView=function(){return this.viewNamed(_.last(this.viewStack))},t.prototype.renderWidget=function(e){var t,i,n,r,o,s,a;return n=this.$(".board-widgets-title"),r=n.find(".text").empty(),i=this.$(".board-widgets-content-wrapper").empty(),s=this.topSidebarView(),this.forceIntoDom(),this.model.viewState.setSidebarDisplayType(null!=(a=s.displayTypeClass)?a:""),t=s.render().$el,null!=e&&t.addClass(e),null!=s.getViewTitle?(n.addClass("in-frame"),r.append("function"==typeof s.getViewTitle?s.getViewTitle():void 0)):n.removeClass("in-frame"),i.append(t),this.setSidebarContentHeight(),t.scrollTop(0),o=this.$(".js-autofocus")[0],null!=o&&this.model.viewState.get("showSidebar")&&!Browser.isTouch()&&(null!=e?$(".board-widgets-content").one("transitionend webkitTransitionEnd",function(){return function(){return Util.setCaretAtEnd(o)}}(this)):Util.setCaretAtEnd(o)),null!=e&&t.removeClass(e),s.delegateEvents(),this},t.prototype.replaceWidgetViewNamed=function(e){this.viewStack=["default"],this.pushWidgetViewNamed(e)},t.prototype.pushWidgetViewNamed=function(e){this.viewStack.push(e),this.renderWidget("right-of-frame"),PopOver.hide()},t.prototype.popWidgetView=function(){1!==this.viewStack.length&&(this.viewStack.pop(),this.renderWidget("left-of-frame"),PopOver.hide())},t.prototype.hideSidebar=function(){return this.model.viewState.setShowSidebar(!1)},t.prototype.setSidebarContentHeight=function(){var e;return e=$(window).height()-$("#header").outerHeight()-$(".board-widgets-title:visible").outerHeight()-20,this.$(".board-widgets-content").height(this.viewStack.length>1?e:e+10),this.defaultView.calcActionsHeight()},t}(ViewWithId),BoardSidebarDefaultView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.viewName="BoardSidebarDefaultView",t.prototype.className="board-widgets-content default fancy-scrollbar",t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.collapseWidgetNav=!0,this.makeDebouncedMethods("render"),this.listenTo(this.model.memberList,{"change:status":this.renderMembers,"add remove reset":this.renderDebounced}),this.listenTo(this.model,{"change:memberships":this.renderDebounced,"change:subscribed":this.renderSubscribeState,"change:prefs:canInvite":this.renderDebounced,"change:prefs.selfJoin":this.renderDebounced,"change:prefs.invitations":this.renderDebounced}),this.actionListView=this.collectionSubview(ActionListView,new ActionList([],{modelCache:this.modelCache}),{renderOpts:{limit:10,context:this.model,compact:!0,excludeTypes:["copyCommentCard"]}}),this.model.onId(function(e){return function(){return e.listenTo(e.modelCache,"add:Action:"+e.model.id+" remove:Action:"+e.model.id+" change:Action:"+e.model.id,function(){return e.actionListView.collection.reset(e.Action.getListForModel(e.model))}),e.actionListView.collection.reset(e.Action.getListForModel(e.model))}}(this))},t.prototype.events={"click .js-toggle-widget-nav":"toggleWidgetNav","click .js-open-card-filter":"showCardFilter","click .js-open-stickers":"openStickers","click .js-open-settings":"openSettings","click .js-open-archive":"openArchivedItems","click .js-open-power-ups":"showPowerUps","click .js-join-board":"joinBoard","click .js-change-background":"changeBackground","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-share":"shareBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-open-manage-board-members":"openAddMembers","click .js-show-observers":"showObservers","click .js-view-all-activity-list":"viewAllActivityList"},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l;return this.$(".board-widgets-title").hide(),i=Auth.me(),t=this.model.toJSON(),t.canJoin=this.model.canJoin(),t.canInviteMembers=this.model.canInviteMembers(),t.confirmed=i.get("confirmed"),t.collapseWidgetNav=this.collapseWidgetNav,n=this.model.getOrganization(),(this.model.owned()||(null!=n?n.isFeatureEnabled("superAdmins"):void 0)&&(null!=n?n.owned():void 0))&&(t.canCloseBoard=!0),t.canLeaveBoard=("normal"===(r=this.model.getExplicitMemberType(i))||"admin"===r||"observer"===r)&&i.getMembershipData(this.model).canRemove,null!=(null!=(o=Backgrounds[this.model.getPref("background")])?o.tile:void 0)?t.backgroundImageUrl=this.model.getPref("backgroundImage"):null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")?t.backgroundImageUrl=null!=(s=null!=(a=null!=(l=Util.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400))?l.url:void 0)?a:this.model.get("fullSizeUrl"))?s:this.model.getPref("backgroundImage"):t.backgroundColor=this.model.getClientBackgroundColor(null!=this.model.getPref("backgroundColor")?this.model.getPref("background"):"blue"),this.$el.html(templates.fill("board_widget_default",t,{editable:this.model.editable(),owned:this.model.owned()})),null!=(e=Ads.boardMenuAd(i,this.model))&&this.$(".js-ad").html(this.subview(e,this.model).render().el),this.actionListView.setElement(this.$(".js-sidebar-list-actions")[0]),this.renderMembers(),this.renderActions(),this.calcActionsHeight(),this.renderSubscribeState(),this},t.prototype.renderSubscribeState=function(){var e;e=this.model.toJSON(),this.$(".js-subscribed-state").html(templates.fill("board_menu_subscribed_state",e))},t.prototype.calcActionsHeight=function(){var e,t,i,n,r,o,s;if(i=$("#board").height(),0!==i){for(e=this.$(".board-widget:not(.board-widget-activity)"),r=0,o=0,s=e.length;s>o;o++)n=e[o],r+=$(n).outerHeight()+8;return t=i-r,200>t||WindowSize.fSmall?(this.$el.addClass("short"),t=""):this.$el.removeClass("short"),this.$(".board-actions-list").css({"max-height":t})}},t.prototype.toggleWidgetNav=function(e){var t;Util.stop(e),PopOver.hide(),track("Board View","Board Menu","Toggle Widget Nav"),t=this.$(".js-toggle-widget-nav").closest(".board-widget"),t.hasClass("collapsed")?(t.removeClass("collapsed"),this.collapseWidgetNav=!1):(t.addClass("collapsed"),this.collapseWidgetNav=!0),this.calcActionsHeight()},t.prototype.renderMembers=function(){var e,t,i;return e=this.$(".js-list-board-members").empty(),i=function(){var e,i,n,r;for(n=this.model.orderedVisibleMembers(),r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(this.subview(MemberOnBoardView,t,{parent:this.model}));return r}.call(this),this.appendSubviews(i,e),this.renderObservers(),_.defer(function(){return DragSort.refreshDraggable()}),this},t.prototype.renderObservers=function(){var e,t,i,n;return e=this.$(".js-list-observers"),i=this.model.getObserverList(),n=i.length,t={count:Util.formatCount(n,"Observer")},n>0?e.html(templates.fill("board_observer_count",t)):e.empty(),this},t.prototype.showObservers=function(e){Util.stop(e),track("Board View","Show Observers"),PopOver.toggle({elem:this.$(".js-show-observers"),top:30,view:BoardObserversView,options:{model:this.model},shown:function(){return DragSort.refreshDraggable()}})},t.prototype.renderActions=function(){return this.actionListView.render(),this},t.prototype.showCardFilter=function(e){Util.stop(e),track("Board View","Board Menu","Open Card Filter Menu"),this.sidebarView.showSubview("filter")
},t.prototype.openStickers=function(e){Util.stop(e),track("Board View","Board Menu","Open Stickers"),this.sidebarView.showSubview("stickers")},t.prototype.openSettings=function(e){Util.stop(e),track("Board View","Board Menu","Open Settings"),this.sidebarView.showSubview("settings")},t.prototype.changeBackground=function(e){Util.stop(e),track("Board View","Board Menu","Change Background"),this.sidebarView.showSubview("background")},t.prototype.openArchivedItems=function(e){Util.stop(e),track("Board View","Board Menu","Open Archived Items"),this.sidebarView.showSubview("archive")},t.prototype.joinBoard=function(e){return track("Board View","Join Board via Sidebar"),Util.preventDefault(e),this.$(".board-widget .js-join-board").closest(".board-widget").remove(),this.model.joinBoard(),!1},t.prototype.openAddMembers=function(e){var t;Util.stop(e),track("Board View","Add Members via Sidebar Button"),t=new BoardMembersView({model:this.model,modelCache:this.modelCache}),t.getOrgData(),PopOver.toggle({elem:$(e.target).closest(".js-open-manage-board-members"),top:35,view:t})},t.prototype.viewAllActivityList=function(e){Util.stop(e),track("Board View","View All Board Activity","From End of List"),Dialog.show({view:new BoardActivityView({model:this.model,modelCache:this.modelCache}),maxWidth:500})},t.prototype.toggleSubscribe=function(e){var t;Util.preventDefault(e),$(e.target).hasClass("disabled")||(this.model.get("subscribed")?(this.model.subscribe(!1),t="Unsubscribe"):(this.model.subscribe(!0),t="Subscribe"),track("Board View","Board Menu","Subscribe/Unsubscribe"))},t.prototype.shareBoard=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target).closest("a"),top:32,view:new SharePopoverView({model:this.model,modelCache:this.modelCache})}),track("Board View","Board Menu","Open Share, Print, and Export Menu")},t.prototype.copyBoard=function(e){Util.stop(e),$(e.target).hasClass("disabled")||(track("Board View","Board Menu","Open Copy Board"),PopOver.toggle({elem:$(e.target).closest("a"),top:32,view:new CreateBoardView({model:this.model,copyBoard:!0,modelCache:this.modelCache}),autoPosition:!0}))},t.prototype.openEmailSettings=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target).closest("a"),top:32,view:new EditEmailSettingsView({model:this.model,modelCache:this.modelCache})}),track("Board View","Board Menu","Open Email Settings - Menu")},t.prototype.closeConfirm=function(e){Util.stop(e),track("Board View","Board Menu","Open Close Menu"),Confirm.toggle({elem:$(e.target).closest("a"),top:32,model:this.model,title:"Close Board?",text:'You can re-open the board by clicking the "Boards" menu from the header, selecting "View Closed Boards", finding the board and clicking "Re-open".',confirmText:"Close",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.model.close(),track("Board","Close Board")}}(this)})},t.prototype.leaveConfirm=function(e){var t;Util.stop(e),track("Board View","Board Menu","Open Leave Menu"),t=Auth.me(),Confirm.toggle(_.extend(t.removeMembershipConfirmation(this.model),{elem:$(e.target).closest("a"),top:32,fxConfirm:function(e){return function(){return e.model.removeMember(t)}}(this)}))},t.prototype.showPowerUps=function(e){Util.stop(e),Dialog.show({view:new PowerUpsView({model:this.model}),maxWidth:900}),track("Board View","Board Menu","Open Power-Ups")},t}(ViewWithId),StickerPickerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),ModelLoader["for"](this.modelCache).loadMemberCustomStickers(Auth.me().id),this.listenTo(this.Member.get(Auth.myId()).customStickerList,"change add remove reset",this.renderCustomStickers)},t.prototype.getViewTitle=function(){return"Stickers"},t.viewName="StickerPickerView",t.prototype.className="board-widgets-content fancy-scrollbar",t.prototype.displayTypeClass="sidebar-display-wide",t.prototype.events={"click .js-sticker":"selectSticker","click .js-gold-promo":"openGoldPromo","click .js-bc-promo":"openBCPromo","change .js-upload-image":"setUploadImage"},t.prototype.render=function(){return this.$el.html(templates.fill("sticker_select")),this.renderStandardStickers(),this.renderPremiumStickers(),this.renderCustomStickers(),this.refreshDraggable(),this},t.prototype._getStickers=function(e){var t,i,n;n=[];for(i in Stickers)t=Stickers[i],e(t)&&n.push(new Sticker(_.extend({image:i},t),{modelCache:this.modelCache}));return n},t.prototype._loadStickers=function(e){var t,i;return i="sticker-list-loading",e.addClass(i),t=e.find(".sticker-select-image"),async.forEach(t,function(e,t){var i;return i=$(e),i.load(function(){return t()}),i.error(function(){return t()})},function(){return e.removeClass(i)})},t.prototype.renderStandardStickers=function(){var e,t,i;return e=this.$(".js-standard-sticker-list"),t=function(){var e,t,n,r;for(n=this._getStickers(function(e){return"standard"===e.type}),r=[],e=0,t=n.length;t>e;e++)i=n[e],r.push(this.subview(StickerSelectionView,i).render().el);return r}.call(this),e.append(t),this._loadStickers(e),this},t.prototype.renderPremiumStickers=function(){var e,t,i,n,r,o,s,a,l,c,d,u;o=this.Member.get(Auth.myId()),s=null!=(u=this.model.getOrganization())?u:null,e=this.$(".js-premium-stickers"),r=(null!=o?o.isFeatureEnabled("additionalStickers"):void 0)||(null!=s?s.isFeatureEnabled("additionalStickers"):void 0);for(a in STICKERPACKS)n=STICKERPACKS[a].displayName,t=$(templates.fill("sticker_pack_selection_list",{displayName:n})),i=t.filter(".js-sticker-list"),c=this._getStickers(function(e){return"premium"===e.type&&e.pack.displayName===n}),d=function(){var e,t,i;for(i=[],e=0,t=c.length;t>e;e++)l=c[e],i.push(this.subview(StickerSelectionView,l,{org:s}).render().el);return i}.call(this),i.append(d),this._loadStickers(i),e.append(t),r||i.append(templates.fill("product_promo_button"));return this},t.prototype.renderCustomStickers=function(){var e,t,i,n,r,o,s;return n=this.Member.get(Auth.myId()),r=null!=(s=this.model.getOrganization())?s:null,e=this.$(".js-custom-sticker-list").empty(),t=(null!=n?n.isFeatureEnabled("customStickers"):void 0)||(null!=r?r.isFeatureEnabled("customStickers"):void 0),t&&null!=n&&(o=function(){var e,t,o,s;for(o=n.customStickerList.models,s=[],e=0,t=o.length;t>e;e++)i=o[e],s.push(this.subview(CustomStickerSelectionView,i,{org:r}).render().el);return s}.call(this),e.append(o)),t||e.append(templates.fill("product_promo_button")),e.append(templates.fill("sticker_select_item_upload",{id:Auth.myId()})),_.defer(function(e){return function(){return e.refreshDraggable()}}(this)),this},t.prototype.refreshDraggable=function(){_.defer(function(e){return function(){return Browser.isTouch()?void 0:e.$(".js-draggable-sticker:not(.disabled)").draggable({revert:"invalid",revertDuration:150,appendTo:"#surface",containment:"#surface",zIndex:100,helper:"clone",delay:"75",distance:"7",start:function(e,t){var i;DragSort.startSort(e,t),i=(20*Math.random()-10)%360,$(t.helper).find(".sticker-select-fixed").css({transform:"rotate("+i+"deg)","-webkit-transform":"rotate("+i+"deg)"}),track("Board View","Drag Sticker from Sidebar")},stop:function(e){Util.stopPropagation(e),DragSort.endSort()},drag:function(e,t){_.throttle(DragSort.getScrollListForMemberSidebarDrag(e,t),100)},custom:{refreshContainers:function(){var e,t,i,n,r,o,s;for(s=[],t=r=o=this.containers.length-1;0>=o?0>=r:r>=0;t=0>=o?++r:--r)e=this.containers[t].element,i=$(e).closest(".list"),i.length&&(e=i),n=e.offset(),this.containers[t].containerCache.left=n.left,this.containers[t].containerCache.top=n.top,this.containers[t].containerCache.width=e.outerWidth(),s.push(this.containers[t].containerCache.height=e.outerHeight());return s}}})}}(this))},t.prototype.selectSticker=function(){},t.prototype.setUploadImage=function(e){var t,i;return Util.stop(e),t=this.$(".js-upload-image"),null==t.prop("files")&&t.val()?void Util.uploadFile(t,function(){}):(i=t[0].files,i.length>0?this.uploadStickers(i):void 0)},t.prototype.uploadStickers=function(e){var t,i,n,r,o,s;for(n=Auth.me().customStickerList,s=[],i=r=0,o=e.length;o>r;i=++r)t=e[i],s.push(function(){return function(){var e,i,r;return r=new FileReader,e={file:t},Util.validFileSize(t)?(i=new FormData,i.append("token",Auth.myToken()),i.append("file",t),r.onload=function(e){var t;return t=e.target.result,n.create({url:t},{data:i,processData:!1,contentType:!1,error:function(e){return e.set("error","Failed"),setTimeout(function(){return e.destroy()},5e3)}})},r.readAsDataURL(t)):void Alerts.flash("File Too Large","error")}}(this)(i));return s},t.prototype.openGoldPromo=function(){return track("Board Menu","Open Trello Gold Promo - via Sticker Picker")},t.prototype.openBCPromo=function(){return track("Board Menu","Open Business Class Promo - via Sticker Picker")},t}(ViewWithId),BoardSettingsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Settings"},t.viewName="BoardSettingsView",t.prototype.className="board-widgets-content fancy-scrollbar",t.prototype.events={"click .js-change-labels:not(.disabled)":"changeLabels","click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin"},t.prototype.initialize=function(){this.listenTo(this.model,"change",this.debounce(this.render))},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0,url:!0,labels:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.orgDisplayName=null!=t?t.get("displayName"):void 0,e.hasOrg=null!=(null!=t?t.id:void 0),e.commentsDisplay=this.model.getDisplayCommentPerms(),e.invitationsDisplay=this.model.getDisplayInvitePerms(),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(templates.fill("board_menu_settings",e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.changeLabels=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target).closest("a"),top:36,view:EditLabelsView,options:{model:this.model,modelCache:this.modelCache}}),track("Board View","Settings","Change Labels")},t.prototype.changeOrg=function(e){var t,i;Util.stop(e),this.model.owned()?(PopOver.toggle({elem:$(e.target).closest("a"),top:52,view:BoardSelectOrganizationView,options:{model:this.model,modelCache:this.modelCache}}),track("Board View","Settings","Change Org")):(t=this.model.get("idOrganization"),null!=(i=this.Organization.get(t))&&i.boardList.remove(this.model),this.model.update("idOrganization",""),PopOver.hide(),track("Board View","Settings","Remove Org"))},t.prototype.toggleCovers=function(e){Util.stop(e),this.model.setPref("cardCovers",!this.model.getPref("cardCovers")),track("Board View","Settings","Enable/Disable Cover Images")},t.prototype.changeCommentingPerms=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target).closest("a"),top:52,view:new ChangeBoardCommentingPermsView({model:this.model,modelCache:this.modelCache})}),track("Board View","Settings","Open Change Commenting Permissions")},t.prototype.changeAddMemberPerms=function(e){Util.stop(e),PopOver.toggle({elem:$(e.target).closest("a"),top:52,view:new ChangeBoardAddMemberPermsView({model:this.model,modelCache:this.modelCache})}),track("Board View","Settings","Open Change Add Member Permissions")},t.prototype.toggleSelfJoin=function(e){Util.stop(e),this.model.setPref("selfJoin",!this.model.getPref("selfJoin")),this.model.save(),track("Board View","Settings","Toggle Allow Org Join")},t}(ViewWithId),ChangeBoardBackgroundView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Background"},t.viewName="ChangeBoardBackgroundView",t.prototype.displayTypeClass="sidebar-display-wide",t.prototype.className="board-widgets-content fancy-scrollbar",t.prototype.events={"click .js-gold-promo":"openGoldPromo","click .js-bc-promo":"openBCPromo","change .js-upload-image":"setUploadImage"},t.prototype.initialize=function(){var e;return t.__super__.initialize.apply(this,arguments),this.makeDebouncedMethods("render","renderCustomBackgrounds"),this.listenTo(this.Auth.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced),Auth.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(e=this.model.getOrganization())?e.isFeatureEnabled("customBoardBackgrounds"):void 0)?ModelLoader["for"](this.modelCache).loadMemberCustomBackgrounds(Auth.myId()):void 0},t.prototype.fillBackgroundList=function(e,t,i){var n;null==i&&(i=SelectBackgroundView),e.find(".js-select-background:not(.js-uploader)").remove(),this.appendSubviews(function(){var e,r,o;for(o=[],e=0,r=t.length;r>e;e++)n=t[e],o.push(this.subview(i,n,{board:this.model}));return o}.call(this),e)},t.prototype.render=function(){var e,t,i,n,r,o,s;return n=this.model.toJSON(),n.enabled_additionalBackgrounds=Auth.me().isFeatureEnabled("additionalBoardBackgrounds")||(null!=(o=this.model.getOrganization())?o.isFeatureEnabled("additionalBoardBackgrounds"):void 0),n.enabled_customBoardBackgrounds=Auth.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(s=this.model.getOrganization())?s.isFeatureEnabled("customBoardBackgrounds"):void 0),n.idMember=Auth.myId(),this.$el.html(templates.fill("board_change_background",n)),r=function(){return function(e,t){var i,n,r,o;o=[];for(n in Backgrounds)i=Backgrounds[n],i.type!==e||(null!=(r=i.pack)?r.name:void 0)!==t||i.discontinued||o.push(new BoardBackground(_.extend({name:n},i)));return o}}(this),e=this.$(".js-default-list"),i=this.$(".js-gold-photos-list"),t=this.$(".js-gold-patterns-list"),this.fillBackgroundList(e,r("default")),this.fillBackgroundList(i,r("premium","Photos")),this.fillBackgroundList(t,r("premium","Patterns and Textures")),n.enabled_additionalBackgrounds||(i.append(templates.fill("product_promo_button")),t.append(templates.fill("product_promo_button"))),this.renderCustomBackgrounds(),this},t.prototype.renderCustomBackgrounds=function(){var e,t,i,n,r;return i=Auth.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(r=this.model.getOrganization())?r.isFeatureEnabled("customBoardBackgrounds"):void 0),e=this.$(".js-custom-list"),i?(n=this.Member.get(Auth.myId()),t=n.boardBackgroundList.filter(function(e){return"custom"===e.get("type")}),this.fillBackgroundList(e,t,SelectCustomBackgroundView),e.find(".js-uploader").appendTo(e)):e.append(templates.fill("product_promo_button")),this},t.prototype.uploadBackgroundsAndAddPreviews=function(e){var t,i,n,r,o;for(o=[],i=n=0,r=e.length;r>n;i=++n)t=e[i],o.push(function(e){return function(){var i,n,r;return r=new FileReader,i={file:t},Util.validFileSize(t)?(n=new FormData,n.append("token",Auth.myToken()),n.append("file",t),r.onload=function(t){return e.Member.get(Auth.myId()).boardBackgroundList.create({type:"custom",fullSizeUrl:t.target.result},{data:n,processData:!1,contentType:!1,error:function(e){return e.set("error","Failed"),setTimeout(function(){return e.destroy()},5e3)},success:function(t){var i;return i=e.model,_.extend(i.attributes.prefs,{backgroundColor:t.get("color"),backgroundImage:t.get("fullSizeUrl"),backgroundImageScaled:t.get("scaled"),backgroundTile:t.get("tile"),backgroundBrightness:t.get("brightness")}),i.setPref("background",t.id)}})},r.readAsDataURL(t)):void Alerts.flash("File Too Large","error")}}(this)(i));return o},t.prototype.setUploadImage=function(e){var t,i;return Util.stop(e),t=this.$(".js-upload-image"),track("Board","Upload custom background"),null==t.prop("files")&&t.val()?void Util.uploadFile(t,function(){}):(i=t[0].files,void(i.length>0&&this.uploadBackgroundsAndAddPreviews(i)))},t.prototype.openGoldPromo=function(){return track("Board Menu","Open Trello Gold Promo - via Change Background")},t.prototype.openBCPromo=function(){return track("Board Menu","Open Business Class Promo - via Change Background")},t}(ViewWithId),SelectBackgroundView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:error",this.render)},t.prototype.className="board-background-select js-select-background",t.prototype.events={click:"selectBackground","click .js-background-attribution":"clickAttribution"},t.prototype.render=function(){var e,t,i;return e=this.model.toJSON(),e.pending=null==this.getId()&&null==e.error,null==e.color&&(e.backgroundImageThumbnail=null!=(t=null!=(i=Util.previewBetween(this.model.get("scaled"),90,60,600,400))?i.url:void 0)?t:this.model.get("fullSizeUrl")),this.$el.html(templates.fill("board_background_selection",e)),this.$el.toggleClass("board-background-still-uploading",e.pending),this},t.prototype.clickAttribution=function(e){return e.stopPropagation(),track("Board Menu","Change Background","Clicked Attribution")},t.prototype.getId=function(){return this.model.get("name")},t.prototype.selectBackground=function(e){var t,i,n;Util.stop(e),null!=this.getId()&&(t=this.options.board,_.extend(t.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(i=this.model.get("tile"))?i:!1,backgroundBrightness:null!=(n=this.model.get("brightness"))?n:"unknown"}),t.setPref("background",this.getId()),track("Board Menu","Change Background",this.getId()))},t}(ViewWithId),SelectCustomBackgroundView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:id",this.render)},t.prototype.events={"click .js-options":"openOptions",click:"selectBackground"},t.prototype.openOptions=function(e){return Util.stop(e),PopOver.toggle({elem:this.$(".js-options"),top:30,view:new CustomBackgroundOptionsView({model:this.model})})},t.prototype.getId=function(){return this.model.id},t}(SelectBackgroundView),CustomBackgroundOptionsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Background Options"},t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"},t.prototype.render=function(){var e,t;return t=this.model.toJSON(),t.tile=this.model.get("tile"),e=this.model.get("brightness"),t.brightnessLight="light"===e,t.brightnessDark="dark"===e,this.$el.html(templates.fill("board_background_options",t)),this},t.prototype.selectOption=function(e){var t,i;t=$(e.target).closest(".js-select-option"),null!=t.attr("data-board-brightness")?this.model.update("brightness",t.attr("data-board-brightness")):null!=t.attr("data-background-display-type")&&(i=t.attr("data-background-display-type"),this.model.update("tile","tile"===i))},t.prototype.deleteBackground=function(e){return Util.stop(e),Confirm.pushView({elem:$(e.target).closest(".js-delete-background"),top:32,model:this.model,title:"Delete Background?",text:"Deleting a background is permanent. There is no undo.",confirmText:"Delete",confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.model.destroy(),e.remove(),track("Board Menu","Change Background","Delete Uploaded Background")}}(this)})},t}(ViewWithId),ChangeBoardPermsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Permissions"},t.prototype.initialize=function(){this.listenTo(this.model,"change",this.debounce(this.render))},t.prototype.events={"click .js-select":"selectPerm"},t.prototype.render=function(){var e,t,i,n;return e=this.model.toJSON({prefs:!0,url:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.hasOrg=null!=(null!=t?t.id:void 0),e.orgCanSee=e.hasOrg&&("public"===(n=this.model.getPref("permissionLevel"))||"org"===n),e.premium=null!=t?t.isFeatureEnabled("observers"):void 0,e.voting_showObservers=(e.premium||e.voting_observers)&&e.hasOrg,e.comments_showObservers=(e.premium||e.comments_observers)&&e.hasOrg,e.pLevelClass=this.model.getPermLevelIconClass(),(null!=t?t.owned():void 0)?(e.orgOwner=!0,e.orgName=t.get("displayName"),this.model.owned()||(e.setOrgNull=!0)):this.model.owned()||(e.noEditOrg=!0),i=this.getTemplate(),this.$el.html(templates.fillMenu(i,e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.selectPerm=function(e){var t,i,n;Util.stop(e),track("Board","Change "+this.getPerm()),t=$(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length||(i=this.getPerm(),n=t.attr("name"),this.model.setPref(i,n),this.model.save(),PopOver.popView())},t}(ViewWithId),ChangeBoardCommentingPermsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Commenting Permissions"},t.prototype.getTemplate=function(){return"board_menu_commenting"},t.prototype.getPerm=function(){return"comments"},t}(ChangeBoardPermsView),ChangeBoardAddMemberPermsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add Member Permissions"},t.prototype.getTemplate=function(){return"board_menu_invitations"},t.prototype.getPerm=function(){return"invitations"},t}(ChangeBoardPermsView),ChangeBoardVisibilityView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return this.model.owned()?"Change Visibility":"Visibility"},t.prototype.tagName="ul",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.render)},t.prototype.className="pop-over-list",t.prototype.events={"click .js-select":"selectVis"},t.prototype.render=function(){var e,t,i,n,r,o;for(e=this.model.toJSON({prefs:!0,url:!0}),t=this.model.getOrganization(),e.hasOrg=null!=t,e.disabledVis_private=!this.model.owned()||null!=t&&!t.canSetVisibility("private")||null==t&&!this.model.getPref("canBePrivate"),e.disabledVis_org=!this.model.owned()||null!=t&&!t.canSetVisibility("org")||null==t&&!this.model.getPref("canBeOrg"),e.disabledVis_public=!this.model.owned()||null!=t&&!t.canSetVisibility("public")||null==t&&!this.model.getPref("canBePublic"),o=["private","org","public"],n=0,r=o.length;r>n;n++)i=o[n],e["permText_"+i]=this.model.getPermLevelAltText(i,t),e["iconClass_"+i]=this.model.getPermLevelIconClass(i,t),e["disabledVis_"+i]&&null!=t&&!t.canSetVisibility(i)&&this.model.owned()&&(e["showVisRestriction_"+i]=!0);return e.visRestrictionText="Due to a restriction created by an org admin, you can not select this visibility.",this.$el.html(templates.fill("board_menu_vis",e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.selectVis=function(e){var t,i;if(Util.stop(e),t=$(e.target).closest(".js-select"),!t.hasClass("disabled")&&!t.closest(".js-disabled").length){if(i=t.attr("name"),"org"===i&&!this.model.getOrganization())return void PopOver.pushView({view:BoardSelectOrganizationForPermChangeView,options:{model:this.model,disableNone:!0}});this.model.setPref("permissionLevel",i),this.model.save(),track("Board","Change Board Visibility",i),PopOver.popView()}},t}(ViewWithId),RenameBoardView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Rename Board"},t.prototype.events={"click .js-rename-board":"rename","submit form":"rename"},t.prototype.render=function(){var e;return e={},e.boardName=this.model.get("name"),this.$el.html(templates.fill("popover_rename_board",e)),this},t.prototype.rename=function(e){var t,i;return Util.stop(e),t=this.$(".js-board-name"),i=t.val().trim(),""===i?void t.focus().select():(track("Board","Successfully Rename Board"),this.model.update("name",i),void PopOver.hide())},t}(ViewWithId),BoardOrgSelectPermLevelView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Visibility"},t.prototype.tagName="ul",t.prototype.events={"click .js-select":"selectVis"},t.prototype.className="pop-over-list",t.prototype.render=function(){var e,t,i,n,r,o,s,a,l;for(r=this.options.organization,t=["public","org","private"],e=r.owned()?["admin","org"]:["org"],n={explanationText:""+r.get("displayName")+" has restrictions on board visibility.  Please choose a setting that is allowed in that organization."},n["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0,i=!1,s=0,a=t.length;a>s;s++)o=t[s],n["permText_"+o]=Board.prototype.getPermLevelAltText(o),n["iconClass_"+o]=Board.prototype.getPermLevelIconClass(o),l=r.get("prefs").boardVisibilityRestrict[o],__indexOf.call(e,l)<0?n["disabledVis_"+o]=!0:i=!0;return i?(this.$el.html(templates.fill("board_menu_vis",n,{editable:this.model.editable(),owned:this.model.owned()})),this):(n={isOrgAdmin:r.owned(),orgSettingsUrl:Controller.getOrganizationAccountUrl(r),organization:r.toJSON()},this.$el.html(templates.fill("cant_add_board_to_org",n)),this)},t.prototype.selectVis=function(e){var t,i,n;return Util.stop(e),t=$(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length?void 0:(i=t.attr("name"),this.options.idOrganizationSource&&null!=(n=this.Organization.get(this.options.idOrganizationSource))&&n.boardList.remove(this.model),this.model.update({idOrganization:this.options.organization.id,"prefs/permissionLevel":i}),this.options.organization.boardList.add(this.model),PopOver.hide())},t}(ViewWithId),BoardSelectOrganizationView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Organization"},t.prototype.events={"click .js-submit":"submit"},t.prototype.render=function(){var e,t,i,n,r,o;if(e=this.model.toJSON({org:!0}),i=this.model.owned()?Auth.me().organizationList.models:[],e.orgs=function(){var e,n,r;for(r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.toJSON());return r}(),e.hasOrgs=0!==e.orgs.length,e.idOrganization)for(o=e.orgs,n=0,r=o.length;r>n;n++)t=o[n],t.id===e.idOrganization&&(t.select=!0);return this.$el.html(templates.fill("popover_change_board_org",e)),this},t.prototype.showOrgBoardVisPerms=function(e,t){return PopOver.pushView({view:new BoardOrgSelectPermLevelView({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.updateModel=function(e){return this.model.update({idOrganization:e})},t.prototype.changeOrg=function(e,t){var i;return e!==t&&(t&&null!=(i=this.Organization.get(t))&&i.boardList.remove(this.model),this.updateModel(e),e&&this.Organization.get(e).boardList.add(this.model)),PopOver.hide()},t.prototype.canAddToOrg=function(e){return e.canAddBoard(this.model)},t.prototype.submit=function(e){var t,i,n,r;return Util.stop(e),track("Board","Change Org"),n=this.$(".js-org").val(),i=this.model.get("idOrganization"),r=this.Organization.get(n),t=function(e){return function(){return e.changeOrg(n,i)}}(this),(null!=r?r.isFeatureEnabled("restrictVis"):void 0)?ModelLoader["for"](this.modelCache).loadOrganizationMembersData(n,function(e){return function(n){return null!=n||null==r||e.canAddToOrg(r)?t():e.showOrgBoardVisPerms(r,i)}}(this)):t()},t}(ViewWithId),BoardSelectOrganizationForPermChangeView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-submit":"submit","change .js-org":"orgSelected"},t.prototype.initialize=function(e){return this.disableNone=null!=e?e.disableNone:void 0,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.disableNone&&this.$(".js-submit").addClass("disabled").attr("disabled","disabled"),this},t.prototype.showOrgBoardVisPerms=function(e,t){return PopOver.pushView({view:new BoardOrgSelectPermLevelView({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.submit=function(){return t.__super__.submit.apply(this,arguments)},t.prototype.canAddToOrg=function(e){return!e.isFeatureEnabled("restrictVis")||e.canSetVisibility("org")},t.prototype.updateModel=function(e){return this.model.update({idOrganization:e,"prefs/permissionLevel":"org"})},t.prototype.orgSelected=function(){return this.disableNone?"(none)"===this.$(".js-org").children().filter(":selected").text()?this.$(".js-submit").addClass("disabled").attr("disabled","disabled"):this.$(".js-submit").removeClass("disabled").removeAttr("disabled"):void 0},t}(BoardSelectOrganizationView),BoardMembersView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),mixin(MemberSearchView,MemberAddView,t),t.prototype.getViewTitle=function(){return"Members"},t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.debounce(this.renderOrgMembers)),this.listenTo(this.model.memberList,"add remove reset",this.debounce(this.renderOrgMembers)),null!=e&&this.listenTo(e,"change:prefs",this.debounce(this.render)),this.savedSearch=""},t.prototype.events={"click .js-board-members .js-select-member":"showMemberMenu","click .js-search-results .js-select-member":"didClickAddOtherMember","paste .js-search-input":"searchPaste","click .js-org-members .js-select-member":"didClickAddOrgMember","click .js-org-members .js-add-all-org-members":"didClickAddAllOrgMembers","click .js-org-members .js-more-org-members":"didClickViewMoreOrgMembers","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},t.prototype.render=function(){var e,t,i;return t={},t.placeholder="Search or add email address",t.canAddMembers=this.model.canInviteMembers(),i=this.model.getOrganization(),null!=i&&(t.orgName=i.get("displayName")),t.canInviteMembers=t.canAddMembers&&!((null!=i?i.isFeatureEnabled("disableExternalMembers"):void 0)&&i.getPref("externalMembersDisabled")),t.disableAddingExternalMembers=this.model.isMember(Auth.me())&&(null!=i?i.isFeatureEnabled("disableExternalMembers"):void 0)&&i.getPref("externalMembersDisabled"),t.isBCOrgAdmin=null!=i?i.isPremOrgAdmin(Auth.me()):void 0,t.orgSettingsURL=null!=i?Controller.getOrganizationAccountUrl(i):"",this.$el.html(templates.fill("manage_members",t,{editable:this.model.editable()})),null!=(e=Ads.addMemberToBoardAd(Auth.me(),i))&&this.$(".js-ad").html(this.subview(e,this.model).render().el),t.canAddMembers?_.delay(function(e){return function(){return e.renderOrgMembers(),e.input=e.$(".js-search-input"),e.input.click(function(e){return Util.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10):_.delay(function(e){return function(){return e.renderBoardMembers()}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),PopOver.calcPos(),this},t.prototype.getOrgData=function(){var e;return e=this.model.getOrganization(),null!=e&&this.model.editable()?ModelLoader["for"](this.modelCache).loadOrganizationMembersMinimal(e.id,function(e){return function(t){return null==t?e.renderOrgMembers():void 0}}(this)):void 0},t.prototype.renderBoardMembers=function(){var e,t,i,n,r,o;
for(t=this.$(".js-board-members").hide(),e=t.find(".js-list").empty(),this.model.memberList.models.length>7&&e.addClass("collapsed"),o=this.model.memberList.models,n=0,r=o.length;r>n;n++)i=o[n],this.appendSubview(this.subview(SelectMemberView,i),$boardMmeberList);t.show(),PopOver.calcPos()},t.prototype.renderOrgMembers=function(){var e,t,i,n,r,o,s,a;i=this.$(".js-org-members").hide(),t=i.find(".js-list").empty(),e=i.find(".js-num-org-mem").empty(),n=i.find(".js-more-org-members").addClass("hide"),s=this.model.getOrganization(),null!=s&&(r=this.model.orgMembersAvailable(),r.length>0&&(a=!1,r.length>7&&(a=!0,n.removeClass("hide")),o=r.slice(0,7),_.each(o,function(){return function(e){var i;return i=e.toJSON(),(null!=s?s.isPremOrgAdmin(e):void 0)&&(i.className="no-option"),t.append(templates.fill("select_member",i,{},{member:templates.member}))}}(this)),e.html(r.length),i.show()),PopOver.calcPos())},t.prototype.renderEmailInviteToSearchResults=function(e){var t,i,n,r,o,s;return r=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,i=_.compact(Util.removeDomainFromEmailAddress(e.email).split(r)).join(" ").replace(n,""),e.fullName=Util.toTitleCase(i),e.canAddAsObserver=null!=(o=this.model.getOrganization())?o.isFeatureEnabled("observers"):void 0,t=null!=(s=this.model.getOrganization())?s.get("prefs").externalMembersDisabled:void 0,this.$(".js-no-results").toggleClass("hide",!t),t?void 0:this.$(".js-uninvited-search-results").append(templates.fill("invite_add_name",e,"",{member:templates.member})).show()},t.prototype.showMemberMenu=function(e){var t,i;Util.stop(e),t=$(e.target).closest(".js-select-member").attr("idMember"),i=this.Member.get(t),PopOver.pushView({view:new BoardMemberMenuView({model:i,board:this.model,modelCache:this.modelCache})})},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(){var e,t,i;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),e=this.input.val().toLowerCase().trim(),""===e)return void this.clearSearchResults();this.loadingEl.show(),ApiAjax({url:"/1/search/members/",type:"get",data:{idBoard:this.model.id,query:e,idOrganization:null!=(t=this.model.getOrganization())?t.id:void 0,onlyOrgMembers:null!=(i=this.model.getOrganization())?i.getPref("externalMembersDisabled"):void 0,_cache:Util.newestId(this.model.get("memberships"))},dataType:"json",success:function(t){return function(i){return t.renderSearchResults(e,i)}}(this)})}},t.prototype.keydownEvent=function(e){var t,i,n;if((t=e.keyCode)!==Key_Shift&&t!==Key_Alt&&t!==Key_Control&&t!==Key_Arrow_Right&&t!==Key_Arrow_Left&&t!==Key_Escape){if((i=e.keyCode)!==Key_Enter)return(n=e.keyCode)===Key_Arrow_Up||n===Key_Arrow_Down?(Util.stop(e),void Util.navMenuList(this.$(".js-search-results .js-list"),"li",e.keyCode)):void 0;if(this.$(".js-search-results .js-list .selected .js-select-member").length>0)return Util.stop(e),void this.$(".js-search-results .js-list .selected:first .js-select-member").click();if(this.$(".js-search-results .js-list .email-invite").length>0)return Util.stop(e),void this.$(".email-invite:first").click()}},t.prototype.createInvitation=function(e){return ApiAjax(_.extend({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json"},e))},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-search-results").hide(),this.$(".js-uninvited-search-results").empty().hide(),this.renderOrgMembers()},t.prototype.removeInvitation=function(e){var t;t=$(e.currentTarget).closest(".invitation").data("id"),Invitation.prototype["delete"]({model:this.model,idInvitation:t,success:function(e){return function(){return track("Invitations","Delete Board Invite"),e.search}}(this)}),Util.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===Auth.myId()||this.model.owned()},t.prototype.sendEmailInvite=function(e){var t,i,n,r;if(Util.stop(e),i=this.$(".js-send-email-invite"),null==i.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),r=t.val().trim(),!Util.validName(r))return Util.setCaretAtEnd(t),void $(".js-name-error").show();n={fullName:r,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},this.$("#addAsObserver").is(":checked")&&(n.type="observer"),i.attr("disabled","disabled"),ApiAjax({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json",data:n,success:function(e){return function(t){var n;return n=new Member(t,{modelCache:e.modelCache}),e.renderOrgMembers(),track("Invitations","Send Email Board Invite to New Member","Role: "+t.type),i.removeAttr("disabled"),PopOver.hide()}}(this),error:function(e){return function(t){$(".manage-member-section.js-error").removeClass("hide").find(".error").html(t.responseText),e.$(".js-uninvited-search-results").empty().hide(),i.removeAttr("disabled"),e.input.focus().select(),track("Invitations","Error: "+t.responseText)}}(this)})}},t.prototype.addMember=function(e){var t;t=this.Member.get(e),this.model.addMember(t),this.renderOrgMembers()},t.prototype.didClickAddOtherMember=function(e){var t,i,n;return Util.stop(e),$(e.target).closest(".item.disabled").length>0?void 0:(t=$(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.clearSearchResults(),n=this.model.getOrganization(),i=this.Member.get(t),i&&(null!=n?n.isMember(i):void 0)?track("Invitations","Add Org Member to Board","Role: Member"):track("Invitations","Add Other Member to Board","Role: Member"),this.addMember(t))},t.prototype.didClickAddOrgMember=function(e){var t;return Util.stop(e),track("Invitations","Add Org Member to Board","Role: Member"),t=$(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.addMember(t)},t.prototype.didClickAddAllOrgMembers=function(e){var t,i;return Util.stop(e),track("Invitations","Add All Org Members to Board"),t=this.model.orgMembersAvailable(),i=t.length,Confirm.pushView({model:this.model,title:"Add All Organization Members?",text:"This will add all remaining members of the organization ("+Util.formatCount(i,"member")+") to this board.",confirmText:"Add All Members",confirmBtnClass:"primary",fxConfirm:function(e){return function(){var i,n,r,o;for(o=[],n=0,r=t.length;r>n;n++)i=t[n],o.push(e.model.addMember(i));return o}}(this)})},t.prototype.didClickViewMoreOrgMembers=function(e){Util.stop(e),track("Invitations","View More Org Members"),PopOver.pushView({view:new BoardOrgMemberView({model:this.model,modelCache:this.modelCache})})},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(ViewWithId),BoardOrgMemberView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),mixin(MemberAddView,t),t.prototype.getViewTitle=function(){return"Organization Members"},t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.debounce(this.render))},t.prototype.events={"click .js-board-members .js-select-member":"didClickAddOrgMember",keyup:"keyupEvent","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},t.prototype.renderOrgMembers=function(e){var t,i,n,r,o,s;for(n=[],n=e?this.Member.get(e):this.model.orgMembersAvailable(),r=this.$(".js-board-members .js-list").empty().show(),o=0,s=n.length;s>o;o++)i=n[o],t=i.toJSON(),r.append(templates.fill("select_member",t,{},{member:templates.member}));this.$(".js-board-members .js-num-org-mem").empty().text(n.length)},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.orgName=null!=(t=this.model.getOrganization())?t.get("displayName"):void 0,e.canInvite=!0,this.$el.html(templates.fill("manage_members",e,{editable:this.model.editable()})),this.renderOrgMembers(),this.$(".js-board-members").removeClass("hide"),this},t.prototype.keyupEvent=function(e){var t,i,n,r,o,s,a;return n=$(".js-search-input").val().trim(),(r=e.keyCode)===Key_Shift||r===Key_Alt||r===Key_Control?void 0:(o=e.keyCode)===Key_Enter?(Util.stop(e),void(this.$(".js-org-members .js-list .selected").length>0&&(t=this.$(".js-org-members .js-list .selected:first .js-select-member").attr("idMember"),i=this.Member.get(t),this.model.addMember(i),this.$(".js-search-input").focus().select()))):(s=e.keyCode)===Key_Arrow_Up||s===Key_Arrow_Down?(Util.stop(e),void Util.navMenuList($(null!=(a=PopOver.view)?a.el:void 0).find(".js-org-members .js-list"),".item",e.keyCode)):n.length>0?(this.filterAndFillMembers(n),$(".js-org-members .js-list").removeClass("collapsed"),void $(".js-add-all-org-members").addClass("hide")):(this.renderOrgMembers(),$(".js-org-members .js-list").addClass("collapsed"),void $(".js-add-all-org-members").removeClass("hide"))},t.prototype.filterAndFillMembers=function(e){var t,i,n;i=_.pluck(this.model.orgMembersAvailable(),"id"),n=Util.filterMembers(this.modelCache,e,i),n=n.slice(0,7),n.length>0?(this.renderOrgMembers(n),t=this.$(".js-org-members .js-list .item:first"),Util.selectMenuItem(this.$(".js-org-members .js-list"),".item",t)):this.$(".js-org-members .js-list").html("<li><p class='empty'>No matched members</p></li>")},t.prototype.didClickAddOrgMember=function(e){var t,i;return Util.stop(e),t=$(e.target).closest(".js-select-member").attr("idMember"),i=this.Member.get(t),this.model.addMember(i),this.render()},t}(ViewWithId),EditLabelsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Label Names"},t.prototype.tagName="form",t.prototype.className="edit-labels js-edit-labels",t.prototype.events={"submit .js-edit-labels":"saveLabels","click .js-save":"saveLabels"},t.prototype.render=function(){var e;return e=this.model.toJSON({labels:!0}),this.$el.html(templates.fill("board_labels",e)),this},t.prototype.saveLabels=function(e){var t,i,n,r,o,s,a;for(Util.stop(e),r={},n=this.$(".js-label-title"),s=0,a=n.length;a>s;s++)i=n[s],t=$(i).attr("name"),o=$(i).val().trim(),r["labelNames/"+t]=o;this.model.update(r),PopOver.popView(),track("Board","Save Label Changes")},t}(ViewWithId),EditEmailSettingsView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Add Cards via Email"},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.modelCache,"add:List remove:List change:List:closed reset:List",this.debounce(this.render)),this.listenTo(this.model,"change:myPrefs",this.debounce(this.render)),this.allowEmail=!0,null==this.model.getPref("emailKey")?this.model.generateEmailKey():void 0},t.prototype.events={"change .js-select-position":"updatePosition","change .js-select-list":"updateList","click .js-generate-address":"generateAddress","click .js-send-address":"sendAddressEmail","click .js-autofocus":"focusInput"},t.prototype.render=function(){var e,t,i,n,r,o,s,a,l;return t=this.model.getPref("idEmailList"),a="None",r=!1,o=function(){var e,o,s,l;for(s=this.model.openLists(),l=[],e=0,o=s.length;o>e;e++)n=s[e],i={id:n.id,name:n.get("name")},n.id===t&&(r=!0,i.selected=!0,a=i.name),l.push(i);return l}.call(this),null==t||r||(n=this.List.get(t),null!=n?(s=n.get("name")+" (archived)",a=s,o.push({id:n.id,name:s,selected:!0})):(a="None",o.push({id:null,name:"None",selected:!0}))),e={email:null!=(l=this.model.getPref("fullEmail"))?l:"",lists:o,listName:a,positionName:Util.capitalize(this.model.getPref("emailPosition"))},e["position_"+this.model.getPref("emailPosition")]=!0,this.$el.html(templates.fill("board_menu_email",e)),this},t.prototype.focusInput=function(e){$(e.target).focus().select()},t.prototype.updateValue=function(e,t){var i;return i=this.$el.find(e).val(),null!=i&&i!==this.model.getPref(t)?this.model.setPref(t,i):void 0},t.prototype.updatePosition=function(){return this.updateValue(".js-select-position","emailPosition")},t.prototype.updateList=function(){return this.updateValue(".js-select-list","idEmailList"),this.allowEmail=!0},t.prototype.generateAddress=function(e){Util.stop(e),Confirm.pushView({model:this.model,title:"Generate new email address?",text:"The old email address will no longer work.  There is no undo.  Go ahead?",confirmText:"Generate new email address",confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(e){return function(){return e.model.set({"myPrefs/emailKey":null}),e.allowEmail=!0,e.model.generateEmailKey()}}(this)})},t.prototype.sendAddressEmail=function(e){Util.stop(e),this.allowEmail&&(this.allowEmail=!1,this.model.api({method:"emailKey/message",type:"post"},function(){return function(e){return e?Alerts.show("Could not send email - please check that the list is valid","error","email",5e3):Alerts.flash("Email Sent","confirm")}}(this)))},t}(ViewWithId),BoardActivityView=mixin(ViewWithActions,_BoardActivityView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActions"},t.prototype.initialize=function(){this.fullHistory=this.options.fullHistory,null==this.fullHistory&&(this.fullHistory=!1),this.actionListView=this.collectionSubview(ActionListView,new ActionList(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardactivity",context:this.model}}),this.makeDebouncedMethods("renderMoreActionsLink"),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderMoreActionsLinkDebounced()}}(this)),this.loadMoreActions()},t.prototype.render=function(){return this.$el.html(templates.fill("board_activity",this.model.toJSON())),this.actionListView.setElement(this.$(".list-activity")[0]),this.renderActions(),this},t.prototype.renderActions=function(){return this.actionListView.render(),this.renderMoreActionsLink()},t.prototype.renderMoreActionsLink=function(){return this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.getActionsFilter=function(){return payloads_boardActions},t}(ViewWithId));var BoardPreference,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};BoardPreference=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="BoardPreference",t}(TrelloModel);var BoardListSidebarItemView,BoardsSidebarMyBoardsSectionView,BoardsSidebarOrgSectionView,BoardsSidebarRecentSectionView,BoardsSidebarSectionView,BoardsSidebarStarredSectionView,BoardsSidebarView,SidebarState,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};SidebarState=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"sidebarState-"+Auth.myId()}),this.fetch()}return __extends(t,e),t.prototype["default"]=function(){return{pinBoardsListSidebar:!1,showBoardsListSidebar:!1,idRecentBoards:[],collapsedDrawerSections:[]}},t.prototype.getPinSidebar=function(){return this.get("pinBoardsListSidebar")},t.prototype.showPinSidebar=function(){return this.save("pinBoardsListSidebar",!0)},t.prototype.hidePinSidebar=function(){return this.save("pinBoardsListSidebar",!1)},t.prototype.getShowSidebar=function(){return this.get("showBoardsListSidebar")},t.prototype.showSidebar=function(){return this.save("showBoardsListSidebar",!0)},t.prototype.hideSidebar=function(){return this.save("showBoardsListSidebar",!1)},t.prototype.getRecentBoards=function(){return this.get("idRecentBoards")},t.prototype.pullBoard=function(e){var t,i;for(i=_.clone(this.getRecentBoards());(t=_.indexOf(i,e))>-1;)i.splice(t,1);return this.save("idRecentBoards",i)},t.prototype.pushBoard=function(e){var t;return t=_.clone(this.getRecentBoards()),_.contains(t,e)&&(t=_.without(t,e)),t.unshift(e),t=t.slice(0,16),this.save("idRecentBoards",t)},t.prototype.getCollapsedSections=function(){var e;return null!=(e=this.get("collapsedDrawerSections"))?e:this["default"]().collapsedDrawerSections},t.prototype.isCollapsed=function(e){return _.contains(this.getCollapsedSections(),e)},t.prototype.collapseSection=function(e){return this.addToSet("collapsedDrawerSections",e)},t.prototype.expandSection=function(e){return this.pull("collapsedDrawerSections",e)},t}(LocalStorageModel)),BoardsSidebarView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.UNREAD_POLL_RATE_ACTIVE=Util.getMs({minutes:5}),t.prototype.UNREAD_POLL_RATE_IDLE=Util.getMs({minutes:60}),t.prototype.className=function(){return"boards-drawer"},t.prototype.initialize=function(){this.ready=!1,this.listenTo(this.model.organizationList,"add remove reset",this.debounce(this.renderBoardsSections)),this.makeDebouncedMethods("renderNewBoardName"),this.renderSidebarState(),this.listenTo(SidebarState,"change:showBoardsListSidebar",function(){return this.renderSidebarState(),this.ensureUnreadData()}),this.listenTo(SidebarState,"change:pinBoardsListSidebar",function(){return this.renderSidebarState(),this.updatePinned(),this.updateHeight(),this.ensureUnreadData()}),UserInput.addHandler(this,{scope:"header"}),this.ensureUnreadData()},t.prototype.events={"mouseenter .sidebar-boards-list li":"hoverItem","keyup .js-search-boards":"keyEvent","click .js-add-board-with-name":"addBoardWithName","click .js-add-board":"addBoard","click .js-pin":"pinDrawer","click .js-unpin":"unpinDrawer","click .js-open-closed-boards":"openClosedBoards","mouseleave .sidebar-boards-list":"deselectBoards",shortcut:"shortcut"},t.prototype.render=function(){var e,t;return t=this,e={},e.allBoardsUrl=Controller.getMemberBoardsUrl(),this.renderSidebarState(),this.updatePinned(),this.$el.html(templates.fill("sidebar_boards_list",e)),this.ready=!0,this.renderBoardsSections(),this.updateHeight(),this.updatePinned(),this.debouncedResizeEvent=this.debounce(function(e){return function(){return e.updateHeight()}}(this),300),$(window).bind("resize",this.debouncedResizeEvent),this},t.prototype.ensureUnreadData=function(){var e;if(e=function(e){return function(){return"active"===Monitor.getStatus()?e.UNREAD_POLL_RATE_ACTIVE:e.UNREAD_POLL_RATE_IDLE}}(this),null!=this._lastPoll&&Date.now()-this._lastPoll>1.5*e()&&(this.refreshUnreadData(),this._lastPoll=Date.now()),SidebarState.getShowSidebar()||SidebarState.getPinSidebar()){if(null==this._unreadTimeout)return this._unreadTimeout=this.setTimeout(function(e){return function(){return e.refreshUnreadData(),e._unreadTimeout=null,e._lastPoll=Date.now(),e.ensureUnreadData()}}(this),e())}else if(null!=this._unreadTimeout)return clearTimeout(this._unreadTimeout),this._unreadTimeout=null},t.prototype.shortcut=function(e){switch(e){case Key_B:return SidebarState.getPinSidebar()?this.focusInput():SidebarState.getShowSidebar()?SidebarState.hideSidebar():SidebarState.showSidebar(),!0}},t.prototype.clearSearch=function(){this.$(".js-search-boards").val(""),this.toggleSections("all")},t.prototype.focusInput=function(){return this.$(".js-search-boards").focus().select()},t.prototype.refreshUnreadData=function(){var e,t,i,n,r,o;for(ModelLoader["for"](this.modelCache).loadMyBoardsUnreadData(),t=this.Auth.me(),r=SidebarState.getRecentBoards(),o=[],i=0,n=r.length;n>i;i++)e=r[i],o.push(t.boardList.get(e)||t.boardStarList.getBoardStar(e)?void 0:ModelLoader["for"](this.modelCache).loadBoardData(e,payloads_boardUnread));return o},t.prototype.openClosedBoards=function(e){Util.stop(e),Dialog.show({view:new ClosedBoardsView({model:Auth.me()})}),ModelLoader["for"](this.modelCache).loadClosedBoards(),track("Boards Drawer","Open Closed Boards")},t.prototype.renderStarredBoardsSection=function(){return this.appendSubview(this.subview(BoardsSidebarStarredSectionView,Auth.me(),{},"starred-boards"),this.$(".js-starred-boards"))},t.prototype.renderRecentBoardsSection=function(){return ModelLoader.waitFor("boardsData",function(e){return function(){return e.appendSubview(e.subview(BoardsSidebarRecentSectionView,Auth.me(),{},"recent-boards"),e.$(".js-recent-boards"))}}(this)),this},t.prototype.renderSidebarState=function(){return SidebarState.getShowSidebar()||SidebarState.getPinSidebar()?(this.$el.addClass("show"),PopOver.hide(),_.defer(function(e){return function(){return e.focusInput()}}(this))):(this.$el.removeClass("show"),this.clearSearch()),PopOver.calcPos(),this},t.prototype.updateHeight=function(){var e;return e=SidebarState.getPinSidebar()?$(window).height()-50:$(window).height()-64,this.$(".board-drawer-content").css({"max-height":e})},t.prototype.addBoard=function(){track("Boards Drawer","Add Board"),PopOver.toggle({elem:this.$(".js-add-board"),top:40,view:CreateBoardView,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.addBoardWithName=function(){var e;track("Boards Drawer","Add Board - With Name"),e=this.$(".js-search-boards").val().trim(),PopOver.toggle({elem:this.$(".js-add-board-with-name"),top:40,view:CreateBoardView,options:{model:this.model,modelCache:this.modelCache,term:e}})},t.prototype.unpinDrawer=function(){return track("Boards Drawer","Unpin Drawer"),SidebarState.hidePinSidebar()},t.prototype.pinDrawer=function(){return track("Boards Drawer","Pin Drawer"),SidebarState.showPinSidebar()},t.prototype.updatePinned=function(){return this.$el.toggleClass("boards-drawer-pinned",SidebarState.getPinSidebar()),this.$(".js-pin").toggleClass("hide",SidebarState.getPinSidebar()),this.$(".js-unpin").toggleClass("hide",!SidebarState.getPinSidebar()),this.updateHeight()},t.prototype.getActivityCounts=function(e){return ModelLoader["for"](this.modelCache).loadBoardsMenuData(e)},t.prototype.search=function(){var e,t,i,n,r,o,s,a,l,c,d;if(s=this.model,l=this.$(".js-search-boards").val().toLowerCase().trim(),this.oldTerm!==l){if(this.oldTerm=l,""===l)return void this.toggleSections("all");if(this.toggleSections("search"),a=_.map(l.split(/\s+/),function(e){return RegExp(""+Util.escapeForRegex(e),"i")}),i=_.union(s.boardList.models,s.boardStarList.getBoards()),o=_.filter(i,function(e){return _.every(a,function(t){return t.test(e.get("name"))})}),i=function(){var e,i,n;for(n=[],e=0,i=o.length;i>e;e++)t=o[e],t.get("closed")||n.push(t);return n}(),r=this.Member.get(Auth.myId()).boardStarList.getBoardIds(),n=SidebarState.getRecentBoards(),i=i.sort(function(e,t){var i,o,s,a,l,c,d,u;return i=e.id,__indexOf.call(r,i)>=0&&(o=t.id,__indexOf.call(r,o)<0)?-1:(s=t.id,__indexOf.call(r,s)>=0&&(a=e.id,__indexOf.call(r,a)<0)?1:(l=e.id,__indexOf.call(n,l)>=0&&(c=t.id,__indexOf.call(n,c)<0)?-1:(d=t.id,__indexOf.call(n,d)>=0&&(u=e.id,__indexOf.call(n,u)<0)?1:e.get("name")<t.get("name")?-1:e.get("name")>t.get("name")?1:0)))}),i=i.slice(0,7),e=this.$(".js-board-results").empty(),i.length>0){for(c=0,d=i.length;d>c;c++)t=i[c],this.appendSubview(this.subview(BoardListSidebarItemView,t,{showOrgName:!0},"board-search-"+t.id),e);Util.selectMenuItem($(".sidebar-boards-list"),"li",$(".sidebar-boards-list li:first"))}return this.renderNewBoardNameDebounced(),this}},t.prototype.renderNewBoardName=function(){var e;e=this.$(".js-search-boards").val().trim(),this.$(".js-new-board-sidebar-name").text(e)},t.prototype.toggleSections=function(e){"all"===e?(this.$(".js-boards-list-container").removeClass("hide"),this.$(".js-board-results-container").addClass("hide")):"search"===e&&(this.$(".js-boards-list-container").addClass("hide"),this.$(".js-board-results-container").removeClass("hide"))},t.prototype.renderBoardsSections=function(){return this.renderStarredBoardsSection(),this.renderRecentBoardsSection(),this.renderAllBoardsSection(),this},t.prototype.renderAllBoardsSection=function(){var e,t,i,n,r,o,s,a,l;if(!this.ready)return this;if(n=this.model,i=function(){var e,i,r,o;for(r=n.boardList.models,o=[],e=0,i=r.length;i>e;e++)t=r[e],t.get("closed")||o.push(t);return o}(),e=this.$(".js-all-boards").empty(),0===i.length)r=function(e){return function(){return e.stopListening(Auth.me().boardList,"add reset",r),e.renderAllBoardsSection()}}(this),this.listenTo(Auth.me().boardList,"add reset",r);else for(this.appendSubview(this.subview(BoardsSidebarMyBoardsSectionView,Auth.me(),{},"my-boards"),e),l=this.model.organizationList.models,s=0,a=l.length;a>s;s++)o=l[s],this.appendSubview(this.subview(BoardsSidebarOrgSectionView,Auth.me(),{org:o},"group-"+o.id),e);return this},t.prototype.hoverItem=function(e){var t;t=$(e.target).closest("li"),Util.selectMenuItem($(".sidebar-boards-list"),"li",t)},t.prototype.deselectBoards=function(){var e;e=$(".sidebar-boards-list li").removeClass("selected")},t.prototype.keyEvent=function(e){var t,i,n,r;if((i=e.keyCode)!==Key_Shift&&i!==Key_Control&&i!==Key_Alt&&i!==Key_Arrow_Left&&i!==Key_Arrow_Right&&(!(e.shiftKey||e.altKey||e.ctrlKey)||(n=e.keyCode)!==Key_Arrow_Up&&n!==Key_Arrow_Down))return(r=e.keyCode)===Key_Arrow_Up||r===Key_Arrow_Down?void Util.navMenuList($(".sidebar-boards-list"),"li:visible",e.keyCode):e.keyCode===Key_Enter?(t=$(".sidebar-boards-list li.selected:visible:first a"),void(t.length>0&&(t.click(),PopOver.hide(),this.focusInput()))):this.search()},t}(ViewWithId),BoardsSidebarSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={"click .js-collapse-section":"collapseSection","click .js-expand-section":"expandSection"},t.prototype.initialize=function(){return this.debouncedRenderBoards=this.debounce(this.renderBoards,10),this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150),this.sectionId=this.sectionId(),this.initedSortable=!1,this.listenTo(SidebarState,"change:collapsedDrawerSections",function(){return this.renderCollapsed()}),this.listenTo(this.model.boardList,"add remove reset change:closed",this.debouncedRenderBoards)},t.prototype.render=function(){var e;return e=this.getHeaderInfo(),e.sectionId=this.sectionId,this.$el.html(templates.fill("boards_sidebar_section",e)),this.renderBoards(),this.renderCollapsed(),this},t.prototype.getBoards=function(){return[]},t.prototype.getHeaderInfo=function(){return"Boards"},t.prototype.sectionId=function(){return null},t.prototype.showOrgName=function(){return!1},t.prototype.postRenderBoardsEvent=function(){},t.prototype.collapseSection=function(){return SidebarState.collapseSection(this.sectionId)},t.prototype.expandSection=function(){return SidebarState.expandSection(this.sectionId)},t.prototype.renderCollapsed=function(){var e;e=SidebarState.isCollapsed(this.sectionId),this.$(".js-collapse-section").toggleClass("hide",e),this.$(".js-expand-section").toggleClass("hide",!e),this.$(".js-board-list").toggleClass("hide",e),this.$(".js-sidebar-section-header").toggleClass("bold",!e)},t.prototype.renderBoards=function(){var e,t,i,n,r,o;if(e=this.$(".js-board-list").empty(),n=_.filter(this.getBoards(),function(e){return!(null!=e?e.get("closed"):void 0)}),n.length>0){for(this.$el.removeClass("hide"),i=[],r=0,o=n.length;o>r;r++)t=n[r],i.push(this.subview(BoardListSidebarItemView,t,{showOrgName:this.showOrgName()},"board-"+t.id));this.appendSubviews(i,e)}else this.$el.addClass("hide");return this.debouncedPostRenderBoardsEvent(),this},t}(ViewWithId),BoardsSidebarStarredSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.debouncedRenderBoards()})},t.prototype.getBoards=function(){return this.model.boardStarList.getBoards()},t.prototype.showOrgName=function(){return!0},t.prototype.sectionId=function(){return"starred-boards"},t.prototype.getHeaderInfo=function(){return{title:"Starred Boards",iconClass:"star"}},t.prototype.postRenderBoardsEvent=function(){var e;return Browser.isTouch()?void 0:(e=this.$(".js-board-list"),this.initedSortable?DragSort.refreshIfInitialized(e):(this.initedSortable=!0,e.sortable({axis:"y",containment:"#surface",delay:"75",distance:"7",forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",scroll:!0,helper:"clone",stop:function(e,t){_.defer(function(e){return function(){return t.item.trigger("moveto",[t,e])}}(this))},tolerance:"pointer"})))},t}(BoardsSidebarSectionView),BoardsSidebarRecentSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(SidebarState,"change:idRecentBoards",function(){return this.debouncedRenderBoards()}),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.debouncedRenderBoards()}),this._idBoardsFetching=[]},t.prototype.sectionId=function(){return"recent-boards"},t.prototype.showOrgName=function(){return!0},t.prototype.getBoards=function(){var e,t,i,n,r,o,s,a,l;for(n=_.difference(SidebarState.getRecentBoards(),this.model.boardStarList.getBoardIds()).slice(0,7),t=this.Board.get(n),r=[],i=o=0,s=t.length;s>o;i=++o)e=t[i],null==e&&(a=n[i],__indexOf.call(this._idBoardsFetching,a)<0)&&r.push(n[i]);return(l=this._idBoardsFetching).push.apply(l,r),r.length>0&&async.forEach(r,function(e){return function(t,i){return ModelLoader["for"](e.modelCache).loadBoardData(t,payloads_boardMinimal,function(e){return null!=e&&SidebarState.pullBoard(t),i()})}}(this),function(e){return function(){return e._idBoardsFetching=_.difference(e._idBoardsFetching,r),e.debouncedRenderBoards()}}(this)),_.compact(t)},t.prototype.getHeaderInfo=function(){return{title:"Recent Boards",iconClass:"clock"}},t}(BoardsSidebarSectionView),BoardsSidebarMyBoardsSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards)},t.prototype.getBoards=function(){var e,t,i,n,r,o;for(t=function(e){return function(t){var i,n;return i=null!=(n=t.getOrganization())?n.id:void 0,null!=i&&__indexOf.call(e.model.get("idOrganizations"),i)>=0}}(this),r=this.model.boardList.models,o=[],i=0,n=r.length;n>i;i++)e=r[i],t(e)||e.get("closed")||o.push(e);return o},t.prototype.sectionId=function(){return"my-boards"},t.prototype.getHeaderInfo=function(){return{title:"My Boards",iconClass:"board"}},t}(BoardsSidebarSectionView),BoardsSidebarOrgSectionView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards),this.listenTo(this.getOrg(),"change:name change:displayName change:logoHash",this.render)},t.prototype.getOrg=function(){return this.options.org},t.prototype.sectionId=function(){return"org-"+this.getOrg().get("id")},t.prototype.getBoards=function(){var e,t,i,n,r,o;for(n=this.model.boardList.models,o=[],t=0,i=n.length;i>t;t++)e=n[t],(null!=(r=e.getOrganization())?r.id:void 0)!==this.getOrg().id||e.get("closed")||o.push(e);return o},t.prototype.getHeaderInfo=function(){var e,t,i;return e={},t=this.getOrg(),null!=t&&(e=t.toJSON(),e.isOrg=!0,e.url=Controller.getOrganizationUrl(t.get("name")),i=t.get("logoHash"),i&&(e.orgLogoUrl=""+logoDomain+"/"+i+"/30.png")),e},t.prototype.postRenderBoardsEvent=function(){this.renderBCStatus()},t.prototype.renderBCStatus=function(){this.$(".js-has-business-class").toggleClass("hide",!this.getOrg().isPremium())
},t}(BoardsSidebarSectionView),BoardListSidebarItemView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.trackBoardClick=function(){return track("Header","Boards Menu","Opened Board")},t}(BoardListItemView);var CalendarCardComposerView,CardComposer,CardComposerInlineView,ComposerLabelSelectorView,ComposerMemberSelectorView,ComposerPosSelectorView,ComposerSelectorMenuView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};CardComposer=function(e){function t(e,i){this.board=e,t.__super__.constructor.call(this,null,i),this.board.onId(function(e){return function(t){return e.set({id:"boardCardComposerSettings-"+t}),e.fetch()}}(this))}return __extends(t,e),t.prototype.typeName="CardComposer",t.prototype["default"]=function(){return{idList:null,index:null,idMembers:[],labels:[],pos:"bottom",title:null,vis:!1}},t.prototype.clear=function(){return this.save(this["default"]())},t.prototype.clearItems=function(){this.save({idMembers:[],labels:[],title:""})},t.prototype.moveToNext=function(){var e;this.save({idList:this.get("idList"),index:(null!=(e=this.get("index"))?e:0)+1,idMembers:[],labels:[],pos:"bottom",title:"",vis:!0})},t.prototype.getBoard=function(){return this.board},t.prototype.getList=function(){return this.getBoard().listList.get(this.get("idList"))},t.prototype.getLabels=function(){var e,t,i,n,r,o;for(e=this.get("labels"),r=Util.labelNames,o=[],i=0,n=r.length;n>i;i++)t=r[i],o.push({color:t,name:this.getBoard().getLabelName(t),isActive:_.include(e,t)});return o},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.addMember=function(e){return this.addToSet("idMembers",e)},t.prototype.removeMember=function(e){return this.pull("idMembers",e)},t.prototype.toggleLabel=function(e){return this.toggle("labels",e)},t.prototype.toJSON=function(e){var i,n,r,o;return o=null!=e?e:{},i=o.board,r=o.list,n=t.__super__.toJSON.apply(this,arguments),i&&(n.board=this.getBoard().toJSON()),r&&(n.list=this.getList().toJSON()),n},t}(LocalStorageModel),CardComposerInlineView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="card-composer",t.prototype.initialize=function(){return this.listenTo(this.model,"change:labels change:idMembers",this.renderSelectedItems),this.listenTo(this.model,"change:vis",this.renderVisibility)},t.prototype.events={"click .js-add-card":"submitCard","click .js-cancel":"clearAndHide","click .js-cc-menu":"openMenu",keyup:"keyupEvent",paste:"pasteEvent",keydown:"keydownEvent"},t.prototype.render=function(e,t){var i,n;return n=this,i=this.model.toJSON({board:!0}),this.renderVisibility(),this.$el.html(templates.fill("card_composer_inline",i)),this.renderSelectedItems(),_.defer(function(e){return function(){return Util.setCaretAtEnd(e.$(".js-card-title")[0]),"function"==typeof t?t():void 0}}(this)),this.$(".js-card-title").autosize(),this},t.prototype.renderVisibility=function(){return this.$el.toggleClass("hide",!this.model.get("vis")),this},t.prototype.submitCard=function(e){var t,i,n,r;return e&&Util.preventDefault(e),PopOver.hide(),r=jQuery.trim(this.$(".js-card-title").val()),""===r?void this.$el.find(".js-card-title").focus().select():(n=e.shiftKey===!0,t=_.compact(r.split(/\r\n|\r|\n/)),i=t.length,void(1===i?this.createCard(r,n):Confirm.toggle(100>=i?{elem:$(e.target),top:36,title:"Create",text:"If you want, we can create a card for every new line. That would be "+i+" cards. You can also create one card with a long title.",confirmText:"Create "+i+" Cards",cancelText:"Just One Card",fxConfirm:function(e){return function(){return e.createMultipleCards(t,n)}}(this),fxCancel:function(e){return function(){var t;return e.createCard(r,n,!1,t=!0)}}(this)}:{elem:$(e.target),top:36,title:"Too Many Cards",text:"That’s going to create a card for every new line. That’s "+i+" cards. You can’t add over 100 cards to a board at once.",confirmText:"Okay…",fxConfirm:function(){return function(){return PopOver.hide()}}(this)})))},t.prototype.createCard=function(e,t,i,n){var r,o,s,a,l;e=e.trim(),n&&(e=e.replace(/(\r\n|\n|\r)/gm," ")),a=_.clone(this.model.get("idMembers")),s=_.clone(this.model.get("labels")),""!==e&&(l={name:e,pos:this.model.getList().calcPos(this.model.get("index")),closed:!1,labels:s,idMembers:a,dateLastActivity:Date.now()},this.model.moveToNext(),o=this.model.getList().cardList.create(l,{success:function(){return function(){s.length>0&&a.length>0?track("Card Composer","Card Added","With Members and Labels"):a.length>0?track("Card Composer","Card Added","With Members"):s.length>0?track("Card Composer","Card Added","With Labels"):track("Card Composer","Card Added","No items included")}}(this),modelCache:this.modelCache}),r=this.model.getBoard(),r.filter.addNewCard(o),i&&r.viewState.selectCard(o),t&&Controller.showCardDetail(o))},t.prototype.createMultipleCards=function(e,t){var i,n,r,o,s,a;for(n=e.length,i=s=0,a=e.length;a>s;i=++s)o=e[i],e.length-1===i?this.createCard(o,t,r=!0):this.createCard(o);track("Card Composer","Added Mulitple Cards",n)},t.prototype.pasteEvent=function(){this.$(".js-card-title").focus().keyup().trigger("autosize.resize")},t.prototype.keydownEvent=function(e){var t,i,n,r,o,s,a,l;return t=this.$(".js-card-title"),r=$(e.target).closest(".js-card-title").hasClass("js-card-title"),n=$(e.target).closest(".js-add-card").hasClass("js-add-card"),!r&&!n||PopOver.isVisible||e.keyCode!==Key_Enter?void(((a=e.keyCode)===Key_Tab||a===Key_Enter)&&(t.focus(),s=Util.getWordFromCaret(t[0]),o=$(null!=(l=PopOver.view)?l.el:void 0),i=!1,PopOver.view instanceof ComposerMemberSelectorView?(o.find(".js-members-list .item.selected:first .js-select-member").first().click(),i=!0):PopOver.view instanceof ComposerLabelSelectorView?(o.find(".edit-labels-pop-over .card-label.selected").first().click(),i=!0):PopOver.view instanceof ComposerPosSelectorView?o.find(".js-pos-results").length>0&&(o.find(".js-pos-results li.selected:first a").first().click(),i=!0):e.keyCode===Key_Tab&&""===t.val()&&(Util.stop(e),this.hide(),e.shiftKey?$(this.el).closest(".list").find(".editable:first .current").click():$(this.el).closest(".list").next().find(".editable:first .current").click()),i&&(Util.stop(e),Util.insertSelection(t,"",s.start,s.end),this.model.set("title",t.val())),this.renderSelectedItems(),PopOver.hide())):(Util.stop(e),void this.submitCard(e))},t.prototype.keyupEvent=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b;if(t=this.$(".js-card-title"),(m=e.keyCode)!==Key_Tab&&m!==Key_Enter){if(e.keyCode===Key_Escape&&t.focus(),f=e.keyCode,__indexOf.call(Keys_Arrow,f)>=0)return Util.stop(e),c=$(null!=(g=PopOver.view)?g.el:void 0),void(PopOver.view instanceof ComposerMemberSelectorView?Util.navMenuList(c.find(".js-members-list"),".item",e.keyCode):PopOver.view instanceof ComposerLabelSelectorView?Util.navMenuList(c.find(".edit-labels-pop-over"),".card-label",e.keyCode):PopOver.view instanceof ComposerPosSelectorView&&c.find(".js-pos-results").length>0&&Util.navMenuList(c.find(".js-pos-results"),"li",e.keyCode));if(!Browser.isTouch()&&$(e.target).closest(".js-card-title").hasClass("js-card-title")){if(h=Util.getWordFromCaret(t[0]),s=/^@\S/.test(h.str.substring(0,2)),o=/^\#\S/.test(h.str.substring(0,2)),a=/^\^\S/.test(h.str.substring(0,2)),u=h.str.substring(1).toLowerCase(),!(s||o||a))return this.model.set("title",this.$(".js-card-title").val()),PopOver.hide();if((b=e.keyCode)===Key_Shift||b===Key_Alt||b===Key_Control);else{if(s)return p=new ComposerMemberSelectorView({model:this.model,modelCache:this.modelCache}),n=_.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),r=Util.filterMembers(this.modelCache,u,n),r.length>0?(PopOver.load(p),p.render(r,!0),PopOver.show({elem:this.$(".js-cc-menu"),top:30,view:p,preloaded:!0}),t.focus(),i=$(p.el).find(".js-members-list .item:first"),Util.selectMenuItem($(p.el).find(".js-members-list"),".item",i)):PopOver.hide();if(o)return p=new ComposerLabelSelectorView({model:this.model,modelCache:this.modelCache}),l=this.model.getBoard().filterLabels(u),l.length>0?(PopOver.load(p),p.render(l),PopOver.show({elem:this.$(".js-cc-menu"),top:30,view:p,preloaded:!0}),t.focus(),i=$(p.el).find(".edit-labels-pop-over .card-label:first"),Util.selectMenuItem($(p.el).find(".edit-labels-pop-over"),"li",i)):PopOver.hide();if(a)return p=new ComposerPosSelectorView({model:this.model,modelCache:this.modelCache}),d=p.filterPos(u),d.hasData?(PopOver.load(p),p.renderPositionResults(d),PopOver.show({elem:this.$(".js-cc-menu"),top:30,view:p,preloaded:!0}),t.focus(),i=$(p.el).find(".js-pos-results li:first"),Util.selectMenuItem($(p.el).find(".js-pos-results"),"li",i)):PopOver.hide()}}}},t.prototype.renderSelectedItems=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h;for(o=this.model.get("idMembers"),r=!_.isEmpty(o),t=this.$(".js-list-card-composer-members").empty(),p=this.Member.get(o),l=0,d=p.length;d>l;l++)a=p[l],t.append("<div class='member js-remove-member' idMember='"+a+"'>"+templates.fill("member",a.toJSON())+"</div>");for(s=this.model.get("labels"),n=!_.isEmpty(s),e=this.$(".js-list-card-composer-labels").empty(),h=Util.labelNames,c=0,u=h.length;u>c;c++)i=h[c],__indexOf.call(s,i)>=0&&e.append("<div class='card-label card-label-"+i+"' name='"+i+"'></div>");this.$(".js-clear-all-items").toggle(n||r)},t.prototype.clearSelectedItems=function(){this.$(".js-card-title").val("").focus().select(),this.renderSelectedItems()},t.prototype.openMenu=function(e){return Util.stop(e),track("Card Composer","Open Selector Menu"),PopOver.toggle({elem:e.target,top:36,view:new ComposerSelectorMenuView({model:this.model,modelCache:this.modelCache})})},t.prototype.clearItems=function(){return this.model.clearItems()},t.prototype.hide=function(){this.model.save("vis",!1)},t.prototype.clearAndHide=function(){return this.clearItems(),this.hide()},t.prototype.scrollIntoView=function(){var e,t;return t=this.$el.offset().top,e=this.$el.closest(".list-cards"),e.scrollTop(t+this.$el.height())},t}(ViewWithId),ComposerSelectorMenuView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Options"},t.prototype.events={"click .js-mem-selector":"openMemSelector","click .js-label-selector":"openLabelSelector","click .js-pos-selector":"openPosSelector"},t.prototype.render=function(){var e;return e=this,this.$el.html(templates.fill("popover_selector_menu")),this},t.prototype.openMemSelector=function(e){return Util.stop(e),PopOver.pushView({view:CardMemberSelectView,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openLabelSelector=function(e){return Util.stop(e),PopOver.pushView({view:CardLabelSelectView,options:{model:this.model,modelCache:this.modelCache,hideEditTitles:!0}})},t.prototype.openPosSelector=function(e){return Util.stop(e),PopOver.pushView({view:ComposerPosSelectorView,options:{model:this.model,modelCache:this.modelCache}})},t}(ViewWithId),ComposerMemberSelectorView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Select Members"},t.prototype.events={"mouseenter .item":"hoverMemberSelect","click .item":"addOrRemoveMember",keyup:"keyupEvent"},t.prototype.render=function(e,t){var i,n;return n=this,e=e?e:_.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),i={},i.showSearch=!0,(e.length<=5||t)&&(i.showSearch=!1),this.$el.html(templates.fill("popover_member_searcher",i)),this.fillMems(e),this.$(".js-filter-emoji").length>0&&_.delay(function(e){return function(){return e.$(".js-filter-emoji").focus().select()}}(this),20),this.$(".js-filter-members").length>0&&_.delay(function(e){return function(){return e.$(".js-filter-members").focus().select()}}(this),20),this},t.prototype.fillMems=function(e){var t,i,n,r,o,s;for(t=this.$(".js-members-list"),t.empty(),s=e.slice(0,5),r=0,o=s.length;o>r;r++)i=s[r],n=this.Member.get(i),this.appendSubview(this.subview(SelectMemberOnCardView,n,{card:this.model}),t)},t.prototype.filterAndFillMembers=function(e){var t,i,n;i=_.pluck(this.model.getBoard().memberList.models,"id"),n=Util.filterMembers(this.modelCache,e,i),n.length>0?(this.fillMems(n),t=this.$(".js-members-list .item:first"),Util.selectMenuItem(this.$(".js-members-list"),".item",t)):this.$(".js-members-list").html("<li><p class='empty'>No matched members</p></li>")},t.prototype.hoverMemberSelect=function(e){var t;return t=$(e.target).closest(".item"),Util.selectMenuItem(this.$(".js-members-list"),".item",t)},t.prototype.keyupEvent=function(e){var t,i,n;t=$(".js-filter-members").val().trim().toLowerCase(),(i=e.keyCode)===Key_Tab||i===Key_Enter?(Util.stop(e),this.$(".js-members-list .item.selected:first .js-select-member").first().click()):(n=e.keyCode)===Key_Arrow_Up||n===Key_Arrow_Down?(Util.stop(e),Util.navMenuList(this.$(".js-members-list"),".item",e.keyCode)):this.filterAndFillMembers(t)},t.prototype.addOrRemoveMember=function(e){var t,i,n;Util.stop(e),n=$(e.target).closest(".item"),n.toggleClass("active"),i=n.find(".username").text(),t=n.find("[idMember]").attr("idMember"),this.model.toggle("idMembers",t)?track("Card Composer","Add Member"):track("Card Composer","Remove Member")},t}(ViewWithId),ComposerLabelSelectorView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Select Labels"},t.prototype.events={"mouseenter .item":"hoverLabelSelect","click .card-label":"addOrRemoveLabel"},t.prototype.render=function(e){var t,i,n,r,o,s,a,l;for(s=this,o=[],e=e?e:Util.labelNames,i=this.model.get("labels"),a=0,l=e.length;l>a;a++)t=e[a],r=_.include(i,t),o.push({color:t,name:this.model.getBoard().getLabelName(t),isActive:r});return n={labels:o,hideEditTitles:!0},this.$el.html(templates.fill("popover_change_labels",n)),this},t.prototype.hoverLabelSelect=function(e){var t;return t=$(e.target).closest(".card-label"),Util.selectMenuItem(this.$(".edit-labels-pop-over"),".card-label",t)},t.prototype.addOrRemoveLabel=function(e){var t,i;Util.stop(e),i=$(e.target).closest(".card-label"),i.toggleClass("active"),t=i.attr("label"),this.model.toggle("labels",t)?track("Card Composer","Add Label"):track("Card Composer","Remove Label")},t}(ViewWithId),ComposerPosSelectorView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Select Position"},t.prototype.events={"change .js-select-list":"changeList","change .js-select-position":"changePosition","mouseenter .js-pos-results li":"hoverPosResultsSelect","click .js-select-pos-keyword":"selectPosResult","click .js-select-pos-pos":"selectPosResult","click .js-select-pos-list":"selectPosResult"},t.prototype.render=function(){var e,t;return t=this,e={hideBoard:!0},this.$el.html(templates.fill("move_card_controls",e)),this.updateListList(),this},t.prototype.hoverPosResultsSelect=function(e){var t;return t=$(e.target).closest("li"),Util.selectMenuItem(this.$(".js-pos-results"),"li",t)},t.prototype.selectPosResult=function(e){var t,i,n,r,o,s;Util.stop(e),o=$(e.target).closest("a"),s=o.attr("name"),r=this.model.getList(),i=r.cardList.openCards().length,t=i+1,o.hasClass("js-select-pos-keyword")?"top"===s?(this.model.set("index",0),track("Card Composer","Select Position in List by Autocomplete",'Top of List - Used "Top"')):"bottom"===s&&(this.model.set("index",t),track("Card Composer","Select Position in List by Autocomplete",'Bottom of List - Used "Bottom"')):o.hasClass("js-select-pos-pos")?(this.model.set("index",parseInt(s,10)-1),track("Card Composer","Select Position in List by Autocomplete","Selected Position - Used Number")):o.hasClass("js-select-pos-list")&&(n=i===this.model.get("pos"),this.model.set("idList",s),n?(this.model.set("index",i),track("Card Composer","Select List by Autocomplete","Bottom")):track("Card Composer","Select List by Autocomplete","Not Bottom")),PopOver.hide()},t.prototype.filterPos=function(e){var t,i,n,r,o,s,a,l,c,d,u;for(l=RegExp("^"+Util.escapeForRegex(e)),s=RegExp("^"+Util.escapeForRegex(e)+"$"),t=this.model.getList().cardList.openCards(),i={keywordList:function(){var e,t,i,n;for(i=["top","bottom"],n=[],e=0,t=i.length;t>e;e++)r=i[e],l.test(r)&&n.push(r);return n}(),indexList:function(){var e,i,r;for(r=[],n=e=1,i=t.length+1;i>=1?i>=e:e>=i;n=i>=1?++e:--e)s.test(String(n))&&r.push(n);return r}(),listList:[]},u=this.model.getBoard().openLists(),c=0,d=u.length;d>c;c++)o=u[c],a=_.compact(o.get("name").toLowerCase().split(/\s+/)),_.find(a,function(e){return l.test(e)})&&i.listList.push(o.toJSON());return i.hasData=!_.isEmpty(i.keywordList)||!_.isEmpty(i.indexList)||!_.isEmpty(i.listList),i},t.prototype.renderPositionResults=function(e){var t,i,n,r,o,s;s=this.model.getList(),i=this.model.get("index")+1,n="of",1===i?r="Top":i===s.cardList.openCards().length+1?r="Bottom":(r=Util.getNaturalNumber(i),n="in"),t=this.model.toJSON({list:!0}),_.extend(t,{indexPrep:n,keywordList:function(){var t,i,n,r;for(n=e.keywordList,r=[],t=0,i=n.length;i>t;t++)o=n[t],r.push({value:o,natural:Util.capitalize(o)});return r}(),indexList:function(){var t,n,r,o;for(r=e.indexList,o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push({value:i,natural:Util.getNaturalNumber(i)});return o}(),listList:e.listList}),this.$el.html(templates.fill("popover_filter_pos_results",t))},t.prototype.updateListList=function(){var e,t,i,n,r,o,s,a,l,c;for(o=this.model.getList(),r=o.id,i=this.model.getBoard(),t=this.$(".js-select-list"),t.empty(),c=_.sortBy(i.openLists(),function(e){return e.get("pos")}),a=0,l=c.length;l>a;a++)o=c[a],s=o.get("name"),n=s,o.id===r&&(n+=" (selected)"),e=$("<option value='"+o.id+"'>"+_.escape(n)+"</option>"),t.append(e),o.id===r&&(e.attr("selected","selected"),this.$(".js-list-value").text(s));return this.updatePositionList()},t.prototype.updatePositionList=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h;if(t=this.$(".js-select-list"),i=this.$(".js-select-position"),s=t.find("option:selected").val(),i.empty(),c=this.model.getList(),d=this.model.getBoard().listList.get(s),n=c.cardList.openCards(),this.model.get("index")>n.length&&this.model.set("index",n.length),0===n.length)return e=$("<option>").val("0").text("1").appendTo(i),void this.$(".js-pos-value").html(Util.getNaturalNumber(1));for(o=p=0,h=n.length;h>=0?h>=p:p>=h;o=h>=0?++p:--p)u=String(o+1),r=u,a=!1,l=!1,n.length>0&&(0===o?r+=" (top)":o===n.length&&(r+=" (bottom)")),o===this.model.get("index")&&(a=!0),e=$("<option>").val(o).text(r).appendTo(i),a&&(e.attr("selected","selected"),this.$(".js-pos-value").html(Util.getNaturalNumber(u)))},t.prototype.changeList=function(){var e,t,i,n,r;n=this.model.get("pos"),t=this.model.getList().cardList.openCards().length,r=t===n,e=this.$(".js-select-list"),i=e.find("option:selected").val(),this.model.set("idList",i),r?(this.model.set("index",t),track("Card Composer","Change Position by Click","Change List - Bottom")):track("Card Composer","Change Position by Click","Change List - Not Bottom"),PopOver.hide()},t.prototype.changePosition=function(){var e,t;e=this.$(".js-select-position"),t=parseInt(e.find("option:selected").val(),10),this.model.set("index",t),track("Card Composer","Change Position by Click","Change Position in List"),PopOver.hide()},t}(ViewWithId),CalendarCardComposerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="calendar-card-composer",t.prototype.initialize=function(){return this.board=this.model.getBoard()},t.prototype.events={"change .js-select-list":"updatePositionList","change .js-select-position":"renderValues","click .js-add-card":"addCard",keydown:"keydownEvent"},t.prototype.getViewTitle=function(){return"Add Card"},t.prototype.setDate=function(e){return this.date=e,this.date.setHours(12)},t.prototype.remove=function(){var e;return e={title:this.$(".js-card-title").val(),idList:this.$(".js-select-list").val(),pos:this.$(".js-select-position").val()},this.model.set(e).save(),t.__super__.remove.apply(this,arguments)},t.prototype.render=function(){var e;return e={title:this.model.get("title")},this.$el.html(templates.fill("popover_card_from_calendar",e)),this.updateListList(),this.updatePositionList(),_.defer(function(e){return function(){return Util.setCaretAtEnd(e.$(".js-card-title")[0])}}(this)),this},t.prototype.keydownEvent=function(e){e.keyCode===Key_Enter&&this.addCard(e)},t.prototype.addCard=function(e){var t,i,n,r;return Util.stop(e),(i=$.trim(this.$(".js-card-title").val()))?(PopOver.hide(),this.model.moveToNext(),n=this.selectedList(),r=parseInt(this.$(".js-select-position").val()),t={closed:!1,dateLastActivity:new Date,due:this.date.toString(),idList:n.id,pos:n.calcPos(r),name:i},n.cardList.create(t)):void 0},t.prototype.updateListList=function(){var e,t;return e=this.$(".js-select-list"),e.empty(),t=this.board.openLists(),_.each(t,function(t){return $("<option>").val(t.id).text(t.get("name")).appendTo(e)}),e.val(this.model.get("idList")),e.val()||e.find("option").first().prop("selected",!0),this.renderValues()},t.prototype.updatePositionList=function(){var e,t,i,n,r;return e=this.$(".js-select-position"),i=this.selectedList(),e.empty(),n=i.cardList.length,t=function(){r=[];for(var e=0;n>=0?n>=e:e>=n;n>=0?e++:e--)r.push(e);return r}.apply(this),_.each(t,function(i){var n;return n=function(){switch(i){case 0:return" (Top)";case t.length-1:return" (Bottom)";default:return""}}(),$("<option>").val(i).text(i+1+n).appendTo(e)}),e.val(this.model.get("pos")),e.val()||e.find("option").last().prop("selected",!0),this.renderValues()},t.prototype.selectedList=function(){var e;return e=this.$(".js-select-list").val(),_.findWhere(this.board.listList.models,{id:e})},t.prototype.renderValues=function(){var e;return this.$el.find(".js-list-value").text(this.selectedList().get("name")),e=parseInt(this.$(".js-select-position").val()),this.$el.find(".js-pos-value").text(e+1)},t}(ViewWithId);var DatePickerView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};DatePickerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.getViewTitle=function(){return"Change Due Date"},t.prototype.tagName="form",t.prototype.className="dpicker-widget clearfix",t.prototype.initialize=function(){var e;e=this.model.getBoard(),this.listenTo(e,{"change:powerUps":this.renderCalendar})},t.prototype.events={"click .js-save-edit":"submitDueDate","click .js-remove-date":"removeDueDate","keydown .js-dpicker-date-input":"dateKeyDown","blur .js-dpicker-date-input":"updateDate","click .js-enable-calendar-powerup":"enableCal"},t.prototype._closeDialog=function(e){return Util.stop(e),PopOver.hide()},t.prototype._getDate=function(){var e,t;return this.$(".js-dpicker-date-input").is(".input-error")?null:(e=this.$(".js-dpicker-date-input").val(),t=this._cleanTime(this.$(".js-dpicker-time-input").val()),Dates.parse(""+e+" "+t))},t.prototype.submitDueDate=function(e){var i,n;return Util.stop(e),i=this._getDate(),Dates.validDate(i)?(this._closeDialog(e),n=i.getTime(),t.lastDueDate=n,this.model.update("due",n)):void 0},t.prototype.removeDueDate=function(e){return this._closeDialog(e),this.model.update("due",null)},t.prototype.dateKeyDown=function(e){return Util.isSubmitKey(e)?this.updateDate(e):void 0},t.prototype.updateDate=function(){var e,t,i,n,r;return t=this.$(".js-dpicker-date-input"),e=this.$(".js-dpicker-cal"),n=t.val().replace(/\s/g,"").replace(/[\-.]/g,"/"),i=Date.parse(Dates.convertDateFormat(n)),r=_.select(n.split("/"),function(e){return e>0}),!i||_.select(r,function(e){return e.length<3&&31>=e}).length<2?void t.addClass("input-error"):(t.removeClass("input-error"),r.length<3&&i<Date.today()&&i.setFullYear(i.getFullYear()+1),this._lastCalDate.toDateString()!==i.toDateString()?(this._lastCalDate=i,e.datepicker("setDate",Dates.toShortString(i))):void 0)},t.prototype.renderCalendar=function(){var e,t,i,n,r;return i=this.model.getBoard(),t=this.$(".js-cal-enabled").addClass("hide"),e=this.$(".js-enable-cal").addClass("hide"),n=__indexOf.call(null!=i?i.get("powerUps"):void 0,"calendar")>=0,r=(null!=i?i.owned():void 0)&&!n,n?t.removeClass("hide"):r&&e.removeClass("hide"),PopOver.calcPos(),this},t.prototype.render=function(){var e,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y,w;for(e=this.model.getBoard(),s=null!=(w=this.model.get("badges"))?w.due:void 0,r=this.model.toJSON(),r.hasDueDate=null!=s,this.$el.html(templates.fill("date_picker",r,{owned:e.owned()})),this.renderCalendar(),h=this.$(".js-dpicker-time-input"),m=this.$(".js-dpicker-time-select"),o=this.$(".js-dpicker-date-input"),i=this.$(".js-dpicker-cal"),s?s=Dates.parse(s):null!=t.lastDueDate&&(s=new Date(t.lastDueDate)),_.isDate(s)||(s=Date.today().add({days:1,hours:12})),i.datepicker({altField:".js-dpicker-date-input",defaultDate:s,showOtherMonths:!0,selectOtherMonths:!0,dateFormat:Dates.isUS?"mm/dd/yy":"dd/mm/yy",onSelect:function(){return o.removeClass("input-error")},firstDay:Dates.isUS?0:1}),PopOver.calcPos(),o.val(s.toString(Dates.isUS?"MM/dd/yyyy":"dd/MM/yyyy")),h.val(s.toString(Dates.timeFormat())),this._lastCalDate=s,f=[],d=["AM","PM"],l=[12,1,2,3,4,5,6,7,8,9,10,11],g=0,v=d.length;v>g;g++)for(c=d[g],b=0,y=l.length;y>b;b++)a=l[b],u='<option value="'+a+":00 "+c+'">'+a+":00 "+c+"</option>",p='<option value="'+a+":30 "+c+'">'+a+":30 "+c+"</option>",m.append(u,p);return n=s.toString("h:00 tt"),m.find('option[value="'+n+'"]').attr("selected",!0),m.change(function(){var e;return e=m.find("option:selected").val(),h.val(e)}),WindowSize.fSmall&&(h.hide(),m.addClass("show")),h.keyup(function(e){return function(){return e._timeOK(h.val())?h.removeClass("input-error"):void 0}}(this)),h.change(function(e){return function(){return e._timeOK(h.val())?h.removeClass("input-error"):h.addClass("input-error")}}(this)),this},t.prototype._timeOK=function(e){return null!=this._cleanTime(e)},t.prototype._cleanTime=function(e){return Dates.normalizeTime(e)},t.prototype.enableCal=function(e){var t;Util.stop(e),t=this.model.getBoard(),null!=t&&t.addToSet("powerUps","calendar"),track("Card Menu","Enable Calendar via Due Date Menu")},t}(ViewWithId);var KnownServices,__slice=[].slice;KnownServices=new(function(){function e(){}return e.prototype._knownUrls=[{name:"Trello Board",match:/^https:\/\/trello\.com\/b\/([a-zA-Z0-9]{8})(?:$|\/)/,previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",text:function(e,t,i){var n,r,o,s;return n=e[0],s=e[1],r=function(){var e;return null!=(e=t.get("Board",IdCache.getBoardId(s)))?e.get("name"):void 0},null!=(o=r())?o:(ModelLoader["for"](t).loadBoardNames([s],function(){var e;return e=$("#"+i),null!=(o=r())?e.text(o):"private board"}),"board…")}},{name:"Trello Card",match:/^https:\/\/trello\.com\/c\/([a-zA-Z0-9]{8})(?:$|\/)/,previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",text:function(e,t,i){var n,r,o,s;return n=e[0],s=e[1],r=function(){var e;return null!=(e=t.get("Card",IdCache.getCardId(s)))?e.get("name"):void 0},null!=(o=r())?o:(ModelLoader["for"](t).loadCardData(s,function(){var e;return e=$("#"+i),null!=(o=r())?e.text(o):"private card"}),"card…")}},{name:"FogBugz Case",match:/^https?:\/\/([^\.]+)\.fogbugz\.com\/(?:f\/cases\/|default\.asp\?)([\d]+)/,previewClass:"attachment-thumbnail-preview-fogbugz-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/a1385c9ce999f8389ec7dc43c1b24b2c/fogbugz.png",text:function(e){var t,i,n;return t=e[0],n=e[1],i=e[2],"Case "+i}},{name:"Kiln Commit",match:/^https?:\/\/([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)\/Code\/([^\/]+)\/([^\/]+)\/([^\/]+)\/History\/([^\/]+)/,previewClass:"attachment-thumbnail-preview-kiln-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",text:function(e){var t,i,n,r,o,s;return t=e[0],s=e[1],r=e[2],o=e[3],i=e[4],n=e[5],"Group"===o?""+r+" » "+i+": "+n:""+r+" » "+o+" » "+i+": "+n},dataUrl:function(e){return e.replace(/\/Code\//,"/trello/Code/")},_processJSON:function(e,t){var i,n,r,o,s;if(null!=t.reviews)for(s=t.reviews,r=0,o=s.length;o>r;r++)n=s[r],n.status=function(){switch(n.sStatus){case"active":return"In Review";case"rejected":return"Review Rejected";case"needswork":return"Review Needs Work";case"abandoned":return"Review Abandoned";case"approved":return"Review Approved"}}(),n.url=e.replace(/\/Code\/.*$/,"/Review/"+n.sReview);return t.sAuthor&&(t.author=t.sAuthor.replace(/\s<.*$/,"")),t.hash&&(t.shortHash=t.hash.substr(0,6)),t.sDescription&&(i=new TrelloMarkdown({restrict:{block:["paragraph","newline"],inline:["break","email","emoji","url"]}}),t.shortCommitMessage=t.sDescription.split("\n")[0],t.commitMessageHtml=i.format(t.sDescription).output),t.url=e,t},previewHtml:function(e,t){return templates.fill("kiln_changeset_preview",this._processJSON(e,t))},previewHtmlError:function(e,t){var i;return/unable to access/i.test(t)?(e=null!=(i=/^https?:\/\/[-a-z0-9\.]+(\/kiln)?/.exec(e))?i[0]:void 0,{login:'You may be able to see more about this changeset by\n<a href="'+e+'" target="kiln">logging into Kiln</a>.'}):null},thumbnailHtml:function(e,t,i){return templates.fill("kiln_changeset_thumbnail",_.extend({},this._processJSON(e,t),i))}},{name:"Kiln Code Review",match:/^https?:\/\/([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)\/Review\/(K[^\/]+)/,previewClass:"attachment-thumbnail-preview-kiln-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",text:function(e){var t,i,n;return t=e[0],n=e[1],i=e[2],"Review "+i}},{name:"GitHub Commit",match:/^https?:\/\/github\.com\/([^\/]+)\/([^\/]+)\/commit\/([^\/]{40})$/,previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",text:function(e){var t,i,n,r;return t=e[0],r=e[1],n=e[2],i=e[3],""+r+"/"+n+": "+i.substr(0,8)}},{name:"GitHub Issue",match:/^https?:\/\/github\.com\/([^\/]+)\/([^\/]+)\/issues\/(\d+)$/,previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",text:function(e){var t,i,n,r;return t=e[0],r=e[1],n=e[2],i=e[3],""+r+"/"+n+": #"+i}},{name:"GitHub Pull Request",match:/^https?:\/\/github\.com\/([^\/]+)\/([^\/]+)\/pull\/(\d+)$/,previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",text:function(e){var t,i,n,r;return t=e[0],r=e[1],n=e[2],i=e[3],""+r+"/"+n+": Pull Request #"+i}}],e.prototype.interpret=function(e,t){var i,n,r,o,s,a,l,c,d,u,p;for(u=this._knownUrls,c=0,d=u.length;d>c;c++)if(p=u[c],o=p.name,r=p.match,a=p.previewClass,i=p.icon,l=p.text,null!=(s=r.exec(e)))try{return n=_.uniqueId("known"),{id:n,name:o,previewClass:a,icon:i,text:l(s,t,n)}}catch(h){}return null},e.prototype._runHandler=function(){var e,t,i,n,r,o,s,a,l,c,d;for(r=arguments[0],s=arguments[1],e=4<=arguments.length?__slice.call(arguments,2,a=arguments.length-1):(a=2,[]),o=arguments[a++],d=this._knownUrls,l=0,c=d.length;c>l;l++)if(i=d[l],i.match.test(s)&&null!=i[r])return n=i.match,t=i.dataUrl,void $.ajax({url:t(s),xhrFields:{withCredentials:!0},headers:{"X-Trello":"Is it me you're looking for?"},success:function(t){return o(null,i[r].apply(i,[s,t].concat(__slice.call(e))))},error:function(t,n,a){var l,c;return l=""+r+"Error",c="function"==typeof i[l]?i[l].apply(i,[s,a].concat(__slice.call(e))):void 0,o(null!=c?c:"could not load")}});o()},e.prototype.previewHtml=function(e,t){return this._runHandler("previewHtml",e,t)},e.prototype.thumbnailHtml=function(e,t,i){return this._runHandler("thumbnailHtml",e,t,i)},e}());var Attachment,AttachmentList,AttachmentThumbView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e
}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice;Attachment=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.typeName="Attachment",t.prototype.urlRoot=function(){return""+this.getCard().url()+"/attachments"},t.prototype.getCard=function(){return this.collection.sourceModel},t.prototype.editable=function(){return this.getCard().editable()},t.prototype.smallestPreviewBiggerThan=function(e){return Util.smallestPreviewBiggerThan(this.get("previews"),e)},t.prototype.previewBetween=function(){return Util.previewBetween.apply(Util,[this.get("previews")].concat(__slice.call(arguments)))},t.prototype.biggestPreview=function(){return Util.biggestPreview(this.get("previews"))},t.prototype.smallestPreview=function(){return Util.smallestPreview(this.get("previews"))},t.prototype.getType=function(){var e,t;return e=Util.getAttachmentData(this),null!=e.ext?t=e.ext:null!=e.meta&&(t=e.meta),t},t}(TrelloModel),AttachmentList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.model=Attachment,t.prototype.comparator=function(e){return-Dates.parse(e.get("date"))||0},t.prototype.initialize=function(e,t){this.options=t},t}(CollectionWithHooks),AttachmentThumbView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="attachment-thumbnail",t.prototype.events={"click .js-open-viewer":"openViewer","click .js-download":"download","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover","click .js-confirm-delete":"confirmDelete"},t.prototype.render=function(){var e,t,i,n,r,o,s,a;return n=Util.getAttachmentData(this.model,this.modelCache),null==n.canUseViewer&&(n.canUseViewer=!0),o=this.model.smallestPreviewBiggerThan(110),Browser.isHighDPI()&&(r=this.model.smallestPreviewBiggerThan(220),o=null!=r?r:o),null!=o?(n.isImage=!0,i=this.model.getCard(),t=i.getBoard(),n.cardCovers=null!=t&&null!=(s=t.get("prefs"))?s.cardCovers:void 0,n.isCover=n.cardCovers&&i.get("idAttachmentCover")===this.model.id,n.imgSrc=o.url,n.edgeColor=null!=(a=n.edgeColor)?a:"transparent",n.ext=null):null==n.ext||n.ext.length>6?(n.ext=null,n.canUseViewer=!1):Util.isViewerable(n.ext)||(n.canUseViewer=!1),Browser.isTouch()&&(n.canUseViewer=!1),this.$el.html(templates.fill("attachment_thumb",n,{editable:this.model.editable()})),this.renderCoverState(),Dates.update(this.el),n.isKnownService&&(e=this.$(".js-attachment-thumbnail-details"),KnownServices.thumbnailHtml(n.url,n,function(t,i){return null==t&&null!=i?(e.html(i),Dates.update(e)):void 0})),this},t.prototype.openViewer=function(e){e.metaKey||e.ctrlKey||(Util.stop(e),new AttachmentViewer({model:this.model.getCard(),modelCache:this.modelCache,attachmentModel:this.model}).render(),track("Attachment","Open Attachment Viewer",this.model.getType()))},t.prototype.renderCoverState=function(){var e,t,i,n,r,o,s,a;i=null!=(r=this.model.getCard())&&null!=(o=r.getBoard())?o.getPref("cardCovers"):void 0,e=this.$(".js-make-cover").addClass("hide"),t=this.$(".js-remove-cover").addClass("hide"),(null!=(s=this.model.get("previews"))?s.length:void 0)>0&&i&&(n=(null!=(a=this.model.getCard())?a.get("idAttachmentCover"):void 0)===this.model.id,e.toggleClass("hide",n),t.toggleClass("hide",!n))},t.prototype.download=function(e){Util.stopPropagation(e),track("Attachment","Attachment Thumbnail","Download")},t.prototype.makeCover=function(e){Util.stop(e),PopOver.hide(),this.model.getCard().makeCover(this.model),track("Attachment","Attachment Thumbnail","Make Cover")},t.prototype.removeCover=function(e){Util.stop(e),PopOver.hide(),this.model.getCard().removeCover(null),track("Attachment","Attachment Thumbnail","Remove Cover")},t.prototype.confirmDelete=function(e){var t,i;Util.stop(e),t=Util.getAttachmentData(this.model,this.modelCache),i="Deleting an attachment is permanent. There is no undo.",t.isExternal&&(i="Remove this "+t.serviceName+" file? There is no undo."),Confirm.toggle({elem:this.$(".js-confirm-delete"),top:20,model:this.model,title:""+t.removeText+" Attachment?",text:i,confirmText:t.removeText,confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.model.destroy(),track("Attachment","Delete Attachment",e.model.getType())}}(this)}),track("Attachment","Attachment Thumbnail","Confirm Delete")},t}(ViewWithId);var AttachmentViewer,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};AttachmentViewer=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="attachment-viewer",t.prototype.initialize=function(){var e,t;return PopOver.hide(),this.allowsCardCovers=null!=(t=this.model.getBoard())?t.getPref("cardCovers"):void 0,this.currentAttachment=this.options.attachmentModel,e=this.options.idAttachment,null!=e?this.currentAttachment=this.model.attachmentList.find(function(t){return t.id===e}):void 0},t.prototype.events={"click .js-show-next-frame":"showNextFrame","click .js-show-prev-frame":"showPrevFrame","mouseenter .js-show-next-frame":"hintNextFrame","mouseenter .js-show-prev-frame":"hintPrevFrame","mouseleave .js-show-next-frame":"clearHint","mouseleave .js-show-prev-frame":"clearHint","click .js-stop":"stop","click .js-close-viewer":"close","click .js-open-delete-confirm":"openDeleteConfirm","click .js-close-delete-confirm":"closeDeleteConfirm","click .js-delete":"delete","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case Key_Escape:return this.close(),["Esc - Close Attachment Viewer","Attachment Viewer"];case Key_Arrow_Right:return this.showNextFrame(),["Right Arrow - Next Attachment","Attachment Viewer"];case Key_Arrow_Left:return this.showPrevFrame(),["Left Arrow - Previous Attachment","Attachment Viewer"]}},t.prototype.getAttachmentModels=function(){return this.model.attachmentList.models},t.prototype.getAttachmentModelsLength=function(){return this.getAttachmentModels().length},t.prototype.getCurrentAttachmentIndex=function(){return _.indexOf(this.getAttachmentModels(),this.currentAttachment)},t.prototype.getNextAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()+1,e>=this.getAttachmentModelsLength()?null:e},t.prototype.getNextModel=function(){var e;return e=this.getNextAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.getPrevAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()-1,0>e?null:e},t.prototype.getPrevModel=function(){var e;return e=this.getPrevAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.render=function(){var e,t,i;return e=this.model.toJSON(),e.numAttachments=this.getAttachmentModelsLength(),this.$el.html(templates.fill("attachment_viewer",e)),this.addNewFrame(this.currentAttachment,"center"),t=this.getNextModel(),null!=t&&this.addNewFrame(t,"right"),i=this.getPrevModel(),null!=i&&this.addNewFrame(i,"left"),this.setDetailsAndControls(),$("body").append(this.$el),"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.addHandler(this,{scope:"attachment_viewer",modal:!0,top:!0}),this},t.prototype.setDetailsAndControls=function(){var e,t;e=Util.getAttachmentData(this.currentAttachment,this.modelCache),e.canMakeCover=this.allowsCardCovers&&(null!=(t=e.previews)?t.length:void 0)>0,e.isCover=this.allowsCardCovers&&this.model.get("idAttachmentCover")===this.currentAttachment.id,this.$(".js-display-frame-details").empty().append(templates.fill("attachment_viewer_frame_details",e,{editable:this.model.editable()})),this.$(".js-show-prev-frame").toggleClass("hide",null==this.getPrevAttachmentIndex()),this.$(".js-show-next-frame").toggleClass("hide",null==this.getNextAttachmentIndex()),Dates.update(this.el)},t.prototype.addNewFrame=function(e,t){var i,n,r,o,s,a,l,c,d,u,p,h,m;return i=Util.getAttachmentData(e,this.modelCache),null!=t&&(i.directionClass="attachment-viewer-frame-"+t),c=i.ext,s=__indexOf.call(Util.imageExts(),c)>=0||(null!=(d=i.previews)?d.length:void 0)>0,u=i.ext,n=__indexOf.call(Util.audioExts(),u)>=0,p=i.ext,a=__indexOf.call(Util.videoExts(),p)>=0,h=i.ext,o=__indexOf.call(Util.iFrameableExts(),h)>=0,m=i.ext,r=__indexOf.call(Util.googleViewerableExts(),m)>=0,i.isExternal?i.isPlaceholder=!0:s?i.isImage=!0:n?i.isAudio=!0:a?i.isVideo=!0:o?i.isIFrameable=!0:r?(i.isIFrameable=!0,l=encodeURIComponent(i.url),i.url="https://docs.google.com/viewer?embedded=true&url="+l):(i.isPlaceholder=!0,i.openText="Download"),this.$(".js-frames").append(templates.fill("attachment_viewer_frame",i,{editable:this.model.editable()})),_.defer(function(){return $(".attachment-viewer-frame").addClass("attachment-viewer-frame-loaded")}),this},t.prototype.focusFrame=function(e,t){var i,n,r,o;switch(this.currentAttachment=e,i=_.find(this.$(".attachment-viewer-frame"),function(){return function(t){return $(t).attr("data-idAttachment")===e.id}}(this)),t){case"right":n=this.$(".attachment-viewer-frame-left"),o="attachment-viewer-frame-left",r=this.getNextModel();break;case"left":n=this.$(".attachment-viewer-frame-right"),o="attachment-viewer-frame-right",r=this.getPrevModel()}this.$(".attachment-viewer-frame-center").removeClass("attachment-viewer-frame-center").addClass(o),$(i).removeClass("attachment-viewer-frame-left attachment-viewer-frame-right").addClass("attachment-viewer-frame-center"),n.remove(),null!=r?this.addNewFrame(r,t):this.clearHint(),this.setDetailsAndControls()},t.prototype.showNextFrame=function(e){var t;Util.stop(e),t=this.getNextModel(),null!=t&&this.focusFrame(t,"right"),track("Attachment Viewer","Show Next Frame")},t.prototype.showPrevFrame=function(e){var t;Util.stop(e),t=this.getPrevModel(),null!=t&&this.focusFrame(t,"left"),track("Attachment Viewer","Show Previous Frame")},t.prototype.hintNextFrame=function(){this.$el.addClass("attachment-viewer-frames-next-hint")},t.prototype.hintPrevFrame=function(){this.$el.addClass("attachment-viewer-frames-prev-hint")},t.prototype.clearHint=function(){this.$el.removeClass("attachment-viewer-frames-next-hint attachment-viewer-frames-prev-hint")},t.prototype.stop=function(e){return Util.stopPropagation(e)},t.prototype.openDeleteConfirm=function(e){Util.stop(e),this.$(".js-meta").addClass("hide"),this.$(".js-confirm-delete").removeClass("hide"),track("Attachment Viewer","Open Delete Attachment Confirm")},t.prototype.closeDeleteConfirm=function(e){Util.stop(e),this.$(".js-meta").removeClass("hide"),this.$(".js-confirm-delete").addClass("hide"),track("Attachment Viewer","Close Delete Attachment Confirm")},t.prototype["delete"]=function(e){Util.stop(e),this.currentAttachment.destroy(),this.close(),track("Attachment Viewer","Delete Attachment")},t.prototype.renderToggleCover=function(){var e,t;e=this.allowsCardCovers&&this.currentAttachment.get("previews").length>0,this.$(".js-cover-options").toggleClass("hide",!e),t=this.allowsCardCovers&&this.model.get("idAttachmentCover")===this.currentAttachment.id,this.$(".js-make-cover-box").toggleClass("hide",t),this.$(".js-remove-cover-box").toggleClass("hide",!t)},t.prototype.makeCover=function(){this.model.makeCover(this.currentAttachment),this.renderToggleCover(),track("Attachment Viewer","Make Cover")},t.prototype.removeCover=function(){this.model.removeCover(null),this.renderToggleCover(),track("Attachment Viewer","Remove Cover")},t.prototype.close=function(){this.remove(),UserInput.removeHandler(this),track("Attachment Viewer","Close Viewer")},t}(ViewWithId);var UpgradeView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};UpgradeView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.render=function(e){var t,i,n;return i=null!=(n=null!=e?e.timeInSeconds:void 0)?n:60,t=Math.floor(i/60),this.$el.html(templates.fill("upgrade",{stopped:null!=e?e.stopped:void 0,timeInMinutes:t,plural:t>1}))},t.prototype.events={"click .js-upgrade":"upgrade","click .js-stop-upgrade":"stopUpgrade"},t.prototype.upgrade=function(){return Controller.upgradeNow(),!1},t.prototype.stopUpgrade=function(){return Controller.stopUpgrade(),!1},t}(ViewWithId);var QuickCardEditorView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};QuickCardEditorView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="quick-card-editor",t.open=function(e){var i,n,r;return this.close(),i=e.$el,n=i.offset(),r={width:i.width(),left:n.left,top:n.top},this.current=new t({model:e.model,modelCache:e.modelCache}).render(r)},t.close=function(){var e;return null!=(e=this.current)&&e.closeEditor(),this.current=null},t.prototype.initialize=function(){return this.makeDebouncedMethods("renderStickers"),this.listenTo(this.model,{"change:labels":this.renderLabels}),this.listenTo(this.model.memberList,"add remove reset",function(e){return function(){return e.renderMembers()}}(this)),this.listenTo(this.model.stickerList,"add remove reset change sort",function(){return this.renderStickersDebounced()})},t.prototype.events={"keydown .js-edit-card-title":"quickCardEditKeydown","click .js-save-edits":"saveEdits","click .js-stop":"stopCard","click .js-edit-labels":"editLabels","click .js-edit-members":"editMembers","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-edit-due-date":"editDueDate","click .js-archive":"archive",click:"checkCloseEditor","click .js-close-editor":"closeEditor"},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.showStickers=function(){return!0},t.prototype.renderCover=CardView.prototype.renderCover,t.prototype.renderBadges=CardView.prototype.renderBadges,t.prototype.renderLabels=CardView.prototype.renderLabels,t.prototype.renderMembers=CardView.prototype.renderMembers,t.prototype.getMemberOnCardHtml=CardView.prototype.getMemberOnCardHtml,t.prototype.shortcut=function(e){switch(e){case Key_Escape:return this.checkCloseEditor(),["Esc - Close Quick Card Editor","Quick Card Editor"];case Key_Enter:return this.save(),["Enter - Save Quick Card Edits","Quick Card Editor"]}},t.prototype.render=function(e){var t,i,n,r,o;return i=this.model.toJSON(),i.labels=this.model.getLabels(),i.showCover=this.showCover(),i.hasStickers=this.model.hasStickers(),i.quickEdit=!0,n={card:templates.card_in_list},i.left=this.cLeft=e.left,i.top=this.cTop=e.top,i.width=this.cWidth=e.width,t=this.cWidth+this.cLeft+160,r=$(window).height(),o=$(window).width(),t>o&&(i.leftButtons=!0),this.$el.html(templates.fill("quick_card_editor",i,{},n)),this.renderStickers().renderCover().renderLabels().renderBadges().renderMembers().checkShowCover(),$("body").append(this.$el),this.calcHeight(),this.focusInput(),"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.addHandler(this,{scope:"quick_card_editor",modal:!0,top:!0}),_.defer(function(){return this.$(".quick-card-editor-buttons").addClass("fade-in")}),this.$(".js-edit-card-title").autosize(),this},t.prototype.calcHeight=function(){var e,t,i,n,r,o,s;o=$(window).height(),s=$(window).width(),n=this.$(".quick-card-editor-card").outerHeight(),this.cTop+n>o&&(r=o-n-8,this.$(".quick-card-editor-card").css({top:r})),e=this.$(".quick-card-editor-buttons"),t=e.outerHeight(),i=e.offset(),t+i.top>o&&e.css({top:-36})},t.prototype.renderStickers=function(){var e,t,i;return this.$(".sticker.moving, .sticker.rotating").length>0?this:(e=this.$(".js-card-stickers").empty(),i=function(){var e,i,n,r;for(n=this.model.stickerList.models,r=[],e=0,i=n.length;i>e;e++)t=n[e],r.push(this.subview(StickerEditView,t));return r}.call(this),this.appendSubviews(i,e),this.$(".list-card").toggleClass("has-stickers",this.model.hasStickers()),this)},t.prototype.checkShowCover=function(){return this.$(".list-card").toggleClass("has-cover",this.showCover()).toggleClass("has-stickers",this.model.hasStickers()),this},t.prototype.focusInput=function(){return this.$(".js-edit-card-title").focus().select()},t.prototype.showPopOver=function(e,t,i){Util.stop(e),PopOver.toggle({elem:$(e.target).closest("a"),top:34,view:new t({model:this.model,modelCache:this.modelCache})}),track("Quick Card Editor",i)},t.prototype.editLabels=function(e){return this.showPopOver(e,CardLabelSelectView,"Open Label Edit")},t.prototype.editMembers=function(e){return this.showPopOver(e,CardMemberSelectView,"Open Member Edit")},t.prototype.moveCard=function(e){return this.showPopOver(e,CardMoveView,"Open Move Card")},t.prototype.copyCard=function(e){return this.showPopOver(e,CardCopyView,"Open Copy Card")},t.prototype.editDueDate=function(e){return this.showPopOver(e,DatePickerView,"Open Due Date Edit")},t.prototype.archive=function(e){Util.stop(e),this.model.close(),this.closeEditor(),track("Quick Card Editor","Archive")},t.prototype.quickCardEditKeydown=function(e){return e.keyCode===Key_Enter?this.saveEdits(e):void 0},t.prototype.saveEdits=function(e){var t;Util.stop(e),t=this.$(".js-edit-card-title").val().trim(),""!==t?(PopOver.hide(),this.model.update({name:t}),this.remove()):this.$(".js-edit-card-title").focus().select(),track("Quick Card Editor","Save Name")},t.prototype.checkCloseEditor=function(e){PopOver.isVisible?PopOver.hide():this.$(".sticker.editing").length>0?this.stopEditingStickers():this.closeEditor(e)},t.prototype.closeEditor=function(){this.remove(),PopOver.hide(),track("Quick Card Editor","Close")},t.prototype.stopEditingStickers=function(){var e,t,i,n;for(n=_.clone(this.model.stickerList.models),t=0,i=n.length;i>t;t++)e=n[t],e.trigger("stopEditing")},t.prototype.stopCard=function(e){Util.stopPropagation(e),PopOver.hide()},t}(ViewWithId);var MemberState,SearchState,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};MemberState=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"memberState-"+Auth.myId()}),this.fetch()}return __extends(t,e),t.prototype["default"]=function(){return{cardsPageSortType:"board",processingAttachmentsLength:0,idCollapsedChecklists:[]}},t.prototype.getCardsPageSortType=function(){return this.get("cardsPageSortType")},t.prototype.sortCardsPageByBoard=function(){return this.save("cardsPageSortType","board")},t.prototype.sortCardsPageByDate=function(){return this.save("cardsPageSortType","date")},t.prototype.getCollapsedChecklists=function(){return this.get("idCollapsedChecklists")},t.prototype.pullCollapsedChecklist=function(e){return this.pull("idCollapsedChecklists",e)},t.prototype.pushCollapsedChecklist=function(e){var t,i;return this.pull("idCollapsedChecklists",e),this.addToSet("idCollapsedChecklists",e),t=this.getCollapsedChecklists(),i=_.rest(t,Math.max(0,t.length-256)),this.save("idCollapsedChecklists",i)},t.prototype.getProcessingAttachmentsLength=function(){return this.get("processingAttachmentsLength")},t.prototype.addProcessingAttachment=function(){var e;return e=this.getProcessingAttachmentsLength()+1,this.save("processingAttachmentsLength",e)},t.prototype.removeProcessingAttachment=function(){var e;return e=this.getProcessingAttachmentsLength()-1,0>e&&(e=0),this.save("processingAttachmentsLength",e)},t.prototype.clearProcessingAttachments=function(){return this.save("processingAttachmentsLength",0)},t}(LocalStorageModel)),SearchState=new(function(e){function t(){t.__super__.constructor.call(this),this.set({query:"",suggestions:[],suggestionSearchTerm:"",suggestSearchModelTypes:""})}return __extends(t,e),t.prototype.getQuery=function(){return this.get("query")},t.prototype.setQuery=function(e){return e!==this.getQuery()&&this.set("query",e),""===e?(this.clearSuggestions(),this.clearSuggestionSearchTerm(),this.clearSuggestionSearchModelTypes()):void 0},t.prototype.toggleStringInQuery=function(e){var t,i;return t=this.getQuery(),i=RegExp(""+Util.escapeForRegex(e)),i.test(t)?this.removeStringFromQuery(e):this.addStringToQuery(e)},t.prototype.removeRegexFromQuery=function(e){var t,i;return t=this.getQuery(),e.test(t)?(i=t.replace(e,""),i=Util.stripExtraSpaces(i),""!==i&&(i+=" "),this.setQuery(i)):void 0},t.prototype.removeStringFromQuery=function(e){var t,i,n;return t=this.getQuery(),i=RegExp(""+Util.escapeForRegex(e)),i.test(t)?(n=t.replace(e,""),n=Util.stripExtraSpaces(n),""!==n&&(n+=" "),this.setQuery(n)):void 0},t.prototype.addStringToQuery=function(e){var t,i,n;return t=this.getQuery(),i=RegExp(""+Util.escapeForRegex(e)),i.test(t)?void 0:(n=""+t+" "+e,n=Util.stripExtraSpaces(n)+" ",this.setQuery(n))},t.prototype.getSuggestions=function(){return this.get("suggestions")},t.prototype.setSuggestions=function(e){return this.set("suggestions",e)},t.prototype.clearSuggestions=function(){return this.set("suggestions",[])},t.prototype.getSuggestionSearchTerm=function(){return this.get("suggestionSearchTerm")},t.prototype.setSuggestionSearchTerm=function(e){return this.set("suggestionSearchTerm",e)},t.prototype.clearSuggestionSearchTerm=function(){return this.set("suggestionSearchTerm","")},t.prototype.getSuggestionSearchModelTypes=function(){return this.get("suggestSearchModelTypes")},t.prototype.setSuggestionSearchModelTypes=function(e){return this.set("suggestSearchModelTypes",e)},t.prototype.clearSuggestionSearchModelTypes=function(){return this.set("suggestSearchModelTypes","")},t}(TrelloModel));var VersionTagView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};VersionTagView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="version-tag",t.prototype.initialize=function(){return $(ClientVersion).bind("change:serverVersion",this.render.bind(this)),t.__super__.initialize.apply(this,arguments),this.render()},t.prototype.render=function(){return this.$el.text(ClientVersion.getVersionDisplay()),this},t}(ViewWithId);var CalendarControllerView,CalendarDayView,CalendarMonthDayView,CalendarMonthView,CalendarView,CalendarViewState,CalendarWeekDayView,CalendarWeekView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__slice=[].slice;CalendarViewState=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype["default"]=function(){return{mode:"month"}},t.prototype.getMode=function(){return this.get("mode")},t.prototype.setMode=function(e){return this.update("mode",e)},t}(LocalStorageModel),CalendarControllerView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="calendar-wrapper",t.prototype.events={"click .js-week-view":"switchToWeekViewFromMonth","click .js-month-view":"switchToMonthViewFromWeek","click .js-left-arrow":"navigatePrevious","click .js-right-arrow":"navigateNext","click .js-today":"navigateToday","click .js-open-card-composer":"openComposer"},t.prototype.initialize=function(){return this.startOfWeek=Dates.isUS?"sunday":"monday",this.monthView=this.subview(CalendarMonthView,this.model),this.weekView=this.subview(CalendarWeekView,this.model),this.localState=new CalendarViewState({id:"calendar"+this.model.id}),this.localState.fetch(),this.model.viewState.clearSelectedCard()},t.prototype.render=function(e){var t;return null==e&&(e=new Date),t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"monday"===this.startOfWeek&&(t=Util.rotateArr(t,-1)),this.$el.html(templates.fill("calendar_toolbar",{days:t})),this.localState.getMode()===CalendarWeekView.prototype.VIEWSTATE_PREF_STR?this.showView(this.weekView,e):this.showView(this.monthView,e),this},t.prototype.remove=function(){return this.stopSubscriptions(),this.model.viewState.clearSelectedCard(),t.__super__.remove.apply(this,arguments)},t.prototype.openComposer=function(e){var t,i,n;return Util.stop(e),t=$(e.target).closest(".day-cell, .day-column"),n=new Date(parseInt(t.attr("name"))),i=new CalendarCardComposerView({model:this.model.composer}),i.setDate(n),PopOver.show({clientx:e.clientX,clienty:e.clientY,top:35,view:i,autoPosition:!0})},t.prototype.showView=function(e,t){var i;return this.currentSubView=e,i=this.$(".calendar-header").removeClass("week-view month-view").addClass(this.currentSubView.HEADER_CLASS_NAME),this.$(".calendar-content").empty().append(this.currentSubView.render(t).el),this.model.viewState.clearSelectedCard(),this.localState.setMode(this.currentSubView.VIEWSTATE_PREF_STR),this.currentSubView.delegateEvents(),this.currentSubView.updateRoute()},t.prototype.switchToWeekViewFromMonth=function(){return this.showView(this.weekView,this.monthView.currentCenterWeek),this.addedToDOM()},t.prototype.switchToMonthViewFromWeek=function(){return this.showView(this.monthView,this.weekView.currentWeek),this.addedToDOM()},t.prototype.setSubscriptions=function(){this.stopSubscriptions(),this.currentSubView===this.monthView?this.monthView.setSubscriptions():($(WindowSize).on("windowClassChange."+this.uniqueId(),function(e){return function(){var t;return t=1<=arguments.length?__slice.call(arguments,0):[],e.weekSmallWindowResizeCheck.apply(e,t)}}(this)),this.weekView.setSubscriptions())},t.prototype.stopSubscriptions=function(){return this.weekView.stopSubscriptions(),this.monthView.stopSubscriptions(),$(WindowSize).off("."+this.uniqueId())},t.prototype.delegateEvents=function(){var e;return t.__super__.delegateEvents.apply(this,arguments),null!=(e=this.currentSubView)?e.delegateEvents():void 0},t.prototype.addedToDOM=function(){return this.setSubscriptions(),this.currentSubView.addedToDOM()},t.prototype.navigateToday=function(){return this.currentSubView.navigateToday()},t.prototype.navigatePrevious=function(){return this.currentSubView.navigatePrevious()},t.prototype.navigateNext=function(){return this.currentSubView.navigateNext()},t.prototype.weekSmallWindowResizeCheck=function(e,t){return"small-window"===t.newClass&&this.currentSubView===this.weekView?this.switchToMonthViewFromWeek():void 0},t}(ViewWithId),CalendarView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="fancy-scrollbar calendar-drag-area",t.prototype.SCROLL_ANIMATION_TIME=400,t.prototype.initialize=function(){var e;return e=this.listenToListChanges.bind(this),this.model.listList.each(e),this.listenTo(this.model.listList,"add remove",e)},t.prototype.addedToDOM=function(){return this.model.editable()?_.defer(function(){return DragSort.refreshCalendarCardSortable()}):void 0},t.prototype.delegateEvents=function(){var e,i,n,r,o;for(t.__super__.delegateEvents.apply(this,arguments),r=this.subviewsOfType(this.DAY_VIEW_TYPE),o=[],i=0,n=r.length;n>i;i++)e=r[i],o.push(e.delegateEvents());return o},t.prototype.setSubscriptions=function(){var e,t,i,n,r;for(n=this.cardSubviews(),r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(e.listenToActiveCardChanges());return r},t.prototype.stopSubscriptions=function(){var e,t,i,n,r;for(n=this.cardSubviews(),r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(e.stopListeningToActiveCardChanges());return r},t.prototype.listenToListChanges=function(e){return this.listenTo(e.cardList,"add remove",function(e){var t;return this.cardsWithDueDates([e]).length>0?(t=new Date(e.get("due")),this.renderCardsOnDates([t])):void 0}),this.listenTo(e.cardList,"change:due",function(e,t){var i,n,r,o,s;return s=e.previousAttributes().due,r=e.get("due"),o=new Date(null!=s?s:null),t=new Date(null!=r?r:null),o.isSameDay(t)?void 0:(n=function(){var e,t,n,o;for(n=[s,r],o=[],e=0,t=n.length;t>e;e++)i=n[e],null!=i&&o.push(new Date(i));return o}(),this.renderCardsOnDates(n))}),this.listenTo(e.cardList,"reset",function(e,t){var i,n,r,o;return r=e.models,o=t.previousModels,n=_.difference(r,o).concat(_.difference(o,r)),this.renderCardsOnDates(function(){var e,t,r;for(r=[],e=0,t=n.length;t>e;e++)i=n[e],r.push(new Date(i.get("due")));return r}())})},t.prototype.navigateToday=function(){return this.scrollToDay(this.today,this.SCROLL_ANIMATION_TIME)},t.prototype.getCardView=function(e){return this.subview(CalendarCardView,e,e.cid)},t.prototype.cardsWithDueDates=function(e){return _.filter(e,function(e){return null!=e.get("due")})},t.prototype.cardsDueOnDate=function(e,t){return e=this.cardsWithDueDates(e),_.filter(e,function(e){return t.isSameDay(new Date(e.get("due")))})},t.prototype.cardSubviews=function(){var e,t,i;return i=this.subviewsOfType(this.DAY_VIEW_TYPE),e=_.flatten(function(){var e,n,r;for(r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.subviewsOfType(CalendarCardView));return r}())},t.prototype.calculateFirstAndLastWeeksFromDOM=function(){var e;return e=this.$(".week"),this.firstRenderedWeek=new Date(parseInt(e.first().attr("name"))),this.lastRenderedWeek=new Date(parseInt(e.last().attr("name"))),this.lastRenderedSaturday=Dates.getEndOfWeek(this.lastRenderedWeek)},t.prototype.renderCardsOnDates=function(e){var t,i,n,r,o,s,a;if(this.$(".week").length>0){for(a=[],o=0,s=e.length;s>o;o++)i=e[o],this.firstRenderedWeek<i&&i<this.lastRenderedSaturday&&(t=this.cardsDueOnDate(this.model.openCards(),i),n=Dates.getMidnightInt(i),r=this.existingSubview(this.DAY_VIEW_TYPE,this.model,n),r.cardsDue=t,a.push(r.renderCardsAndHeaders()));return a}},t.prototype.renderDayViews=function(e){var t,i,n,r;for(r=[],i=0,n=e.length;n>i;i++)t=e[i],r.push(this.getDayView(t).render().el);return r},t.prototype.getDayView=function(e,t){var i;return i={day:e,cardsDueOnDate:this.cardsDueOnDate(this.model.openCards(),e)},this.subview(this.DAY_VIEW_TYPE,this.model,_.extend({data:i,getCardView:this.getCardView.bind(this)},t),Dates.getMidnightInt(e))},t.prototype.weekRowEl=function(e){var t,i;return i=this.renderDayViews(Dates.getDaysOfWeek(e)),t=$(document.createElement(this.WEEK_WRAPPER_ELEMENT)),t.attr("name",Dates.getMidnightInt(Dates.getStartOfWeek(e))).addClass("week").append(i),t},t}(ViewWithId),CalendarWeekView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className=Util.extendParentClassName("calendar-week"),t.prototype.WEEK_WRAPPER_ELEMENT="div",t.prototype.VIEWSTATE_PREF_STR="week",t.prototype.HEADER_CLASS_NAME="week-view",t.prototype.WEEKS_KEPT_IN_DOM=5,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=CalendarWeekDayView,this.today=new Date,this.scrollLock=!1},t.prototype.render=function(e){return null==e&&(e=this.today),this.$el.html(templates.fill("calendar_week")),this.currentWeek=Dates.getStartOfWeek(e),this.appendWeekEl(this.currentWeek),this.prependWeekEl(new Date(this.currentWeek).addDays(-7)),this.appendWeekEl(new Date(this.currentWeek).addDays(7)),this},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.weekWidth=$(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek),this.updateToolbar()},t.prototype.updateRoute=function(){var e,t,i,n;return n=Dates.dateToObj(this.currentWeek),i=n.year,t=n.month,e=n.day,t=Util.lpad(t,2,"0"),e=Util.lpad(e,2,"0"),Controller.setBoardLocation(this.model.id,"calendar",[i,t,e],{replace:!0})
},t.prototype.setSubscriptions=function(){return t.__super__.setSubscriptions.apply(this,arguments),$(window).on("resize."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this)),$(".board-widgets").on("transitionend."+this.uniqueId()+" webkitTransitionEnd."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this))},t.prototype.stopSubscriptions=function(){return t.__super__.stopSubscriptions.apply(this,arguments),$(window).off("."+this.uniqueId()),$(".board-widgets").off("."+this.uniqueId())},t.prototype.resizeCheck=function(){return this.weekWidth=$(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek)},t.prototype.resizeWeekCanvas=function(){var e;return e=this.$(".week").length,$(".week-horizontal-canvas").width(this.weekWidth*e),$(".week").width(this.weekWidth)},t.prototype.updateToolbar=function(){var e,t,i,n,r;return r=Dates.getEndOfWeek(this.currentWeek),t=Dates.isUS?"MMMM dd, yyyy":"dd MMMM, yyyy",i=""+this.currentWeek.toString(t)+" - "+r.toString(t),$(".js-calendar-header").text(i),e=$(".today-button"),n=this.currentWeek.isSameDay(Dates.getStartOfWeek(this.today)),e.toggleClass("on-today",n)},t.prototype.appendWeekEl=function(e){var t,i;return i=this.$(".week-horizontal-canvas"),i.append(this.weekRowEl(e)),this.resizeWeekCanvas(),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&(t.first().remove(),this.scrollLeft(-1*this.weekWidth)),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.prependWeekEl=function(e){var t,i;return i=this.$(".week-horizontal-canvas"),i.prepend(this.weekRowEl(e)),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&t.last().remove(),this.resizeWeekCanvas(),this.scrollLeft(this.weekWidth),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.navigatePrevious=function(){return this.navigateWeek({backwards:!0})},t.prototype.navigateNext=function(){return this.navigateWeek({backwards:!1})},t.prototype.navigateWeek=function(e){var t,i,n,r,o;return i=(null!=e?e:{}).backwards,this.scrollLock?void 0:(n=i?-7:7,t=i?this.$(".week").first():this.$(".week").last(),this.currentWeek.addDays(n),o=t.attr("name"),r=new Date(parseInt(o)),this.currentWeek.isSameDay(r)&&(i?this.prependWeekEl(new Date(this.currentWeek).addDays(-7)):this.appendWeekEl(new Date(this.currentWeek).addDays(7)),this.model.editable()&&_.defer(function(){return DragSort.refreshCalendarCardSortable()})),this.scrollToDay(this.currentWeek,this.SCROLL_ANIMATION_TIME))},t.prototype.scrollLeft=function(e,t){var i,n;return i=$(".calendar-week"),n=i.prop("scrollLeft"),this.scrollLeftTo(n+e,t)},t.prototype.scrollLeftTo=function(e,t){var i;return i=$(".calendar-week"),t?(this.scrollLock=!0,i.animate({scrollLeft:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):i.scrollLeft(e)},t.prototype.scrollToDay=function(e,t){var i,n,r;return this.firstRenderedWeek<e&&e<this.lastRenderedSaturday?(r=Dates.getMidnightInt(Dates.getStartOfWeek(e)),i=this.$(".week[name='"+r+"']"),n=i.prop("offsetLeft"),this.scrollLeftTo(n,t),this.currentWeek=new Date(r),this.updateToolbar()):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute()},t.prototype.completeAnimatedScroll=function(){return this.scrollLock=!1},t}(CalendarView),CalendarMonthView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className=Util.extendParentClassName("calendar-month"),t.prototype.WEEK_WRAPPER_ELEMENT="tr",t.prototype.VIEWSTATE_PREF_STR="month",t.prototype.HEADER_CLASS_NAME="month-view",t.prototype.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS=5,t.prototype.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD=5,t.prototype.MINIMUM_WEEKS_KEPT_IN_DOM=20,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=CalendarMonthDayView,this.today=new Date,this.currentMonthCells=[],this.scrollLock=!1,this.weeksKeptInDOM=this.MINIMUM_WEEKS_KEPT_IN_DOM,this.makeDebouncedMethods("shadeDaysUpdateHeader")},t.prototype.render=function(e){var t;return null==e&&(e=this.today),this.$el.html(templates.fill("calendar_month")),this.renderBaseWeek(e),this.currentCenterWeek=e,this.currentMonth=Dates.getFirstOfMonth(e),t=Math.floor(this.weeksKeptInDOM/2),this.renderWeeks(t),this.renderWeeks(-1*t),this.shadeDays(),this.setSubscriptions(),this},t.prototype.getDayView=function(e,i){return t.__super__.getDayView.call(this,e,_.extend({scrollIntoView:this.scrollIntoView.bind(this)},i))},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.calculateVariables(),this.windowResizeCheck(),this.updateHeader(),this.scrollToDay(this.currentCenterWeek)},t.prototype.updateRoute=function(){var e,t,i;return i=Dates.dateToObj(this.currentMonth),t=i.year,e=i.month,e=Util.lpad(e,2,"0"),Controller.setBoardLocation(this.model.id,"calendar",[t,e],{replace:!0})},t.prototype.setSubscriptions=function(){return this.stopSubscriptions(),t.__super__.setSubscriptions.apply(this,arguments),$(WindowSize).on("windowClassChange."+this.uniqueId(),function(e){return function(){return e.windowClassChangeCheck()}}(this)),$(window).on("resize."+this.uniqueId(),function(e){return function(){return e.windowResizeCheck()}}(this)),$(".calendar-month").on("scroll."+this.uniqueId()+" ",function(e){return function(){return e.scrollCheck()}}(this))},t.prototype.stopSubscriptions=function(){return t.__super__.stopSubscriptions.apply(this,arguments),$(WindowSize).off("."+this.uniqueId()),$(window).off("."+this.uniqueId()),$(".calendar-month").off("."+this.uniqueId())},t.prototype.windowClassChangeCheck=function(e,t){var i;return"small-window"===t.newClass||"small-window"===t.oldClass?($(".calendar-day.active").removeClass("active"),i=new Date(this.currentCenterWeek),this.calculateVariables(),this.windowResizeCheck(),this.scrollCheck(),this.scrollToDay(i)):void 0},t.prototype.calculateVariables=function(){var e;return this.tableSpacing=null!=(e=parseInt(this.$(".calendar-table").css("border-spacing")))?e:5,this.dayCellHeight=this.$(".day-cell").prop("clientHeight")+this.tableSpacing},t.prototype.windowResizeCheck=function(){var e,t,i,n,r;r=$(window).outerHeight(),i=$("#header").outerHeight(),e=$("#board-header").outerHeight(),t=$(".calendar-header").outerHeight(),this.calendarContentHeight=r-(i+e+t),n=Math.ceil(this.calendarContentHeight/this.dayCellHeight),this.weeksKeptInDOM=Math.max(5*n,this.MINIMUM_WEEKS_KEPT_IN_DOM)},t.prototype.updateHeader=function(){var e;return e=""+this.currentMonth.toString("MMMM yyyy"),$(".js-calendar-header").text(e)},t.prototype.renderBaseWeek=function(e){var t;return t=this.weekRowEl(e),$(".calendar-month").off("."+this.uniqueId()),this.$(".calendar-table").append(t),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.renderWeeks=function(e){var t,i;return e>0&&(t=new Date(this.lastRenderedSaturday).addDays(7*e),this.renderUpToDay(t)),0>e?(i=new Date(this.firstRenderedWeek).addDays(7*e),this.renderUpToDay(i)):void 0},t.prototype.renderUpToDay=function(e){var t,i,n,r,o;for(t=this.$(".calendar-table"),i=Dates.getEndOfWeek(e),r=[];this.lastRenderedSaturday<i;)this.lastRenderedSaturday.addDays(7),r.push(this.weekRowEl(this.lastRenderedSaturday));for(t.append(r),n=Dates.getStartOfWeek(e),o=[];this.firstRenderedWeek>n;)this.firstRenderedWeek.addDays(-7),o.unshift(this.weekRowEl(this.firstRenderedWeek));return t.prepend(o),this.scroll(this.dayCellHeight*o.length),this.deleteExcessWeeks(),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.deleteExcessWeeks=function(){var e,t,i,n,r,o,s,a,l,c,d,u;if(e=$(".week"),e.length>this.weeksKeptInDOM){if(o=this.$(".calendar-table").outerHeight(),r=$(".calendar-month").prop("scrollTop"),n=o/2>r){for(d=[],i=s=l=e.length-1,c=this.weeksKeptInDOM;c>=l?c>=s:s>=c;i=c>=l?++s:--s)d.push($(e[i]).remove());return d}for(t=e.length-this.weeksKeptInDOM,this.scroll(-1*this.dayCellHeight*t),u=[],i=a=0;t>=0?t>a:a>t;i=t>=0?++a:--a)u.push($(e[i]).remove());return u}},t.prototype.scrollToDay=function(e,t){var i,n,r,o,s,a,l,c;return this.scrollLock?void 0:(o=this.calendarContentHeight/2/this.dayCellHeight,c=Dates.getStartOfWeek(e),r=new Date(c).addWeeks(-1*Math.ceil(o)),s=new Date(c).addWeeks(Math.ceil(o)),this.firstRenderedWeek<=r&&this.lastRenderedWeek>=s?(l=Dates.getStartOfWeek(e).addWeeks(-1*Math.floor(o)),n=Dates.getMidnightInt(l),i=this.$("[name='"+n+"']"),a=i.prop("offsetTop"),this.scrollTo(a-this.tableSpacing+1,t)):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute())},t.prototype.completeAnimatedScroll=function(){return this.enableRenderNewDays()},t.prototype.scrollIntoView=function(e){var t,i,n,r,o,s;return s=e.top,n=e.height,i=s+n,t=$(".calendar-month"),o=t.scrollTop(),r=o+t.height(),o>s?this.scroll(s-o-this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):i>r?this.scroll(i-r+this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):void 0},t.prototype.scroll=function(e,t){var i,n;return i=$(".calendar-month"),n=i.prop("scrollTop"),this.scrollTo(n+e,t)},t.prototype.scrollTo=function(e,t){var i;return i=$(".calendar-month"),t?(this.scrollLock=!0,i.animate({scrollTop:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):i.scrollTop(e)},t.prototype.navigatePrevious=function(){return this.scrollMonth(-1)},t.prototype.navigateNext=function(){return this.scrollMonth(1)},t.prototype.scrollMonth=function(e){var t,i;return this.scrollLock?void 0:(i=new Date(this.currentMonth).addMonths(e),t=Dates.getFirstOfMonth(i).addDays(15),this.scrollToDay(t,this.SCROLL_ANIMATION_TIME))},t.prototype.enableRenderNewDays=function(){return this.checkRenderDays(),this.scrollLock=!1},t.prototype.scrollCheck=function(){var e,t,i,n,r,o,s,a,l,c,d,u;return PopOver.hide(),e=$(".calendar-month"),i=e.outerHeight(),a=e.prop("scrollTop"),this.scrollLock||this.checkRenderDays(),n=i/2,d=Math.floor((a+n)/this.dayCellHeight),s=new Date(this.firstRenderedWeek).addWeeks(d),this.currentCenterWeek.isSameDay(s)||(this.currentCenterWeek=s,r=Dates.getEndOfWeek(this.currentCenterWeek),(this.currentMonth.getMonth()!==this.currentCenterWeek.getMonth()||this.currentMonth.getMonth()!==r)&&(this.currentMonth=Dates.getFirstOfMonth(r.getMonth()===this.today.getMonth()?r:this.currentCenterWeek),this.shadeDaysUpdateHeaderDebounced()),this.updateRoute()),l=Dates.getMidnightInt(this.today),t=this.$("[name='"+l+"']"),c=t.prop("offsetTop"),o=c<(u=n+a)&&u<c+this.dayCellHeight,$(".today-button").toggleClass("on-today",o)},t.prototype.shadeDaysUpdateHeader=function(){return this.updateHeader(),this.shadeDays()},t.prototype.checkRenderDays=function(){var e,t,i,n,r,o,s;return e=$(".calendar-month"),t=e.outerHeight(),o=e.prop("scrollTop"),s=this.$(".calendar-table").outerHeight(),i=s-t-o,r=this.dayCellHeight*this.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS,r>i&&(n=!0,this.renderWeeks(this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),r>o&&(n=!0,this.renderWeeks(-1*this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),n&&this.model.editable()?_.defer(function(){return DragSort.refreshCalendarCardSortable()}):void 0},t.prototype.shadeDays=function(){var e,t,i,n,r,o,s,a,l;for(e=this.$(".day-cell"),s=this.currentMonthCells,i=0,r=s.length;r>i;i++)t=s[i],$(t).removeClass("current-month");for(this.currentMonthCells=_.filter(e,this.cellInCurrentMonth,this),a=this.currentMonthCells,l=[],n=0,o=a.length;o>n;n++)t=a[n],l.push($(t).addClass("current-month"));return l},t.prototype.cellInCurrentMonth=function(e){var t;return t=parseInt($(e).attr("name")),new Date(t).getMonth()===this.currentMonth.getMonth()},t}(CalendarView),CalendarDayView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events={sortreceive:"sortReceive",sortstop:"sortStop","click .js-expand-day:not(.active)":"expand","click .js-toggle-day":"clickToggleDay"},t.prototype.initialize=function(e){return this.data=e.data,this.getCardView=e.getCardView,this.$el.attr("name",Dates.getMidnightInt(this.data.day)),this.cardsDue=this.data.cardsDueOnDate},t.prototype.remove=function(){return delete this.getCardView,t.__super__.remove.apply(this,arguments)},t.prototype.render=function(e){var t,i,n,r;return null==e&&(e={}),i=new Date(this.data.day).moveToLastDayOfMonth(),t=1===this.data.day.getDate()||this.data.day.isSameDay(i),n=this.data.day.toString("MMM"),r={date:this.data.day.getDate(),month:t?n:"",fullMonth:this.data.day.toString("MMMM"),isToday:(new Date).isSameDay(this.data.day)},_.extend(e,r),this.$el.html(templates.fill("calendar_day",e,{editable:this.model.editable()})),this.renderCardsAndHeaders(),this},t.prototype.renderCardsAndHeaders=function(){return this.updateHeader(),this.renderCardsAndListHeaders()},t.prototype.cardListMap=function(){return _.groupBy(this.cardsDue,function(e){return e.getList().id})},t.prototype.updateHeader=function(){var e;return e=this.cardsDue.length,this.$(".day-number-header, .day-cards-header").empty(),e>0?(this.$(".day-number-header").text(e),this.$(".day-cards-header").text(Util.formatNoun(e,"card"))):void 0},t.prototype.renderCardsAndListHeaders=function(){var e,t,i,n,r,o,s,a,l,c,d,u;e=this.$(".calendar-day-list"),e.empty(),o=[],u=this.cardListMap();for(l in u)if(__hasProp.call(u,l))for(r=u[l],s={listID:l,listName:this.model.getList(l).get("name")},a=templates.fill("calendar_day_list_header",s),o.push(a),c=0,d=r.length;d>c;c++)t=r[c],i=this.getCardView(t),i.$el.hasClass("ui-sortable-helper")||(n=i.render().el,$(n).attr("name",t.cid),i.delegateEvents(),o.push(n));return e.append(o),this.model.editable()?DragSort.refreshIfInitialized(this.$(".js-calendar-sortable")):void 0},t.prototype.sortReceive=function(e,t){return this.validCardDragDrop(t.position.left,t.position.top)?t.item.trigger("moveToCalendarDay",[t,this]):(DragSort.abort(),DragSort.refreshIfInitialized(this.$(".js-calendar-sortable")))},t.prototype.sortStop=function(e,t){return t.item.trigger("moveInCalendarDay",[t,this])},t.prototype.clickToggleDay=function(e){return this.$(".calendar-day").hasClass("active")?this.contract(e):this.expand(e)},t.prototype.expand=function(e){var t;return Util.stop(e),DragSort.sorting?void 0:($(".calendar-day.active").removeClass("active"),t=this.$(".calendar-day").addClass("active"),PopOver.hide())},t.prototype.contract=function(e){return Util.stop(e),this.$(".calendar-day").removeClass("active"),PopOver.hide()},t}(ViewWithId),CalendarMonthDayView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.tagName="td",t.prototype.className="day-cell",t.prototype.initialize=function(e){return this.scrollIntoView=e.scrollIntoView,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.call(this,{monthView:!0})},t.prototype.expand=function(){var e;return t.__super__.expand.apply(this,arguments),e=this.$(".calendar-day"),this.scrollIntoView({top:this.$el.prop("offsetTop"),height:e.outerHeight()})},t.prototype.validCardDragDrop=function(e,t){return t>=0&&t<=$(".calendar-content").outerHeight()},t}(CalendarDayView),CalendarWeekDayView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="day-column",t.prototype.validCardDragDrop=function(e){return e>=0&&e<=$(".calendar-content").outerWidth()},t}(CalendarDayView);var WINDOW_EXTRA_LARGE,WINDOW_LARGE,WINDOW_MEDIUM,WINDOW_SMALL,WindowSize;WINDOW_SMALL={width:0,className:"small-window"},WINDOW_MEDIUM={width:750,className:"medium-window"},WINDOW_LARGE={width:900,className:"large-window"},WINDOW_EXTRA_LARGE={width:1280,className:"extra-large-window"},WindowSize=new(function(){function e(){}return e.prototype.calc=function(){var e,t,i,n,r,o,s;for("undefined"!=typeof Profiler&&null!==Profiler&&Profiler.time("WindowSize.calc"),this.ranCalc=!0,t=this.className,r=$(window).width(),$("#surface").height("initial"),this.fExtraLarge=this.fLarge=this.fMedium=this.fSmall=!1,r>WINDOW_EXTRA_LARGE.width?(this.className=WINDOW_EXTRA_LARGE.className,this.fExtraLarge=!0):r>WINDOW_LARGE.width?(this.className=WINDOW_LARGE.className,this.fLarge=!0):r>WINDOW_MEDIUM.width?(this.className=WINDOW_MEDIUM.className,this.fMedium=!0):($("#surface").height($(window).height()),this.className=WINDOW_SMALL.className,this.fSmall=!0),e="unknown-window",n=[WINDOW_EXTRA_LARGE,WINDOW_LARGE,WINDOW_MEDIUM,WINDOW_SMALL],o=0,s=n.length;s>o;o++)i=n[o],e=e+" "+i.className;return t!==this.className&&($("body").removeClass(e).addClass(this.className),$(this).triggerHandler("windowClassChange",{newClass:this.className,oldClass:t})),"undefined"!=typeof Profiler&&null!==Profiler?Profiler.timeEnd("WindowSize.calc"):void 0},e.prototype.ensureRun=function(){return this.ranCalc?void 0:this.calc()},e}());var Layout;Layout=new(function(){function e(){}return e.prototype.cancelEdits=function(e){var t;return $(".edit-controls:not(.keep)").remove(),$(".editing").removeClass("editing"),$(".checklist-new-item").removeClass("focus"),$("input").not(e||"none").blur(),$("textarea").not(e||"none").blur(),t=$(".editable"),t.length>0?t.each(function(e){var t,i,n,r,o,s,a;return n=$(".editable")[e],a=$(n).find(".edits-warning:first"),t=$(n).find(".current:first"),r=$(n).find(".field:first"),i=r.data("draftKey"),o=null!=(s=t.data("unmarkeddown"))?s!==r.val():r.val()!==t.text(),o&&""!==r.val()&&null!=i?(Storage.set(i,r.val()),a.show()):void 0}):void 0},e.prototype.isEditing=function(){return $(".editing").length+$(".checklist-new-item.focus").length>0},e.prototype.setSurfaceHeight=function(){return $("#surface").css({"min-height":$(window).height()})},e}());var DragSort;DragSort=new(function(){function e(){}return e.prototype.startSort=function(e,t,i){var n;n=Controller.getCurrentModelCache(),this._lockIndex=null!=n?n.lock("DragSort.startSort"):void 0,this.target=e.target,DragSort.sorting=!0,DragSort.resetMouse(),DragSort.getBoardMeasurements(i),DragSort.attachMousePos(),SidebarState.hideSidebar(),this.scrollSetTimeoutId=setInterval(function(){return function(){return DragSort.scrollWhileSorting()}}(this),16),$(e.target).closest(".pop-over").length<1&&PopOver.hide()},e.prototype.endSort=function(){var e,t;t=Controller.getCurrentModelCache(),null!=t&&t.unlock(this._lockIndex),DragSort.scrollList=null,DragSort.detachMousePos(),DragSort.resetMouse(),this.target=null,e=Controller.getCurrentBoard(),e.viewState.get("archiveSidebarDropzoneVisible")&&e.viewState.setArchiveSidebarDropzone(!1),clearInterval(this.scrollSetTimeoutId),_.defer(function(){return DragSort.sorting=!1})},e.prototype.abort=function(){var e,t;return e=$(".ui-sortable-helper"),e.length&&this.target?(e.data("dragCancel",!0),"function"==typeof(t=$(this.target)).sortable&&t.sortable("cancel"),e.removeData("dragCancel")):void 0},e.prototype.resetMouse=function(){return this.mouseX=this.mouseY=null,this.hasMousedLeft=this.hasMousedRight=!1},e.prototype.attachMousePos=function(){var e,t,i,n,r,o;o=$(window).height(),i=100,n=o-i,t=$(".board-canvas").width(),e=Controller.getCurrentBoard(),r=e.viewState.get("archiveSidebarDropzoneVisible"),$(document).on("mousemove.dragsort",function(e){return function(i){return r&&e.mouseX>t?(DragSort.isInSidebarArchiveDropzone=!0,$(".list-card.placeholder").addClass("hide"),$(".js-sidebar-archive-dropzone").addClass("hover-state")):(DragSort.isInSidebarArchiveDropzone=!1,$(".list-card.placeholder").removeClass("hide"),$(".js-sidebar-archive-dropzone").removeClass("hover-state")),null!=e.mouseX&&null!=e.mouseY&&(i.pageX<e.mouseX-40?e.hasMousedLeft=!0:i.pageX>e.mouseX+40&&(e.hasMousedRight=!0)),e.mouseX=i.pageX,e.mouseY=i.pageY}}(this))},e.prototype.detachMousePos=function(){return $(document).off("mousemove.dragsort")},e.prototype.getBoardMeasurements=function(e){var t;this.pxBoardBorder=200,this.pxListBorder=170,this.pxMemberBoardBorder=40,this.$listArea=$("#board")[0],this.scrollFactor=.1,t=$(".board-canvas"),this.boardWidth=t.outerWidth(),this.boardOffset=t.offset(),this.boardHeight=t.height(),(null!=e?e.isMemberDrag:void 0)?(this.leftEdge=this.boardOffset.left+this.pxMemberBoardBorder,this.rightEdge=this.boardOffset.left+this.boardWidth-this.pxMemberBoardBorder):(this.leftEdge=this.boardOffset.left+this.pxBoardBorder,this.rightEdge=this.boardOffset.left+this.boardWidth-this.pxBoardBorder),this.cardAreaWidth=$("#board").outerWidth(),this.topEdge=this.boardOffset.top+this.pxListBorder,this.bottomEdge=this.boardOffset.top+this.boardHeight-this.pxListBorder},e.prototype.refreshListSortable=function(){return PostRender.enqueue("refreshListSortable",function(){return Browser.isTouch()?void 0:$(".js-list-sortable").sortable({handle:".list-header",tolerance:"pointer",placeholder:"list placeholder",scroll:!1,delay:"75",distance:"7",items:".list:not(.add-list)",start:function(e,t){var i,n,r;DragSort.startSort(e,t),$(t.helper).appendTo("body"),"function"==typeof(r=$(".js-list-sortable")).sortable&&r.sortable("refreshPositions",!0),n=$(t.helper).width(),i=$(t.helper).height(),$(t.placeholder).width(n).height(i),$(".list.add-list").addClass("fade"),$(".list.add-list").one("transitionend webkitTransitionEnd",function(){return $(this).addClass("hide")})},stop:function(e){Util.stopPropagation(e),DragSort.endSort(),$(".list.add-list").removeClass("hide").removeClass("fade").off("transitionend webkitTransitionEnd")}})})},e.prototype.refreshCardSortable=function(){return PostRender.enqueue("refreshCardSortable",function(e){return function(){var t;return t=Controller.getCurrentBoardView(),Controller.showingCalendar(t)?e.refreshCalendarCardSortable():e.refreshListCardSortable()}}(this))},e.prototype.refreshCalendarCardSortable=function(){return PostRender.enqueue("refreshCalendarCardSortable",function(){return function(){return Browser.isTouch()?void 0:$(".js-calendar-sortable, .js-archived-cards").sortable({connectWith:".js-calendar-sortable",placeholder:"list-card placeholder-none",scroll:!1,distance:"7",delay:"75",items:".list-card:not('.placeholder-none,.hide,.js-composer')",start:function(e,t){var i,n;$(t.helper).appendTo(".calendar-drag-area"),null!=(n=$(".js-calendar-sortable, .js-archived-cards"))&&"function"==typeof n.sortable&&n.sortable("refreshPositions",!0),i=Controller.getCurrentBoard(),_.defer(function(){return(null!=i?i.viewState.get("showSidebar"):void 0)&&(null!=i?i.viewState.getCurrentSidebarView():void 0)instanceof CardAndListArchiveView&&i.viewState.setArchiveSidebarDropzone(!0),DragSort.startSort(e,t)})},stop:function(e){var t;Util.stopPropagation(e),DragSort.endSort(),t=Controller.getCurrentBoard(),(null!=t?t.viewState.get("showSidebar"):void 0)&&(null!=t?t.viewState.getCurrentSidebarView():void 0)instanceof CardAndListArchiveView&&DragSort.isInSidebarArchiveDropzone&&(t.viewState.setArchiveSidebarDropzone(!1),_.defer(function(){return t.viewState.getCurrentSidebarView().renderArchivedCards()}))},over:function(){return $(this).parents(".calendar-day").addClass("drop")},out:function(){return $(this).parents(".calendar-day").removeClass("drop")}})}}(this))},e.prototype.refreshListCardSortable=function(){return PostRender.enqueue("refreshListCardSortable",function(){return Browser.isTouch()?void 0:$(".js-sortable, .js-archived-cards").sortable({connectWith:".js-sortable",placeholder:"list-card placeholder",scroll:!1,delay:"75",distance:"7",items:".list-card:not('.placeholder,.hide,.js-composer')",start:function(e,t){var i,n,r;DragSort.draggedCardList=$(e.target).closest(".js-sortable"),DragSort.getScrollListForCardSort(t),$(t.helper).appendTo("body"),null!=(r=$(".js-sortable, .js-archived-cards"))&&"function"==typeof r.sortable&&r.sortable("refreshPositions",!0),i=Controller.getCurrentBoard(),(null!=i?i.viewState.get("showSidebar"):void 0)&&(null!=i?i.viewState.getCurrentSidebarView():void 0)instanceof CardAndListArchiveView&&i.viewState.setArchiveSidebarDropzone(!0),DragSort.startSort(e,t),n=$(t.helper).height()+1,$(t.placeholder).height(n)},stop:function(e){var t;Util.stopPropagation(e),DragSort.endSort(),t=Controller.getCurrentBoard(),(null!=t?t.viewState.get("showSidebar"):void 0)&&(null!=t?t.viewState.getCurrentSidebarView():void 0)instanceof CardAndListArchiveView&&DragSort.isInSidebarArchiveDropzone&&_.defer(function(){return t.viewState.getCurrentSidebarView().renderArchivedCards()})},over:function(e,t){DragSort.getScrollListForCardSort(t)},custom:{refreshContainers:function(){var e,t,i,n,r,o,s;for(s=[],t=r=o=this.containers.length-1;0>=o?0>=r:r>=0;t=0>=o?++r:--r)e=this.containers[t].element,i=$(e).closest(".list"),i.length&&(e=i),n=e.offset(),this.containers[t].containerCache.left=n.left,this.containers[t].containerCache.top=n.top,this.containers[t].containerCache.width=e.outerWidth(),s.push(this.containers[t].containerCache.height=e.outerHeight());return s}}})})},e.prototype.refreshDraggable=function(){return PostRender.enqueue("refreshDraggable",function(){return Browser.isTouch()?void 0:$(".js-list-draggable-board-members .member:not(.deactivated)").draggable({revert:"invalid",revertDuration:150,appendTo:"#surface",containment:"#surface",zIndex:100,helper:"clone",delay:"75",distance:"7",start:function(e,t){var i;track("Board View","Drag Member from Sidebar"),$(".list-card.active-card").removeClass("active-card"),i={isMemberDrag:!0},DragSort.startSort(e,t,i),DragSort.getScrollListForMemberSidebarDrag(e,t),$(e.target).closest(".pop-over").length<1&&PopOver.hide()},stop:function(e){Util.stopPropagation(e),DragSort.endSort()},drag:function(e,t){_.throttle(DragSort.getScrollListForMemberSidebarDrag(e,t),100)},custom:{refreshContainers:function(){var e,t,i,n,r,o,s;for(s=[],t=r=o=this.containers.length-1;0>=o?0>=r:r>=0;t=0>=o?++r:--r)e=this.containers[t].element,i=$(e).closest(".list"),i.length&&(e=i),n=e.offset(),this.containers[t].containerCache.left=n.left,this.containers[t].containerCache.top=n.top,this.containers[t].containerCache.width=e.outerWidth(),s.push(this.containers[t].containerCache.height=e.outerHeight());return s}}})})},e.prototype.refresh=function(){this.refreshListSortable(),this.refreshCardSortable(),this.refreshDraggable()},e.prototype.getScrollListForMemberSidebarDrag=function(){var e,t;e=$(".list"),t=!1,e.each(function(i){return function(n){var r;if(!t)return r=$(e[n]),i.mouseX<r.offset().left+r.width()?(DragSort.scrollList=r.find(".list-cards")[0],t=!0):void 0}}(this))},e.prototype.getScrollListForCardSort=function(e){var t;DragSort.scrollList=null!=e&&null!=(t=e.placeholder)?t.parents(".list-cards")[0]:void 0},e.prototype.throttledSortableRefreshPosition=_.throttle(function(){var e;return null!=(e=DragSort.draggedCardList)&&"function"==typeof e.sortable?e.sortable("refreshPositions"):void 0},100),e.prototype.throttledSortableRefresh=_.throttle(function(){return DragSort.refreshIfInitialized(DragSort.draggedCardList)},350),e.prototype.debounceArchivedCardsRefresh=_.debounce(function(){return DragSort.refreshIfInitialized($(".js-archived-cards"))},250),e.prototype.scrollWhileSorting=function(){var e,t,i,n;if(!this.sorting)return void DragSort.endSort();if(DragSort.isInBottomArchiveDropzone||DragSort.isInSidebarArchiveDropzone);else if(e=this.$listArea.scrollLeft,this.mouseX<this.leftEdge&&this.hasMousedLeft?(t=e-1.8*Math.sqrt(this.leftEdge-this.mouseX),this.$listArea.scrollLeft=t,this.throttledSortableRefreshPosition()):this.mouseX>this.rightEdge&&this.hasMousedRight&&(t=e+1.8*Math.sqrt(this.mouseX-this.rightEdge),this.$listArea.scrollLeft=t,this.throttledSortableRefreshPosition()),null!=(null!=(n=this.scrollList)?n.scrollTop:void 0))return this.mouseY<this.topEdge?(i=1.7*Math.sqrt(this.topEdge-this.mouseY),this.scrollList.scrollTop-=i):this.mouseY>this.bottomEdge&&(i=1.7*Math.sqrt(this.mouseY-this.bottomEdge),this.scrollList.scrollTop+=i),this.throttledSortableRefreshPosition()},e.prototype.refreshIfInitialized=function(e){return(null!=e?e.hasClass("ui-sortable"):void 0)?e.sortable("refresh"):void 0},e}());var PopOver,popo;popo=PopOver=new(function(){function e(){this.viewStack=[],this.el_width=1,this.el_left="",this.el_top="",this.view=null,this.args={},this.isVisible=!1,$(function(e){return function(){return t=$(".pop-over").removeClass("fancy-scrollbar"),n=$(".pop-over .header"),i=$(".pop-over .content").addClass("fancy-scrollbar"),i.addClass("js-tab-parent"),r=t.find(".js-back-view"),r.click(function(){return e.popView()}),t.find(".js-close-popover").click(function(t){return Util.stop(t),e.hide()})}}(this))}var t,i,n,r,o,s,a;return t=null,n=null,i=null,r=null,o=null,s=null,a=null,e.prototype.shortcut=function(e){switch(e){case Key_Escape:return this.popView(),["Esc - Pop Pop-over View","Pop Over"]}},e.prototype.calcPos=function(e){var r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y,w,k,C,x,j;if(this.isVisible||(null!=e?!e.notNew:!0)){if(g=$(window).width(),f=$(window).height(),t.width((null!=(b=this.view)?b.maxWidth:void 0)?this.view.maxWidth>g?g:this.view.maxWidth:""),s=g,m=f,p=t.outerWidth(),e&&!e.notNew&&(this.args=e),o=null!=(null!=(v=this.args)?v.clientx:void 0)&&null!=(null!=(y=this.args)?y.clienty:void 0),$(null!=(w=this.args)?w.elem:void 0).is(":visible")?(this.args.elem.el&&(this.elem=this.args.elem.el),this.el_width=$(this.args.elem).outerWidth(),this.el_left=$(this.args.elem).offset().left,this.el_top=$(this.args.elem).offset().top+(_.isNumber(this.args.top)?this.args.top:28)):o&&(this.el_left=this.args.clientx,this.el_top=this.args.clienty),a=(null!=(k=this.view)?k.hideHeader:void 0)&&(WindowSize.fMedium||WindowSize.fLarge||WindowSize.fExtraLarge)?m-68:WindowSize.fMedium||WindowSize.fLarge||WindowSize.fExtraLarge?m-n.outerHeight()-68:"",(null!=(C=this.args)?C.clientx:void 0)&&(null!=(x=this.args)?x.clienty:void 0));else if(!_.include(["block","inline-block","inline"],$(null!=(j=this.args)?j.elem:void 0).css("display")))return;u=this.el_top>0?this.el_top:5,c=t.outerHeight(),l=u+c,(WindowSize.fLarge||WindowSize.fExtraLarge)&&(h=f+$(window).scrollTop(),l>h&&(u=h-c-8),c>h-44&&(u=44)),d=this.el_left>0?this.el_left:5,r=d+p+16,r>s&&(d=s-(p+5)),this.isVisible||t.css({left:-1e4,top:-1e4}).show(),_.defer(function(){return function(){return t.css({left:d,top:u}),i.css({maxHeight:a})}}(this))}},e.prototype.load=function(e,r,o){var s;return _.isFunction(e)?(null==r&&(r={}),null==r.modelCache&&(r.modelCache=Controller.getCurrentModelCache()),this.view=new e(r)):(this.view=e,o=r),this.clearDisplayTypes(),t.addClass(this.view.displayType),"function"==typeof(s=this.view).getData&&s.getData(),n.find(".header-title").text(this.view.getViewTitle()),o?i.empty().append(this.view.el):i.children().detach().end().append(this.view.render().el),o||"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.addHandler(this.view,{scope:"popover_view",modal:!0}),this.view},e.prototype.show=function(e){e.keepEdits||Layout.cancelEdits(e.elActive),e.preloaded||(this.hide(),e.view=this.load(e.view,e.options)),this.viewStack.push(e.view),this.calcPos(e),_.defer(function(){return function(){if(t.find(".js-autofocus").length>0){if(Browser.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return t.find(".js-autofocus:first").focus().select()}}}(this)),this.isVisible=!0,"function"==typeof e.shown&&e.shown(t),s=e.hidden,(null!=e?e.autoPosition:void 0)?this.positionInterval=setInterval(this.checkPosition.bind(this),250):clearInterval(this.positionInterval),"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.addHandler(this,{scope:"popover",modal:!0})},e.prototype.checkPosition=function(){var e,i,n,r,o;return this.isVisible?(n=t.offset().top,o=$(window).scrollTop(),n!==o?(r=$(window).height(),i=t.outerHeight(),o>n&&r>=i?void t.css({top:o}):n+i>o+r&&(e=o+Math.max(0,r-i),e!==n)?t.css({top:e}):void 0):void 0):void clearInterval(this.positionInterval)},e.prototype.pushView=function(e){var i;if(i=_.last(this.viewStack),null!=i&&"function"==typeof i.willBePushedDown&&i.willBePushedDown(),e.view=this.load(e.view,e.options),this.viewStack.push(e.view),r.show(),t.find(".js-autofocus").length>0){if(Browser.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;
_.delay(function(){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}return this.calcPos()},e.prototype.popView=function(){var e,i;if(e=_.last(this.viewStack),null!=e&&("function"==typeof e.willBePopped&&e.willBePopped(),UserInput.removeHandler(e),e.remove()),this.viewStack.pop(),i=_.last(this.viewStack),!i)return void PopOver.hide();if(this.load(i,!0),1===this.viewStack.length&&r.hide(),t.find(".js-autofocus").length>0){if(Browser.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;_.delay(function(){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}return this.calcPos()},e.prototype.toggle=function(e){var t,i;return(this.args&&(null!=(t=this.args.elem)?t[0]:void 0))===(null!=(i=e.elem)?i[0]:void 0)?this.hide():this.show(e)},e.prototype.hide=function(){var e,n,o,a;for(clearInterval(this.positionInterval),t.hide(),a=this.viewStack.reverse(),n=0,o=a.length;o>n;n++)e=a[n],"function"==typeof e.willBePopped&&e.willBePopped(),e.remove();return i.empty(),r.hide(),this.clearDisplayTypes(),"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.removeHandlerScope("popover_view"),"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.removeHandler(this),this.viewStack=[],this.view=null,this.args=null,this.isVisible=!1,"function"==typeof s&&s(t),s=null},e.prototype.clearDisplayTypes=function(){return t.removeClass("miniprofile avdetail woof search-over popover-notifications")},e}());var Dialog;Dialog=new(function(){function e(){}var t,i,n,r;return r=e,t=null,i=null,n=null,e.prototype.shortcut=function(e){switch(e){case Key_Escape:return this.hide(),["Esc - Hide Dialog","Dialog"]}},e.prototype.init=function(){t=$(".window"),i=t.find(".window-wrapper"),i.addClass("js-tab-parent"),this.scrolltop=0,this.isVisible=!1},e.prototype.calcPos=function(e){var i,n;WindowSize.fSmall?($("#surface").height($(window).height()),i="auto"):i=e,t.css({width:i}),null!=(null!=(n=this.view)?n.setFixedSidebarLeftPos:void 0)&&Dialog.isVisible&&this.view.setFixedSidebarLeftPos(),Dialog.isVisible||t.show()},e.prototype.show=function(e){var r;this.isVisible&&this.hide(e.isNavigating),Layout.cancelEdits(),PopOver.hide(),this.clear(),n=e.hide,this.scrolltop=$(window).scrollTop(),$("body").addClass("window-up"),null!=(r=Controller.getCurrentBoard())&&r.composer.save("vis",!1),$("body").find(".js-disable-on-dialog:not([disabled])").addClass("disabled-for-dialog").attr("disabled","disabled"),null!=e.displayType&&t.addClass(e.displayType),i.empty().append(templates.fill("dialog_close_button")),e.view?(this.view=e.view,i.append(this.view.render().el),this.view.delegateEvents(),"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.addHandler(this.view,{scope:"dialog_view",modal:!0})):e.html&&(this.view=null,i.append(e.html)),this.calcPos(null!=e.maxWidth?e.maxWidth:""),this.isVisible=!0,_.defer(function(){return function(){return $(".window").css({height:1e5}),$(".window-overlay").scrollTop(1),$(".window-overlay").scrollTop(0),$(".window").css({height:""})}}(this)),t.find(".js-autofocus:first,.focus-dummy").focus().select(),t.find(".js-submit-okay").click(function(){var i,n,r,o,s;for(n=t.find("form:first"),s=n.find(".non-empty"),r=0,o=s.length;o>r;r++)if(i=s[r],/^\s*$/.test($(i).val()))return;Dialog.hide(),"function"==typeof e.okay&&e.okay({form:n})}),t.find(".js-submit-cancel").click(function(){Dialog.hide(),"function"==typeof e.cancel&&e.cancel()}),t.find("input[type=submit]").click(function(e){Util.preventDefault(e)}),t.find(".js-close-window").click(function(e){Util.stop(e),Dialog.hide(null,!0)}),"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.addHandler(this,{scope:"dialog",modal:!0})},e.prototype.hide=function(e,i){(this.isVisible&&!Layout.isEditing()&&!$(".new-comment").hasClass("focus")||i)&&("function"==typeof n&&n(e),n=null,null!=this.view&&("undefined"!=typeof UserInput&&null!==UserInput&&UserInput.removeHandler(this.view),this.view.remove(),this.view=null),"undefined"!=typeof UserInput&&null!==UserInput&&UserInput.removeHandler(this),t.hide(),$("body").removeClass("window-up"),_.defer(function(e){return function(){return $(window).scrollTop(e.scrolltop),e.scrolltop=0}}(this)),this.isVisible=!1,$(".window-overlay").off("scroll.fixSidebar"),$(".disabled-for-dialog").removeAttr("disabled"),PopOver.hide())},e.prototype.clear=function(){i.width(""),i.empty()},e}()),$(function(){return Dialog.init()});var PostRender,__slice=[].slice;PostRender=new(function(){function e(){this.holding=!1,this.fxs={},this._unnamed=0}return e.prototype.hold=function(){return this.holding=!0},e.prototype.enqueue=function(){var e,t,i,n;i=2<=arguments.length?__slice.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],t=i[0],null==t&&(t="unnamed_"+this._unnamed++),this.holding?this.fxs[t]=e:e()},e.prototype.release=function(){var e;this.holding=!1,e=this.fxs,this.fxs={},_.defer(function(){var t,i;for(i in e)(t=e[i])()})},e}());var TrellisController,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},__indexOf=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},__slice=[].slice;TrellisController=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.initialize=function(){return this._savedTitle="",ModelLoader["for"]("header").loadHeaderData(function(){return function(e,t){var i,n,r,o;if(null!=t){r=ModelCacheCache._caches;for(n in r)i=r[n],o=i.getCacheType(),__indexOf.call(ModelCache.fullCacheTypes,o)>=0&&i.enqueueDelta("Member",t)}return ModelLoader.triggerWaits("headerData")}}(this)),_.delay(function(){return ModelLoader["for"]("header").loadBoardsMenuData(function(){return function(e,t){var i,n,r,o;if(null!=t){r=ModelCacheCache._caches;for(n in r)i=r[n],o=i.getCacheType(),__indexOf.call(ModelCache.fullCacheTypes,o)>=0&&i.enqueueDelta("Member",t)}return ModelLoader.triggerWaits("boardsData")}}(this))},500)},t.prototype.routes={"":"memberBoardsView","search(?*query)":"searchView","select-org-to-upgrade":"businessClassSelectOrgView","api/generateToken":"generateTokenView","board/*path":"oldBoardView","b/:shortLink(/*path)":"boardView",shortcuts:"shortcutsView",blank:"blankView","org/:id":"organizationById","card/board/(:slug/):idBoard/:idCard":"oldCardView","card/(:slug/):idBoard/:idCard":"oldCardView","c/:id(/*path)":"cardView",":username/boards":"memberBoardsView",":username/notifications":"memberNotificationsView",":username/cards":"memberCardsView",":name/account":"userOrOrgAccountView",":name/billing":"userOrOrgBillingView",":name/billing/card":"userOrOrgBillingCardView",":name/billing/card/:product":"userOrOrgBillingCardView",":name/members":"organizationMembersView",":name/:username/cards":"organizationMemberCardsView",":name/export":"organizationExportView",":name/plans":"organizationPlansView",":name(/)":"userOrOrgProfileView","*splat":"displayErrorPage"},t.prototype.viewType="none",t.prototype.topLevelView=function(e,t,i){return null==this.applicationView&&(this.applicationView=new ApplicationView),null==i&&(i={}),null==i.modelCache&&(i.modelCache=this.getCurrentModelCache()),this.applicationView.subview(e,t,i)},t.prototype.title=function(e){var t,i,n,r,o;return null!=e&&(this._savedTitle=e),i=Notification.unreadCount(ModelCacheCache["for"]("header")),n=i?"("+i+") ":"",t=n,(null!=(r=this._savedTitle)?r.length:void 0)>0&&(t+=""+this._savedTitle+" | "),t+="Trello",null!=(o=window.fluid)&&(o.dockBadge=i?i:null),FavIcon.setNotifications(i>0),document.title=t},t.prototype.setLocation=function(e){var t,i,n;n=e.title,t=e.location,i=e.options,null!=n&&this.title(n),t&&(/^#/.test(t)&&(t=t.substr(1)),this.navigate(t,i),this.location=t)},t.prototype.load=function(e){return this.setLocation({location:e})},t.prototype.getSearchUrl=function(e){return"/search?q="+encodeURIComponent(e)},t.prototype.getPermanentOrganizationUrl=function(e){return"/org/"+e},t.prototype.getOrganizationUrl=function(e){var t;return t=_.isString(e)?e:e.get("name"),"/"+t},t.prototype._orgUrl=function(e,t){return""+this.getOrganizationUrl(e)+t},t.prototype.getOrganizationMemberCardsUrl=function(e,t){return this._orgUrl(e,"/"+t+"/cards")},t.prototype.getOrganizationAccountUrl=function(e){return this._orgUrl(e,"/account")},t.prototype.getOrganizationBillingUrl=function(e){return this._orgUrl(e,"/billing")},t.prototype.getOrganizationBillingCardUrl=function(e){return this._orgUrl(e,"/billing/card")},t.prototype.getOrganizationBillingCardProductUrl=function(e,t){return null!=t?this._orgUrl(e,"/billing/card/"+t):this.getOrganizationBillingCardUrl(e)},t.prototype.getOrganizationPlansUrl=function(e){return this._orgUrl(e,"/plans")},t.prototype.getOrganizationExportUrl=function(e){return this._orgUrl(e,"/export")},t.prototype.getOrganizationMembersUrl=function(e){return this._orgUrl(e,"/members")},t.prototype.showingCalendar=function(e){return(null!=e?e.$(".calendar-wrapper").length:void 0)>0},t.prototype.getBoardUrl=function(e,t,i,n){var r,o,s,a,l,c,d;for(null==n&&(n=[]),null!=(null!=t?t.id:void 0)&&(t=t.id),o=e.get("Board",t),null!=(l=null!=o?o.get("url"):void 0)?r=Util.relativeUrl(l):(s=null!=o?o.get("name"):void 0,r=s?"/board/"+Util.makeSlug(s)+"/"+t:"/board/"+t),i&&(r+="/"+i),c=0,d=n.length;d>c;c++)a=n[c],r+="/"+a;return r},t.prototype.getBoardShortUrl=function(e,t,i){var n,r,o,s;return null!=(null!=t?t.id:void 0)&&(t=t.id),r=Board.get(e,t),null!=(s=null!=r?r.get("shortUrl"):void 0)?n=Util.relativeUrl(shortUrl):(o=null!=r?r.get("shortLink"):void 0,n="/b/"+o),i&&(n+="/"+i),n},t.prototype.getMemberBoardProfileUrl=function(e,t){return""+this.getBoardUrl(this.getCurrentModelCache(),t)+"/member/"+e},t.prototype.setBoardLocation=function(e,t,i,n){var r;null==t&&(t=""),null==i&&(i=[]),r=Board.get("board_"+e,e).get("name"),this.setLocation({title:r,location:this.getBoardUrl(this.getCurrentModelCache(),e,t,i),options:n})},t.prototype._memUrl=function(e,t){return""+this.getMemberUrl(e)+t},t.prototype.getMemberProfileUrl=function(e){return null==e&&(e=Auth.myUsername()),"/"+e},t.prototype.getMemberNotificationsUrl=function(e){return null==e&&(e=Auth.myUsername()),"/"+e+"/notifications"},t.prototype.getMemberBoardsUrl=function(e){return null==e&&(e=Auth.myUsername()),e===Auth.myUsername()?"/":"/"+e+"/boards"},t.prototype.getMemberCardsUrl=function(e){return null==e&&(e=Auth.myUsername()),"/"+e+"/cards"},t.prototype.getMemberAccountUrl=function(e){return null==e&&(e=Auth.myUsername()),"/"+e+"/account"},t.prototype.getMemberBillingUrl=function(e){return null==e&&(e=Auth.myUsername()),"/"+e+"/billing"},t.prototype.getMemberBillingCardUrl=function(e){return null==e&&(e=Auth.myUsername()),"/"+e+"/billing/card"},t.prototype.getMemberBillingCardProductUrl=function(e,t){return null==e&&(e=Auth.myUsername()),null!=t?"/"+e+"/billing/card/"+t:this.getMemberBillingCardUrl(e)},t.prototype.getPermanentCardUrl=function(e,t,i){return i?"/card/"+i.get("username")+"/"+e+"/"+t:"/card/board/"+e+"/"+t},t.prototype.getCardUrl=function(e){var t,i,n;return null!=(i=e.get("url"))?Util.relativeUrl(i):(t=e.get("name"),this.getCardUrlWithoutModels(e.get("idBoard"),null!=(n=e.get("idShort"))?n:e.id,t))},t.prototype.getCardUrlWithoutModels=function(e,t,i){return null==t?null:Util.isShortId(t)?"/card/"+Util.makeSlug(i)+"/"+e+"/"+t:"/card/board/"+Util.makeSlug(i)+"/"+e+"/"+t},t.prototype.saveMemberBoardProfileLocation=function(e,t){var i;return i=e.get("fullName"),this.setLocation({title:""+i,location:this.getMemberBoardProfileUrl(e.get("username"),t)})},t.prototype.onMemberView=function(){return"member"===this.viewType},t.prototype.onAnyOrganizationView=function(){return"organization"===this.viewType},t.prototype.onOrganizationView=function(e){return this.onAnyOrganizationView()&&this.idModel===e},t.prototype.onAnyBoardView=function(){return"board"===this.viewType},t.prototype.onBoardView=function(e){var t;if(this.onAnyBoardView()){if(Util.checkId(e))return this.idModel===e;if(Util.isShortLink(e))return(null!=(t=Board.get(this.getCurrentModelCache(),this.idModel))?t.get("shortLink"):void 0)===e}return!1},t.prototype.onBrowseView=function(){return"browse"===this.viewType},t.prototype.onErrorView=function(){return"error"===this.viewType},t.prototype.getCurrentBoardView=function(){var e;return null!=(e=this.applicationView)?e.existingSubviewOrUndefined(BoardView,this.getCurrentBoard()):void 0},t.prototype.getCurrentBoard=function(){return this.onAnyBoardView()?Board.get(this.getCurrentModelCache(),this.idModel):null},t.prototype.getModelCache=function(e,t,i){switch(e){case"board":return ModelCacheCache["for"]("board_"+i);case"member":return ModelCacheCache["for"]("member_"+i);case"organization":return ModelCacheCache["for"]("organization_"+i);case"none":return void 0;default:return ModelCacheCache["for"]("other_"+e+"_"+t+"_"+i)}},t.prototype.getCurrentModelCache=function(){return this.getModelCache(this.viewType,this.subViewType,this.idModel)},t.prototype.cleanModelCacheCache=function(){var e,t,i,n,r,o,s,a,l,c;n=this.getCurrentModelCache(),o={organization:0,board:5},i={organization:[],board:[]},l=ModelCacheCache._caches;for(r in l)if(e=l[r],r!==n.name)switch(a=e.getCacheType()){case"organization":case"board":i[a].push(e);break;case"header":break;default:ModelCacheCache.dropCache(e)}c=[];for(a in i)t=i[a],s=o[a],t.length<=s||(_.sortBy(t,"lastUsed"),c.push(function(){var e;for(e=[];t.length>s;)e.push(ModelCacheCache.dropCache(t.shift()));return e}()));return c},t.prototype.saveBoardsView=function(){return this.overBoardsPage?void 0:(this.overBoardsPage=!0,this._idBoard=this.idModel,this._boardPath=/\/b\/[^\/]*\/(.*)/.exec(this.location)[1])},t.prototype.loadBoardsView=function(){return this.overBoardsPage=!1,this.setViewType("board",null,this._idBoard),this.boardView(this._idBoard,this._boardPath),delete this._idBoard,delete this._boardPath},t.prototype.clearPreviousView=function(){var e;return this.overBoardsPage&&(this.overBoardsPage=!1),SearchState.setQuery(""),null!=(e=this.applicationView)&&e.removeQueued(),delete this.applicationView,PopOver.hide(),Dialog.isVisible&&Dialog.hide(!0),$("#content").html(""),$("#surface").height(""),$("body").scrollTop("0").removeClass("single-column tabbed-page search-page body-board-view body-custom-board-background body-custom-board-background-tiled body-light-board-background body-dark-board-background body-default-header").css({"background-image":"","background-color":""}),$("#edit-sticker").hide(),$(".attachment-viewer").remove(),MemberState.clearProcessingAttachments(),this.onAnyBoardView()?void 0:FavIcon.setBackground({color:Backgrounds.blue.color})},t.prototype.setViewType=function(e,t,i){return SessionStatus.markCurrentBoardAsViewed(),this.viewType=e,this.viewSubType=t,this.idModel=i,SessionStatus.markCurrentBoardAsViewed(),this.cleanModelCacheCache()},t.prototype.boardView=function(e,t,i){var n,r,o,s,a,l,c;return null==t&&(t=""),c=t.split("/"),a=c[0],o=c[1],l=c[2],r=c[3],n=c[4],s={idBoard:e,section:o},"calendar"===o&&null!=l&&null!=r&&(_.extend(s,{year:l,month:r}),null!=n&&_.extend(s,{day:n})),"member"===o&&null!=l&&(s.usernameBoardProfile=l),this.displayBoard(s,i)},t.prototype.oldBoardView=function(e,t){var i,n;n={},i=e.split("/"),n.idBoard=1===i.length?i[0]:i[1],3===i.length?n.section=i[2]:4===i.length&&(n.usernameBoardProfile=i[3]),this.displayBoard(n,t)},t.prototype.showCardDetail=function(e,t,i){var n,r,o,s;if(null!=e){if(!this.onBoardView(null!=(s=e.getBoard())?s.id:void 0)||e.modelCache!==this.getCurrentModelCache())return void this.navigate(this.getCardUrl(e),{trigger:!0});e.markRelatedNotificationsRead(),this.stopListening(ModelCacheCache["for"]("header"),"add:Notification"),this.listenTo(ModelCacheCache["for"]("header"),"add:Notification",function(){return function(){return e.markRelatedNotificationsRead()}}(this)),track("Card Front","Open Card Detail"),r=new CardDetailView({modelCache:this.getCurrentModelCache(),model:e}),n=e.getBoard(),o=this.showingCalendar(e.getBoard()&&this.applicationView.existingSubviewOrUndefined(BoardView,e.getBoard())),Dialog.show({view:r,hide:function(t){return function(i){return t.stopListening(ModelCacheCache["for"]("header"),"add:Notification"),e.unbindMarkRead(),$(".attachment-viewer").remove(),i?void 0:(t.setBoardLocation(n.id,o?"calendar":void 0),t.title(n.get("name")))}}(this),isNavigating:i}),e.onId(function(t){return function(){return t.title(""+e.get("name")+" on "+e.getBoard().get("name")),t.navigate(t.getCardUrl(e))}}(this)),null!=t&&r[t]()}},t.prototype.displayBoard=function(e,t){var i,n,r,o,s,a,l,c,d,u,p,h,m;if(log("controller",["boardView",e.idBoard]),u=function(e){return function(t){return(null!=t?t.match("Confirm to view"):void 0)&&Auth.isLoggedIn()?Member.waitFor("header",Auth.myId(),function(){return e.displayErrorPage(_.extend({errorType:"unconfirmedNotFound",modelType:"board"},Auth.me().toJSON()))}):e.displayErrorPage((null!=t?t.match("no card"):void 0)?{errorType:"cardNotFound"}:{errorType:"boardNotFound"})}}(this),a=e.idBoard||(null!=(m=e.board)?m.id:void 0),l=e.idCard,l&&null==a){if(!Util.checkId(l)&&!Util.isShortLink(l))return u("no card");a=IdCache.getBoardIdForCard(l)}if(null==a&&null==l&&null==e.newBoard)return u("no board id");if(s=this.spinnerUntil(t),d=function(e){var t;return null!=(null!=e?e.modelCache:void 0)?e.modelCache:null!=(null!=e?e.id:void 0)?ModelCacheCache["for"]("board_"+e.id):(t=""+_.uniqueId("tempboard_"),ModelCacheCache["for"](t))},p=function(t){return function(n,r){var o,a,l,c,u,p,h;u=d(n),i?Dialog.isVisible&&Dialog.hide(!0):(n.onId(function(){return t.setViewType("board",null,n.id)}),t.clearPreviousView(),t.showHeader(),n.onId(function(){var e,t,i,r,o;for(r=[n,Board.get("header",n.id)],o=[],t=0,i=r.length;i>t;t++)e=r[t],o.push(null!=e?e.set("dateLastView",(new Date).toISOString()):void 0);return o}),$("#content").html(t.topLevelView(BoardView,n,{modelCache:u}).render().el),$("body").addClass("body-board-view")),n.onId(function(){return SidebarState.pushBoard(n.id)}),o=t.topLevelView(BoardView,n,{modelCache:u}),e.idCard?(p=function(e){return e?t.showCardDetail(e):t.setBoardLocation(n.id)},a=n.getCard(e.idCard),a?p(a):ModelLoader["for"](t.getCurrentModelCache()).loadCardData(e.idBoard,e.idCard,function(i){return null!=i?(Alerts.show("Card does not exist on this board","warning","doesnotexist",5e3),void t.setBoardLocation(n.id)):p(n.getCard(e.idCard))})):e.usernameBoardProfile?null!=(h=Member.find(t.getCurrentModelCache(),"username",e.usernameBoardProfile)[0])&&h.viewBoardProfile(n.id):"calendar"===e.section?(c=[e.year,e.month],e.day&&c.push(e.day),__indexOf.call(n.get("powerUps"),"calendar")>=0&&!t.showingCalendar(o)&&(e.day||(e.day=15),l=Dates.objToDate(e),Dates.validDate(l)?o.showCalendar(l):o.showCalendar()),t.setBoardLocation(n.id,"calendar",c)):(t.showingCalendar(o)&&o.closeCalendar(),n.onId(function(){t.setBoardLocation(n.id)})),"function"==typeof s&&s(window.boardView),r||n.onId(function(){return _.defer(function(){return ModelLoader.loadBoardActions(n.id,ModelLoader.cacheCallback(function(e){return"board_"+e.id},"Board")),ModelLoader.loadBoardChecklists(n.id,ModelLoader.cacheCallback(function(e){return"board_"+e.id},"Board"))})})}}(this),e.board)p(e.board);else if(e.newBoard)h=d(),r=new Board(e.newBoard.attributes,{modelCache:h}),r.viewState.openListComposer(),e.newBoard.onId(function(){return ModelCacheCache.rename(h.name,"board_"+e.newBoard.id),r.set(e.newBoard.attributes)}),p(r);else if(null!=a){if(!Util.checkId(a)&&!Util.isShortLink(a))return u("no board");if(c=IdCache.getBoardId(a),Util.checkId(c)&&ModelCacheCache.hasCache("board_"+c)&&(o=ModelCacheCache["for"]("board_"+c),n=o.get("Board",c),i=this.onBoardView(c),null!=n))return void p(n,!0);Profiler.time("Load Board Data: "+a),ModelLoader.loadCurrentBoardData(a,function(){return function(e,t){return Profiler.timeEnd("Load Board Data: "+a),null!=e?u(e):ModelCacheCache["for"]("board_"+t.id).enqueueDelta("Board",t,function(){return(n=Board.get("board_"+t.id,a))?(Profiler.time("Render Board: "+t.name),PostRender.hold(),p(n),PostRender.release(),void Profiler.timeEnd("Render Board: "+t.name,{reportToServer:!0,serverName:"renderBoard",data:{idBoard:n.id}})):u("no board")})}}(this))}else null!=l?(Profiler.time("Load Card Data: "+l),ModelLoader.loadCardData(l,function(){return function(e,t){return Profiler.timeEnd("Load Card Data: "+l),null!=e||null==t?u("no card"):(a=t.idBoard,Profiler.time("Load Board Data: "+a),ModelLoader["for"]("board_"+a).loadCurrentBoardData(a,function(e,t){return Profiler.timeEnd("Load Board Data: "+a),null!=e?u(e):(n=Board.get("board_"+t.id,a))?(Profiler.time("RenderBoard w/ Card: "+t.name),p(n),void Profiler.timeEnd("RenderBoard w/ Card: "+t.name,{reportToServer:!0,serverName:"renderBoardCard",data:{idCard:l,idBoard:n.id}})):u("no board")}))}}(this))):u("no board or id")},t.prototype.businessClassSelectOrgView=function(){var e,t;return t="/select-org-to-upgrade",Auth.isLoggedIn()?(e=this.spinnerUntil(function(){}),ModelLoader.loadMyOrganizations(function(i){return function(n,r){var o,s,a,l;return i.setViewType("select-org"),i.getCurrentModelCache().enqueueDelta("Member",r),o=n||null==r?null:Member.get(i.getCurrentModelCache(),null!=(l=r.id)?l:r.idMember),s=_.filter(o.organizationList.models,function(e){return!e.isPremium()}),1===s.length?void i.navigate("/"+s[0].get("name")+"/plans",{trigger:!0}):(i.setLocation({title:"Select Organization To Upgrade To Business Class",location:t}),i.clearPreviousView(),a=i.topLevelView(BusinessClassSelectOrgView,o),i.showHeader(),$("#content").html(a.render().el),e())}}(this))):void(window.location="/login?returnUrl="+t)},t.prototype.searchView=function(e){var t;log("controller",["searchView"]),t=this.spinnerUntil(e),ModelLoader.waitFor("headerData",function(e){return function(){var i,n,r,o,s;return e.setViewType("search"),e.clearPreviousView(),r=Auth.me(),i=ModelCacheCache["for"]("header"),o=Util.getQueryParameter("q",""),n=e.topLevelView(SearchInputView,r,{modelCache:i}),s=n.getResultsView(),SearchState.setQuery(o),s.update(),e.showHeader({noSearch:!0}),$("body").addClass("search-page"),$("#content").append(n.render().el).append(s.render().el),_.defer(function(){return n.focusInput()}),"function"==typeof t?t(s):void 0}}(this))},t.prototype.organizationById=function(e,t){ModelLoader.loadOrgNameById(e,function(i){return function(n,r){return null!=n||null==r?i.displayErrorPage():i.organizationBoardsView(r,e,t)}}(this))},t.prototype.organizationBoardsView=function(e,t,i){this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationBoardsData",additionalFns:{members:"loadOrganizationMemberGhost"},viewClass:OrganizationBoardsView,getLocation:this.getOrganizationUrl.bind(this),idOrganization:t,callback:i})},t.prototype.organizationMembersView=function(e,t){this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationMembersData",viewClass:OrganizationMembersView,getLocation:this.getOrganizationMembersUrl.bind(this),callback:t})},t.prototype.organizationMemberCardsView=function(e,t,i){this.displayOrganizationPage({orgname:e,username:t,loadFn:"loadOrganizationMinimal",additionalFns:{cards:"loadOrgMemberCardData",members:"loadOrganizationMemberMinimal"},viewClass:OrganizationMemberCardsView,getLocation:this.getOrganizationMemberCardsUrl.bind(this),callback:i})},t.prototype.organizationAccountView=function(e,t,i){this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:OrganizationAccountView,getLocation:this.getOrganizationAccountUrl.bind(this),idOrganization:t,callback:i,adminOnly:!0})},t.prototype.organizationExportView=function(e,t){this.orgView(e,function(e){return function(t,i,n){return e.displayOrganizationPage({orgname:t,loadFn:"loadOrganizationExportData",viewClass:OrganizationExportView,getLocation:e.getOrganizationExportUrl.bind(e),idOrganization:i,callback:n,adminOnly:!0})}}(this),t)},t.prototype.organizationPlansView=function(e,t){this.orgView(e,function(e){return function(t,i,n){return e.displayOrganizationPage({orgname:t,loadFn:"loadOrganizationData",viewClass:OrganizationPlansView,getLocation:e.getOrganizationPlansUrl.bind(e),idOrganization:i,callback:n,membersOnly:!0})}}(this),t)},t.prototype.organizationBillingView=function(e,t){this.orgView(e,function(e){return function(t,i,n){return e.displayOrganizationPage({orgname:t,loadFn:"loadOrganizationData",viewClass:OrganizationBillingView,getLocation:e.getOrganizationBillingUrl.bind(e),idOrganization:i,callback:n,adminOnly:!0})}}(this),t)},t.prototype.organizationBillingCardView=function(e,t,i){this.orgView(e,function(e){return function(i,n,r){return e.displayOrganizationPage({orgname:i,product:t,loadFn:"loadOrganizationData",viewClass:OrganizationBillingCardView,getLocation:e.getOrganizationBillingCardProductUrl.bind(e),idOrganization:n,callback:r,adminOnly:!0})}}(this),i)},t.prototype.orgView=function(e,t,i){return this.getViewData(e,function(n){return function(r,o){return(null!=o?o.id:void 0)&&"organization"===(null!=o?o.type:void 0)?t(e,o.id,i):n.displayErrorPage({callback:i})}}(this))},t.prototype.userOrOrgProfileView=function(e,t){null==e&&(e="me"),this.userOrOrgView(e,this.memberProfileView,this.organizationBoardsView,t)},t.prototype.userOrOrgAccountView=function(e,t){null==e&&(e="me"),this.userOrOrgView(e,this.memberAccountView,this.organizationAccountView,t)},t.prototype.userOrOrgBillingView=function(e,t){null==e&&(e="me"),this.userOrOrgView(e,this.memberBillingView,this.organizationBillingView,t)},t.prototype.userOrOrgBillingCardViewTMP=function(e,t){null==e&&(e="me"),this.userOrOrgView(e,this.memberBillingCardView,this.organizationBillingCardView,t)},t.prototype.userOrOrgBillingCardView=function(){var e,t,i,n,r;t=arguments[0],n=3<=arguments.length?__slice.call(arguments,1,r=arguments.length-1):(r=1,[]),e=arguments[r++],null==t&&(t="me"),i=n[0],this.getViewData(t,function(n){return function(r,o){switch(null!=o?o.type:void 0){case"member":return n.memberBillingCardView.call(n,t,i,e);case"organization":return n.organizationBillingCardView.call(n,t,i,o.id,e);default:return n.displayErrorPage({callback:e})}}}(this))},t.prototype.getViewData=function(e,t){var i,n,r,o,s,a;return r=window.sessionStorage,n="userOrOrg_"+e,null!=(s=null!=r?r.getItem(n):void 0)?(a=s.split("|"),o=a[0],i=a[1],t(null,{type:o,id:i})):async.waterfall([function(t){return $.get("/1/types/"+e).done(function(e){return t(null,e)}).fail(function(){return t("notFound")})},function(e,t){return null!=(null!=e?e.type:void 0)&&null!=(null!=e?e.id:void 0)&&null!=r&&r.setItem(n,""+e.type+"|"+e.id),t(null,e)}],t)},t.prototype.userOrOrgView=function(e,t,i,n){return this.getViewData(e,function(r){return function(o,s){switch(null!=s?s.type:void 0){case"member":return t.call(r,e,n);case"organization":return i.call(r,e,s.id,n);default:return r.displayErrorPage({callback:n})}}}(this))},t.prototype.displayOrganizationPage=function(e){var t,i,n,r,o;return null==e.idOrganization?void this.getViewData(e.orgname,function(t){return function(i,n){return"organization"===(null!=n?n.type:void 0)?(e.idOrganization=n.id,t.displayOrganizationPage(e)):t.displayErrorPage({callback:e.callback})}}(this)):(n=e.orgname,o=e.username,r=e.product,i=this.onAnyBoardView()&&e.inDialogIfOnBoard||this.overBoardsPage,log("controller",["organization"]),t=this.spinnerUntil(e.callback),void async.auto({organization:function(t){return ModelLoader[e.loadFn](n,function(){return function(e,i){return null!=e||null==i?t(e||"Organization not found",i):ModelCacheCache["for"]("organization_"+i.id).enqueueDelta("Organization",i,function(e){return t(e,i)})}}(this))},additional:["organization",function(t,i){var n,r,s;return r=i.organization,n={},async.forEach(_.keys(null!=(s=e.additionalFns)?s:{}),function(t,i){return ModelLoader["for"]("organization_"+r.id)[e.additionalFns[t]](r.id,o,function(e,r){return n[t]=r,i()},i)},function(e){return t(e,n)})}],results:["organization","additional",function(s){return function(a,l){var c,d,u,p,h,m,f,g,b,v;return f=l.organization,c=l.additional,d=_.extend(f,c),f=Organization.get("organization_"+f.id,null!=(v=d.id)?v:d.idOrganization),h=Member.findOne("organization_"+f.id,"username",o),!f.owned()&&e.adminOnly||!f.isMember(Auth.me())&&e.membersOnly||null!=e.businessClass&&!f.isFeatureEnabled(e.businessClass)?void s.organizationBoardsView(n,e.idOrganization):(i?s.saveBoardsView():s.clearPreviousView(),s.setViewType("organization",null,e.idOrganization),m={},h&&(m.member=h),null!=r&&(m.product=r),m.modelCache=s.getCurrentModelCache(),i?(p=null,null!=e.maxDialogWidth&&(p=e.maxDialogWidth),g=new e.viewClass(_.extend({model:f},m)),Dialog.show({isNavigating:!0,view:g,maxWidth:p,hide:function(e){return e?void 0:s.loadBoardsView()}})):(g=s.topLevelView(e.viewClass,f,m),s.showHeader(),$("body").addClass("tabbed-page"),$("#content").html(g.render().el)),b=""+f.get("displayName")+" ("+f.get("name")+")",u=h?e.getLocation(f.get("name"),h.get("username")):r?e.getLocation(f.get("name"),r):e.getLocation(f.get("name")),s.setLocation({title:b,location:u}),void("function"==typeof t&&t(f)))}}(this)]},function(e){return function(t){return null!=t?t.match("Confirm to view")&&Auth.isLoggedIn()?Member.waitFor("header",Auth.myId(),function(){return e.displayErrorPage(_.extend({errorType:"unconfirmedNotFound",modelType:"organization"},Auth.me().toJSON()))}):e.displayErrorPage():void 0}}(this)))},t.prototype.memberBoardsView=function(e,t,i){null==e&&(e="me"),this.displayMemberPage(_.extend({username:e,loadFn:"loadMemberBoardsData",viewClass:MemberBoardsView,getLocation:function(e){return function(t){return e.getMemberBoardsUrl(t)}}(this),callback:function(){return updateTimezone(),null!=i?i.apply(this,arguments):void 0}},t))},t.prototype.memberNotificationsView=function(e,t){return null==e&&(e="me"),Auth.isLoggedIn()?(e="me",void this.displayMemberPage({username:e,loadFn:"loadNotificationData",viewClass:MemberNotificationsView,inDialogIfOnBoard:!0,maxDialogWidth:530,getLocation:function(e){return function(t){return e.getMemberNotificationsUrl(t)}}(this),callback:t})):this.displayErrorPage({callback:t})},t.prototype.memberProfileView=function(e,t){null==e&&(e="me"),this.displayMemberPage({username:e,loadFn:"loadMemberProfileData",viewClass:MemberProfileView,getLocation:function(e){return function(t){return e.getMemberProfileUrl(t)}}(this),callback:t})},t.prototype.memberCardsView=function(e,t,i){null==e&&(e="me"),this.displayMemberPage(_.extend({username:e,loadFn:"loadMemberCardsData",viewClass:MemberCardsView,getLocation:function(e){return function(t){return e.getMemberCardsUrl(t)}}(this),callback:i},t))},t.prototype.memberIsGold=function(e){return e.isGold()},t.prototype.memberAccountView=function(e,t){e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:MemberAccountView,getLocation:function(e){return function(t){return e.getMemberAccountUrl(t)}}(this),callback:t})},t.prototype.memberBillingView=function(e,t){e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:MemberBillingView,getLocation:function(e){return function(t){return e.getMemberBillingUrl(t)}}(this),callback:t})},t.prototype.memberBillingCardView=function(e,t,i){e="me",this.displayMemberPage({username:e,product:t,loadFn:"loadMemberAccountData",viewClass:MemberBillingCardView,getLocation:function(e){return function(t,i){return e.getMemberBillingCardProductUrl(t,i)}}(this),callback:i})},t.prototype.displayMemberPage=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h;p=e.username,l=e.loadFn,h=e.viewClass,o=e.getLocation,i=e.callback,d=e.message,t=e.bodyClass,s=e.inDialogIfOnBoard,c=e.maxDialogWidth,u=e.product,r=e.fxIsValid,null==p&&(p=Auth.myUsername()),n=this.onAnyBoardView()&&s||this.overBoardsPage,a="member"===this.viewType,log("controller",["memberBoardsView"]),i=this.spinnerUntil(i),ModelLoader[l](p,function(s){return function(a,l){var c;
return n&&s.saveBoardsView(),s.setViewType("member","boardsView",l.id),n||s.clearPreviousView(),c=s.getModelCache("member","boardsView",l.id),ModelCacheCache["for"](c).enqueueDelta("Member",l,function(){var p,m,f,g,b;return m=a||null==l?null:Member.get(c,l.id),a||!m||null!=r&&!r(m)?void s.displayErrorPage():(g={isMore:l.isMore,data:l,product:u,modelCache:c},n?(f=new h(_.extend({model:m},g)),p=null,null!=e.maxDialogWidth&&(p=e.maxDialogWidth),Dialog.show({isNavigating:!0,view:f,maxWidth:p,hide:function(e){return e?void 0:s.loadBoardsView()}})):(f=s.topLevelView(h,m,g),s.showHeader(),$("body").addClass(t?t:"tabbed-page"),$("#content").html(f.render().el)),b=Auth.isMe(m)?"":""+m.get("fullName")+" ("+m.get("username")+")",s.setLocation({title:b,location:o(m.get("username"),u)}),"function"==typeof i&&i(m),void(null!=d&&Alerts.flash(d.text,"confirm","member")))})}}(this))},t.prototype.cardView=function(e,t,i){return this.displayBoard({idCard:e},i)},t.prototype.oldCardView=function(e,t,i,n){this.displayBoard({idBoard:t,idCard:i},n)},t.prototype.blankView=function(e){var t;return t=this.spinnerUntil(e),ModelLoader.waitFor("headerData",function(e){return function(){return e.setViewType("blank"),e.clearPreviousView(),e.showHeader(),"function"==typeof t?t():void 0}}(this))},t.prototype.shortcutsView=function(e){var t,i,n;n="Keyboard Shortcuts",i="shortcuts",t=function(e,t){var i;return i=templates.fill("shortcuts"),t(i)},this.onAnyBoardView()||this.overBoardsPage?(this.saveBoardsView(),t("board",function(e){return function(t){return Dialog.show({html:t,maxWidth:550,hide:function(t){return t?void 0:e.loadBoardsView()}})}}(this)),this.setLocation(n,i)):this.staticView({title:n,location:i,template:function(e){return t("static",e)},bodyClass:"single-column"},e)},t.prototype.staticView=function(e,t){var i,n,r,o,s,a,l,c,d;c=e.title,o=e.location,s=e.template,a=e.templateData,l=e.templatePartials,i=e.bodyClass,d=e.viewType,r=e.headerOpts,log("controller",[o+"View"]),n=this.spinnerUntil(t),ModelLoader.waitFor("headerData",function(e){return function(){var t;e.setViewType(null!=d?d:o),e.clearPreviousView(),e.showHeader(r),null==a&&(a={}),a.loggedIn=Auth.isLoggedIn(),t=function(t){return $("body").addClass(i),$("#content").html(t),e.setLocation({title:c,location:o}),"function"==typeof n?n():void 0},_.isFunction(s)?s(t):t(templates.fill(s,a,null,l))}}(this))},t.prototype.showHeader=function(e){var t,i,n;null==e&&(e={}),$("#header .header-user").remove(),$("#header .header-boards-button").remove(),$("#header #header-search").parent().remove(),$("#header-search").empty(),$(".header-banner").remove(),$("#header nav").remove(),$("#boards-drawer").empty(),n=Auth.me(),i=ModelCacheCache["for"]("header"),$("#header").empty().prepend(templates.fill("header_logo")),e.promo||!Auth.isLoggedIn()?$("#header").append(templates.fill("header_promo_nav")):($("#header").append(this.topLevelView(HeaderBoardsButtonView,n,{modelCache:i}).render().el),e.noSearch||$("#header").append(this.topLevelView(SearchInputView,n,{modelCache:i}).render().el),$("#header .header-woof").parent().remove(),$("#header").append(this.topLevelView(HeaderWoofView,n,{modelCache:i}).render().el),$("#boards-drawer").append(this.topLevelView(BoardsSidebarView,n,{modelCache:i}).render().el)),$("#header").append(this.topLevelView(HeaderMemberView,n,{modelCache:i}).render(e.promo).el),Util.hasValidInviteTokenFor(this.getCurrentModelCache(),this.idModel)?(e={modelCache:this.getCurrentModelCache()},this.onAnyBoardView()?e.idBoard=this.idModel:this.onAnyOrganizationView()&&(e.idOrganization=this.idModel),$("#header").after(this.topLevelView(InvitedBannerView,n,e,this.idModel).render().el)):Auth.isLoggedIn()&&!Auth.confirmed()?$("#header").after(this.topLevelView(ConfirmEmailBannerView,n,{modelCache:i}).render().el):Auth.isLoggedIn()&&!Auth.canLogIn()?$("#header").after(this.topLevelView(SetPasswordBannerView,n,{modelCache:i}).render().el):!Auth.isLoggedIn()&&Controller.onAnyBoardView()&&(t=Board.get(this.getCurrentModelCache(),this.idModel),(null!=t?t.isPublic():void 0)&&$("#header").after(this.topLevelView(PublicBoardBannerView,t,{modelCache:this.getCurrentModelCache()}).render().el)),n.checkColorBlindMode()},t.prototype.displayErrorPage=function(e){var t;e=_.extend({errorType:"notFound"},e),t=e,(null!=e?e.errorType:void 0)&&(t[e.errorType]=!0,t.url=location.pathname),this.staticView({title:"Error",template:"error",templateData:e,viewType:"error"},e.callback)},t.prototype.showSpinner=function(){return $(".header-logo").addClass("throb")},t.prototype.hideSpinner=function(){return $(".header-logo").removeClass("throb")},t.prototype.spinnerUntil=function(e){return this.showSpinner(),function(t){return function(i){return t.hideSpinner(),"function"==typeof e?e(i):void 0}}(this)},t.prototype.advertiseUpgrade=function(){return ClientVersion.advertiseUpgrade()},t.prototype.upgradeClient=function(){var e;if(!this.upgrading)return this.upgrading=!0,e=Util.randomWait(360,1800),"active"===Monitor.getStatus()&&(e=Util.randomWait(60,300)),Alerts.showHtml((new UpgradeView).render({timeInSeconds:e}),"confirm","upgrade"),setTimeout(function(e){return function(){return e.upgrading?e.upgradeNow():void 0}}(this),1e3*e)},t.prototype.upgradeNow=function(){return Alerts.hideAll(),window.location.reload()},t.prototype.stopUpgrade=function(){return this.upgrading=!1,Alerts.showHtml((new UpgradeView).render({stopped:!0}),"confirm","upgrade")},t.prototype.syncError=function(){return Alerts.showHtml(templates.fill("sync_error"),"error","modelSync")},t}(Backbone.Router),function(){var e;return e=Backbone.History.prototype.navigate,_.extend(Backbone.History.prototype,{navigate:function(t,i){e.call(this,t,i),this.trackPageview(t)},trackPageview:function(e){return""===e&&(e=Auth.isLoggedIn()?"boards":"landing"),"function"==typeof ga?ga("send","pageview","/"+e):void 0}})}();var Alerts;Alerts=new(function(){function e(){var e,t,i,n;n=null,i=function(e){return function(){return clearTimeout(n),e.hide("connection"),e.showHtml(templates.fill("connect_failed",{msg:"Could not connect to Trello."}),"error","connectionDead")}}(this),$(rpc).bind("connect_failed",i),$(rpc).bind("reconnect_failed",i),t=function(e){return function(){return clearTimeout(n),e.hide("connection")}}(this),e=function(e){return function(){return clearTimeout(n),n=setTimeout(function(){return n=null,e.show("Attempting to restore connection.  Changes made now may not be saved.","error","connection")},500)}}(this),$(rpc).bind("reconnect",t),$(rpc).bind("connecting",e)}return e.prototype._alerts={},e.prototype._hide=function(e){var t;return t=this._alerts[e],(null!=t?t.timeout:void 0)&&clearTimeout(t.timeout),delete this._alerts[e],$("#notification_"+e).remove(),this._showHideContainer()},e.prototype._show=function(e,t,i,n,r){var o,s;return log("alerts","show",e,t,i,n,r),this._hide(n),r&&(s=setTimeout(function(e){return function(){return e.hide(n)}}(this),r)),this._alerts[n]={timeout:s},o=$("<div>").attr("id","notification_"+n).addClass(i).appendTo("#notification"),t?o.html(e):o.text(e),this._showHideContainer()},e.prototype._showHideContainer=function(){return $("#notification").toggle(!_.isEmpty(this._alerts))},e.prototype.show=function(e,t,i,n){return this._show(e,!1,t,i,n)},e.prototype.showHtml=function(e,t,i,n){return this._show(e,!0,t,i,n)},e.prototype.flash=function(e,t,i){return this._show(e,!1,t,i,2e3)},e.prototype.hide=function(e){return log("alerts","hide",e),this._hide(e)},e.prototype.hideAll=function(){var e,t;t=[];for(e in this._alerts)t.push(this.hide(e));return t},e}()),window.cdnErr=function(){return ABTest.inTest("trellocdn_warning")?(window.Alerts=Alerts,Alerts.showHtml('Your browser can\'t reach our new CDN, trellocdn.com.<br />\n<a href="http://help.trello.com/customer/portal/articles/1339289">Fix it</a>\n<a href="#" onclick="window.Alerts.hide(\'cdnErr\')">Dismiss</a>',"warning","cdnErr")):void 0};var DesktopNotification;DesktopNotification=function(){function e(t){this.model=t,(e.enabled()||window.fluid)&&this.model.get("unread")&&(this.localNotification()?this.show():_.delay(this.show.bind(this),s))}var t,i,n,r,o,s;return e.__proto__=window.Notification,i=100,s=1e3,t=1e4,n="granted",o="default",r="denied",e.enabled=function(){return this.permission===n},e.denied=function(){return this.permission===r},e.notEnabled=function(){return this.permission===o},e.prototype.show=function(){return this.getLock(function(e){return function(){var i,n,r,o,s,a;return a=e.render(),s=a.title,i=a.body,n=a.icon,o=a.tag,window.fluid?window.fluid.showGrowlNotification({title:s,priority:1,sticky:!1,description:i,icon:n}):(r=new window.Notification(s,{body:i,icon:n,tag:o}),r.model=e.model,r.addEventListener("click",e.clickHandler.bind(e)),_.delay(function(){return r.close()},t))}}(this))},e.prototype.render=function(){var e,t,i,n,r,o,s;return t=this.model.getTemplateData({useHTML:!0,truncate:null}),t.isDesktopNotification=!0,o=templates.fill("text_notification",t,{},{text_entity:templates.notification_title}).replace(/\s+/g," ").trim(),e="",n=_.last(t.entities),n.commentType&&(e=n.text),i="/favicon.ico",(null!=(s=t.member)?s.avatarHash:void 0)&&(i=""+avatarDomain+"/"+t.member.avatarHash+"/50.png"),r=this.model.id,{title:o,body:e,icon:i,tag:r}},e.prototype.clickHandler=function(e){var t,i,n;return t=this.model.get("data"),this.model.markRead(),e.target.close(),this.localNotification()?(this.model.navigateToView()||Controller.memberNotificationsView(),window.focus()):(n=this.model.getUrlOfTarget(),i=window.open(n),null!=i?i.focus():window.location=n)},e.prototype.localNotification=function(){var e;return e=this.model.get("data"),_.any(_.invoke([function(){var t;return Controller.onBoardView(null!=(t=e.board)?t.id:void 0)},function(){var t;return Controller.onOrganizationView(null!=(t=e.organization)?t.id:void 0)},function(){return 0===location.pathname.indexOf(Controller.getMemberNotificationsUrl())}],"call"))},e.prototype.getLock=function(e){var n,r;return n="notification_lock_"+this.model.id,Storage.get(n)?void 0:(r=Math.random(),Storage.set(n,r),_.delay(function(){return function(){return Storage.get(n)===r?e():void 0}}(this),i),_.delay(function(){return function(){return Storage.unset(n)}}(this),t))},e}();var UserInput,__slice=[].slice;UserInput=new(function(){function e(){var e,t,i,n;for(this._handlers={},this.clear(),n=["keydown","paste"],t=0,i=n.length;i>t;t++)e=n[t],$(document).bind(e,this[e].bind(this))}return e.prototype.precedence={global:0,"default":1,header:2,board:3,board_sidebar:3,card:4,search_box:5,dialog_view:10,dialog:12,attachment_viewer:20,quick_card_editor:20,popover_view:30,popover:32},e.prototype._isKeyEligible=function(e){var t;return!(Browser.isTouch()||(t=e.which)!==Key_Escape&&$(e.target).is("input:visible,textarea:visible,select:visible")||e.ctrlKey||e.altKey||e.metaKey)},e.prototype.addHandler=function(e,t){var i,n,r,o,s;return r=t.scope,n=t.precedence,i=t.modal,o=t.top,null==n&&(n=this.precedence[r]),null==n&&(log("userinput","Missing precedence for "+r),n=this.precedence["default"]),null==i&&(i=!1),null==(s=this._handlers)[r]&&(s[r]={}),this._handlers[r]={target:e,scope:r,precedence:n,modal:i,top:o},log("userinput","Adding handler for "+r)},e.prototype.removeHandlerScope=function(e){var t,i;i=[];for(t in this._handlers)t===e&&(log("userinput","Removing handlers for "+t),i.push(delete this._handlers[t]));return i},e.prototype.removeHandler=function(e){var t,i,n,r;n=this._handlers,r=[];for(i in n)t=n[i].target,e===t&&(log("userinput","Removing handler for "+i),r.push(delete this._handlers[i]));return r},e.prototype.clear=function(){var e,t;log("userinput","Removing all non-global handlers"),t=[];for(e in this._handlers)"global"!==e&&(log("userinput","Removing handler for "+e),t.push(delete this._handlers[e]));return t},e.prototype._sortedHandlers=function(){var e;return e=_.sortBy(_.values(this._handlers),function(e){return-e.precedence}),_.any(e,function(e){return e.modal})&&(e=_.filter(e,function(e){return e.modal})),_.any(e,function(e){return e.top})&&(e=_.filter(e,function(e){return e.top})),e},e.prototype._triggerOnTargets=function(){var e,t,i,n,r,o,s;for(t=arguments[0],e=2<=arguments.length?__slice.call(arguments,1):[],s=this._sortedHandlers(),r=0,o=s.length;o>r;r++)if(n=s[r].target,i=null!=(null!=n?n[t]:void 0)?n[t].apply(n,e):null!=(null!=n?n.triggerHandler:void 0)?n.triggerHandler(t,e):void 0)return(_.isString(i)||_.isArray(i))&&this._track(i),!0;return!1},e.prototype.keydown=function(e){e.which===Key_Escape&&Util.stop(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",e.which,e.shiftKey)&&Util.stop(e)},e.prototype.paste=function(e){var t,i,n,r,o,s,a,l,c,d,u,p,h;if(t=null!=(a=e.originalEvent)?a.clipboardData:void 0,o=null!=(l=null!=t?t.items:void 0)?l:[],(n=function(e){return _.find(o,function(t){return t.type===e})})("text/plain"))return s=null!=(c=null!=t&&"function"==typeof t.getData?t.getData("text/plain"):void 0)?c:null!=(d=window.clipboardData)?d.get("Text"):void 0,void this._triggerOnTargets("paste","text",s);if(r=n("image/png"),null!=r&&(i=r.getAsFile(),null!=i)){if(!Util.validCardUpload(i))return(null!=(u=Auth.me())?u.isFeatureEnabled("largeAttachments"):void 0)||(null!=(p=this.model.getBoard())&&null!=(h=p.getOrganization())?h.isFeatureEnabled("largeAttachments"):void 0)?Alerts.show("File size exceeds 250MB limit","error","upload",5e3):Alerts.show("File size exceeds 10MB limit","error","upload",5e3);if(track("Keyboard Shortcuts","Paste - Upload Image From Clipboard"),this._triggerOnTargets("paste","image",i))return Util.stop(e)}},e.prototype._track=function(e){return null!=e?(_.isArray(e)||(e=[e]),track.apply(null,["Keyboard Shortcuts"].concat(__slice.call(e)))):void 0},e}()),UserInput.addHandler({shortcut:function(e,t){return e===Key_Question_Mark||e===Key_Forward_Slash&&t?(Controller.navigate("shortcuts"),Controller.shortcutsView(),"Shortcuts page"):void 0}},{scope:"global"});var Controller;if(!window.unsupported){Controller=null,$(function(){var e,t,i,n;return"Production"===ClientVersion.server.environment&&"trello.com"!==location.hostname&&_.defer(function(){throw new Error("Site proxied as "+location.hostname)}),n=ClientVersion.version,e=n.head,i=n.version,ga("create",window.gaTrackingCode,"trello.com"),ga("set","dimension1",e),ga("set","dimension2",i),Controller=new TrellisController,Backbone.history.start({pushState:!0}),WindowSize.ensureRun(),t=function(e){var t,i,n,r,o,s,a,l;if(e=e.replace(/[\?\#].*$/,""),/\.[a-z]+$/i.test(e))return!1;if(/^([bc]|board|card|org)\//.test(e))return!0;if(/^search(\/|$)/.test(e))return!0;if(Auth.isLoggedIn()){if(RegExp("^"+Auth.myUsername()+"(/|$)").test(e))return!0;if("/"===e)return!0}if(/^shortcuts\/?$/.test(e))return!0;if(i=null!=(o=/^[^\/]+/.exec(e))?o[0]:void 0,"me"===i||"my"===i||"you"===i||"your"===i||"username"===i)return!0;if(/^[a-z0-9_]{3,}$/.test(i))for(s=ModelCacheCache.all(),n=0,r=s.length;r>n;n++)if(t=s[n],null!=t.bound){if(null!=(null!=(a=t.bound.Member)?a.findOne("username",i):void 0))return!0;if(null!=(null!=(l=t.bound.Organization)?l.findOne("name",i):void 0))return!0}return!1},$("body").delegate("a[href^='/'],a[href^='"+siteDomain+"/']","click",function(e){var i,n;if(!(e.ctrlKey||e.metaKey||e.shiftKey))return n=$(this).attr("href").replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),i=n!==location.pathname.slice(1),i&&PopOver.hide(),t(n)&&null==$(this).attr("target")&&(Util.preventDefault(e),i)?Controller.navigate(n,{trigger:!0}):void 0}),$("#surface").append(templates.fill("surface_base"))}),function(){var e;return e=Auth.updateToken(),setInterval(function(){var t;return t=Auth.updateToken(),t!==e&&window.location.reload(),e=t},3e3)}(),$(document).ready(function(){var e,t,i,n,r,o;for(e=0,n=["ms","moz","webkit","o"],r=0,o=n.length;o>r;r++)i=n[r],window.requestAnimationFrame||(window.requestAnimationFrame=window[""+i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[""+i+"CancelAnimationFrame"]||window[""+i+"CancelRequestAnimationFrame"]);return window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i,n,r;return i=(new Date).getTime(),r=Math.max(0,16-(i-e)),n=window.setTimeout(function(){return t(i+r)},r),e=i+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){return clearTimeout(e)}),window.orientationchange=function(){return Dialog.calcPos()},Browser.detectCustomWebkitScrollbars(),jQuery.event.props.push("dataTransfer"),t=function(e,t,i,n){return $(document).on("click",e,function(e){var r,o;return r=function(){var r,s,a,l;for(a=[t,i,n],l=[],r=0,s=a.length;s>r;r++)o=a[r],null!=o&&l.push(_.isFunction(o)?o.call(this,e):o);return l}.call(this),track.apply(null,r)})},t(".js-home-via-logo","Header","Logo","Home"),t(".header-signup","Header","Sign Up"),$(document).on("click",".js-resend-confirmation-email",_.throttle(function(){return function(){return ApiAjax({type:"POST",url:"/resendValidate",data:{email:Auth.me().get("email")},success:function(){return Alerts.flash("Email Sent","confirm")}})}}(this),6e4)),$(".window-overlay").click(function(e){if(!(e.button>0)){if($(e.target).is("a")&&"#"!==$(e.target).attr("href"))return void Util.stopPropagation(e);if(!$(e.target).is("a.focus-dummy")&&!$(e.target).hasClass("checkbox"))return PopOver.isVisible?void PopOver.hide():$(".new-comment").hasClass("focus")?void $(".new-comment").removeClass("focus").find("textarea").blur():Layout.isEditing()?void Layout.cancelEdits():void($(e.target).closest(".window-wrapper").length>0||Dialog.hide())}}),$("#surface").click(function(e){var t,i;if(!($(e.target).closest(".boards-drawer").length>0))return $(e.target).is("input")||$(e.target).is("textarea")?void Util.stopPropagation(e):(t=Controller.getCurrentBoard(),i=t&&Controller.getCurrentBoardView(),PopOver.isVisible?PopOver.hide():SidebarState.getShowSidebar()&&!SidebarState.getPinSidebar()?SidebarState.hideSidebar():$(".new-comment").hasClass("focus")?$(".new-comment").removeClass("focus").find("textarea").blur():(null!=t?t.viewState.get("listComposerOpen"):void 0)?null!=t?t.viewState.set("listComposerOpen",!1):void 0:(null!=t?t.composer.get("vis"):void 0)&&!$(e.target).closest(".card-composer").length>0?t.composer.save("vis",!1):Layout.isEditing()?Layout.cancelEdits():Controller.showingCalendar(i)&&0===$(e.target).closest(".calendar-day").length?$(".calendar-day.active").removeClass("active"):$("input, textarea").blur())}),$(document).on("click","a[href=#]",function(e){return Util.preventDefault(e)}),$(document).keyup(function(e){var t;return e.keyCode===Key_Escape?(e.preventDefault(),t=Controller.getCurrentBoard(),SidebarState.getShowSidebar()&&!SidebarState.getPinSidebar()?SidebarState.hideSidebar():Layout.isEditing()?Layout.cancelEdits():$(".new-comment").hasClass("focus")?$(".new-comment").removeClass("focus").find("textarea").blur():($("input").blur(),$("textarea").blur())):void 0}),$(document).bind("dragstart",function(e){return $(e.target).closest(".ui-draggable").length>0}),track("Trello Version",ClientVersion.version.toString()),null!=window.fluid?track("FluidApp"):void 0});var Time;Time=new(function(){function e(){}return e.prototype.delta=Storage.get("serverTimeDelta"),e.prototype.updateServerTime=function(e){return this.delta=new Date(e)-new Date,Storage.set("serverTimeDelta",this.delta),log("time","delta",this.delta)},e.prototype.serverToClient=function(e){return new Date(new Date(e)-this.delta)},e}());var Dates;Dates=new(function(){function e(){var e;_.extend(this,Backbone.Events),e=this.isUS?"sunday":"monday",this.startOfWeekOffset=this.DAY_TABLE[e]}var t,i,n;return n="",e.prototype.DAY_TABLE={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},e.prototype.objToDate=function(e,t,i){var n;return _.isObject(e)&&(n=e,e=n.year,t=n.month,i=n.day),new Date(e,t-1,i)},e.prototype.dateToObj=function(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},e.prototype.setStartOfWeek=function(e){return this.startOfWeekOffset=this.DAY_TABLE[e]},e.prototype.getStartOfWeek=function(e){return new Date(e).addDays(this.startOfWeekOffset-e.getDay())},e.prototype.getEndOfWeek=function(e){return new Date(e).addDays(6-e.getDay())},e.prototype.getDaysOfWeek=function(e){var t,i,n;for(n=[],t=i=0;6>=i;t=++i)n.push(new Date(this.getStartOfWeek(e)).addDays(t));return n},e.prototype.getMidnightInt=function(e){return new Date(e).setHours(0,0,0,0)},e.prototype.getFirstOfMonth=function(e){return new Date(e).moveToFirstDayOfMonth(e)},e.prototype.getDateWithSpecificTime=function(e,t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())},t=function(){var e;e=$(this).data("date"),null==e&&(e=Dates.parse($(this).attr("dt")),e=Time.serverToClient(e),$(this).data("date",e)),$(this).text(function(){return getDateDeltaString(e.getTime(),n,{timeFormat:Dates.timeFormat()})}),$(this).is("[title]")||$(this).attr("title",""+e.toLocaleDateString()+" "+e.toLocaleTimeString())},i=function(){var e,t,i;e=Dates.parse($(this).attr("dt")),t=null!=(i=$(this).attr("text"))?i:"",$(this).text(function(){return""+(e>n?"is":"was")+" "+t+" "+getDateDeltaString(e.getTime(),n)})},e.prototype.isUS=/en-us/i.test($.cookie("lang")||navigator.language||navigator.browserLanguage),e.prototype.timeFormat=function(){return this.isUS?"h:mm tt":"HH:mm"},e.prototype.updateRel=function(e){return n=new Date,$(e).find(".rel-date[dt]").each(i)},e.prototype.update=function(e){n=new Date,$(e).find(".date[dt]").each(t)},e.prototype.convertDateFormat=function(e){return null==e&&(e=""),this.isUS?e:e.replace(/(?:^|\s)(\d{1,2})[\/-](\d{1,2})(?:[\/-](\d\d{2,4}))?(?:$|\s)/g,function(e,t,i,n){return 12>=i?n?""+i+"/"+t+"/"+n+" ":""+i+"/"+t+" ":e})},e.prototype.parse=function(e){var t;return null==e&&(e=""),_.isDate(e)?new Date(e):_.isNumber(e)?new Date(e):(e=this.convertDateFormat(e),t=new Date(e),isNaN(t)?new Date(e.replace(/-/g,"/").replace(/T|Z|\.\d+/g," ")+" GMT"):t)},e.prototype.toShortString=function(e){return e.toString(this.isUS?"MM/dd/yyyy":"dd/MM/yyyy")},e.prototype.toDateString=function(e,t){var i,r,o;return r=(null!=t?t:{}).smartYear,n=new Date,null==r&&(r=!1),i=r&&(e.getYear()===n.getYear()||Util.getMs({months:-3})<(o=e-n)&&o<Util.getMs({months:3})),e.toString(i?"MMM d":"MMM d, yyyy")},e.prototype.toLongString=function(e){var t;return t=Date.today(),t.getYear()===e.getYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()?"Today at "+e.toString(this.timeFormat()):""+this.toDateString(e,{smartYear:!0})+" at "+e.toString(this.timeFormat())},e.prototype.toLongDateString=function(e){return null!=e?(e=new Date(e),""+(this.monthMap[e.getMonth()]+e.toString(" d, yyyy"))):void 0},e.prototype.normalizeTime=function(e){var t,i,n,r,o,s,a,l,c;return s=null!=e&&"function"==typeof e.match?e.match(/^(\d\d)(\d\d)/):void 0,null==s&&(s=null!=e&&"function"==typeof e.match?e.match(/(\d+)(?::(\d\d))?\s*([aApP]?)/):void 0),s?(n=parseInt(s[1],10),i="p"===(a=s[3])||"P"===a,t="a"===(l=s[3])||"A"===l,24===n?n=0:i?12!==n&&(n+=12):t&&12===n&&(n=0),r=parseInt(null!=(c=s[2])?c:0,10),n>=0&&23>=n&&r>=0&&59>=r?(o=function(e){return 10>e?"0"+e:e},""+o(n)+":"+o(r)):null):null},e.prototype.monthMap={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},e.prototype.validDate=function(e){return _.isDate(e)&&!isNaN(e.getTime())},e}()),$(function(){return setInterval(function(){Dates.update("body"),Dates.updateRel("body"),Dates.trigger("renderInterval")},1e4)});var updateTimezone;updateTimezone=function(){var e,t,i,n,r,o,s,a,l,c,d,u,p,h,m,f,g,b,v,y,w;if(Auth.isLoggedIn()){for(o=Auth.me(),b=function(e){var t,i,n;if(i=e+"",t=i.match(/\(([^\)]+)\)$/)||i.match(/([A-Z]+|UTC[+-]\d{4}) [\d]{4}$/))for(t=t[1],/\s/.test(t)&&(t=t.replace(/(\S)\S*/g,function(e,t){return t})),t=t.match(/[A-Z]/g).join("");t.length<2;)t+="?";else n=e.getTimezoneOffset(),t="UTC"+(0>n?"+":"-")+("00"+Math.floor(Math.abs(n)/60)).substr(-2)+":"+("00"+Math.abs(n)%60).substr(-2);return t},p=h=i=null,t=new Date,p=t.getTimezoneOffset(),f=b(t),c=6e4,n=y=0;12>=y;n=++y)if(t.addDays(30),t.getTimezoneOffset()!==p){i=t;break}if(null!=i){for(h=i.getTimezoneOffset(),a=(new Date).getTime(),s=i.getTime(),e=0;s>a+c/2&&30>e;)if(e++,l=Math.floor((a+s)/2),u=new Date(l).getTimezoneOffset(),u===p)a=l;else{if(u!==h)break;s=l}g=b(i),i=new Date(c*Math.floor(s/c)).toISOString()}d={},w={offsetCurrent:p,timezoneCurrent:f,offsetNext:h,timezoneNext:g,dateNext:i};for(r in w)v=w[r],null!=v&&(d[r]=v);return m=o.getPref("timezoneInfo"),_.isEqual(d,m)?void 0:o.run("timezoneInfo",d)}};var TrelloClipboard;TrelloClipboard=new(function(){function e(){this.value="",$(document).keydown(function(e){return function(t){var i,n;if(e.value&&(t.ctrlKey||t.metaKey)&&!$(t.target).is("input:visible,textarea:visible")&&!(("function"==typeof window.getSelection&&null!=(i=window.getSelection())?i.toString():0)||(null!=(n=document.selection)?n.createRange().text:0)))return _.defer(function(){var t;return t=$("#clipboard-container"),t.empty().show(),$("<textarea id='clipboard'></textarea>").val(e.value).appendTo(t).focus().select()})}}(this)),$(document).keyup(function(e){return $(e.target).is("#clipboard")?$("#clipboard-container").empty().hide():void 0})}return e.prototype.set=function(e){this.value=e},e}());var Ad,Ads,BusinessClassAd,BusinessClassGoogleAppsAd,BusinessClassManageAnyBoardAd,BusinessClassObserversAd,BusinessClassPopOverAd,MemberBoardsListAd,PopOverAd,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Ads=new(function(){function e(){}return e.prototype._findAd=function(){var e,t,i;return e=arguments[0],i=arguments[1],t=3<=arguments.length?__slice.call(arguments,2):[],_.find(e,function(e){return!i.isDismissed(e.adId)&&e.isEligible.apply(e,[i].concat(__slice.call(t)))})},e.prototype.adForMember=function(){return this._findAd.apply(this,[[BusinessClassAd]].concat(__slice.call(arguments)))},e.prototype.addMemberToOrganizationAd=function(){return this._findAd.apply(this,[[BusinessClassGoogleAppsAd]].concat(__slice.call(arguments)))},e.prototype.addMemberToBoardAd=function(){return this._findAd.apply(this,[[BusinessClassObserversAd]].concat(__slice.call(arguments)))},e.prototype.boardMenuAd=function(){return this._findAd.apply(this,[[BusinessClassManageAnyBoardAd]].concat(__slice.call(arguments)))},e}()),Ad=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.events=function(){return{click:this.click,"click .js-close-ad":this.close}},t.isEligible=function(){return!1},t.prototype.getAdId=function(){return this.constructor.adId},t.prototype.click=function(){return track("Ad",this.getAdId(),"Click")},t.prototype.close=function(e){var t;return Util.stop(e),null!=(t=this.getAdId())&&(track("Ad",this.getAdId(),"Dismiss"),Auth.me().dismiss(t)),this.$el.slideUp(100)},t}(ViewWithId),MemberBoardsListAd=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="member-boards-list-ad",t.prototype.render=function(){return this.$el.html(templates.fill("member_boards_list_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()})),this},t.prototype.copy=function(){return""},t}(Ad),BusinessClassAd=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.adId="BoardsListBC",t.isEligible=function(e){var t,i,n,r;return(r=function(e,t){return Util.idToDate(e.id)<Util.dateBefore(t)})(e,{months:1})?(n=e.organizationList,t=n.any(function(e){return e.isPremium()}),i=n.any(function(e){return ABTest.inTest("BC_boards_list_ad",e.id)&&r(e,{weeks:1})}),!t&&i):void 0},t.prototype.className="member-boards-list-ad business-class-ad",t.prototype.copyHtml=function(){return templates.fill("ad_business_class")},t.prototype.iconClass=function(){return"business-class-mark"},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(MemberBoardsListAd),PopOverAd=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="pop-over-list-ad",t.prototype.render=function(){return this.$el.html(templates.fill("pop_over_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()})),this},t.prototype.copyHtml=function(){return""},t}(Ad),BusinessClassPopOverAd=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.className="pop-over-ad business-class-ad",t.prototype.iconClass=function(){return"business-class-mark"},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(PopOverAd),BusinessClassGoogleAppsAd=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.adId="AddOrganizationMemberBC",t.isEligible=function(e,t){return null!=t&&ABTest.inTest("BC_google_apps_ad",t.id)&&!t.isPremium()},t.prototype.copyHtml=function(){return templates.fill("ad_business_class_google_apps")},t}(BusinessClassPopOverAd),BusinessClassObserversAd=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.adId="AddBoardMemberBC",t.isEligible=function(e,t){return null!=t&&ABTest.inTest("BC_observers_ad",t.id)&&!t.isPremium()},t.prototype.copyHtml=function(){return templates.fill("ad_business_class_observers")},t}(BusinessClassPopOverAd),BusinessClassManageAnyBoardAd=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.adId="BoardMenuBC",t.isEligible=function(e,t){var i;return i=null!=t?t.getOrganization():void 0,null!=i&&ABTest.inTest("BC_manage_boards_ad",i.id)&&!i.isPremium()&&!t.ownedByMember(e)&&i.ownedByMember(e)},t.prototype.copyHtml=function(){var e;return e={organization:this.model.getOrganization().toJSON()},templates.fill("ad_business_class_manage_any_board",e)},t}(BusinessClassPopOverAd);var GoogleApi,__hasProp={}.hasOwnProperty,__extends=function(e,t){function i(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};GoogleApi=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.loadedAuth=function(){return gapi.load("auth",function(e){return function(){return e.loaded=!0,e.trigger("loaded"),e.authorize(!0)}}(this))},t.authorize=function(e,t){return this.validToken()?"function"==typeof t?t(null,this.oauthToken.access_token):void 0:gapi.auth.authorize({client_id:window.googleDrive.clientId,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:e},function(e){return function(i){var n;return!i||i.error?(e.oauthToken=null,"function"==typeof t?t(null!=(n=null!=i?i.error:void 0)?n:Error("Failed to request token")):void 0):(e.oauthToken=i,"function"==typeof t?t(null,e.oauthToken.access_token):void 0)}}(this))},t.validToken=function(){var e;return(null!=(e=this.oauthToken)?e.access_token:void 0)&&Date.now()/1e3<parseInt(this.oauthToken.expires_at)},t}(Backbone.Events),$.getScript("https://apis.google.com/js/api.js",function(){return GoogleApi.loadedAuth()});var _ref;"safari"===(_ref=Browser.browserStr)&&$(document).on("keydown",function(e){var t,i,n,r,o,s,a,l;e.which!==Key_Tab||e.metaKey||e.shiftKey||e.ctrlKey||(o=$(e.target),o.attr("tabindex")&&(l=parseInt(o.attr("tabindex"),10),r=o.closest("body,.js-tab-parent"),n=r.find("[tabindex]"),t=null,i=null,s=1/0,a=1/0,n.each(function(){var e,n;return n=parseInt($(this).attr("tabindex"),10),n>l&&s>n&&(s=n,t=$(this),e=!0),null==t&&a>n?(a=n,i=$(this)):void 0}),null==t&&(t=i),null!=t&&(Util.stop(e),t.focus())))}),"function"==typeof window.sp&&window.sp("newTracker","cf",window.snowplowCloudfrontServer,{appId:"web"}),Auth.isLoggedIn()&&"function"==typeof window.sp&&window.sp("setUserId",Auth.myId())
}}();